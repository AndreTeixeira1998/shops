"use strict";(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[246],{43246:function(o,e,t){t.r(e),t.d(e,{WebhookModule:function(){return m}});var r=t(41460),i=t(49962),n=t(3189),c=t(21067),s=t(83974);const u=s.ZP`
  mutation updateWebhook($url: String!) {
    updateWebhook(url: $url)
  }
`,a=s.ZP`
  query webhook {
    webhook
  }
`;var h=t(51694);class l{constructor(o,e,t,r){this.formBuilder=o,this.dataService=e,this.changeDetector=t,this.notificationService=r,this.webhookForm=this.formBuilder.group({url:["https://example.com",c.kI.required]})}ngOnInit(){return(0,n.mG)(this,void 0,void 0,function*(){yield this.dataService.query(a).mapStream(o=>o.webhook).subscribe(o=>this.webhookForm.controls.url.setValue(o))})}save(){return(0,n.mG)(this,void 0,void 0,function*(){try{if(this.webhookForm.dirty){const o=this.webhookForm.value;yield this.dataService.mutate(u,{url:o.url}).toPromise()}this.webhookForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success("common.notify-update-success",{entity:"Webhook"})}catch(o){this.notificationService.error("common.notify-update-error",{entity:"Webhook"})}})}}l.\u0275fac=function(o){return new(o||l)(h.Y36(c.qu),h.Y36(i.DoR),h.Y36(h.sBO),h.Y36(i.gqp))},l.\u0275cmp=h.Xpm({type:l,selectors:[["webhook-component"]],decls:8,vars:2,consts:[[1,"clr-row"],[1,"clr-col"],[1,"form",3,"formGroup"],[1,"form-block"],["label","Webhook url","for","url"],["id","url","type","text","formControlName","url"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(o,e){1&o&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"form",2),h.TgZ(3,"section",3),h.TgZ(4,"vdr-form-field",4),h._UZ(5,"input",5),h.qZA(),h.TgZ(6,"button",6),h.NdJ("click",function(){return e.save()}),h._uU(7," Save "),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&o&&(h.xp6(2),h.Q6J("formGroup",e.webhookForm),h.xp6(4),h.Q6J("disabled",e.webhookForm.invalid||e.webhookForm.pristine))},directives:[c._Y,c.JL,c.sg,i.hgI,i.y_K,c.Fj,c.JJ,c.u],encapsulation:2});class m{}m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=h.oAB({type:m}),m.\u0275inj=h.cJS({providers:[(0,i.e$Y)({id:"webhook",label:"Webhook",routerLink:["/extensions/webhook"],icon:"cursor-hand-open"},"settings")],imports:[[i.m81,r.Bz.forChild([{path:"",pathMatch:"full",component:l,data:{breadcrumb:"Webhook"}}])]]})}}]);
//# sourceMappingURL=246-es2015.54787b9ca4afd01201d6.js.map