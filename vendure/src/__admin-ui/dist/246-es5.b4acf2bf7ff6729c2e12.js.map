{"version":3,"mappings":"inBAEaA,EAAwBC,KAAxBD,gGAMAE,EAAkBD,KAAlBC,kECMNC,aAGLC,WACEC,EACAC,EACAC,EACQC,EACEC,EACFC,EACAC,aAHAC,mBACEA,mBACFA,sBACAA,2BAERA,KAAKC,YAAcD,KAAKE,YAAYC,MAAM,CACxCC,IAAK,CAAC,sBAAuBC,gEAI3BC,4LACEN,KAAKO,YACRC,MAAMlB,GACNmB,UAAWhB,mBAAWA,EAAEiB,UACxBC,UAAWlB,mBACVO,EAAKC,YAAYW,SAASR,IAAOS,SAASpB,KAL1Ca,kEASAQ,0KACJC,QAAQC,IAAI,UAAWhB,KAAKC,YAAYgB,MAAMb,KAD1CU,UAGEd,KAAKC,YAAYiB,MAHnBJ,gBAImCG,OAA7BxB,EAAYO,KAAKC,YAAYgB,MAJnCH,SAKMd,KAAKO,YACRY,OAAO/B,EAAuB,CAAEgB,IAAKX,EAAUW,MAC/CgB,YAPHN,OASFd,KAAKC,YAAYoB,iBACjBrB,KAAKsB,eAAeC,eACpBvB,KAAKwB,oBAAoBC,QAAQ,+BAAgC,CAC/DC,OAAQ,YAZRZ,gDAeFd,KAAKwB,oBAAoBG,MAAM,6BAA8B,CAC3DD,OAAQ,YAhBRZ,4FAgBQvB,sCA1CHA,GAAgBqC,kHAAhBrC,EAAgBsC,uRCd7BD,iBACEA,iBACEA,kBACEA,qBACEA,4BACEA,mBACFA,QACAA,oBAEEA,gCAASlC,WAGTkC,kBACFA,QACFA,QACFA,QACFA,QACFA,eAfuBA,0CAQbA,uJCwBHE,gEAAMA,6DAbA,IACTC,OACE,CACEC,GAAI,UACJC,MAAO,UACPC,WAAY,CAAC,uBACbC,KAAM,oBAER,aAEHC,SArBQ,CACPL,MACAM,cAAsB,CACpB,CACEC,KAAM,GACNC,UAAW,OACXC,UAAWjD,EACXkD,KAAM,CAAEC,WAAY","names":["d","m","b","s","constructor","e","u","f","k","v","p","g","this","webhookForm","formBuilder","group","url","r","ngOnInit","dataService","query","mapStream","webhook","subscribe","controls","setValue","save","console","log","value","dirty","mutate","toPromise","markAsPristine","changeDetector","markForCheck","notificationService","success","entity","error","o","selectors","n","i","id","label","routerLink","icon","imports","a","path","pathMatch","component","data","breadcrumb"],"sources":["webpack:///src/extensions/61aa03f5e7fe5ea0996e6a8141107bbcf069eea135181d18c537e2570aca2d56/queries.ts","webpack:///src/extensions/61aa03f5e7fe5ea0996e6a8141107bbcf069eea135181d18c537e2570aca2d56/webhook.component.ts","webpack:///src/extensions/61aa03f5e7fe5ea0996e6a8141107bbcf069eea135181d18c537e2570aca2d56/webhook.component.html","webpack:///src/extensions/61aa03f5e7fe5ea0996e6a8141107bbcf069eea135181d18c537e2570aca2d56/webhook.module.ts"],"sourcesContent":["import gql from 'graphql-tag';\n\nexport const updateWebhookMutation = gql`\n  mutation updateWebhook($url: String!) {\n    updateWebhook(url: $url)\n  }\n`;\n\nexport const getWebhookQuery = gql`\n  query webhook {\n    webhook\n  }\n`;\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  DataService,\n  NotificationService,\n  ServerConfigService,\n} from '@vendure/admin-ui/core';\nimport { getWebhookQuery, updateWebhookMutation } from './queries';\n\n@Component({\n  selector: 'greeter',\n  templateUrl: './webhook.component.html',\n})\nexport class WebhookComponent implements OnInit {\n  webhookForm: FormGroup;\n\n  constructor(\n    route: ActivatedRoute,\n    router: Router,\n    serverConfigService: ServerConfigService,\n    private formBuilder: FormBuilder,\n    protected dataService: DataService,\n    private changeDetector: ChangeDetectorRef,\n    private notificationService: NotificationService\n  ) {\n    this.webhookForm = this.formBuilder.group({\n      url: ['https://example.com', Validators.required],\n    });\n  }\n\n  async ngOnInit(): Promise<void> {\n    await this.dataService\n      .query(getWebhookQuery)\n      .mapStream((d: any) => d.webhook)\n      .subscribe((webhook) =>\n        this.webhookForm.controls['url'].setValue(webhook)\n      );\n  }\n\n  async save(): Promise<void> {\n    console.log('SAVEDDD', this.webhookForm.value.url);\n    try {\n      if (this.webhookForm.dirty) {\n        const formValue = this.webhookForm.value;\n        await this.dataService\n          .mutate(updateWebhookMutation, { url: formValue.url })\n          .toPromise();\n      }\n      this.webhookForm.markAsPristine();\n      this.changeDetector.markForCheck();\n      this.notificationService.success('common.notify-update-success', {\n        entity: 'Webhook',\n      });\n    } catch (e) {\n      this.notificationService.error('common.notify-update-error', {\n        entity: 'Webhook',\n      });\n    }\n  }\n}\n","<div class=\"clr-row\">\n  <div class=\"clr-col\">\n    <form class=\"form\" [formGroup]=\"webhookForm\">\n      <section class=\"form-block\">\n        <vdr-form-field label=\"Webhook url\" for=\"url\">\n          <input id=\"url\" type=\"text\" formControlName=\"url\" />\n        </vdr-form-field>\n        <button\n          class=\"btn btn-primary\"\n          (click)=\"save()\"\n          [disabled]=\"webhookForm.invalid || webhookForm.pristine\"\n        >\n          Save\n        </button>\n      </section>\n    </form>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  addNavMenuItem,\n  addNavMenuSection,\n  SharedModule,\n} from '@vendure/admin-ui/core';\nimport { WebhookComponent } from './webhook.component';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        pathMatch: 'full',\n        component: WebhookComponent,\n        data: { breadcrumb: 'Webhook' },\n      },\n    ]),\n  ],\n  providers: [\n    addNavMenuItem(\n      {\n        id: 'webhook',\n        label: 'Webhook',\n        routerLink: ['/extensions/webhook'],\n        icon: 'cursor-hand-open',\n      },\n      'settings'\n    ),\n  ],\n  declarations: [WebhookComponent],\n})\nexport class WebhookModule {}\n"]}