(self.webpackChunkvendure_admin=self.webpackChunkvendure_admin||[]).push([[945],{9945:(Ge,v,B)=>{"use strict";B.r(v),B.d(v,{MetricsWidgetComponent:()=>le});var P,A,we=B(6642),Q=B(1661),f=B(6108);(A=P||(P={})).Currency="currency",A.Number="number";var U=B(9034);const Le=B(9248).ZP`
  query advancedMetricSummaries($input: AdvancedMetricSummaryInput) {
    advancedMetricSummaries(input: $input) {
      code
      title
      type
      labels
      series {
        name
        values
      }
    }
  }
`;var ie=B(4154);class ue{constructor(y){this.dataService=y,this.currencyCode$=this.dataService.settings.getActiveChannel().refetchOnChannelChange().mapStream(g=>g.activeChannel.defaultCurrencyCode||void 0),this.uiState$=this.dataService.client.uiState().mapStream(g=>g.uiState)}queryData(y){return(0,U.a)(this.currencyCode$,this.uiState$).pipe((0,ie.w)(([g,m])=>this.dataService.query(Le,{input:{...y?{variantIds:y}:[]}}).refetchOnChannelChange().mapStream(w=>this.toChartEntry(w.advancedMetricSummaries,`${m.language}-${m.locale}`,g))))}toChartEntry(y,g,m){return y.map(w=>({formatOptions:{formatValueAs:w.type===P.Number?"number":"currency",currencyCode:m,locale:g},summary:w}))}static#e=this.\u0275fac=function(g){return new(g||ue)(f.LFG(Q.DoR))};static#t=this.\u0275prov=f.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"root"})}var Oe=B(2977),_=B(8046),x=B(9535),L=B(8176),F=B.n(L),ee={className:"",classNames:!1,removeAll:!1,legendNames:!1,clickable:!1,onClick:null,position:"top"};function se(A){if(A&&A.position){if(!("top"===A.position||"bottom"===A.position||A.position instanceof HTMLElement))throw Error("The position you entered is not a valid position");if(A.position instanceof HTMLElement){var y=A.position;delete A.position}}return A=(0,x.l7)({},ee,A),y&&(A.position=y),function(m){function ze(W){!function w(){var C=m.container.querySelector(".ct-legend");C&&C.parentNode.removeChild(C)}();var z=function Y(){var C=document.createElement("ul");return C.className="ct-legend",m instanceof x.uc&&C.classList.add("ct-legend-inside"),"string"==typeof A.className&&A.className.length>0&&C.classList.add(A.className),m.options.width&&(C.style.cssText="width: "+m.options.width+"px;margin: 0 auto;"),C}(),pe=(W=m.data.series.map(ne=>ne[0].legend),function me(C){for(var z=new Array(m.data.series.length),V=0;V<m.data.series.length;V++)z[V]={data:m.data.series[V],label:C?m.data.labels[V]:null,legend:-1};return z}(true)),I=[],Ne=Array.isArray(A.classNames)&&A.classNames.length===W.length;W.forEach(function(ne,de){var R=ne.name||ne,be=ne.series||[de],Me=function T(C,z,V){var W=document.createElement("li");return W.classList.add("ct-series-"+C),V&&W.classList.add(A.classNames[C]),W.setAttribute("data-legend",C),W.textContent=z,W}(de,R,Ne);z.appendChild(Me),be.forEach(function(ke){pe[ke].legend=de}),I.push({text:R,series:be,active:!0})}),function oe(C){if(A.position instanceof HTMLElement)A.position.insertBefore(C,null);else switch(A.position){case"top":m.container.insertBefore(C,m.container.childNodes[0]);break;case"bottom":m.container.insertBefore(C,null)}}(z),A.clickable&&(function S(){m.data.series=m.data.series.map(function(C,z){return"object"!=typeof C&&(C={value:C}),C.className=C.className||m.options.classNames.series+"-"+(0,x.fX)(z),C})}(),function ge(C,z,V,W){C.addEventListener("click",function(pe){var I=pe.target;if(I.parentNode===C&&I.hasAttribute("data-legend")){pe.preventDefault();var Ne=parseInt(I.getAttribute("data-legend")),ne=z[Ne];if(ne.active){ne.active=!1,I.classList.add("inactive");var de=z.filter(function(ke){return ke.active}).length;if(!A.removeAll&&0==de)for(var R=0;R<z.length;R++)z[R].active=!0,C.childNodes[R].classList.remove("inactive")}else ne.active=!0,I.classList.remove("inactive");var be=[],Me=[];for(R=0;R<V.length;R++)-1!=V[R].legend&&z[V[R].legend].active&&(be.push(V[R].data),Me.push(V[R].label));m.data.series=be,W&&(m.data.labels=Me),m.update(),A.onClick&&A.onClick(m,pe)}})}(z,I,pe,true))}m.on("created",function(C){ze(m.data.series.map(z=>z[0].name))})}}const Ae=["chartistDiv"];class E{constructor(y){this.cdr=y,this.options={}}ngOnInit(){this.chart=new x.wW(this.chartDivRef.nativeElement,this.entriesToLineChartData(this.entries??[]),{low:0,showLine:!0,showPoint:!0,fullWidth:!0,axisY:{labelInterpolationFnc:(y,g)=>this.formatCurrencyToValue(y)},plugins:[F()({currency:"$",currencyFormatCallback:(y,g)=>this.formatCurrencyToValue(y)}),se()],...this.options}),this.chart.on("draw",y=>{("line"===y.type||"area"===y.type)&&y.element.animate({d:{begin:2e3*y.index,dur:2e3,from:y.path.clone().scale(1,0).translate(0,y.chartRect.height()).stringify(),to:y.path.clone().stringify(),easing:x.Z5.easeOutQuint}})})}formatCurrencyToValue(y){if(void 0!==this.entries){const g=localStorage.getItem("vnd__contentLanguageCode")??"en",m=new _.H9(this.entries.formatOptions.locale??g,this.entries.formatOptions.currencyCode);return(S=>"currency"===this.entries.formatOptions.formatValueAs?m.transform(S)??S:S)(y)}return y}ngOnChanges(y){"entries"in y&&this.chart&&this.chart.update(this.entriesToLineChartData(this.entries??[]))}ngOnDestroy(){this.chart?.detach()}entriesToLineChartData(y){if(y.summary?.labels?.length){const g=y.summary.labels,m=y.summary.series.map(w=>w.values.map(S=>({legend:w.name,value:S})));return this.cdr.detectChanges(),{labels:g,series:m}}return{labels:[],series:[]}}static#e=this.\u0275fac=function(g){return new(g||E)(f.Y36(f.sBO))};static#t=this.\u0275cmp=f.Xpm({type:E,selectors:[["vdr-chartist"]],viewQuery:function(g,m){if(1&g&&f.Gf(Ae,7),2&g){let w;f.iGM(w=f.CRH())&&(m.chartDivRef=w.first)}},inputs:{entries:"entries",options:"options"},features:[f.TTD],decls:2,vars:0,consts:[["id","chart",2,"height","20vh","min-height","300px"],["chartistDiv",""]],template:function(g,m){1&g&&f._UZ(0,"div",0,1)},styles:['.ct-label{fill:#0006;color:#0006;font-size:.75rem;line-height:1}  .ct-chart-line .ct-label,   .ct-chart-bar .ct-label{display:flex}  .ct-chart-pie .ct-label,   .ct-chart-donut .ct-label{dominant-baseline:central}  .ct-label.ct-horizontal.ct-start{align-items:flex-end;justify-content:flex-start;text-align:left}  .ct-label.ct-horizontal.ct-end{align-items:flex-start;justify-content:flex-start;text-align:left}  .ct-label.ct-vertical.ct-start{align-items:flex-end;justify-content:flex-end;text-align:right}  .ct-label.ct-vertical.ct-end{align-items:flex-end;justify-content:flex-start;text-align:left}  .ct-chart-bar .ct-label.ct-horizontal.ct-start{align-items:flex-end;justify-content:center;text-align:center}  .ct-chart-bar .ct-label.ct-horizontal.ct-end{align-items:flex-start;justify-content:center;text-align:center}  .ct-chart-bar.ct-horizontal-bars .ct-label.ct-horizontal.ct-start{align-items:flex-end;justify-content:flex-start;text-align:left}  .ct-chart-bar.ct-horizontal-bars .ct-label.ct-horizontal.ct-end{align-items:flex-start;justify-content:flex-start;text-align:left}  .ct-chart-bar.ct-horizontal-bars .ct-label.ct-vertical.ct-start{align-items:center;justify-content:flex-end;text-align:right}  .ct-chart-bar.ct-horizontal-bars .ct-label.ct-vertical.ct-end{align-items:center;justify-content:flex-start;text-align:left}  .ct-grid{stroke:#0003;stroke-width:1px;stroke-dasharray:2px}  .ct-grid-background{fill:none}  .ct-point{stroke-width:10px;stroke-linecap:round}  .ct-line{fill:none;stroke-width:2px}  .ct-area{stroke:none;fill-opacity:.5}  .ct-bar{fill:none;stroke-width:10px}  .ct-slice-donut{fill:none;stroke-width:60px}  .ct-series-a .ct-point,   .ct-series-a .ct-line,   .ct-series-a .ct-bar,   .ct-series-a .ct-slice-donut{stroke:var(--color-primary-300)}  .ct-series-a .ct-slice-pie,   .ct-series-a .ct-area{fill:var(--color-primary-300)}  .ct-series-b .ct-point,   .ct-series-b .ct-line,   .ct-series-b .ct-bar,   .ct-series-b .ct-slice-donut{stroke:var(--color-accent-300)}  .ct-series-b .ct-slice-pie,   .ct-series-b .ct-area{fill:var(--color-accent-300)}  .ct-series-c .ct-point,   .ct-series-c .ct-line,   .ct-series-c .ct-bar,   .ct-series-c .ct-slice-donut{stroke:var(--color-primary-800)}  .ct-series-c .ct-slice-pie,   .ct-series-c .ct-area{fill:var(--color-primary-800)}  .ct-series-d .ct-point,   .ct-series-d .ct-line,   .ct-series-d .ct-bar,   .ct-series-d .ct-slice-donut{stroke:var(--color-accent-800)}  .ct-series-d .ct-slice-pie,   .ct-series-d .ct-area{fill:var(--color-accent-800)}  .ct-series-e .ct-point,   .ct-series-e .ct-line,   .ct-series-e .ct-bar,   .ct-series-e .ct-slice-donut{stroke:#453d3f}  .ct-series-e .ct-slice-pie,   .ct-series-e .ct-area{fill:#453d3f}  .ct-series-f .ct-point,   .ct-series-f .ct-line,   .ct-series-f .ct-bar,   .ct-series-f .ct-slice-donut{stroke:#59922b}  .ct-series-f .ct-slice-pie,   .ct-series-f .ct-area{fill:#59922b}  .ct-series-g .ct-point,   .ct-series-g .ct-line,   .ct-series-g .ct-bar,   .ct-series-g .ct-slice-donut{stroke:#0544d3}  .ct-series-g .ct-slice-pie,   .ct-series-g .ct-area{fill:#0544d3}  .ct-series-h .ct-point,   .ct-series-h .ct-line,   .ct-series-h .ct-bar,   .ct-series-h .ct-slice-donut{stroke:#6b0392}  .ct-series-h .ct-slice-pie,   .ct-series-h .ct-area{fill:#6b0392}  .ct-series-i .ct-point,   .ct-series-i .ct-line,   .ct-series-i .ct-bar,   .ct-series-i .ct-slice-donut{stroke:#e6805e}  .ct-series-i .ct-slice-pie,   .ct-series-i .ct-area{fill:#e6805e}  .ct-series-j .ct-point,   .ct-series-j .ct-line,   .ct-series-j .ct-bar,   .ct-series-j .ct-slice-donut{stroke:#dda458}  .ct-series-j .ct-slice-pie,   .ct-series-j .ct-area{fill:#dda458}  .ct-series-k .ct-point,   .ct-series-k .ct-line,   .ct-series-k .ct-bar,   .ct-series-k .ct-slice-donut{stroke:#eacf7d}  .ct-series-k .ct-slice-pie,   .ct-series-k .ct-area{fill:#eacf7d}  .ct-series-l .ct-point,   .ct-series-l .ct-line,   .ct-series-l .ct-bar,   .ct-series-l .ct-slice-donut{stroke:#86797d}  .ct-series-l .ct-slice-pie,   .ct-series-l .ct-area{fill:#86797d}  .ct-series-m .ct-point,   .ct-series-m .ct-line,   .ct-series-m .ct-bar,   .ct-series-m .ct-slice-donut{stroke:#b2c326}  .ct-series-m .ct-slice-pie,   .ct-series-m .ct-area{fill:#b2c326}  .ct-series-n .ct-point,   .ct-series-n .ct-line,   .ct-series-n .ct-bar,   .ct-series-n .ct-slice-donut{stroke:#6188e2}  .ct-series-n .ct-slice-pie,   .ct-series-n .ct-area{fill:#6188e2}  .ct-series-o .ct-point,   .ct-series-o .ct-line,   .ct-series-o .ct-bar,   .ct-series-o .ct-slice-donut{stroke:#a748ca}  .ct-series-o .ct-slice-pie,   .ct-series-o .ct-area{fill:#a748ca}  .ct-square{display:block;position:relative;width:100%}  .ct-square:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:100%}  .ct-square:after{content:"";display:table;clear:both}  .ct-square>svg{display:block;position:absolute;top:0;left:0}  .ct-minor-second{display:block;position:relative;width:100%}  .ct-minor-second:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:93.75%}  .ct-minor-second:after{content:"";display:table;clear:both}  .ct-minor-second>svg{display:block;position:absolute;top:0;left:0}  .ct-major-second{display:block;position:relative;width:100%}  .ct-major-second:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:88.8888888889%}  .ct-major-second:after{content:"";display:table;clear:both}  .ct-major-second>svg{display:block;position:absolute;top:0;left:0}  .ct-minor-third{display:block;position:relative;width:100%}  .ct-minor-third:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:83.3333333333%}  .ct-minor-third:after{content:"";display:table;clear:both}  .ct-minor-third>svg{display:block;position:absolute;top:0;left:0}  .ct-major-third{display:block;position:relative;width:100%}  .ct-major-third:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:80%}  .ct-major-third:after{content:"";display:table;clear:both}  .ct-major-third>svg{display:block;position:absolute;top:0;left:0}  .ct-perfect-fourth{display:block;position:relative;width:100%}  .ct-perfect-fourth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:75%}  .ct-perfect-fourth:after{content:"";display:table;clear:both}  .ct-perfect-fourth>svg{display:block;position:absolute;top:0;left:0}  .ct-perfect-fifth{display:block;position:relative;width:100%}  .ct-perfect-fifth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:66.6666666667%}  .ct-perfect-fifth:after{content:"";display:table;clear:both}  .ct-perfect-fifth>svg{display:block;position:absolute;top:0;left:0}  .ct-minor-sixth{display:block;position:relative;width:100%}  .ct-minor-sixth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:62.5%}  .ct-minor-sixth:after{content:"";display:table;clear:both}  .ct-minor-sixth>svg{display:block;position:absolute;top:0;left:0}  .ct-golden-section{display:block;position:relative;width:100%}  .ct-golden-section:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:61.804697157%}  .ct-golden-section:after{content:"";display:table;clear:both}  .ct-golden-section>svg{display:block;position:absolute;top:0;left:0}  .ct-major-sixth{display:block;position:relative;width:100%}  .ct-major-sixth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:60%}  .ct-major-sixth:after{content:"";display:table;clear:both}  .ct-major-sixth>svg{display:block;position:absolute;top:0;left:0}  .ct-minor-seventh{display:block;position:relative;width:100%}  .ct-minor-seventh:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:56.25%}  .ct-minor-seventh:after{content:"";display:table;clear:both}  .ct-minor-seventh>svg{display:block;position:absolute;top:0;left:0}  .ct-major-seventh{display:block;position:relative;width:100%}  .ct-major-seventh:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:53.3333333333%}  .ct-major-seventh:after{content:"";display:table;clear:both}  .ct-major-seventh>svg{display:block;position:absolute;top:0;left:0}  .ct-octave{display:block;position:relative;width:100%}  .ct-octave:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:50%}  .ct-octave:after{content:"";display:table;clear:both}  .ct-octave>svg{display:block;position:absolute;top:0;left:0}  .ct-major-tenth{display:block;position:relative;width:100%}  .ct-major-tenth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:40%}  .ct-major-tenth:after{content:"";display:table;clear:both}  .ct-major-tenth>svg{display:block;position:absolute;top:0;left:0}  .ct-major-eleventh{display:block;position:relative;width:100%}  .ct-major-eleventh:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:37.5%}  .ct-major-eleventh:after{content:"";display:table;clear:both}  .ct-major-eleventh>svg{display:block;position:absolute;top:0;left:0}  .ct-major-twelfth{display:block;position:relative;width:100%}  .ct-major-twelfth:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:33.3333333333%}  .ct-major-twelfth:after{content:"";display:table;clear:both}  .ct-major-twelfth>svg{display:block;position:absolute;top:0;left:0}  .ct-double-octave{display:block;position:relative;width:100%}  .ct-double-octave:before{display:block;float:left;content:"";width:0;height:0;padding-bottom:25%}  .ct-double-octave:after{content:"";display:table;clear:both}  .ct-double-octave>svg{display:block;position:absolute;top:0;left:0}  svg.ct-chart-bar,   svg.ct-chart-line{overflow:visible}  .ct-label.ct-label.ct-horizontal.ct-end{position:relative;justify-content:flex-end;text-align:right;transform-origin:100% 0;transform:translate(-100%) rotate(-45deg);white-space:nowrap}  .ct-series-a .ct-slice-pie,   .ct-series-a .ct-area{fill:url(#gradient)}  .ct-point{opacity:.5;transition:opacity .1s}  .chartist-tooltip{position:absolute;border-radius:var(--border-radius);border:1px solid var(--color-weight-100);padding:4px;opacity:0;transition:opacity .1s,top .1s,left .1s;font-size:12px;background:var(--color-component-bg-100);box-shadow:0 2px 4px #0000000d;text-align:center}  .chartist-tooltip.tooltip-show{opacity:.9}  .ct-tooltip-hover{opacity:1}  .tooltip-date{color:var(--color-text-200)}  .tooltip-value{color:var(--color-primary-600);font-size:14px;text-align:center}  .ct-legend{position:relative;z-index:10;display:flex!important;justify-content:center}  .ct-legend li{position:relative;padding-left:23px;margin-bottom:3px;display:inline;margin-left:20px}  .ct-legend li:before{width:12px;height:12px;position:absolute;left:0;content:"";border:3px solid transparent;border-radius:2px;margin-top:5px}  .ct-legend li.inactive:before{background:transparent}  .ct-legend.ct-legend-inside{position:absolute;top:0;right:0}  .ct-legend .ct-series-0:before{background-color:var(--color-primary-300);border-color:var(--color-primary-300)}  .ct-legend .ct-series-1:before{background-color:var(--color-accent-300);border-color:var(--color-accent-300)}  .ct-legend .ct-series-2:before{background-color:var(--color-primary-800);border-color:var(--color-primary-800)}  .ct-legend .ct-series-3:before{background-color:var(--color-accent-800);border-color:var(--color-accent-800)}  .ct-legend .ct-series-4:before{background-color:#453d3f;border-color:#453d3f}  .ct-legend .ct-series-5:before{background-color:#59922b;border-color:#59922b}  .ct-legend .ct-series-6:before{background-color:#0544d3;border-color:#0544d3}  .ct-legend .ct-series-7:before{background-color:#6b0392;border-color:#6b0392}  .ct-legend .ct-series-8:before{background-color:#e6805e;border-color:#e6805e}  .ct-legend .ct-series-9:before{background-color:#dda458;border-color:#dda458}  .ct-legend .ct-series-10:before{background-color:#eacf7d;border-color:#eacf7d}  .ct-legend .ct-series-11:before{background-color:#86797d;border-color:#86797d}  .ct-legend .ct-series-12:before{background-color:#b2c326;border-color:#b2c326}  .ct-legend .ct-series-13:before{background-color:#6188e2;border-color:#6188e2}  .ct-legend .ct-series-14:before{background-color:#a748ca;border-color:#a748ca}[_nghost-%COMP%]{display:block;padding-bottom:28px}#chart[_ngcontent-%COMP%]{position:relative}'],changeDetection:0})}var N=B(4611);function ae(A,y){if(1&A&&(f.TgZ(0,"small"),f._uU(1),f.qZA()),2&A){const g=f.oxw();f.xp6(1),f.hij(" ",g.selectedVariantNames.join(" + ")," ")}}function Z(A,y){if(1&A){const g=f.EpF();f.TgZ(0,"button",7),f.NdJ("click",function(){const S=f.CHM(g).$implicit,Y=f.oxw();return f.KtG(Y.selectedMetrics=S)}),f._uU(1),f.qZA()}if(2&A){const g=y.$implicit,m=f.oxw();f.ekj("active",(null==m.selectedMetrics?null:m.selectedMetrics.summary.code)===g.summary.code),f.xp6(1),f.hij(" ",g.summary.title," ")}}const Ce=function(A){return{count:A}};class le{constructor(y,g,m,w){this.dataService=y,this.changeDetectorRef=g,this.modalService=m,this.metricsService=w,this.dropDownName="Select Variant",this.selectedVariantIds=[],this.selectedVariantNames=[]}ngOnInit(){var y=this;return(0,we.Z)(function*(){y.loadChartData()})()}onDropdownItemClick(y,g){this.loadChartData(),this.dropDownName=g}openProductSelectionDialog(){this.modalService.fromComponent(Q.pVS,{size:"xl",locals:{mode:"variant",initialSelectionIds:this.selectedVariantIds??[]}}).subscribe(y=>{y&&(this.selectedVariantNames=y.map(g=>g.productVariantName),this.selectedVariantIds=y.map(g=>g.productVariantId),this.changeDetectorRef.detectChanges(),this.loadChartData())})}clearProductVariantSelection(){this.selectedVariantIds=[],this.selectedVariantNames=[],this.changeDetectorRef.detectChanges(),this.loadChartData()}loadChartData(){var y=this;this.metrics$=this.metricsService.queryData(this.selectedVariantIds),this.changeDetectorRef.detectChanges(),this.metrics$?.subscribe(function(){var g=(0,we.Z)(function*(m){y.selectedMetrics?y.selectedMetrics=m.find(w=>w.summary.code==y.selectedMetrics?.summary.code):y.selectedMetrics=m[0],y.changeDetectorRef.detectChanges()});return function(m){return g.apply(this,arguments)}}())}static#e=this.\u0275fac=function(g){return new(g||le)(f.Y36(Q.DoR),f.Y36(f.sBO),f.Y36(Q.Z7U),f.Y36(ue))};static#t=this.\u0275cmp=f.Xpm({type:le,selectors:[["product-metrics-widget"]],decls:15,vars:12,consts:[[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"btn","btn-sm","circular-button",3,"click"],["shape","times"],[4,"ngIf"],[3,"entries"],[1,"flex"],["class","button-small",3,"active","click",4,"ngFor","ngForOf"],[1,"button-small",3,"click"]],template:function(g,m){if(1&g&&(f.TgZ(0,"div")(1,"button",0),f.NdJ("click",function(){return m.openProductSelectionDialog()}),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"button",1),f.NdJ("click",function(){return m.clearProductVariantSelection()}),f._UZ(5,"clr-icon",2),f.qZA(),f.YNc(6,ae,2,1,"small",3),f.qZA(),f._UZ(7,"br")(8,"br")(9,"vdr-chartist",4)(10,"br")(11,"br"),f.TgZ(12,"div",5),f.YNc(13,Z,2,3,"button",6),f.ALo(14,"async"),f.qZA()),2&g){let w;f.xp6(2),f.hij(" ",f.xi3(3,5,"common.items-selected-count",f.VKq(10,Ce,null!==(w=null==m.selectedVariantIds?null:m.selectedVariantIds.length)&&void 0!==w?w:0)),"... "),f.xp6(2),f.uIk("disabled",0==m.selectedVariantIds.length?"disabled":null),f.xp6(2),f.Q6J("ngIf",m.selectedVariantNames.length),f.xp6(3),f.Q6J("entries",m.selectedMetrics),f.xp6(4),f.Q6J("ngForOf",f.lcZ(14,8,m.metrics$))}},dependencies:[Oe.qvL,_.sg,_.O5,E,_.Ov,N.X$],styles:[".chart-container[_ngcontent-%COMP%]{height:200px;width:33%;padding-right:20px;display:inline-block;padding-top:20px}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--1.css.map*/","@media screen and (max-width: 768px){.chart-container[_ngcontent-%COMP%]{width:100%}}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--2.css.map*/",".circular-button[_ngcontent-%COMP%]{width:16px!important;min-width:16px!important;height:16px!important;min-height:16px!important;border-radius:50%!important;padding:7.5px 0 0!important;margin-left:10.55px!important;margin-right:10.55px!important;margin-bottom:5px!important;position:relative;top:4px}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--3.css.map*/","clr-icon[shape=times][_ngcontent-%COMP%]{margin-top:-7.75px!important;margin-left:.2px!important}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--4.css.map*/",".button-small.active[_ngcontent-%COMP%]{background-color:var(--color-primary-200);color:var(--color-primary-900)}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--5.css.map*/",".flex[_ngcontent-%COMP%]{gap:.5rem}\n\n/*# sourceMappingURL=metrics-widget.ts-angular-inline--6.css.map*/"]})}},8176:function(Ge,v,B){var we,Q,f;void 0===(f=this)&&void 0!==window&&(f=window),we=[B(7481)],void 0!==(Q=function(U){return f["Chartist.plugins.tooltip"]=function(f){return function(P,U,$){"use strict";var Le={currency:void 0,currencyFormatCallback:void 0,tooltipOffset:{x:0,y:-20},anchorToPoint:!1,appendToBody:!0,class:void 0,pointClass:"ct-point"};function ie(x,L){return(" "+x.getAttribute("class")+" ").indexOf(" "+L+" ")>-1}function ue(x,L){do{x=x.nextSibling}while(x&&!ie(x,L));return x}function Oe(x){return x.innerText||x.textContent}function _(x){var L;return _ in x?((L=x.offsetParent)||(L=U.body.parentElement),L):(L=x.parentNode)?"static"!==P.getComputedStyle(L).position?L:"BODY"===L.tagName?L.parentElement:_(L):U.body.parentElement}$.plugins=$.plugins||{},$.plugins.tooltip=function(x){return x=$.extend({},Le,x),function(F){var ee=x.pointClass;F instanceof $.BarChart?ee="ct-bar":F instanceof $.PieChart&&(ee=F.options.donut?F.options.donutSolid?"ct-slice-donut-solid":"ct-slice-donut":"ct-slice-pie");var N,se=F.container,Ae=!1,E=_(se);(N=x.appendToBody?U.querySelector(".chartist-tooltip"):se.querySelector(".chartist-tooltip"))||((N=U.createElement("div")).className=x.class?"chartist-tooltip "+x.class:"chartist-tooltip",x.appendToBody?U.body.appendChild(N):se.appendChild(N));var ae=N.offsetHeight,Z=N.offsetWidth;function Ce(g,m,w){se.addEventListener(g,function(S){(!m||ie(S.target,m))&&w(S)})}function le(g){ae=ae||N.offsetHeight;var m=-(Z=Z||N.offsetWidth)/2+x.tooltipOffset.x,w=-ae+x.tooltipOffset.y,S=!0===x.anchorToPoint&&g.target.x2&&g.target.y2;if(!0===x.appendToBody)if(S){var Y=se.getBoundingClientRect(),q=g.target.x2.baseVal.value+Y.left+P.pageXOffset,me=g.target.y2.baseVal.value+Y.top+P.pageYOffset;N.style.left=q+m+"px",N.style.top=me+w+"px"}else N.style.left=g.pageX+m+"px",N.style.top=g.pageY+w+"px";else{var T=E.getBoundingClientRect(),oe=-T.left-P.pageXOffset+m,ge=-T.top-P.pageYOffset+w;S?(Y=se.getBoundingClientRect(),q=g.target.x2.baseVal.value+Y.left+P.pageXOffset,me=g.target.y2.baseVal.value+Y.top+P.pageYOffset,N.style.left=q+oe+"px",N.style.top=me+ge+"px"):(N.style.left=g.pageX+oe+"px",N.style.top=g.pageY+ge+"px")}}function A(g){Ae=!0,ie(g,"tooltip-show")||(g.className=g.className+" tooltip-show")}function y(g){Ae=!1;var m=new RegExp("tooltip-show\\s*","gi");g.className=g.className.replace(m,"").trim()}y(N),Ce("mouseover",ee,function(g){var m=g.target,w="",Y=(F instanceof $.PieChart?m:m.parentNode)?m.parentNode.getAttribute("ct:meta")||m.parentNode.getAttribute("ct:series-name"):"",q=m.getAttribute("ct:meta")||Y||"",me=!!q,T=m.getAttribute("ct:value");if(x.transformTooltipTextFnc&&"function"==typeof x.transformTooltipTextFnc&&(T=x.transformTooltipTextFnc(T)),x.tooltipFnc&&"function"==typeof x.tooltipFnc)w=x.tooltipFnc(q,T);else{if(x.metaIsHTML){var oe=U.createElement("textarea");oe.innerHTML=q,q=oe.value}if(q='<span class="chartist-tooltip-meta">'+q+"</span>",me)w+=q+"<br>";else if(F instanceof $.PieChart){var ge=ue(m,"ct-label");ge&&(w+=Oe(ge)+"<br>")}T&&(x.currency&&(T=null!=x.currencyFormatCallback?x.currencyFormatCallback(T,x):x.currency+T.replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,")),w+=T='<span class="chartist-tooltip-value">'+T+"</span>")}w&&(N.innerHTML=w,ae=N.offsetHeight,Z=N.offsetWidth,!0!==x.appendToBody&&(E=_(se)),"absolute"!==N.style.display&&(N.style.display="absolute"),le(g),A(N),ae=N.offsetHeight,Z=N.offsetWidth)}),Ce("mouseout",ee,function(){y(N)}),Ce("mousemove",null,function(g){!1===x.anchorToPoint&&Ae&&le(g)})}}}(window,document,f),f.plugins.tooltip}(U)}.apply(v,we))&&(Ge.exports=Q)},7481:(Ge,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const B={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},we=8,Q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function f(n,e){return"number"==typeof n?n+e:n}function P(n){if("string"==typeof n){const e=/^(\d+)\s*(.*)$/g.exec(n);return{value:e?+e[1]:0,unit:e?.[2]||void 0}}return{value:Number(n)}}function U(n){return String.fromCharCode(97+n%26)}const $=2221e-19;function Le(n){return Math.floor(Math.log(Math.abs(n))/Math.LN10)}function ie(n,e,i){return e/i.range*n}function ue(n,e){const i=Math.pow(10,e||we);return Math.round(n*i)/i}function Oe(n){if(1===n)return n;function e(a,l){return a%l==0?l:e(l,a%l)}function i(a){return a*a+1}let r,t=2,s=2;if(n%2==0)return 2;do{t=i(t)%n,s=i(i(s))%n,r=e(Math.abs(t-s),n)}while(1===r);return r}function _(n,e,i,t){const s=(t-90)*Math.PI/180;return{x:n+i*Math.cos(s),y:e+i*Math.sin(s)}}function x(n,e,i){let t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s={high:e.high,low:e.low,valueRange:0,oom:0,step:0,min:0,max:0,range:0,numberOfSteps:0,values:[]};s.valueRange=s.high-s.low,s.oom=Le(s.valueRange),s.step=Math.pow(10,s.oom),s.min=Math.floor(s.low/s.step)*s.step,s.max=Math.ceil(s.high/s.step)*s.step,s.range=s.max-s.min,s.numberOfSteps=Math.round(s.range/s.step);const a=ie(n,s.step,s)<i,l=t?Oe(s.range):0;if(t&&ie(n,1,s)>=i)s.step=1;else if(t&&l<s.step&&ie(n,l,s)>=i)s.step=l;else{let o=0;for(;;){if(a&&ie(n,s.step,s)<=i)s.step*=2;else{if(a||!(ie(n,s.step/2,s)>=i))break;if(s.step/=2,t&&s.step%1!=0){s.step*=2;break}}if(o++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}function d(o,b){return o===(o+=b)&&(o*=1+(b>0?$:-$)),o}s.step=Math.max(s.step,$);let c=s.min,u=s.max;for(;c+s.step<=s.low;)c=d(c,s.step);for(;u-s.step>=s.high;)u=d(u,-s.step);s.min=c,s.max=u,s.range=s.max-s.min;const p=[];for(let o=s.min;o<=s.max;o=d(o,s.step)){const b=ue(o);b!==p[p.length-1]&&p.push(b)}return s.values=p,s}function L(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e=arguments.length,i=new Array(e>1?e-1:0),t=1;t<e;t++)i[t-1]=arguments[t];for(let s=0;s<i.length;s++){const r=i[s];for(const a in r){const l=r[a];n[a]="object"!=typeof l||null===l||l instanceof Array?l:L(n[a],l)}}return n}const F=n=>n;function ee(n,e){return Array.from({length:n},e?(i,t)=>e(t):()=>{})}const se=(n,e)=>n+(e||0),Ae=(n,e)=>ee(Math.max(...n.map(i=>i.length)),i=>e(...n.map(t=>t[i])));function E(n,e){return null!==n&&"object"==typeof n&&Reflect.has(n,e)}function N(n){return null!==n&&isFinite(n)}function ae(n){return!n&&0!==n}function Z(n){return N(n)?Number(n):void 0}function Ce(n){return!!Array.isArray(n)&&n.every(Array.isArray)}function le(n,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=0;n[i?"reduceRight":"reduce"]((s,r,a)=>e(r,t++,a),void 0)}function A(n,e){const i=Array.isArray(n)?n[e]:E(n,"data")?n.data[e]:null;return E(i,"meta")?i.meta:void 0}function y(n){return null==n||"number"==typeof n&&isNaN(n)}function g(n){return Array.isArray(n)&&n.every(e=>Array.isArray(e)||E(e,"data"))}function m(n){return"object"==typeof n&&null!==n&&(Reflect.has(n,"x")||Reflect.has(n,"y"))}function w(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return m(n)&&E(n,e)?Z(n[e]):Z(n)}function S(n,e,i){const t={high:void 0===(e={...e,...i?"x"===i?e.axisX:e.axisY:{}}).high?-Number.MAX_VALUE:+e.high,low:void 0===e.low?Number.MAX_VALUE:+e.low},s=void 0===e.high,r=void 0===e.low;return(s||r)&&function a(l){if(!y(l))if(Array.isArray(l))for(let d=0;d<l.length;d++)a(l[d]);else{const d=Number(i&&E(l,i)?l[i]:l);s&&d>t.high&&(t.high=d),r&&d<t.low&&(t.low=d)}}(n),(e.referenceValue||0===e.referenceValue)&&(t.high=Math.max(e.referenceValue,t.high),t.low=Math.min(e.referenceValue,t.low)),t.high<=t.low&&(0===t.low?t.high=1:t.low<0?t.high=0:(t.high>0||(t.high=1),t.low=0)),t}function Y(n){let s,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0;const r={labels:(n.labels||[]).slice(),series:ge(n.series,i,t)},a=r.labels.length;return Ce(r.series)?(s=Math.max(a,...r.series.map(l=>l.length)),r.series.forEach(l=>{l.push(...ee(Math.max(0,s-l.length)))})):s=r.series.length,r.labels.push(...ee(Math.max(0,s-a),()=>"")),e&&function q(n){var e;null===(e=n.labels)||void 0===e||e.reverse(),n.series.reverse();for(const i of n.series)E(i,"data")?i.data.reverse():Array.isArray(i)&&i.reverse()}(r),r}function T(n,e){if(!y(n))return e?function me(n,e){let i,t;if("object"!=typeof n){const s=Z(n);"x"===e?i=s:t=s}else E(n,"x")&&(i=Z(n.x)),E(n,"y")&&(t=Z(n.y));if(void 0!==i||void 0!==t)return{x:i,y:t}}(n,e):Z(n)}function oe(n,e){return Array.isArray(n)?n.map(i=>E(i,"value")?T(i.value,e):T(i,e)):oe(n.data,e)}function ge(n,e,i){if(g(n))return n.map(s=>oe(s,e));const t=oe(n,e);return i?t.map(s=>[s]):t}function ze(n,e,i){const t={increasingX:!1,fillHoles:!1,...i},s=[];let r=!0;for(let a=0;a<n.length;a+=2)void 0===w(e[a/2].value)?t.fillHoles||(r=!0):(t.increasingX&&a>=2&&n[a]<=n[a-2]&&(r=!0),r&&(s.push({pathCoordinates:[],valueData:[]}),r=!1),s[s.length-1].pathCoordinates.push(n[a],n[a+1]),s[s.length-1].valueData.push(e[a/2]));return s}function C(n){let e="";return null==n?n:(e="number"==typeof n?""+n:"object"==typeof n?JSON.stringify({data:n}):String(n),Object.keys(Q).reduce((i,t)=>i.replaceAll(t,Q[t]),e))}class V{call(e,i){return this.svgElements.forEach(t=>Reflect.apply(t[e],t,i)),this}attr(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("attr",i)}elem(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("elem",i)}root(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("root",i)}getNode(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("getNode",i)}foreignObject(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("foreignObject",i)}text(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("text",i)}empty(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("empty",i)}remove(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("remove",i)}addClass(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("addClass",i)}removeClass(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("removeClass",i)}removeAllClasses(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("removeAllClasses",i)}animate(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return this.call("animate",i)}constructor(e){this.svgElements=[];for(let i=0;i<e.length;i++)this.svgElements.push(new I(e[i]))}}const W={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function pe(n,e,i){let t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;const{easing:r,...a}=i,l={};let d,c;r&&(d=Array.isArray(r)?r:W[r]),a.begin=f(a.begin,"ms"),a.dur=f(a.dur,"ms"),d&&(a.calcMode="spline",a.keySplines=d.join(" "),a.keyTimes="0;1"),t&&(a.fill="freeze",l[e]=a.from,n.attr(l),c=P(a.begin||0).value,a.begin="indefinite");const u=n.elem("animate",{attributeName:e,...a});t&&setTimeout(()=>{try{u._node.beginElement()}catch{l[e]=a.to,n.attr(l),u.remove()}},c);const p=u.getNode();s&&p.addEventListener("beginEvent",()=>s.emit("animationBegin",{element:n,animate:p,params:i})),p.addEventListener("endEvent",()=>{s&&s.emit("animationEnd",{element:n,animate:p,params:i}),t&&(l[e]=a.to,n.attr(l),u.remove())})}class I{attr(e,i){return"string"==typeof e?i?this._node.getAttributeNS(i,e):this._node.getAttribute(e):(Object.keys(e).forEach(t=>{if(void 0!==e[t])if(-1!==t.indexOf(":")){const s=t.split(":");this._node.setAttributeNS(B[s[0]],t,String(e[t]))}else this._node.setAttribute(t,String(e[t]))}),this)}elem(e,i,t){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new I(e,i,t,this,s)}parent(){return this._node.parentNode instanceof SVGElement?new I(this._node.parentNode):null}root(){let e=this._node;for(;"svg"!==e.nodeName&&e.parentElement;)e=e.parentElement;return new I(e)}querySelector(e){const i=this._node.querySelector(e);return i?new I(i):null}querySelectorAll(e){const i=this._node.querySelectorAll(e);return new V(i)}getNode(){return this._node}foreignObject(e,i,t){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("string"==typeof e){const l=document.createElement("div");l.innerHTML=e,r=l.firstChild}else r=e;r instanceof Element&&r.setAttribute("xmlns",B.xmlns);const a=this.elem("foreignObject",i,t,s);return a._node.appendChild(r),a}text(e){return this._node.appendChild(document.createTextNode(e)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var e;return null===(e=this._node.parentNode)||void 0===e||e.removeChild(this._node),this.parent()}replace(e){var i;return null===(i=this._node.parentNode)||void 0===i||i.replaceChild(e._node,this._node),e}append(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this}classes(){const e=this._node.getAttribute("class");return e?e.trim().split(/\s+/):[]}addClass(e){return this._node.setAttribute("class",this.classes().concat(e.trim().split(/\s+/)).filter(function(i,t,s){return s.indexOf(i)===t}).join(" ")),this}removeClass(e){const i=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter(t=>-1===i.indexOf(t)).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0;return Object.keys(e).forEach(s=>{const r=e[s];Array.isArray(r)?r.forEach(a=>pe(this,s,a,!1,t)):pe(this,s,r,i,t)}),this}constructor(e,i,t,s,r=!1){e instanceof Element?this._node=e:(this._node=document.createElementNS(B.svg,e),"svg"===e&&this.attr({"xmlns:ct":B.ct})),i&&this.attr(i),t&&this.addClass(t),s&&(r&&s._node.firstChild?s._node.insertBefore(this._node,s._node.firstChild):s._node.appendChild(this._node))}}function Ne(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"100%",t=arguments.length>3?arguments[3]:void 0;Array.from(n.querySelectorAll("svg")).filter(r=>r.getAttributeNS(B.xmlns,"ct")).forEach(r=>n.removeChild(r));const s=new I("svg").attr({width:e,height:i}).attr({style:"width: ".concat(e,"; height: ").concat(i,";")});return t&&s.addClass(t),n.appendChild(s.getNode()),s}function ne(n){return"number"==typeof n?{top:n,right:n,bottom:n,left:n}:void 0===n?{top:0,right:0,bottom:0,left:0}:{top:"number"==typeof n.top?n.top:0,right:"number"==typeof n.right?n.right:0,bottom:"number"==typeof n.bottom?n.bottom:0,left:"number"==typeof n.left?n.left:0}}function de(n,e){var i,t,s,r;const a=!(!e.axisX&&!e.axisY),l=(null===(i=e.axisY)||void 0===i?void 0:i.offset)||0,d=(null===(t=e.axisX)||void 0===t?void 0:t.offset)||0,c=null===(s=e.axisY)||void 0===s?void 0:s.position,u=null===(r=e.axisX)||void 0===r?void 0:r.position;let p=n.width()||P(e.width).value||0,o=n.height()||P(e.height).value||0;const b=ne(e.chartPadding);p=Math.max(p,l+b.left+b.right),o=Math.max(o,d+b.top+b.bottom);const h={x1:0,x2:0,y1:0,y2:0,padding:b,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return a?("start"===u?(h.y2=b.top+d,h.y1=Math.max(o-b.bottom,h.y2+1)):(h.y2=b.top,h.y1=Math.max(o-b.bottom-d,h.y2+1)),"start"===c?(h.x1=b.left+l,h.x2=Math.max(p-b.right,h.x1+1)):(h.x1=b.left,h.x2=Math.max(p-b.right-l,h.x1+1))):(h.x1=b.left,h.x2=Math.max(p-b.right,h.x1+1),h.y2=b.top,h.y1=Math.max(o-b.bottom,h.y2+1)),h}function R(n,e,i,t,s,r,a,l){const d={["".concat(i.units.pos,"1")]:n,["".concat(i.units.pos,"2")]:n,["".concat(i.counterUnits.pos,"1")]:t,["".concat(i.counterUnits.pos,"2")]:t+s},c=r.elem("line",d,a.join(" "));l.emit("draw",{type:"grid",axis:i,index:e,group:r,element:c,...d})}function be(n,e,i,t){const s=n.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},i,!0);t.emit("draw",{type:"gridBackground",group:n,element:s})}function Me(n,e,i,t,s,r,a,l,d,c){const u={[s.units.pos]:n+a[s.units.pos],[s.counterUnits.pos]:a[s.counterUnits.pos],[s.units.len]:e,[s.counterUnits.len]:Math.max(0,r-10)},p=Math.round(u[s.units.len]),o=Math.round(u[s.counterUnits.len]),b=document.createElement("span");b.className=d.join(" "),b.style[s.units.len]=p+"px",b.style[s.counterUnits.len]=o+"px",b.textContent=String(t);const h=l.foreignObject(b,{style:"overflow: visible;",...u});c.emit("draw",{type:"label",axis:s,index:i,group:l,element:h,text:t,...u})}function ke(n,e,i){let t;const s=[];function r(l){const d=t;t=L({},n),e&&e.forEach(c=>{window.matchMedia(c[0]).matches&&(t=L(t,c[1]))}),i&&l&&i.emit("optionsChanged",{previousOptions:d,currentOptions:t})}if(!window.matchMedia)throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return e&&e.forEach(l=>{const d=window.matchMedia(l[0]);d.addEventListener("change",r),s.push(d)}),r(),{removeMediaQueryListeners:function a(){s.forEach(l=>l.removeEventListener("change",r))},getCurrentOptions:()=>t}}I.Easing=W;const Fe={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},et={accuracy:3};function De(n,e,i,t,s,r){const a={command:s?n.toLowerCase():n.toUpperCase(),...e,...r?{data:r}:{}};i.splice(t,0,a)}function He(n,e){n.forEach((i,t)=>{Fe[i.command.toLowerCase()].forEach((s,r)=>{e(i,s,t,r,n)})})}class J{static join(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0;const s=new J(i,t);for(let r=0;r<e.length;r++){const a=e[r];for(let l=0;l<a.pathElements.length;l++)s.pathElements.push(a.pathElements[l])}return s}position(e){return void 0!==e?(this.pos=Math.max(0,Math.min(this.pathElements.length,e)),this):this.pos}remove(e){return this.pathElements.splice(this.pos,e),this}move(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return De("M",{x:+e,y:+i},this.pathElements,this.pos++,t,s),this}line(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return De("L",{x:+e,y:+i},this.pathElements,this.pos++,t,s),this}curve(e,i,t,s,r,a){let l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7?arguments[7]:void 0;return De("C",{x1:+e,y1:+i,x2:+t,y2:+s,x:+r,y:+a},this.pathElements,this.pos++,l,d),this}arc(e,i,t,s,r,a,l){let d=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8?arguments[8]:void 0;return De("A",{rx:e,ry:i,xAr:t,lAf:s,sf:r,x:a,y:l},this.pathElements,this.pos++,d,c),this}parse(e){const i=e.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((s,r)=>(r.match(/[A-Za-z]/)&&s.push([]),s[s.length-1].push(r),s),[]);"Z"===i[i.length-1][0].toUpperCase()&&i.pop();const t=i.map(s=>{const r=s.shift(),a=Fe[r.toLowerCase()];return{command:r,...a.reduce((l,d,c)=>(l[d]=+s[c],l),{})}});return this.pathElements.splice(this.pos,0,...t),this.pos+=t.length,this}stringify(){const e=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((i,t)=>{const s=Fe[t.command.toLowerCase()].map(r=>{const a=t[r];return this.options.accuracy?Math.round(a*e)/e:a});return i+t.command+s.join(",")},"")+(this.close?"Z":"")}scale(e,i){return He(this.pathElements,(t,s)=>{t[s]*="x"===s[0]?e:i}),this}translate(e,i){return He(this.pathElements,(t,s)=>{t[s]+="x"===s[0]?e:i}),this}transform(e){return He(this.pathElements,(i,t,s,r,a)=>{const l=e(i,t,s,r,a);(l||0===l)&&(i[t]=l)}),this}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=new J(e||this.close);return i.pos=this.pos,i.pathElements=this.pathElements.slice().map(t=>({...t})),i.options={...this.options},i}splitByCommand(e){const i=[new J];return this.pathElements.forEach(t=>{t.command===e.toUpperCase()&&0!==i[i.length-1].pathElements.length&&i.push(new J),i[i.length-1].pathElements.push(t)}),i}constructor(e=!1,i){this.close=e,this.pathElements=[],this.pos=0,this.options={...et,...i}}}function Se(n){const e={fillHoles:!1,...n};return function(t,s){const r=new J;let a=!0;for(let l=0;l<t.length;l+=2){const d=t[l],c=t[l+1],u=s[l/2];void 0!==w(u.value)?(a?r.move(d,c,!1,u):r.line(d,c,!1,u),a=!1):e.fillHoles||(a=!0)}return r}}function $e(n){const e={fillHoles:!1,...n};return function i(t,s){const r=ze(t,s,{fillHoles:e.fillHoles,increasingX:!0});if(r.length){if(r.length>1)return J.join(r.map(a=>i(a.pathCoordinates,a.valueData)));{if(t=r[0].pathCoordinates,s=r[0].valueData,t.length<=4)return Se()(t,s);const a=[],l=[],d=t.length/2,c=[],u=[],p=[],o=[];for(let h=0;h<d;h++)a[h]=t[2*h],l[h]=t[2*h+1];for(let h=0;h<d-1;h++)p[h]=l[h+1]-l[h],o[h]=a[h+1]-a[h],u[h]=p[h]/o[h];c[0]=u[0],c[d-1]=u[d-2];for(let h=1;h<d-1;h++)0===u[h]||0===u[h-1]||u[h-1]>0!=u[h]>0?c[h]=0:(c[h]=3*(o[h-1]+o[h])/((2*o[h]+o[h-1])/u[h-1]+(o[h]+2*o[h-1])/u[h]),isFinite(c[h])||(c[h]=0));const b=(new J).move(a[0],l[0],!1,s[0]);for(let h=0;h<d-1;h++)b.curve(a[h]+o[h]/3,l[h]+c[h]*o[h]/3,a[h+1]-o[h]/3,l[h+1]-c[h+1]*o[h]/3,a[h+1],l[h+1],!1,s[h+1]);return b}}return Se()([],[])}}var nt=Object.freeze({__proto__:null,none:Se,simple:function tt(n){const e={divisor:2,fillHoles:!1,...n},i=1/Math.max(1,e.divisor);return function(s,r){const a=new J;let c,l=0,d=0;for(let u=0;u<s.length;u+=2){const p=s[u],o=s[u+1],b=(p-l)*i,h=r[u/2];void 0!==h.value?(void 0===c?a.move(p,o,!1,h):a.curve(l+b,d,p-b,o,p,o,!1,h),l=p,d=o,c=h):e.fillHoles||(l=d=0,c=void 0)}return a}},step:function it(n){const e={postpone:!0,fillHoles:!1,...n};return function(t,s){const r=new J;let d,a=0,l=0;for(let c=0;c<t.length;c+=2){const u=t[c],p=t[c+1],o=s[c/2];void 0!==o.value?(void 0===d?r.move(u,p,!1,o):(e.postpone?r.line(u,l,!1,d):r.line(a,p,!1,o),r.line(u,p,!1,o)),a=u,l=p,d=o):e.fillHoles||(a=l=0,d=void 0)}return r}},cardinal:function st(n){const e={tension:1,fillHoles:!1,...n},i=Math.min(1,Math.max(0,e.tension)),t=1-i;return function s(r,a){const l=ze(r,a,{fillHoles:e.fillHoles});if(l.length){if(l.length>1)return J.join(l.map(d=>s(d.pathCoordinates,d.valueData)));{if(r=l[0].pathCoordinates,a=l[0].valueData,r.length<=4)return Se()(r,a);const d=(new J).move(r[0],r[1],!1,a[0]),c=!1;for(let u=0,p=r.length;p-2*+!c>u;u+=2){const o=[{x:+r[u-2],y:+r[u-1]},{x:+r[u],y:+r[u+1]},{x:+r[u+2],y:+r[u+3]},{x:+r[u+4],y:+r[u+5]}];p-4===u?o[3]=o[2]:u||(o[0]={x:+r[u],y:+r[u+1]}),d.curve(i*(-o[0].x+6*o[1].x+o[2].x)/6+t*o[2].x,i*(-o[0].y+6*o[1].y+o[2].y)/6+t*o[2].y,i*(o[1].x+6*o[2].x-o[3].x)/6+t*o[2].x,i*(o[1].y+6*o[2].y-o[3].y)/6+t*o[2].y,o[2].x,o[2].y,!1,a[(u+2)/2])}return d}}return Se()([],[])}},monotoneCubic:$e});class Ze{on(e,i){const{allListeners:t,listeners:s}=this;"*"===e?t.add(i):(s.has(e)||s.set(e,new Set),s.get(e).add(i))}off(e,i){const{allListeners:t,listeners:s}=this;if("*"===e)i?t.delete(i):t.clear();else if(s.has(e)){const r=s.get(e);i?r.delete(i):r.clear(),r.size||s.delete(e)}}emit(e,i){const{allListeners:t,listeners:s}=this;s.has(e)&&s.get(e).forEach(r=>r(i)),t.forEach(r=>r(e,i))}constructor(){this.listeners=new Map,this.allListeners=new Set}}const Ue=new WeakMap;class Ie{update(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var s;(e&&(this.data=e||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),i&&(this.options=L({},t?this.options:this.defaultOptions,i),!this.initializeTimeoutId))&&(null===(s=this.optionsProvider)||void 0===s||s.removeMediaQueryListeners(),this.optionsProvider=ke(this.options,this.responsiveOptions,this.eventEmitter));return!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){var e;this.initializeTimeoutId?window.clearTimeout(this.initializeTimeoutId):(window.removeEventListener("resize",this.resizeListener),null===(e=this.optionsProvider)||void 0===e||e.removeMediaQueryListeners());return Ue.delete(this.container),this}on(e,i){return this.eventEmitter.on(e,i),this}off(e,i){return this.eventEmitter.off(e,i),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=ke(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",()=>this.update()),this.options.plugins&&this.options.plugins.forEach(e=>{Array.isArray(e)?e[0](this,e[1]):e(this)}),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(e,i,t,s,r){this.data=i,this.defaultOptions=t,this.options=s,this.responsiveOptions=r,this.eventEmitter=new Ze,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout(()=>this.initialize(),0);const a="string"==typeof e?document.querySelector(e):e;if(!a)throw new Error("Target element is not found");this.container=a;const l=Ue.get(a);l&&l.detach(),Ue.set(a,this)}}const H={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};class Ye{createGridAndLabels(e,i,t,s){const r="x"===this.units.pos?t.axisX:t.axisY,a=this.ticks.map((d,c)=>this.projectValue(d,c)),l=this.ticks.map(r.labelInterpolationFnc);a.forEach((d,c)=>{const u=l[c],p={x:0,y:0};let o;o=a[c+1]?a[c+1]-d:Math.max(this.axisLength-d,this.axisLength/this.ticks.length),(""===u||!ae(u))&&("x"===this.units.pos?(d=this.chartRect.x1+d,p.x=t.axisX.labelOffset.x,"start"===t.axisX.position?p.y=this.chartRect.padding.top+t.axisX.labelOffset.y+5:p.y=this.chartRect.y1+t.axisX.labelOffset.y+5):(d=this.chartRect.y1-d,p.y=t.axisY.labelOffset.y-o,"start"===t.axisY.position?p.x=this.chartRect.padding.left+t.axisY.labelOffset.x:p.x=this.chartRect.x2+t.axisY.labelOffset.x+10),r.showGrid&&R(d,c,this,this.gridOffset,this.chartRect[this.counterUnits.len](),e,[t.classNames.grid,t.classNames[this.units.dir]],s),r.showLabel&&Me(d,o,c,u,this,r.offset,p,i,[t.classNames.label,t.classNames[this.units.dir],"start"===r.position?t.classNames[r.position]:t.classNames.end],s))})}constructor(e,i,t){this.units=e,this.chartRect=i,this.ticks=t,this.counterUnits=e===H.x?H.y:H.x,this.axisLength=i[this.units.rectEnd]-i[this.units.rectStart],this.gridOffset=i[this.units.rectOffset]}}class Re extends Ye{projectValue(e){const i=Number(w(e,this.units.pos));return this.axisLength*(i-this.bounds.min)/this.bounds.range}constructor(e,i,t,s){const r=s.highLow||S(i,s,e.pos),a=x(t[e.rectEnd]-t[e.rectStart],r,s.scaleMinSpace||20,s.onlyInteger),l={min:a.min,max:a.max};super(e,t,a.values),this.bounds=a,this.range=l}}class Pe extends Ye{projectValue(e,i){return this.stepLength*i}constructor(e,i,t,s){const r=s.ticks||[];super(e,t,r);const a=Math.max(1,r.length-(s.stretch?1:0));this.stepLength=this.axisLength/a,this.stretch=!!s.stretch}}function je(n,e,i){var t;if(E(n,"name")&&n.name&&null!==(t=e.series)&&void 0!==t&&t[n.name]){const r=(e?.series[n.name])[i];return void 0===r?e[i]:r}return e[i]}const We={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:F,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:F,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};const Qe={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:F,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:F,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};const _e={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:F,labelDirection:"neutral",ignoreEmptyValues:!1};function qe(n,e,i){const t=e.x>n.x;return t&&"explode"===i||!t&&"implode"===i?"start":t&&"implode"===i||!t&&"explode"===i?"end":"middle"}v.AutoScaleAxis=Re,v.Axis=Ye,v.BarChart=class ot extends Ie{createChart(e){const{data:i}=this,t=Y(i,e.reverseData,e.horizontalBars?"x":"y",!0),s=Ne(this.container,e.width,e.height,e.classNames.chart+(e.horizontalBars?" "+e.classNames.horizontalBars:"")),r=e.stackBars&&!0!==e.stackMode&&t.series.length?S([(n=t.series,Ae(n,function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return Array.from(i).reduce((s,r)=>({x:s.x+(E(r,"x")?r.x:0),y:s.y+(E(r,"y")?r.y:0)}),{x:0,y:0})}))],e,e.horizontalBars?"x":"y"):S(t.series,e,e.horizontalBars?"x":"y");var n;this.svg=s;const a=s.elem("g").addClass(e.classNames.gridGroup),l=s.elem("g"),d=s.elem("g").addClass(e.classNames.labelGroup);"number"==typeof e.high&&(r.high=e.high),"number"==typeof e.low&&(r.low=e.low);const c=de(s,e);let u;const p=e.distributeSeries&&e.stackBars?t.labels.slice(0,1):t.labels;let o,b,h;e.horizontalBars?(u=b=void 0===e.axisX.type?new Re(H.x,t.series,c,{...e.axisX,highLow:r,referenceValue:0}):new e.axisX.type(H.x,t.series,c,{...e.axisX,highLow:r,referenceValue:0}),o=h=void 0===e.axisY.type?new Pe(H.y,t.series,c,{ticks:p}):new e.axisY.type(H.y,t.series,c,e.axisY)):(o=b=void 0===e.axisX.type?new Pe(H.x,t.series,c,{ticks:p}):new e.axisX.type(H.x,t.series,c,e.axisX),u=h=void 0===e.axisY.type?new Re(H.y,t.series,c,{...e.axisY,highLow:r,referenceValue:0}):new e.axisY.type(H.y,t.series,c,{...e.axisY,highLow:r,referenceValue:0}));const D=e.horizontalBars?c.x1+u.projectValue(0):c.y1-u.projectValue(0),O="accumulate"===e.stackMode,ve="accumulate-relative"===e.stackMode,ye=[],re=[];let he=ye;o.createGridAndLabels(a,d,e,this.eventEmitter),u.createGridAndLabels(a,d,e,this.eventEmitter),e.showGridBackground&&be(a,c,e.classNames.gridBackground,this.eventEmitter),le(i.series,(X,M)=>{const k=M-(i.series.length-1)/2;let j;j=e.distributeSeries&&!e.stackBars?o.axisLength/t.series.length/2:e.distributeSeries&&e.stackBars?o.axisLength/2:o.axisLength/t.series[M].length/2;const G=l.elem("g"),ce=E(X,"name")&&X.name,Te=E(X,"className")&&X.className,xe=E(X,"meta")?X.meta:void 0;ce&&G.attr({"ct:series-name":ce}),xe&&G.attr({"ct:meta":C(xe)}),G.addClass([e.classNames.series,Te||"".concat(e.classNames.series,"-").concat(U(M))].join(" ")),t.series[M].forEach((fe,te)=>{const Be=E(fe,"x")&&fe.x,Xe=E(fe,"y")&&fe.y;let Ve,Ee;Ve=e.distributeSeries&&!e.stackBars?M:e.distributeSeries&&e.stackBars?0:te,Ee=e.horizontalBars?{x:c.x1+u.projectValue(Be||0,te,t.series[M]),y:c.y1-o.projectValue(Xe||0,Ve,t.series[M])}:{x:c.x1+o.projectValue(Be||0,Ve,t.series[M]),y:c.y1-u.projectValue(Xe||0,te,t.series[M])},o instanceof Pe&&(o.stretch||(Ee[o.units.pos]+=j*(e.horizontalBars?-1:1)),Ee[o.units.pos]+=e.stackBars||e.distributeSeries?0:k*e.seriesBarDistance*(e.horizontalBars?-1:1)),ve&&(he=Xe>=0||Be>=0?ye:re);const Je=he[te]||D;if(he[te]=Je-(D-Ee[o.counterUnits.pos]),void 0===fe)return;const K={["".concat(o.units.pos,"1")]:Ee[o.units.pos],["".concat(o.units.pos,"2")]:Ee[o.units.pos]};e.stackBars&&(O||ve||!e.stackMode)?(K["".concat(o.counterUnits.pos,"1")]=Je,K["".concat(o.counterUnits.pos,"2")]=he[te]):(K["".concat(o.counterUnits.pos,"1")]=D,K["".concat(o.counterUnits.pos,"2")]=Ee[o.counterUnits.pos]),K.x1=Math.min(Math.max(K.x1,c.x1),c.x2),K.x2=Math.min(Math.max(K.x2,c.x1),c.x2),K.y1=Math.min(Math.max(K.y1,c.y2),c.y1),K.y2=Math.min(Math.max(K.y2,c.y2),c.y1);const Ke=A(X,te),ut=G.elem("line",K,e.classNames.bar).attr({"ct:value":[Be,Xe].filter(N).join(","),"ct:meta":C(Ke)});this.eventEmitter.emit("draw",{type:"bar",value:fe,index:te,meta:Ke,series:X,seriesIndex:M,axisX:b,axisY:h,chartRect:c,group:G,element:ut,...K})})},e.reverseData),this.eventEmitter.emit("created",{chartRect:c,axisX:b,axisY:h,svg:s,options:e})}constructor(e,i,t,s){super(e,i,Qe,L({},Qe,t),s),this.data=i}},v.BaseChart=Ie,v.EPSILON=$,v.EventEmitter=Ze,v.FixedScaleAxis=class rt extends Ye{projectValue(e){const i=Number(w(e,this.units.pos));return this.axisLength*(i-this.range.min)/(this.range.max-this.range.min)}constructor(e,i,t,s){const r=s.highLow||S(i,s,e.pos),a=s.divisor||1,l=(s.ticks||ee(a,c=>r.low+(r.high-r.low)/a*c)).sort((c,u)=>Number(c)-Number(u)),d={min:r.low,max:r.high};super(e,t,l),this.range=d}},v.Interpolation=nt,v.LineChart=class at extends Ie{createChart(e){const{data:i}=this,t=Y(i,e.reverseData,!0),s=Ne(this.container,e.width,e.height,e.classNames.chart);this.svg=s;const r=s.elem("g").addClass(e.classNames.gridGroup),a=s.elem("g"),l=s.elem("g").addClass(e.classNames.labelGroup),d=de(s,e);let c,u;c=void 0===e.axisX.type?new Pe(H.x,t.series,d,{...e.axisX,ticks:t.labels,stretch:e.fullWidth}):new e.axisX.type(H.x,t.series,d,e.axisX),u=void 0===e.axisY.type?new Re(H.y,t.series,d,{...e.axisY,high:N(e.high)?e.high:e.axisY.high,low:N(e.low)?e.low:e.axisY.low}):new e.axisY.type(H.y,t.series,d,e.axisY),c.createGridAndLabels(r,l,e,this.eventEmitter),u.createGridAndLabels(r,l,e,this.eventEmitter),e.showGridBackground&&be(r,d,e.classNames.gridBackground,this.eventEmitter),le(i.series,(p,o)=>{const b=a.elem("g"),h=E(p,"name")&&p.name,D=E(p,"className")&&p.className,O=E(p,"meta")?p.meta:void 0;h&&b.attr({"ct:series-name":h}),O&&b.attr({"ct:meta":C(O)}),b.addClass([e.classNames.series,D||"".concat(e.classNames.series,"-").concat(U(o))].join(" "));const ve=[],ye=[];t.series[o].forEach((M,k)=>{const j={x:d.x1+c.projectValue(M,k,t.series[o]),y:d.y1-u.projectValue(M,k,t.series[o])};ve.push(j.x,j.y),ye.push({value:M,valueIndex:k,meta:A(p,k)})});const re={lineSmooth:je(p,e,"lineSmooth"),showPoint:je(p,e,"showPoint"),showLine:je(p,e,"showLine"),showArea:je(p,e,"showArea"),areaBase:je(p,e,"areaBase")};let he;he="function"==typeof re.lineSmooth?re.lineSmooth:re.lineSmooth?$e():Se();const X=he(ve,ye);if(re.showPoint&&X.pathElements.forEach(M=>{const{data:k}=M,j=b.elem("line",{x1:M.x,y1:M.y,x2:M.x+.01,y2:M.y},e.classNames.point);if(k){let G,ce;E(k.value,"x")&&(G=k.value.x),E(k.value,"y")&&(ce=k.value.y),j.attr({"ct:value":[G,ce].filter(N).join(","),"ct:meta":C(k.meta)})}this.eventEmitter.emit("draw",{type:"point",value:k?.value,index:k?.valueIndex||0,meta:k?.meta,series:p,seriesIndex:o,axisX:c,axisY:u,group:b,element:j,x:M.x,y:M.y,chartRect:d})}),re.showLine){const M=b.elem("path",{d:X.stringify()},e.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:t.series[o],path:X.clone(),chartRect:d,index:o,series:p,seriesIndex:o,meta:O,axisX:c,axisY:u,group:b,element:M})}if(re.showArea&&u.range){const M=Math.max(Math.min(re.areaBase,u.range.max),u.range.min),k=d.y1-u.projectValue(M);X.splitByCommand("M").filter(j=>j.pathElements.length>1).map(j=>{const G=j.pathElements[0],ce=j.pathElements[j.pathElements.length-1];return j.clone(!0).position(0).remove(1).move(G.x,k).line(G.x,G.y).position(j.pathElements.length+1).line(ce.x,k)}).forEach(j=>{const G=b.elem("path",{d:j.stringify()},e.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:t.series[o],path:j.clone(),series:p,seriesIndex:o,axisX:c,axisY:u,chartRect:d,index:o,group:b,element:G,meta:O})})}},e.reverseData),this.eventEmitter.emit("created",{chartRect:d,axisX:c,axisY:u,svg:s,options:e})}constructor(e,i,t,s){super(e,i,We,L({},We,t),s),this.data=i}},v.PieChart=class ct extends Ie{createChart(e){const{data:i}=this,t=Y(i),s=[];let r,a,l=e.startAngle;const d=Ne(this.container,e.width,e.height,e.donut?e.classNames.chartDonut:e.classNames.chartPie);this.svg=d;const c=de(d,e);let u=Math.min(c.width()/2,c.height()/2);const p=e.total||t.series.reduce(se,0),o=P(e.donutWidth);"%"===o.unit&&(o.value*=u/100),u-=e.donut?o.value/2:0,a="outside"===e.labelPosition||e.donut?u:"center"===e.labelPosition?0:u/2,e.labelOffset&&(a+=e.labelOffset);const b={x:c.x1+c.width()/2,y:c.y2+c.height()/2},h=1===i.series.filter(D=>E(D,"value")?0!==D.value:0!==D).length;i.series.forEach((D,O)=>s[O]=d.elem("g")),e.showLabel&&(r=d.elem("g")),i.series.forEach((D,O)=>{var ve,ye;if(0===t.series[O]&&e.ignoreEmptyValues)return;const re=E(D,"name")&&D.name,he=E(D,"className")&&D.className,X=E(D,"meta")?D.meta:void 0;re&&s[O].attr({"ct:series-name":re}),s[O].addClass([null===(ve=e.classNames)||void 0===ve?void 0:ve.series,he||"".concat(null===(ye=e.classNames)||void 0===ye?void 0:ye.series,"-").concat(U(O))].join(" "));let M=p>0?l+t.series[O]/p*360:0;const k=Math.max(0,l-(0===O||h?0:.2));M-k>=359.99&&(M=k+359.99);const j=_(b.x,b.y,u,k),G=_(b.x,b.y,u,M),ce=new J(!e.donut).move(G.x,G.y).arc(u,u,0,+(M-l>180),0,j.x,j.y);e.donut||ce.line(b.x,b.y);const Te=s[O].elem("path",{d:ce.stringify()},e.donut?e.classNames.sliceDonut:e.classNames.slicePie);if(Te.attr({"ct:value":t.series[O],"ct:meta":C(X)}),e.donut&&Te.attr({style:"stroke-width: "+o.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:t.series[O],totalDataSum:p,index:O,meta:X,series:D,group:s[O],element:Te,path:ce.clone(),center:b,radius:u,startAngle:l,endAngle:M,chartRect:c}),e.showLabel){let xe,fe;xe=1===i.series.length?{x:b.x,y:b.y}:_(b.x,b.y,a,l+(M-l)/2),fe=t.labels&&!ae(t.labels[O])?t.labels[O]:t.series[O];const te=e.labelInterpolationFnc(fe,O);if(te||0===te){const Be=r.elem("text",{dx:xe.x,dy:xe.y,"text-anchor":qe(b,xe,e.labelDirection)},e.classNames.label).text(String(te));this.eventEmitter.emit("draw",{type:"label",index:O,group:r,element:Be,text:""+te,chartRect:c,series:D,meta:X,...xe})}}l=M}),this.eventEmitter.emit("created",{chartRect:c,svg:d,options:e})}constructor(e,i,t,s){super(e,i,_e,L({},_e,t),s),this.data=i}},v.StepAxis=Pe,v.Svg=I,v.SvgList=V,v.SvgPath=J,v.alphaNumerate=U,v.axisUnits=H,v.createChartRect=de,v.createGrid=R,v.createGridBackground=be,v.createLabel=Me,v.createSvg=Ne,v.deserialize=function z(n){if("string"!=typeof n)return n;if("NaN"===n)return NaN;let e=n=Object.keys(Q).reduce((i,t)=>i.replaceAll(Q[t],t),n);if("string"==typeof n)try{e=JSON.parse(n),e=void 0!==e.data?e.data:e}catch{}return e},v.determineAnchorPosition=qe,v.each=le,v.easings=W,v.ensureUnit=f,v.escapingMap=Q,v.extend=L,v.getBounds=x,v.getHighLow=S,v.getMetaData=A,v.getMultiValue=w,v.getNumberOrUndefined=Z,v.getSeriesOption=je,v.isArrayOfArrays=Ce,v.isArrayOfSeries=g,v.isDataHoleValue=y,v.isFalseyButZero=ae,v.isMultiValue=m,v.isNumeric=N,v.namespaces=B,v.noop=F,v.normalizeData=Y,v.normalizePadding=ne,v.optionsProvider=ke,v.orderOfMagnitude=Le,v.polarToCartesian=_,v.precision=we,v.projectLength=ie,v.quantity=P,v.rho=Oe,v.roundWithPrecision=ue,v.safeHasProperty=E,v.serialMap=Ae,v.serialize=C,v.splitIntoSegments=ze,v.sum=se,v.times=ee}}]);
//# sourceMappingURL=945.ce95a39862151ecf.js.map