{"version":3,"mappings":"ynOAEaA,EAA0BC,KAA1BD,qLAUAE,EAAuBD,KAAvBC,+ICmBNC,aAGLC,WACUC,EACEC,EACFC,EACAC,aAHAC,mBACEA,mBACFA,sBACAA,2BAERA,KAAKC,KAAOD,KAAKE,YAAYC,MAAM,CACjCC,OAAQ,CAAC,eACTC,UAAW,CAAC,uDAIVC,8JACEN,KAAKO,YACRC,MAAMf,GACNgB,UAAWb,mBAAWA,EAAEc,kBACxBC,UAAWf,YACVI,EAAKC,KAAKW,SAASR,OAAUS,SAASjB,EAAOQ,QAC7CJ,EAAKC,KAAKW,SAASP,UAAaQ,SAASjB,EAAOS,aANhDC,kEAUAQ,sJAEEd,KAAKC,KAAKc,MAFZD,gBAG4BE,OAAtBpB,EAAYI,KAAKC,KAAKe,MAH5BF,SAIMd,KAAKO,YACRU,OAAO1B,EAAyB,CAC/B2B,MAAO,CAAEd,OAAQR,EAAUQ,OAAQC,UAAWT,EAAUS,aAEzDc,YARHL,OAUFd,KAAKC,KAAKmB,iBACVpB,KAAKqB,eAAeC,eACpBtB,KAAKuB,oBAAoBC,QAAQ,+BAAgC,CAC/DC,OAAQ,qBAbRX,gDAgBFd,KAAKuB,oBAAoBG,MAAM,6BAA8B,CAC3DD,OAAQ,qBAjBRX,gEAiBQpB,sCA1CHA,GAAkBiC,6EAAlBjC,EAAkBkC,oaAvB3BD,iBACEA,iBACEA,kBACEA,qBACEA,4BACEA,mBACFA,QACAA,4BACEA,mBACFA,QACAA,oBAEEA,gCAAS9B,WAGT8B,kBACFA,QACFA,QACFA,QACFA,QACFA,eAlBuBA,mCAWbA,yICDPE,mEAAMA,6DAHA,GAAEC,SAXJ,CACPC,MACAC,cAAsB,CACpB,CACEC,KAAM,GACNC,UAAW,OACXC,UAAWzC,EACX0C,KAAM,CAAEC,WAAY","names":["p","a","y","u","constructor","o","r","m","v","this","form","formBuilder","group","secret","publicKey","ngOnInit","dataService","query","mapStream","sendCloudConfig","subscribe","controls","setValue","save","dirty","value","mutate","input","toPromise","markAsPristine","changeDetector","markForCheck","notificationService","success","entity","error","e","selectors","n","imports","c","f","path","pathMatch","component","data","breadcrumb"],"sources":["webpack:///src/extensions/fb7f8506373513100ed78ddac8513b479688a3f0598a9e860d7fddc3e44a9d43/queries.ts","webpack:///src/extensions/fb7f8506373513100ed78ddac8513b479688a3f0598a9e860d7fddc3e44a9d43/sendcloud.component.ts","webpack:///src/extensions/fb7f8506373513100ed78ddac8513b479688a3f0598a9e860d7fddc3e44a9d43/sendcloud.module.ts"],"sourcesContent":["import gql from 'graphql-tag';\n\nexport const UPDATE_SENDCLOUD_CONFIG = gql`\n  mutation updateSendCloudConfig($input: SendCloudConfigInput) {\n    updateSendCloudConfig(input: $input) {\n      id\n      secret\n      publicKey\n    }\n  }\n`;\n\nexport const GET_SENDCLOUD_CONFIG = gql`\n  query sendCloudConfig {\n    sendCloudConfig {\n      id\n      secret\n      publicKey\n    }\n  }\n`;\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { DataService, NotificationService } from '@vendure/admin-ui/core';\nimport { GET_SENDCLOUD_CONFIG, UPDATE_SENDCLOUD_CONFIG } from './queries';\n\n@Component({\n  selector: 'sendcloud-component',\n  template: `\n    <div class=\"clr-row\">\n      <div class=\"clr-col\">\n        <form class=\"form\" [formGroup]=\"form\">\n          <section class=\"form-block\">\n            <vdr-form-field label=\"SendCloud secret\" for=\"apiKey\">\n              <input id=\"secret\" type=\"text\" formControlName=\"secret\" />\n            </vdr-form-field>\n            <vdr-form-field label=\"SendCloud public key\" for=\"publicKey\">\n              <input id=\"publicKey\" type=\"text\" formControlName=\"publicKey\" />\n            </vdr-form-field>\n            <button\n              class=\"btn btn-primary\"\n              (click)=\"save()\"\n              [disabled]=\"form.invalid || form.pristine\"\n            >\n              Save\n            </button>\n          </section>\n        </form>\n      </div>\n    </div>\n  `,\n})\nexport class SendcloudComponent implements OnInit {\n  form: FormGroup;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    protected dataService: DataService,\n    private changeDetector: ChangeDetectorRef,\n    private notificationService: NotificationService\n  ) {\n    this.form = this.formBuilder.group({\n      secret: ['your-secret'],\n      publicKey: ['your-public-key'],\n    });\n  }\n\n  async ngOnInit(): Promise<void> {\n    await this.dataService\n      .query(GET_SENDCLOUD_CONFIG)\n      .mapStream((d: any) => d.sendCloudConfig)\n      .subscribe((config) => {\n        this.form.controls['secret'].setValue(config.secret);\n        this.form.controls['publicKey'].setValue(config.publicKey);\n      });\n  }\n\n  async save(): Promise<void> {\n    try {\n      if (this.form.dirty) {\n        const formValue = this.form.value;\n        await this.dataService\n          .mutate(UPDATE_SENDCLOUD_CONFIG, {\n            input: { secret: formValue.secret, publicKey: formValue.publicKey },\n          })\n          .toPromise();\n      }\n      this.form.markAsPristine();\n      this.changeDetector.markForCheck();\n      this.notificationService.success('common.notify-update-success', {\n        entity: 'SendCloud config',\n      });\n    } catch (e) {\n      this.notificationService.error('common.notify-update-error', {\n        entity: 'SendCloud config',\n      });\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { addNavMenuItem, SharedModule } from '@vendure/admin-ui/core';\nimport { SendcloudComponent } from './sendcloud.component';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        pathMatch: 'full',\n        component: SendcloudComponent,\n        data: { breadcrumb: 'SendCloud' },\n      },\n    ]),\n  ],\n  providers: [],\n  declarations: [SendcloudComponent],\n})\nexport class SendcloudModule {}\n"]}