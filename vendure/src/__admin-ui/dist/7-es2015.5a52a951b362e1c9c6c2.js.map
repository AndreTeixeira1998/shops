{"version":3,"sources":["webpack:///home/martijn/git/shops/vendure/node_modules/rxjs/_esm2015/internal/operators/withLatestFrom.js","webpack:///home/martijn/git/shops/vendure/node_modules/@vendure/admin-ui/__ivy_ngcc__/fesm2015/vendure-admin-ui-catalog.js"],"names":["withLatestFrom","args","source","project","length","pop","observables","lift","WithLatestFromOperator","this","subscriber","subscribe","OuterSubscriber","destination","super","toRespond","len","values","Array","i","push","observable","add","subscribeToResult","undefined","_outerValue","innerValue","outerIndex","found","indexOf","splice","value","_tryProject","next","result","apply","err","error","AssetDetailComponent_button_6_Template","rf","ctx","_r2","save","ctx_r0","detailForm","invalid","pristine","_c0","_c1","_c2","CollectionContentsComponent_ng_container_2_Template","_c3","tab","_c4","a1","a2","CollectionContentsComponent_ng_template_11_Template","variant_r2","item","name","productId","_c5","a0","$implicit","_c6","CollectionDetailComponent_button_10_Template","_r5","create","CollectionDetailComponent_ng_template_12_button_0_Template","_r8","ctx_r6","assetsChanged","CollectionDetailComponent_ng_template_12_Template","ctx_r2","updatePermission","CollectionDetailComponent_form_14_ng_container_9_Template","CollectionDetailComponent_form_14_ng_template_10_Template","_c7","CollectionDetailComponent_form_14_section_24_ng_container_4_vdr_custom_field_control_1_Template","customField_r19","ctx_r20","get","CollectionDetailComponent_form_14_section_24_ng_container_4_Template","ctx_r18","customFieldIsSet","CollectionDetailComponent_form_14_section_24_Template","ctx_r13","customFields","CollectionDetailComponent_form_14_ng_container_32_Template","_r25","$event","removeFilter","filter_r22","i_r23","index","ctx_r14","getFilterDefinition","CollectionDetailComponent_form_14_div_33_button_7_Template","_r29","filter_r27","addFilter","description","CollectionDetailComponent_form_14_div_33_Template","ctx_r15","allFilters","_c8","count","CollectionDetailComponent_form_14_ng_template_37_Template","count_r30","_c9","pattern","CollectionDetailComponent_form_14_Template","_r32","updateSlug","target","assetChanges","category_r9","ngIf","_r11","ctx_r3","visible","assets","featuredAsset","filters","id","_c10","CollectionListComponent_a_14_Template","CollectionListComponent_ng_template_23_Template","_r4","closeContents","count_r2","ctx_r1","activeCollectionTitle$","_c11","FacetDetailComponent_button_10_Template","FacetDetailComponent_ng_template_12_button_0_Template","FacetDetailComponent_ng_template_12_Template","FacetDetailComponent_form_14_ng_container_8_Template","FacetDetailComponent_form_14_ng_template_9_Template","_c12","FacetDetailComponent_form_14_section_20_ng_container_4_vdr_custom_field_control_1_Template","customField_r16","ctx_r17","FacetDetailComponent_form_14_section_20_ng_container_4_Template","FacetDetailComponent_form_14_section_20_Template","FacetDetailComponent_form_14_section_21_table_4_ng_container_10_Template","customField_r23","_c13","FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_vdr_custom_field_control_2_Template","customField_r27","i_r25","ctx_r28","FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_Template","ctx_r26","customValueFieldIsSet","FacetDetailComponent_form_14_section_21_table_4_tr_13_Template","_r34","facet_r9","updateValueCode","code","deleteFacetValue","value_r24","ctx_r22","customValueFields","FacetDetailComponent_form_14_section_21_table_4_Template","ctx_r19","FacetDetailComponent_form_14_section_21_button_6_Template","_r38","addFacetValue","_c14","FacetDetailComponent_form_14_section_21_Template","getValuesFormArray","FacetDetailComponent_form_14_Template","_r40","updateCode","facet","isNew$","_c15","FacetListComponent_a_7_Template","FacetListComponent_ng_template_27_vdr_facet_value_chip_5_Template","value_r8","FacetListComponent_ng_template_27_button_7_ng_container_1_Template","facet_r2","ctx_r9","initialLimit","FacetListComponent_ng_template_27_button_7_ng_template_2_Template","FacetListComponent_ng_template_27_button_7_Template","_r15","toggleDisplayLimit","_r10","ctx_r4","displayLimit","FacetListComponent_ng_template_27_ng_container_10_Template","FacetListComponent_ng_template_27_ng_template_11_Template","_c16","_c17","FacetListComponent_ng_template_27_Template","_r18","deleteFacet","_r6","isPrivate","ApplyFacetDialogComponent_ng_template_0_Template","ApplyFacetDialogComponent_ng_template_2_Template","_r3","cancel","selectValues","selectedValues","AssignProductsToChannelDialogComponent_ng_template_0_ng_container_0_Template","AssignProductsToChannelDialogComponent_ng_template_0_ng_template_1_Template","AssignProductsToChannelDialogComponent_ng_template_0_Template","_r7","isProductVariantMode","_c18","channel","AssignProductsToChannelDialogComponent_ng_template_29_Template","selectedChannel","AssignProductsToChannelDialogComponent_ng_template_30_Template","AssignProductsToChannelDialogComponent_tr_33_ng_template_7_Template","row_r9","ctx_r10","pricePreview","currencyCode","AssignProductsToChannelDialogComponent_tr_33_ng_template_8_Template","AssignProductsToChannelDialogComponent_tr_33_Template","price","currentChannel","_c19","channelCode","AssignProductsToChannelDialogComponent_ng_template_35_ng_template_4_Template","AssignProductsToChannelDialogComponent_ng_template_35_ng_template_5_Template","AssignProductsToChannelDialogComponent_ng_template_35_Template","assign","ctx_r5","_c20","ProductDetailComponent_clr_toggle_wrapper_5_Template","ProductDetailComponent_button_12_Template","variantsToCreateAreValid","ProductDetailComponent_ng_template_14_button_0_Template","_r9","ctx_r7","variantAssetsChanged","_c21","ProductDetailComponent_ng_template_14_Template","ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_ng_container_3_vdr_chip_1_Template","_r24","channel_r20","removeFromChannel","ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_ng_container_3_Template","isDefaultChannel","ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_Template","_r27","assignToChannel","productChannels$","ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_Template","_c22","ProductDetailComponent_form_16_clr_tab_content_7_section_24_ng_container_4_vdr_custom_field_control_1_Template","customField_r29","ctx_r30","ProductDetailComponent_form_16_clr_tab_content_7_section_24_ng_container_4_Template","ProductDetailComponent_form_16_clr_tab_content_7_section_24_Template","ProductDetailComponent_form_16_clr_tab_content_7_vdr_facet_value_chip_26_Template","facetValue_r32","removeProductFacetValue","ProductDetailComponent_form_16_clr_tab_content_7_button_28_Template","_r36","selectProductFacetValue","ProductDetailComponent_form_16_clr_tab_content_7_div_31_Template","createVariantsConfig","_c23","ProductDetailComponent_form_16_clr_tab_content_7_Template","product_r10","ctx_r11","tmp_2_0","dirty","facetValues$","_c24","ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_a_18_Template","ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_table_19_Template","ctx_r45","variants$","optionGroups","channelPriceIncludesTax$","variantAssetChanges","ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template","_r49","assignVariantToChannel","removeVariantFromChannel","variantAssetChange","updateProductOption","selectedVariantIds","selectVariantFacetValue","ctx_r46","facets$","taxCategories$","customVariantFields","customOptionFields","languageCode$","ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template","_r57","variantDisplayMode","filterInput","setValue","ctx_r43","ProductDetailComponent_form_16_clr_tab_9_Template","_r61","navigateToTab","ctx_r12","activeTab$","ProductDetailComponent_form_16_Template","_r63","_c25","ProductSearchInputComponent_ng_template_3_div_0_Template","selectTag","_r0","isSearchHeaderSelected","searchTerm","ProductSearchInputComponent_ng_template_3_Template","ProductSearchInputComponent_ng_template_4_ng_container_0_Template","_r13","item_r7","clear_r8","clear","facetValue","ProductSearchInputComponent_ng_template_4_ng_container_1_Template","_r17","ctx_r16","label","ProductSearchInputComponent_ng_template_4_Template","ProductSearchInputComponent_ng_template_5_ng_container_0_Template","item_r19","ProductSearchInputComponent_ng_template_5_Template","_c26","ProductListComponent_a_25_Template","ProductListComponent_ng_template_31_img_2_Template","asset_r8","ProductListComponent_ng_template_31_ng_template_3_Template","ProductListComponent_ng_template_31_vdr_chip_8_Template","_c27","ProductListComponent_ng_template_31_Template","result_r3","deleteProduct","enabled","groupByProduct","productAsset","productVariantAsset","productName","productVariantName","_c28","ConfirmVariantDeletionDialogComponent_ng_template_0_Template","ConfirmVariantDeletionDialogComponent_li_4_Template","variant_r3","sku","ConfirmVariantDeletionDialogComponent_ng_template_5_Template","confirm","ProductVariantsEditorComponent_div_5_Template","generateVariants","group_r2","isNew","ProductVariantsEditorComponent_tr_30_input_2_Template","_r19","formValueChanged","variant_r8","ProductVariantsEditorComponent_tr_30_clr_input_container_7_Template","onFormChanged","ProductVariantsEditorComponent_tr_30_span_8_Template","ProductVariantsEditorComponent_tr_30_clr_input_container_10_Template","_r31","ProductVariantsEditorComponent_tr_30_span_11_Template","ProductVariantsEditorComponent_tr_30_clr_input_container_13_Template","stock","ProductVariantsEditorComponent_tr_30_span_14_Template","ProductVariantsEditorComponent_tr_30_vdr_dropdown_16_Template","_r45","productVariantId_r43","deleteVariant","ProductVariantsEditorComponent_tr_30_Template","existing","getVariantName","productVariantId","CollectionTreeComponent_vdr_collection_tree_node_0_Template","expandAll","collectionTree","activeCollectionId","CollectionTreeNodeComponent_div_3_button_3_clr_icon_1_Template","CollectionTreeNodeComponent_div_3_button_3_clr_icon_2_Template","CollectionTreeNodeComponent_div_3_button_3_Template","_r16","collection_r2","expanded","CollectionTreeNodeComponent_div_3_ng_template_4_Template","CollectionTreeNodeComponent_div_3_vdr_chip_8_Template","CollectionTreeNodeComponent_div_3_div_17_Template","_c29","parentId","_c30","CollectionTreeNodeComponent_div_3_a_22_Template","CollectionTreeNodeComponent_div_3_button_37_Template","_r22","move","hasUpdatePermission$","path","CollectionTreeNodeComponent_div_3_vdr_collection_tree_node_44_Template","_c31","contents","_c32","_c33","CollectionTreeNodeComponent_div_3_Template","i_r3","moveUp","moveDown","delete","depth","children","getMoveListItems","hasDeletePermission$","GenerateProductVariantsComponent_div_0_Template","handleEnter","group_r4","removeOption","GenerateProductVariantsComponent_th_9_Template","GenerateProductVariantsComponent_th_10_Template","GenerateProductVariantsComponent_tr_20_td_1_Template","onFormChange","variant_r12","variantFormValues","GenerateProductVariantsComponent_tr_20_td_2_Template","join","GenerateProductVariantsComponent_tr_20_Template","variants","_c34","OptionValueInputComponent_div_1_vdr_chip_1_Template","option_r3","isLast_r4","last","lastSelected","locked","groupName","OptionValueInputComponent_div_1_Template","options","ProductAssetsComponent_div_0_img_3_Template","previewAsset","ProductAssetsComponent_div_0_div_4_Template","_r12","selectAssets","ProductAssetsComponent_div_0_ng_container_6_Template","ProductAssetsComponent_div_0_div_7_Template","_r14","ProductAssetsComponent_div_0_Template","updatePermissions","ProductAssetsComponent_ng_template_1_img_1_Template","_r20","ProductAssetsComponent_ng_template_1_div_2_Template","ProductAssetsComponent_ng_template_1_ng_container_3_Template","ProductAssetsComponent_ng_template_1_button_4_Template","ProductAssetsComponent_ng_template_1_Template","ProductAssetsComponent_ng_template_3_div_1_Template","dropListDropped","asset_r26","setAsFeatured","removeAsset","index_r27","ctx_r25","isFeatured","ProductAssetsComponent_ng_template_3_Template","compact","UpdateProductOptionDialogComponent_ng_template_0_Template","UpdateProductOptionDialogComponent_section_14_ng_container_4_vdr_custom_field_control_1_Template","customField_r6","customFieldsForm","UpdateProductOptionDialogComponent_section_14_ng_container_4_Template","UpdateProductOptionDialogComponent_section_14_Template","UpdateProductOptionDialogComponent_ng_template_15_Template","update","_r1","ProductVariantsListComponent_div_1_ng_container_1_clr_toggle_wrapper_16_Template","ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_option_5_Template","taxCategory_r19","ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_Template","taxCategories","ProductVariantsListComponent_div_1_ng_container_1_ng_template_26_Template","formGroup_r4","ctx_r8","getTaxCategoryName","ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_33_Template","variant_r1","ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_34_Template","ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_37_Template","GlobalFlag","TRUE","FALSE","INHERIT","ProductVariantsListComponent_div_1_ng_container_1_section_81_ng_container_1_vdr_custom_field_control_1_Template","customField_r24","_c35","ProductVariantsListComponent_div_1_ng_container_1_section_81_ng_container_1_Template","ProductVariantsListComponent_div_1_ng_container_1_section_81_Template","ProductVariantsListComponent_div_1_ng_container_1_div_85_vdr_chip_2_Template","option_r30","editOption","ctx_r29","optionGroupName","groupId","optionName","ProductVariantsListComponent_div_1_ng_container_1_div_85_Template","ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_88_Template","_r37","facetValue_r34","removeFacetValue","ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_89_Template","_r41","facetValue_r38","ProductVariantsListComponent_div_1_ng_container_1_button_90_Template","_r44","selectFacetValueClick","emit","ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_vdr_chip_1_Template","_r51","channel_r47","channelId","variant","ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_Template","ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_Template","_r56","channels","ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_Template","ProductVariantsListComponent_div_1_ng_container_1_Template","_r60","onAssetChange","tmp_39_0","pendingAssetChanges","channelPriceIncludesTax","inventoryIsNotTracked","stockAllocated","getSaleableStockLevel","globalOutOfStockThreshold","existingFacetValues","pendingFacetValues","ProductVariantsListComponent_div_1_Template","tmp_0_0","tmp_0_1","formGroupMap","ProductVariantsTableComponent_ng_container_8_Template","optionGroup_r2","ProductVariantsTableComponent_ng_template_19_ng_container_0_img_4_Template","featuredAsset_r13","ProductVariantsTableComponent_ng_template_19_ng_container_0_ng_template_5_Template","ProductVariantsTableComponent_ng_template_19_ng_container_0_ng_container_17_Template","option_r14","formGroup_r6","ProductVariantsTableComponent_ng_template_19_ng_container_0_vdr_currency_input_21_Template","ProductVariantsTableComponent_ng_template_19_ng_container_0_vdr_currency_input_22_Template","ProductVariantsTableComponent_ng_template_19_ng_container_0_Template","getFeaturedAsset","ProductVariantsTableComponent_ng_template_19_Template","_c36","rate","VariantPriceDetailComponent_div_3_Template","taxRate$","_c37","VariantPriceDetailComponent_div_4_Template","grossPrice$","router","route","serverConfigService","notificationService","dataService","formBuilder","getCustomFieldConfig","tags","group","reduce","hash","field","Object","init","destroy","event","_a","_b","markAsDirty","product","updateAsset","success","entity","languageCode","customFieldsGroup","fieldDef","key","control","patchValue","ɵfac","t","ɵcmp","type","selectors","features","decls","vars","consts","template","entity$","directives","pipes","styles","changeDetection","ctorParameters","modalService","searchTerm$","BehaviorSubject","filterByTags$","uploading","setQueryFn","getAssetList","data","skip","take","map","filter","contains","sort","createdAt","DESC","tagsOperator","AND","ngOnInit","paginationConfig$","combineLatest","itemsPerPage$","currentPage$","totalItems$","pipe","itemsPerPage","currentPage","totalItems","debounceTime","takeUntil","destroy$","refresh","allTags$","getTagList","mapStream","items","files","createAssets","finalize","successCount","__typename","message","showModalAndDelete","a","switchMap","response","DELETED","r","assetIds","dialog","title","translationVars","body","buttons","returnValue","res","deleteAssets","filesSelected","setItemsPerPage","setPageNumber","items$","filterTermControl","collectionIdChange$","refresh$","Subject","contentsCurrentPage$","paramMap","qpm","page","startWith","distinctUntilChanged","contentsItemsPerPage$","perPage","filterTerm$","valueChanges","tap","setContentsPageNumber","collection$","filterTerm","collection","getCollectionContents","mapSingle","of","contents$","productVariants","contentsTotalItems$","changes","collectionId","currentValue","complete","setParam","navigate","snapshot","params","relativeTo","queryParamsHandling","contentQueries","dirIndex","_t","headerTemplate","first","inputs","setContentsItemsPerPage","propDecorators","static","changeDetector","UpdateCatalog","UpdateCollection","required","slug","array","getCollectionFilters","single$","collectionFilters","find","f","nameValue","slugControl","currentTranslation","currentSlugIsEmpty","normalizeString","collectionFilter","filtersArray","findIndex","o","argsHash","output","arg","removeAt","mergeMap","category","input","getUpdatedCollection","createCollection","markAsPristine","markForCheck","updateCollection","contentsComponent","canDeactivate","forEach","form","updatedCategory","translatable","updatedFields","customFieldConfig","defaultTranslation","featuredAssetId","mapOperationsToInputs","operations","formValueOperations","arguments","j","viewQuery","setLanguage","availableLanguages$","queryResult","getCollections","refetchOnChannelChange","collections","shareReplay","activeCollectionId$","pm","match","c","getAvailableLanguages","contentLanguage$","client","uiState","contentLanguage","completed$","moveCollection","parent","hasChildren","deleteCollection","setContentLanguage","ref","refetch","onRearrange","UpdateFacet","currentCode","codeControl","valuesFormArray","insert","facetForm","newFacet","getUpdatedFacet","createFacet","getAllFacets","mapTo","facetGroup","updateOperations","updateFacet","valuesArray","newValues","controls","facetId","translations","createFacetValues","getFacet","updatedValues","getUpdatedFacetValues","updateFacetValues","forkJoin","facetValueId","deleted","deleteFacetValues","currentValuesFormArray","valueTranslation","valueControl","at","customValueFieldsGroup","addControl","fieldValue","facetFormGroup","dirtyValues","v","formRow","toString","dirtyValueValues","Error","notNullOrUndefined","getFacets","facets","replaceLast","search","replace","lastIndex","lastIndexOf","substr","settings","getTaxCategories","createProduct$","createProduct","nonEmptyOptionGroups","groups","g","createOptionGroups$","createProductOptionGroups","optionGroup","addOptionGroupToProduct","optionGroupId","optionIds","optionValues","option","og","flat","createProductVariants","createProductOptionGroup","variantData","stockOnHand","updateOptions","_c","autoUpdate","productInput","variantsInput","updateVariantsInput","updateProduct","productOldName","productNewName","currentVariantName","variantInput","existingVariantInput","variantTranslation","updateProductVariants","updateProductVariantNames$","oldOptionName","newOptionName","variantsToUpdate","includes","variantName","deleteProductVariant","getProduct","throwError","ɵprov","factory","token","providedIn","ApplyFacetDialogComponent","setTimeout","selector","focus","resolveWith","priceFactorControl","selectedChannelIdControl","productVariantIds","activeChannelId$","userStatus","activeChannelId","allChannels$","getChannels","availableChannels","ids","selectChannel","variantsPreview$","from","getTopVariants","factor","channelIds","assignVariantsToChannel","priceFactor","assignProductsToChannel","productIds","toPromise","slice","currentChannelIds","productDetailService","location","customOptionGroupFields","autoUpdateVariantNames","facetValueIds","product$","term","toLocaleLowerCase","productFacetValues$","facetValues","allFacetValues$","formFacetValueIdChanges$","getProductFormGroup","val","formChangeFacetValues$","productFacetValues","allFacetValues","combined","fv","merge","p","getActiveChannel","activeChannel","pricesIncludeTax","tabName","replaceState","createUrlTree","DEFAULT_CHANNEL_CODE","fromComponent","size","locals","removeProductsFromChannel","removeVariantsFromChannel","keys","variantId","displayFacetValueModal","productGroup","currentFacetValueIds","unique","existingFacetValueIds","variantFormGroup","every","closable","newProduct","getUpdatedProduct","createProductWithVariants","console","priceIncludesTax","variantsArray","getUpdatedProductVariants","updateSlugAfterSave","cfCurrentTranslation","cfProduct","variantsFormArray","priceWithTax","taxCategoryId","taxCategory","useGlobalOutOfStockThreshold","outOfStockThreshold","trackInventory","productFormGroup","updatedProduct","dirtyVariants","dirtyVariantValues","formValue","results","firstResult","hasOwnProperty","emitEvent","ɵ0$1","searchTermChange","facetValueChange","lastTerm","lastFacetValueIds","filterFacetResults","isFacetValueItem","toLowerCase","startsWith","selectComponent","select","currentTerm","selectedItems","unselect","isArray","searchTermItem","itemsList","markedIndex","facetValueResults","outputs","provide","useValue","onSelectChange","addTagFn","jobQueueService","searchProducts","facetValueOperator","result$","queryParamMap","productSearchInput","setSearchTerm","fvids$","getAll","setFacetValues","delay","__","setQueryParam","q","fvids","reindex","info","addJob","job","state","COMPLETED","time","Intl","NumberFormat","format","duration","indexedItemCount","setFacetValueIds","rebuildSearchIndex","ConfirmVariantDeletionDialogComponent","GeneratedVariant","config","generatedVariants","initOptionsAndVariants","variantInfo","previousVariants","generatedVariantFactory","isDefault","existingVariant","prototypeVariant","_d","_e","_f","prototype","getVariantPrototype","generateAllCombinations","optionsAreEqual","optionsAreSubset","pick","reFetchProduct","newOptionGroups","checkUniqueSkus","confirmDeletionOfObsoleteVariants","createdOptionGroups","addOptionGroupsToProduct","addNewOptionsToGroups","groupsIds","fetchOptionGroups","createNewProductVariants","deleteObsoleteVariants","withDuplicateSkus","gv","trim","obsoleteVariants","getObsoleteVariants","newOptions","createdGroup","cog","productOptionGroupId","allGroupIds","addOptionToGroup","getProductOptionGroup","productOptionGroup","deleteOperations","getProductVariantsOptions","b","toOptionString","x","addOption","getVariantsToAdd","updatedAt","IMAGE","fileSize","mimeType","width","height","preview","focalPoint","getAsset","asset","getCollection","ɵ0","breadcrumb","ɵ1","productBreadcrumb","ɵ2","productVariantEditorBreadcrumb","ɵ3","ɵ4","facetBreadcrumb","ɵ5","ɵ6","collectionBreadcrumb","ɵ7","ɵ8","assetBreadcrumb","catalogRoutes","component","resolve","breadcrumbKey","getName","link","arrayToTree","nodes","currentState","topLevelNodes","mappedArr","currentStateMap","tree","nodeMap","Map","visit","node","set","n","mappedElem","rearrange","newParentId","container","currentIndex","root","parentName","permissions$","permissions","perms","DeleteCatalog","DeleteCollection","expandAllChange","previousValue","parentPath","concat","child","onMove","previousIndex","onDrop","onDelete","drop","trackByFn","decorators","O","variantsChange","sum","copyFromDefault","optionValueInputComponent","preventDefault","stopPropagation","variantsToCreate","prop","OPTION_VALUE_INPUT_VALUE_ACCESSOR","useExisting","multi","disabled","isFocussed","fn","onChangeFn","onTouchFn","isDisabled","obj","textArea","nativeElement","addOptionValue","removeLastOption","parseInputIntoOptions","split","s","handleKey","handleBlur","viewportRuler","collectionDetailComponent","change","updateCollectionPermissions","updateProductPermissions","UpdateProduct","emitChangeEvent","previousContainer","hostVars","hostBindings","assetsSetter","updateVariantName","codeInputTouched","productOption","activeLanguage","assetChange","selectionChange","pagination","getGlobalSettings","globalSettings","globalTrackInventory","subscription","formArray","buildFormGroupMap","unsubscribe","formGroup","effectiveOutOfStockThreshold","areAllSelected","formFacetValueIds","getFacetValueIds","variantFacetValueIds","newValue","controlGroup","trackById","priceChange$","taxCategoryIdChange$","taxRates$","getTaxRates","taxRates","activeChannel$","defaultTaxZone","applicableRate","taxRate","zone","Math","round","CatalogModule","ɵmod","ɵinj","imports","forChild"],"mappings":"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","file":"x","sourcesContent":["import { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function withLatestFrom(...args) {\n    return (source) => {\n        let project;\n        if (typeof args[args.length - 1] === 'function') {\n            project = args.pop();\n        }\n        const observables = args;\n        return source.lift(new WithLatestFromOperator(observables, project));\n    };\n}\nclass WithLatestFromOperator {\n    constructor(observables, project) {\n        this.observables = observables;\n        this.project = project;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new WithLatestFromSubscriber(subscriber, this.observables, this.project));\n    }\n}\nclass WithLatestFromSubscriber extends OuterSubscriber {\n    constructor(destination, observables, project) {\n        super(destination);\n        this.observables = observables;\n        this.project = project;\n        this.toRespond = [];\n        const len = observables.length;\n        this.values = new Array(len);\n        for (let i = 0; i < len; i++) {\n            this.toRespond.push(i);\n        }\n        for (let i = 0; i < len; i++) {\n            let observable = observables[i];\n            this.add(subscribeToResult(this, observable, undefined, i));\n        }\n    }\n    notifyNext(_outerValue, innerValue, outerIndex) {\n        this.values[outerIndex] = innerValue;\n        const toRespond = this.toRespond;\n        if (toRespond.length > 0) {\n            const found = toRespond.indexOf(outerIndex);\n            if (found !== -1) {\n                toRespond.splice(found, 1);\n            }\n        }\n    }\n    notifyComplete() {\n    }\n    _next(value) {\n        if (this.toRespond.length === 0) {\n            const args = [value, ...this.values];\n            if (this.project) {\n                this._tryProject(args);\n            }\n            else {\n                this.destination.next(args);\n            }\n        }\n    }\n    _tryProject(args) {\n        let result;\n        try {\n            result = this.project.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    }\n}\n//# sourceMappingURL=withLatestFrom.js.map","import { Component, ChangeDetectionStrategy, Input, ContentChild, TemplateRef, ChangeDetectorRef, ViewChild, ɵɵdefineInjectable, ɵɵinject, Injectable, EventEmitter, Output, SkipSelf, Optional, forwardRef, HostBinding, NgModule } from '@angular/core';\nimport { Router, ActivatedRoute, RouterModule } from '@angular/router';\nimport { BaseDetailComponent, ServerConfigService, NotificationService, DataService, BaseListComponent, SortOrder, LogicalOperator, DeletionResult, ModalService, Permission, findTranslation, getConfigArgValue, createUpdatedTranslatable, encodeConfigArgValue, FacetValueSelectorComponent, flattenFacetValues, SingleSearchSelectionModelFactory, JobState, JobQueueService, getDefaultUiLanguage, BaseEntityResolver, AssetType, createResolveData, CanDeactivateDetailGuard, detailBreadcrumb, AssetPickerDialogComponent, AssetPreviewDialogComponent, GlobalFlag, SharedModule } from '@vendure/admin-ui/core';\nimport { marker } from '@biesbjerg/ngx-translate-extract-marker';\nimport { map, debounceTime, takeUntil, finalize, switchMap, startWith, distinctUntilChanged, tap, take, mergeMap, shareReplay, mapTo, withLatestFrom, delay, filter } from 'rxjs/operators';\nimport { FormGroup, FormControl, FormBuilder, Validators, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BehaviorSubject, combineLatest, EMPTY, Subject, of, forkJoin, throwError, from, merge } from 'rxjs';\nimport { normalizeString } from '@vendure/common/lib/normalize-string';\nimport { notNullOrUndefined, generateAllCombinations } from '@vendure/common/lib/shared-utils';\nimport { Location } from '@angular/common';\nimport { DEFAULT_CHANNEL_CODE } from '@vendure/common/lib/shared-constants';\nimport { unique } from '@vendure/common/lib/unique';\nimport { __awaiter } from 'tslib';\nimport { SELECTION_MODEL_FACTORY } from '@ng-select/ng-select';\nimport { pick } from '@vendure/common/lib/pick';\nimport { moveItemInArray } from '@angular/cdk/drag-drop';\nimport { ViewportRuler } from '@angular/cdk/overlay';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/router';\nimport * as ɵngcc2 from '@vendure/admin-ui/core';\nimport * as ɵngcc3 from '@angular/forms';\nimport * as ɵngcc4 from '@angular/common';\nimport * as ɵngcc5 from '@ngx-translate/core';\nimport * as ɵngcc6 from 'ngx-pagination';\nimport * as ɵngcc7 from '@clr/angular';\nimport * as ɵngcc8 from '@ng-select/ng-select';\nimport * as ɵngcc9 from '@angular/cdk/drag-drop';\nimport * as ɵngcc10 from '@angular/cdk/overlay';\n\nfunction AssetDetailComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function AssetDetailComponent_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nconst _c0 = function () { return [\"UpdateCatalog\", \"UpdateAsset\"]; };\nconst _c1 = function () { return {}; };\nconst _c2 = function () { return [\"DeleteCatalog\", \"DeleteAsset\"]; };\nfunction CollectionContentsComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nconst _c3 = function () { return { tab: \"variants\" }; };\nconst _c4 = function (a1, a2) { return [\"/catalog/products\", a1, a2]; };\nfunction CollectionContentsComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 5);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"td\", 6);\n    ɵngcc0.ɵɵelement(3, \"vdr-table-row-action\", 7);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r2 = ctx.item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(variant_r2.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(4, 3, \"common.edit\"))(\"linkTo\", ɵngcc0.ɵɵpureFunction2(6, _c4, variant_r2.productId, ɵngcc0.ɵɵpureFunction0(5, _c3)));\n} }\nconst _c5 = function (a0) { return { $implicit: a0 }; };\nconst _c6 = [\"collectionContents\"];\nfunction CollectionDetailComponent_button_10_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionDetailComponent_button_10_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.create(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction CollectionDetailComponent_ng_template_12_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionDetailComponent_ng_template_12_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", (ctx_r6.detailForm.invalid || ctx_r6.detailForm.pristine) && !ctx_r6.assetsChanged());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction CollectionDetailComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, CollectionDetailComponent_ng_template_12_button_0_Template, 3, 4, \"button\", 7);\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r2.updatePermission);\n} }\nfunction CollectionDetailComponent_form_14_ng_container_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction CollectionDetailComponent_form_14_ng_template_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c7 = function () { return [\"customFields\"]; };\nfunction CollectionDetailComponent_form_14_section_24_ng_container_4_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 31);\n} if (rf & 2) {\n    const customField_r19 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r20 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r20.detailForm.get(ɵngcc0.ɵɵpureFunction0(2, _c7)))(\"customField\", customField_r19);\n} }\nfunction CollectionDetailComponent_form_14_section_24_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, CollectionDetailComponent_form_14_section_24_ng_container_4_vdr_custom_field_control_1_Template, 1, 3, \"vdr-custom-field-control\", 30);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r19 = ctx.$implicit;\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r18.customFieldIsSet(customField_r19.name));\n} }\nfunction CollectionDetailComponent_form_14_section_24_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 29);\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, CollectionDetailComponent_form_14_section_24_ng_container_4_Template, 2, 1, \"ng-container\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"common.custom-fields\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r13.customFields);\n} }\nfunction CollectionDetailComponent_form_14_ng_container_32_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-configurable-input\", 32);\n    ɵngcc0.ɵɵlistener(\"remove\", function CollectionDetailComponent_form_14_ng_container_32_Template_vdr_configurable_input_remove_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r25); const ctx_r24 = ɵngcc0.ɵɵnextContext(2); return ctx_r24.removeFilter($event); });\n    ɵngcc0.ɵɵpipe(2, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const filter_r22 = ctx.$implicit;\n    const i_r23 = ctx.index;\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"operation\", filter_r22)(\"operationDefinition\", ctx_r14.getFilterDefinition(filter_r22))(\"formControlName\", i_r23)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(2, 4, ctx_r14.updatePermission));\n} }\nfunction CollectionDetailComponent_form_14_div_33_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 37);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionDetailComponent_form_14_div_33_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r29); const filter_r27 = ctx.$implicit; const ctx_r28 = ɵngcc0.ɵɵnextContext(3); return ctx_r28.addFilter(filter_r27); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const filter_r27 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", filter_r27.description, \" \");\n} }\nfunction CollectionDetailComponent_form_14_div_33_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(2, \"button\", 33);\n    ɵngcc0.ɵɵelement(3, \"clr-icon\", 34);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"vdr-dropdown-menu\", 35);\n    ɵngcc0.ɵɵtemplate(7, CollectionDetailComponent_form_14_div_33_button_7_Template, 2, 1, \"button\", 36);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 2, \"marketing.add-condition\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r15.allFilters);\n} }\nconst _c8 = function (a0) { return { count: a0 }; };\nfunction CollectionDetailComponent_form_14_ng_template_37_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 38);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const count_r30 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"catalog.collection-contents\"), \" (\", ɵngcc0.ɵɵpipeBind2(3, 4, \"common.results-count\", ɵngcc0.ɵɵpureFunction1(7, _c8, count_r30)), \") \");\n} }\nconst _c9 = function (a0) { return { pattern: a0 }; };\nfunction CollectionDetailComponent_form_14_Template(rf, ctx) { if (rf & 1) {\n    const _r32 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 8);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 9);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(3, \"vdr-form-field\", 11);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementStart(5, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(6, \"input\", 12);\n    ɵngcc0.ɵɵpipe(7, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(8, \"label\", 13);\n    ɵngcc0.ɵɵtemplate(9, CollectionDetailComponent_form_14_ng_container_9_Template, 3, 3, \"ng-container\", 14);\n    ɵngcc0.ɵɵtemplate(10, CollectionDetailComponent_form_14_ng_template_10_Template, 2, 3, \"ng-template\", null, 15, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"vdr-form-field\", 16);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵelementStart(14, \"input\", 17);\n    ɵngcc0.ɵɵlistener(\"input\", function CollectionDetailComponent_form_14_Template_input_input_14_listener($event) { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.updateSlug($event.target.value); });\n    ɵngcc0.ɵɵpipe(15, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"vdr-form-field\", 18);\n    ɵngcc0.ɵɵpipe(17, \"translate\");\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelement(19, \"input\", 19);\n    ɵngcc0.ɵɵpipe(20, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(21, \"vdr-rich-text-editor\", 20);\n    ɵngcc0.ɵɵpipe(22, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵtemplate(24, CollectionDetailComponent_form_14_section_24_Template, 5, 4, \"section\", 21);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(25, \"div\", 22);\n    ɵngcc0.ɵɵelementStart(26, \"vdr-product-assets\", 23);\n    ɵngcc0.ɵɵlistener(\"change\", function CollectionDetailComponent_form_14_Template_vdr_product_assets_change_26_listener($event) { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r33 = ɵngcc0.ɵɵnextContext(); return ctx_r33.assetChanges = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(27, \"div\", 24);\n    ɵngcc0.ɵɵelementStart(28, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(29, \"label\");\n    ɵngcc0.ɵɵtext(30);\n    ɵngcc0.ɵɵpipe(31, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(32, CollectionDetailComponent_form_14_ng_container_32_Template, 3, 6, \"ng-container\", 25);\n    ɵngcc0.ɵɵtemplate(33, CollectionDetailComponent_form_14_div_33_Template, 8, 4, \"div\", 26);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(34, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(35, \"vdr-collection-contents\", 27, 28);\n    ɵngcc0.ɵɵtemplate(37, CollectionDetailComponent_form_14_ng_template_37_Template, 4, 9, \"ng-template\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const category_r9 = ctx.ngIf;\n    const _r11 = ɵngcc0.ɵɵreference(11);\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r3.detailForm);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(4, 19, \"catalog.visibility\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"vdrDisabled\", !ɵngcc0.ɵɵpipeBind1(7, 21, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.detailForm.value.visible)(\"ngIfElse\", _r11);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(13, 23, \"common.name\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(15, 25, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(17, 27, \"catalog.slug\"))(\"errors\", ɵngcc0.ɵɵpureFunction1(39, _c9, ɵngcc0.ɵɵpipeBind1(18, 29, \"catalog.slug-pattern-error\")));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(20, 31, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(22, 33, ctx_r3.updatePermission))(\"label\", ɵngcc0.ɵɵpipeBind1(23, 35, \"common.description\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.customFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"assets\", category_r9.assets)(\"featuredAsset\", category_r9.featuredAsset);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(31, 37, \"catalog.filters\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.filters);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r3.updatePermission);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"collectionId\", ctx_r3.id);\n} }\nconst _c10 = function () { return [\"./create\"]; };\nfunction CollectionListComponent_a_14_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 10);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 11);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c10));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.create-new-collection\"), \" \");\n} }\nfunction CollectionListComponent_ng_template_23_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionListComponent_ng_template_23_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.closeContents(); });\n    ɵngcc0.ɵɵelement(5, \"clr-icon\", 14);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const count_r2 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, ctx_r1.activeCollectionTitle$), \" (\", ɵngcc0.ɵɵpipeBind2(3, 4, \"common.results-count\", ɵngcc0.ɵɵpureFunction1(7, _c8, count_r2)), \") \");\n} }\nconst _c11 = function () { return [\"CreateCatalog\", \"CreateCollection\"]; };\nfunction FacetDetailComponent_button_10_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetDetailComponent_button_10_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.create(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.detailForm.invalid || ctx_r0.detailForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction FacetDetailComponent_ng_template_12_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetDetailComponent_ng_template_12_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r6.detailForm.invalid || ctx_r6.detailForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nfunction FacetDetailComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, FacetDetailComponent_ng_template_12_button_0_Template, 3, 4, \"button\", 7);\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r2.updatePermission);\n} }\nfunction FacetDetailComponent_form_14_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction FacetDetailComponent_form_14_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c12 = function () { return [\"facet\", \"customFields\"]; };\nfunction FacetDetailComponent_form_14_section_20_ng_container_4_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 24);\n} if (rf & 2) {\n    const customField_r16 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r17 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r17.detailForm.get(ɵngcc0.ɵɵpureFunction0(2, _c12)))(\"customField\", customField_r16);\n} }\nfunction FacetDetailComponent_form_14_section_20_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, FacetDetailComponent_form_14_section_20_ng_container_4_vdr_custom_field_control_1_Template, 1, 3, \"vdr-custom-field-control\", 23);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r16 = ctx.$implicit;\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r15.customFieldIsSet(customField_r16.name));\n} }\nfunction FacetDetailComponent_form_14_section_20_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 21);\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, FacetDetailComponent_form_14_section_20_ng_container_4_Template, 2, 1, \"ng-container\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"common.custom-fields\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r13.customFields);\n} }\nfunction FacetDetailComponent_form_14_section_21_table_4_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"th\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r23 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(customField_r23.name);\n} }\nconst _c13 = function (a1) { return [\"values\", a1, \"customFields\"]; };\nfunction FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_vdr_custom_field_control_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 40);\n} if (rf & 2) {\n    const customField_r27 = ɵngcc0.ɵɵnextContext().$implicit;\n    const i_r25 = ɵngcc0.ɵɵnextContext().index;\n    const ctx_r28 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"showLabel\", false)(\"customFieldsFormGroup\", ctx_r28.detailForm.get(ɵngcc0.ɵɵpureFunction1(3, _c13, i_r25)))(\"customField\", customField_r27);\n} }\nfunction FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 31);\n    ɵngcc0.ɵɵtemplate(2, FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_vdr_custom_field_control_2_Template, 1, 5, \"vdr-custom-field-control\", 39);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r27 = ctx.$implicit;\n    const i_r25 = ɵngcc0.ɵɵnextContext().index;\n    const ctx_r26 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r26.customValueFieldIsSet(i_r25, customField_r27.name));\n} }\nfunction FacetDetailComponent_form_14_section_21_table_4_tr_13_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 30);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 31);\n    ɵngcc0.ɵɵelement(2, \"vdr-entity-info\", 0);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\", 31);\n    ɵngcc0.ɵɵelementStart(4, \"input\", 32);\n    ɵngcc0.ɵɵlistener(\"input\", function FacetDetailComponent_form_14_section_21_table_4_tr_13_Template_input_input_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r34); const i_r25 = ctx.index; const facet_r9 = ɵngcc0.ɵɵnextContext(3).ngIf; const ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.updateValueCode(facet_r9.values[i_r25] == null ? null : facet_r9.values[i_r25].code, $event.target.value, i_r25); });\n    ɵngcc0.ɵɵpipe(5, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\", 31);\n    ɵngcc0.ɵɵelement(7, \"input\", 33);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(8, FacetDetailComponent_form_14_section_21_table_4_tr_13_ng_container_8_Template, 3, 1, \"ng-container\", 22);\n    ɵngcc0.ɵɵelementStart(9, \"td\", 31);\n    ɵngcc0.ɵɵelementStart(10, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(11, \"button\", 34);\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵelement(14, \"clr-icon\", 35);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"vdr-dropdown-menu\", 36);\n    ɵngcc0.ɵɵelementStart(16, \"button\", 37);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetDetailComponent_form_14_section_21_table_4_tr_13_Template_button_click_16_listener() { ɵngcc0.ɵɵrestoreView(_r34); const i_r25 = ctx.index; const facet_r9 = ɵngcc0.ɵɵnextContext(3).ngIf; const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.deleteFacetValue(facet_r9.values[i_r25] == null ? null : facet_r9.values[i_r25].id, i_r25); });\n    ɵngcc0.ɵɵpipe(17, \"hasPermission\");\n    ɵngcc0.ɵɵelement(18, \"clr-icon\", 38);\n    ɵngcc0.ɵɵtext(19);\n    ɵngcc0.ɵɵpipe(20, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const value_r24 = ctx.$implicit;\n    const i_r25 = ctx.index;\n    const ctx_r22 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"formGroupName\", i_r25);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"entity\", value_r24);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(5, 7, ctx_r22.updatePermission));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r22.customValueFields);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 9, \"common.actions\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(17, 11, ctx_r22.updatePermission));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(20, 13, \"common.delete\"), \" \");\n} }\nfunction FacetDetailComponent_form_14_section_21_table_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"table\", 28);\n    ɵngcc0.ɵɵelementStart(1, \"thead\");\n    ɵngcc0.ɵɵelementStart(2, \"tr\");\n    ɵngcc0.ɵɵelement(3, \"th\");\n    ɵngcc0.ɵɵelementStart(4, \"th\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"th\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(10, FacetDetailComponent_form_14_section_21_table_4_ng_container_10_Template, 3, 1, \"ng-container\", 22);\n    ɵngcc0.ɵɵelement(11, \"th\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"tbody\");\n    ɵngcc0.ɵɵtemplate(13, FacetDetailComponent_form_14_section_21_table_4_tr_13_Template, 21, 15, \"tr\", 29);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 4, \"common.name\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 6, \"common.code\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r19.customValueFields);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r19.values);\n} }\nfunction FacetDetailComponent_form_14_section_21_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 41);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetDetailComponent_form_14_section_21_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const ctx_r37 = ɵngcc0.ɵɵnextContext(3); return ctx_r37.addFacetValue(); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 42);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.add-facet-value\"), \" \");\n} }\nconst _c14 = function () { return [\"CreateCatalog\", \"CreateFacet\"]; };\nfunction FacetDetailComponent_form_14_section_21_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 25);\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, FacetDetailComponent_form_14_section_21_table_4_Template, 14, 8, \"table\", 26);\n    ɵngcc0.ɵɵelementStart(5, \"div\");\n    ɵngcc0.ɵɵtemplate(6, FacetDetailComponent_form_14_section_21_button_6_Template, 4, 3, \"button\", 27);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 3, \"catalog.facet-values\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", 0 < ctx_r14.getValuesFormArray().length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(5, _c14));\n} }\nfunction FacetDetailComponent_form_14_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 8);\n    ɵngcc0.ɵɵelementStart(1, \"section\", 9);\n    ɵngcc0.ɵɵelementStart(2, \"vdr-form-field\", 10);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementStart(4, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(5, \"input\", 11);\n    ɵngcc0.ɵɵpipe(6, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(7, \"label\", 12);\n    ɵngcc0.ɵɵtemplate(8, FacetDetailComponent_form_14_ng_container_8_Template, 3, 3, \"ng-container\", 13);\n    ɵngcc0.ɵɵtemplate(9, FacetDetailComponent_form_14_ng_template_9_Template, 2, 3, \"ng-template\", null, 14, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"vdr-form-field\", 15);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementStart(13, \"input\", 16);\n    ɵngcc0.ɵɵlistener(\"input\", function FacetDetailComponent_form_14_Template_input_input_13_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const facet_r9 = ctx.ngIf; const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.updateCode(facet_r9.code, $event.target.value); });\n    ɵngcc0.ɵɵpipe(14, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"vdr-form-field\", 17);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵpipe(17, \"hasPermission\");\n    ɵngcc0.ɵɵelement(18, \"input\", 18);\n    ɵngcc0.ɵɵpipe(19, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(20, FacetDetailComponent_form_14_section_20_Template, 5, 4, \"section\", 19);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(21, FacetDetailComponent_form_14_section_21_Template, 7, 6, \"section\", 20);\n    ɵngcc0.ɵɵpipe(22, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r11 = ɵngcc0.ɵɵreference(10);\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r3.detailForm);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(3, 12, \"catalog.visibility\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"vdrDisabled\", !ɵngcc0.ɵɵpipeBind1(6, 14, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.detailForm.value.facet.visible)(\"ngIfElse\", _r11);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(12, 16, \"common.name\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(14, 18, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(16, 20, \"common.code\"))(\"readOnlyToggle\", ɵngcc0.ɵɵpipeBind1(17, 22, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(19, 24, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.customFields.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ɵngcc0.ɵɵpipeBind1(22, 26, ctx_r3.isNew$));\n} }\nconst _c15 = \".visible-toggle[_ngcontent-%COMP%]{margin-top:-3px!important}\";\nfunction FacetListComponent_a_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 5);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 6);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c10));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.create-new-facet\"), \" \");\n} }\nfunction FacetListComponent_ng_template_27_vdr_facet_value_chip_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-facet-value-chip\", 19);\n} if (rf & 2) {\n    const value_r8 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"facetValue\", value_r8)(\"removable\", false)(\"displayFacetName\", false);\n} }\nfunction FacetListComponent_ng_template_27_button_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 6);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const facet_r2 = ɵngcc0.ɵɵnextContext(2).item;\n    const ctx_r9 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", facet_r2.values.length - ctx_r9.initialLimit, \" \");\n} }\nfunction FacetListComponent_ng_template_27_button_7_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 22);\n} }\nfunction FacetListComponent_ng_template_27_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetListComponent_ng_template_27_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const facet_r2 = ɵngcc0.ɵɵnextContext().item; const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.toggleDisplayLimit(facet_r2); });\n    ɵngcc0.ɵɵtemplate(1, FacetListComponent_ng_template_27_button_7_ng_container_1_Template, 3, 1, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(2, FacetListComponent_ng_template_27_button_7_ng_template_2_Template, 1, 0, \"ng-template\", null, 21, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r10 = ɵngcc0.ɵɵreference(3);\n    const facet_r2 = ɵngcc0.ɵɵnextContext().item;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", (ctx_r4.displayLimit[facet_r2.id] || 0) < facet_r2.values.length)(\"ngIfElse\", _r10);\n} }\nfunction FacetListComponent_ng_template_27_ng_container_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.public\"));\n} }\nfunction FacetListComponent_ng_template_27_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.private\"));\n} }\nconst _c16 = function (a1) { return [\"./\", a1]; };\nconst _c17 = function () { return [\"DeleteCatalog\", \"DeleteFacet\"]; };\nfunction FacetListComponent_ng_template_27_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\", 7);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"td\", 7);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"td\", 7);\n    ɵngcc0.ɵɵtemplate(5, FacetListComponent_ng_template_27_vdr_facet_value_chip_5_Template, 1, 3, \"vdr-facet-value-chip\", 8);\n    ɵngcc0.ɵɵpipe(6, \"slice\");\n    ɵngcc0.ɵɵtemplate(7, FacetListComponent_ng_template_27_button_7_Template, 4, 2, \"button\", 9);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"td\", 7);\n    ɵngcc0.ɵɵelementStart(9, \"vdr-chip\");\n    ɵngcc0.ɵɵtemplate(10, FacetListComponent_ng_template_27_ng_container_10_Template, 3, 3, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(11, FacetListComponent_ng_template_27_ng_template_11_Template, 2, 3, \"ng-template\", null, 11, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"td\", 12);\n    ɵngcc0.ɵɵelement(14, \"vdr-table-row-action\", 13);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"td\", 12);\n    ɵngcc0.ɵɵelementStart(17, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(18, \"button\", 14);\n    ɵngcc0.ɵɵtext(19);\n    ɵngcc0.ɵɵpipe(20, \"translate\");\n    ɵngcc0.ɵɵelement(21, \"clr-icon\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(22, \"vdr-dropdown-menu\", 16);\n    ɵngcc0.ɵɵelementStart(23, \"button\", 17);\n    ɵngcc0.ɵɵlistener(\"click\", function FacetListComponent_ng_template_27_Template_button_click_23_listener() { ɵngcc0.ɵɵrestoreView(_r18); const facet_r2 = ctx.item; const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.deleteFacet(facet_r2.id); });\n    ɵngcc0.ɵɵpipe(24, \"hasPermission\");\n    ɵngcc0.ɵɵelement(25, \"clr-icon\", 18);\n    ɵngcc0.ɵɵtext(26);\n    ɵngcc0.ɵɵpipe(27, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const facet_r2 = ctx.item;\n    const _r6 = ɵngcc0.ɵɵreference(12);\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(facet_r2.code);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(facet_r2.name);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind3(6, 23, facet_r2.values, 0, ctx_r1.displayLimit[facet_r2.id] || 3));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", facet_r2.values.length > ctx_r1.initialLimit);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !facet_r2.isPrivate)(\"ngIfElse\", _r6);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(15, 27, \"common.edit\"))(\"linkTo\", ɵngcc0.ɵɵpureFunction1(35, _c16, facet_r2.id));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"private\", facet_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(20, 29, \"common.actions\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(24, 31, ɵngcc0.ɵɵpureFunction0(37, _c17)));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(27, 33, \"common.delete\"), \" \");\n} }\nfunction ApplyFacetDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.add-facets\"));\n} }\nfunction ApplyFacetDialogComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function ApplyFacetDialogComponent_ng_template_2_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function ApplyFacetDialogComponent_ng_template_2_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.selectValues(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r1.selectedValues.length === 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"catalog.add-facets\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_0_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.assign-variants-to-channel\"));\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_0_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.assign-products-to-channel\"));\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, AssignProductsToChannelDialogComponent_ng_template_0_ng_container_0_Template, 3, 3, \"ng-container\", 12);\n    ɵngcc0.ɵɵtemplate(1, AssignProductsToChannelDialogComponent_ng_template_0_ng_template_1_Template, 2, 3, \"ng-template\", null, 13, ɵngcc0.ɵɵtemplateRefExtractor);\n} if (rf & 2) {\n    const _r7 = ɵngcc0.ɵɵreference(2);\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.isProductVariantMode)(\"ngIfElse\", _r7);\n} }\nconst _c18 = function (a0) { return { channel: a0 }; };\nfunction AssignProductsToChannelDialogComponent_ng_template_29_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(1, 1, \"catalog.price-in-channel\", ɵngcc0.ɵɵpureFunction1(4, _c18, ctx_r1.selectedChannel == null ? null : ctx_r1.selectedChannel.code)), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_30_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.no-channel-selected\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"localeCurrency\");\n} if (rf & 2) {\n    const row_r9 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(1, 1, row_r9.pricePreview, ctx_r10.selectedChannel == null ? null : ctx_r10.selectedChannel.currencyCode), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_ng_template_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0, \" - \");\n} }\nfunction AssignProductsToChannelDialogComponent_tr_33_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵelementStart(1, \"td\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\");\n    ɵngcc0.ɵɵtemplate(7, AssignProductsToChannelDialogComponent_tr_33_ng_template_7_Template, 2, 4, \"ng-template\", 8);\n    ɵngcc0.ɵɵtemplate(8, AssignProductsToChannelDialogComponent_tr_33_ng_template_8_Template, 1, 0, \"ng-template\", null, 14, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r9 = ctx.$implicit;\n    const _r11 = ɵngcc0.ɵɵreference(9);\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(row_r9.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(5, 4, row_r9.price, ctx_r4.currentChannel == null ? null : ctx_r4.currentChannel.currencyCode));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.selectedChannel)(\"ngIfElse\", _r11);\n} }\nconst _c19 = function (a0) { return { channelCode: a0 }; };\nfunction AssignProductsToChannelDialogComponent_ng_template_35_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(1, 1, \"catalog.assign-to-named-channel\", ɵngcc0.ɵɵpureFunction1(4, _c19, ctx_r14.selectedChannel == null ? null : ctx_r14.selectedChannel.code)), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_35_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.no-channel-selected\"), \" \");\n} }\nfunction AssignProductsToChannelDialogComponent_ng_template_35_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function AssignProductsToChannelDialogComponent_ng_template_35_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function AssignProductsToChannelDialogComponent_ng_template_35_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.assign(); });\n    ɵngcc0.ɵɵtemplate(4, AssignProductsToChannelDialogComponent_ng_template_35_ng_template_4_Template, 2, 6, \"ng-template\", 8);\n    ɵngcc0.ɵɵtemplate(5, AssignProductsToChannelDialogComponent_ng_template_35_ng_template_5_Template, 2, 3, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r15 = ɵngcc0.ɵɵreference(6);\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 4, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r5.selectedChannel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.selectedChannel)(\"ngIfElse\", _r15);\n} }\nconst _c20 = function () { return [\"product\", \"enabled\"]; };\nfunction ProductDetailComponent_clr_toggle_wrapper_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(1, \"input\", 8);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r0.detailForm.get(ɵngcc0.ɵɵpureFunction0(4, _c20)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 2, \"common.enabled\"));\n} }\nfunction ProductDetailComponent_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_button_12_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.create(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r1.detailForm.invalid || ctx_r1.detailForm.pristine || !ctx_r1.variantsToCreateAreValid());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.create\"), \" \");\n} }\nfunction ProductDetailComponent_ng_template_14_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_ng_template_14_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(2); return ctx_r8.save(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", (ctx_r7.detailForm.invalid || ctx_r7.detailForm.pristine) && !ctx_r7.assetsChanged() && !ctx_r7.variantAssetsChanged());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"common.update\"), \" \");\n} }\nconst _c21 = function () { return [\"UpdateCatalog\", \"UpdateProduct\"]; };\nfunction ProductDetailComponent_ng_template_14_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductDetailComponent_ng_template_14_button_0_Template, 3, 4, \"button\", 10);\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(1, _c21));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_ng_container_3_vdr_chip_1_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 40);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_ng_container_3_vdr_chip_1_Template_vdr_chip_iconClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r24); const channel_r20 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r22 = ɵngcc0.ɵɵnextContext(5); return ctx_r22.removeFromChannel(channel_r20.id); });\n    ɵngcc0.ɵɵelement(1, \"vdr-channel-badge\", 41);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"channelCodeToLabel\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const channel_r20 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"channelCode\", channel_r20.code);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, channel_r20.code), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_ng_container_3_vdr_chip_1_Template, 4, 4, \"vdr-chip\", 39);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const channel_r20 = ctx.$implicit;\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r19.isDefaultChannel(channel_r20.code));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-form-item\", 34);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelementStart(2, \"div\", 35);\n    ɵngcc0.ɵɵtemplate(3, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_ng_container_3_Template, 2, 1, \"ng-container\", 36);\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵelementStart(5, \"button\", 37);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_Template_button_click_5_listener() { ɵngcc0.ɵɵrestoreView(_r27); const ctx_r26 = ɵngcc0.ɵɵnextContext(4); return ctx_r26.assignToChannel(); });\n    ɵngcc0.ɵɵelement(6, \"clr-icon\", 38);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵpipe(8, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(1, 3, \"common.channels\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(4, 5, ctx_r18.productChannels$));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(8, 7, \"catalog.assign-to-channel\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_vdr_form_item_1_Template, 9, 9, \"vdr-form-item\", 33);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nconst _c22 = function () { return [\"product\", \"customFields\"]; };\nfunction ProductDetailComponent_form_16_clr_tab_content_7_section_24_ng_container_4_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 44);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const customField_r29 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r30 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r30.detailForm.get(ɵngcc0.ɵɵpureFunction0(5, _c22)))(\"customField\", customField_r29)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 3, ɵngcc0.ɵɵpureFunction0(6, _c21)));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_section_24_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductDetailComponent_form_16_clr_tab_content_7_section_24_ng_container_4_vdr_custom_field_control_1_Template, 2, 7, \"vdr-custom-field-control\", 43);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r29 = ctx.$implicit;\n    const ctx_r28 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r28.customFieldIsSet(customField_r29.name));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_section_24_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 42);\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, ProductDetailComponent_form_16_clr_tab_content_7_section_24_ng_container_4_Template, 2, 1, \"ng-container\", 36);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"common.custom-fields\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r14.customFields);\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_vdr_facet_value_chip_26_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-facet-value-chip\", 45);\n    ɵngcc0.ɵɵlistener(\"remove\", function ProductDetailComponent_form_16_clr_tab_content_7_vdr_facet_value_chip_26_Template_vdr_facet_value_chip_remove_0_listener() { ɵngcc0.ɵɵrestoreView(_r34); const facetValue_r32 = ctx.$implicit; const ctx_r33 = ɵngcc0.ɵɵnextContext(3); return ctx_r33.removeProductFacetValue(facetValue_r32.id); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const facetValue_r32 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"facetValue\", facetValue_r32)(\"removable\", ɵngcc0.ɵɵpipeBind1(1, 2, ɵngcc0.ɵɵpureFunction0(4, _c21)));\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_button_28_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 46);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_content_7_button_28_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r36); const ctx_r35 = ɵngcc0.ɵɵnextContext(3); return ctx_r35.selectProductFacetValue(); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 47);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.add-facets\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_content_7_div_31_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"h4\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"vdr-generate-product-variants\", 48);\n    ɵngcc0.ɵɵlistener(\"variantsChange\", function ProductDetailComponent_form_16_clr_tab_content_7_div_31_Template_vdr_generate_product_variants_variantsChange_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r38); const ctx_r37 = ɵngcc0.ɵɵnextContext(3); return ctx_r37.createVariantsConfig = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.product-variants\"));\n} }\nconst _c23 = function () { return [\"product\", \"name\"]; };\nfunction ProductDetailComponent_form_16_clr_tab_content_7_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-tab-content\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 16);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 17);\n    ɵngcc0.ɵɵelementStart(3, \"section\", 18);\n    ɵngcc0.ɵɵtemplate(4, ProductDetailComponent_form_16_clr_tab_content_7_ng_container_4_Template, 2, 0, \"ng-container\", 19);\n    ɵngcc0.ɵɵelementStart(5, \"vdr-form-field\", 20);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementStart(7, \"input\", 21);\n    ɵngcc0.ɵɵlistener(\"input\", function ProductDetailComponent_form_16_clr_tab_content_7_Template_input_input_7_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r39 = ɵngcc0.ɵɵnextContext(2); return ctx_r39.updateSlug($event.target.value); });\n    ɵngcc0.ɵɵpipe(8, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"div\", 22);\n    ɵngcc0.ɵɵpipe(10, \"async\");\n    ɵngcc0.ɵɵelementStart(11, \"clr-checkbox-wrapper\");\n    ɵngcc0.ɵɵelement(12, \"input\", 23);\n    ɵngcc0.ɵɵelementStart(13, \"label\");\n    ɵngcc0.ɵɵtext(14);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"vdr-form-field\", 24);\n    ɵngcc0.ɵɵpipe(17, \"translate\");\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelement(19, \"input\", 25);\n    ɵngcc0.ɵɵpipe(20, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(21, \"vdr-rich-text-editor\", 26);\n    ɵngcc0.ɵɵpipe(22, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵtemplate(24, ProductDetailComponent_form_16_clr_tab_content_7_section_24_Template, 5, 4, \"section\", 27);\n    ɵngcc0.ɵɵelementStart(25, \"div\", 28);\n    ɵngcc0.ɵɵtemplate(26, ProductDetailComponent_form_16_clr_tab_content_7_vdr_facet_value_chip_26_Template, 2, 5, \"vdr-facet-value-chip\", 29);\n    ɵngcc0.ɵɵpipe(27, \"async\");\n    ɵngcc0.ɵɵtemplate(28, ProductDetailComponent_form_16_clr_tab_content_7_button_28_Template, 4, 3, \"button\", 30);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(29, \"div\", 31);\n    ɵngcc0.ɵɵelementStart(30, \"vdr-product-assets\", 32);\n    ɵngcc0.ɵɵlistener(\"change\", function ProductDetailComponent_form_16_clr_tab_content_7_Template_vdr_product_assets_change_30_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r41 = ɵngcc0.ɵɵnextContext(2); return ctx_r41.assetChanges = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(31, ProductDetailComponent_form_16_clr_tab_content_7_div_31_Template, 5, 3, \"div\", 15);\n    ɵngcc0.ɵɵpipe(32, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const product_r10 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r11 = ɵngcc0.ɵɵnextContext();\n    let tmp_2_0 = null;\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(6, 16, \"catalog.product-name\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(8, 18, ɵngcc0.ɵɵpureFunction0(38, _c21)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"visible\", ɵngcc0.ɵɵpipeBind1(10, 20, ctx_r11.isNew$) === false && ((tmp_2_0 = ctx_r11.detailForm.get(ɵngcc0.ɵɵpureFunction0(39, _c23))) == null ? null : tmp_2_0.dirty));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 22, \"catalog.auto-update-product-variant-name\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(17, 24, \"catalog.slug\"))(\"errors\", ɵngcc0.ɵɵpureFunction1(40, _c9, ɵngcc0.ɵɵpipeBind1(18, 26, \"catalog.slug-pattern-error\")));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(20, 28, ɵngcc0.ɵɵpureFunction0(42, _c21)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(22, 30, ɵngcc0.ɵɵpureFunction0(43, _c21)))(\"label\", ɵngcc0.ɵɵpipeBind1(23, 32, \"common.description\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r11.customFields.length);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(27, 34, ctx_r11.facetValues$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(44, _c21));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"assets\", ctx_r11.assetChanges.assets || product_r10.assets)(\"featuredAsset\", ctx_r11.assetChanges.featuredAsset || product_r10.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(32, 36, ctx_r11.isNew$));\n} }\nconst _c24 = function () { return [\"./\", \"manage-variants\"]; };\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_a_18_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 64);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 65);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c24));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.manage-variants\"), \" \");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_table_19_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-product-variants-table\", 66);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵpipe(2, \"async\");\n} if (rf & 2) {\n    const product_r10 = ɵngcc0.ɵɵnextContext(3).ngIf;\n    const ctx_r45 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"variants\", ɵngcc0.ɵɵpipeBind1(1, 5, ctx_r45.variants$))(\"optionGroups\", product_r10.optionGroups)(\"channelPriceIncludesTax\", ɵngcc0.ɵɵpipeBind1(2, 7, ctx_r45.channelPriceIncludesTax$))(\"productVariantsFormArray\", ctx_r45.detailForm.get(\"variants\"))(\"pendingAssetChanges\", ctx_r45.variantAssetChanges);\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template(rf, ctx) { if (rf & 1) {\n    const _r49 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-product-variants-list\", 67);\n    ɵngcc0.ɵɵlistener(\"assignToChannel\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template_vdr_product_variants_list_assignToChannel_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r48 = ɵngcc0.ɵɵnextContext(4); return ctx_r48.assignVariantToChannel($event); })(\"removeFromChannel\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template_vdr_product_variants_list_removeFromChannel_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r50 = ɵngcc0.ɵɵnextContext(4); return ctx_r50.removeVariantFromChannel($event); })(\"assetChange\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template_vdr_product_variants_list_assetChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r51 = ɵngcc0.ɵɵnextContext(4); return ctx_r51.variantAssetChange($event); })(\"updateProductOption\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template_vdr_product_variants_list_updateProductOption_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r52 = ɵngcc0.ɵɵnextContext(4); return ctx_r52.updateProductOption($event); })(\"selectionChange\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template_vdr_product_variants_list_selectionChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r53 = ɵngcc0.ɵɵnextContext(4); return ctx_r53.selectedVariantIds = $event; })(\"selectFacetValueClick\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template_vdr_product_variants_list_selectFacetValueClick_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r49); const ctx_r54 = ɵngcc0.ɵɵnextContext(4); return ctx_r54.selectVariantFacetValue($event); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const product_r10 = ɵngcc0.ɵɵnextContext(3).ngIf;\n    const ctx_r46 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"variants\", ɵngcc0.ɵɵpipeBind1(1, 10, ctx_r46.variants$))(\"channelPriceIncludesTax\", ɵngcc0.ɵɵpipeBind1(2, 12, ctx_r46.channelPriceIncludesTax$))(\"facets\", ɵngcc0.ɵɵpipeBind1(3, 14, ctx_r46.facets$))(\"optionGroups\", product_r10.optionGroups)(\"productVariantsFormArray\", ctx_r46.detailForm.get(\"variants\"))(\"taxCategories\", ɵngcc0.ɵɵpipeBind1(4, 16, ctx_r46.taxCategories$))(\"customFields\", ctx_r46.customVariantFields)(\"customOptionFields\", ctx_r46.customOptionFields)(\"activeLanguage\", ɵngcc0.ɵɵpipeBind1(5, 18, ctx_r46.languageCode$))(\"pendingAssetChanges\", ctx_r46.variantAssetChanges);\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template(rf, ctx) { if (rf & 1) {\n    const _r57 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-tab-content\");\n    ɵngcc0.ɵɵelementStart(1, \"section\", 49);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 50);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 51);\n    ɵngcc0.ɵɵelementStart(4, \"button\", 52);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r57); const ctx_r56 = ɵngcc0.ɵɵnextContext(3); return ctx_r56.variantDisplayMode = \"card\"; });\n    ɵngcc0.ɵɵelement(5, \"clr-icon\", 53);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"button\", 54);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template_button_click_8_listener() { ɵngcc0.ɵɵrestoreView(_r57); const ctx_r58 = ɵngcc0.ɵɵnextContext(3); return ctx_r58.variantDisplayMode = \"table\"; });\n    ɵngcc0.ɵɵelement(9, \"clr-icon\", 55);\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"div\", 56);\n    ɵngcc0.ɵɵelement(13, \"input\", 57);\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelementStart(15, \"button\", 58);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template_button_click_15_listener() { ɵngcc0.ɵɵrestoreView(_r57); const ctx_r59 = ɵngcc0.ɵɵnextContext(3); return ctx_r59.filterInput.setValue(\"\"); });\n    ɵngcc0.ɵɵelement(16, \"clr-icon\", 59);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(17, \"div\", 60);\n    ɵngcc0.ɵɵtemplate(18, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_a_18_Template, 4, 5, \"a\", 61);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(19, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_table_19_Template, 3, 9, \"vdr-product-variants-table\", 62);\n    ɵngcc0.ɵɵtemplate(20, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_vdr_product_variants_list_20_Template, 6, 20, \"vdr-product-variants-list\", 63);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r43 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵclassProp(\"btn-primary\", ctx_r43.variantDisplayMode === \"card\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(7, 11, \"catalog.display-variant-cards\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"btn-primary\", ctx_r43.variantDisplayMode === \"table\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(11, 13, \"catalog.display-variant-table\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r43.filterInput)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(14, 15, \"catalog.filter-by-name-or-sku\"));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(17, _c21));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r43.variantDisplayMode === \"table\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r43.variantDisplayMode === \"card\");\n} }\nfunction ProductDetailComponent_form_16_clr_tab_9_Template(rf, ctx) { if (rf & 1) {\n    const _r61 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-tab\");\n    ɵngcc0.ɵɵelementStart(1, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_clr_tab_9_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r61); const ctx_r60 = ɵngcc0.ɵɵnextContext(2); return ctx_r60.navigateToTab(\"variants\"); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, ProductDetailComponent_form_16_clr_tab_9_clr_tab_content_4_Template, 21, 18, \"clr-tab-content\", 14);\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.product-variants\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"clrIfActive\", ɵngcc0.ɵɵpipeBind1(5, 4, ctx_r12.activeTab$) === \"variants\");\n} }\nfunction ProductDetailComponent_form_16_Template(rf, ctx) { if (rf & 1) {\n    const _r63 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 11);\n    ɵngcc0.ɵɵelement(1, \"button\", 12);\n    ɵngcc0.ɵɵelementStart(2, \"clr-tabs\");\n    ɵngcc0.ɵɵelementStart(3, \"clr-tab\");\n    ɵngcc0.ɵɵelementStart(4, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductDetailComponent_form_16_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r63); const ctx_r62 = ɵngcc0.ɵɵnextContext(); return ctx_r62.navigateToTab(\"details\"); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(7, ProductDetailComponent_form_16_clr_tab_content_7_Template, 33, 45, \"clr-tab-content\", 14);\n    ɵngcc0.ɵɵpipe(8, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(9, ProductDetailComponent_form_16_clr_tab_9_Template, 6, 6, \"clr-tab\", 15);\n    ɵngcc0.ɵɵpipe(10, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r4.detailForm);\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 4, \"catalog.product-details\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"clrIfActive\", ɵngcc0.ɵɵpipeBind1(8, 6, ctx_r4.activeTab$) === \"details\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ɵngcc0.ɵɵpipeBind1(10, 8, ctx_r4.isNew$));\n} }\nconst _c25 = [\"selectComponent\"];\nfunction ProductSearchInputComponent_ng_template_3_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductSearchInputComponent_ng_template_3_div_0_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); ɵngcc0.ɵɵnextContext(2); const _r0 = ɵngcc0.ɵɵreference(1); return _r0.selectTag(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    const _r0 = ɵngcc0.ɵɵreference(1);\n    ɵngcc0.ɵɵclassProp(\"selected\", ctx_r4.isSearchHeaderSelected());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(2, 4, \"catalog.search-for-term\"), \": \", _r0.searchTerm, \" \");\n} }\nfunction ProductSearchInputComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductSearchInputComponent_ng_template_3_div_0_Template, 3, 6, \"div\", 5);\n} if (rf & 2) {\n    ɵngcc0.ɵɵnextContext();\n    const _r0 = ɵngcc0.ɵɵreference(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", _r0.searchTerm);\n} }\nfunction ProductSearchInputComponent_ng_template_4_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-facet-value-chip\", 8);\n    ɵngcc0.ɵɵlistener(\"remove\", function ProductSearchInputComponent_ng_template_4_ng_container_0_Template_vdr_facet_value_chip_remove_1_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(); const item_r7 = ctx_r12.item; const clear_r8 = ctx_r12.clear; return clear_r8(item_r7); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r7 = ɵngcc0.ɵɵnextContext().item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"facetValue\", item_r7.facetValue)(\"removable\", true);\n} }\nfunction ProductSearchInputComponent_ng_template_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-chip\", 9);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function ProductSearchInputComponent_ng_template_4_ng_container_1_Template_vdr_chip_iconClick_1_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(); const item_r7 = ctx_r16.item; const clear_r8 = ctx_r16.clear; return clear_r8(item_r7); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r7 = ɵngcc0.ɵɵnextContext().item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"icon\", \"times\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\\\"\", item_r7.label, \"\\\"\");\n} }\nfunction ProductSearchInputComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductSearchInputComponent_ng_template_4_ng_container_0_Template, 2, 2, \"ng-container\", 7);\n    ɵngcc0.ɵɵtemplate(1, ProductSearchInputComponent_ng_template_4_ng_container_1_Template, 3, 2, \"ng-container\", 7);\n} if (rf & 2) {\n    const item_r7 = ctx.item;\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r7.facetValue);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !item_r7.facetValue);\n} }\nfunction ProductSearchInputComponent_ng_template_5_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"vdr-facet-value-chip\", 10);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r19 = ɵngcc0.ɵɵnextContext().item;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"facetValue\", item_r19.facetValue)(\"removable\", false);\n} }\nfunction ProductSearchInputComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductSearchInputComponent_ng_template_5_ng_container_0_Template, 2, 2, \"ng-container\", 7);\n} if (rf & 2) {\n    const item_r19 = ctx.item;\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r19.facetValue);\n} }\nconst _c26 = [\"productSearchInputComponent\"];\nfunction ProductListComponent_a_25_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 16);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 17);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 18);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction0(4, _c10));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 2, \"catalog.create-new-product\"));\n} }\nfunction ProductListComponent_ng_template_31_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 31);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const asset_r8 = ctx.ngIf;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, asset_r8, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ProductListComponent_ng_template_31_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 32);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 33);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction ProductListComponent_ng_template_31_vdr_chip_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"common.disabled\"));\n} }\nconst _c27 = function () { return [\"DeleteCatalog\", \"DeleteProduct\"]; };\nfunction ProductListComponent_ng_template_31_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\", 19);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 20);\n    ɵngcc0.ɵɵtemplate(2, ProductListComponent_ng_template_31_img_2_Template, 2, 4, \"img\", 21);\n    ɵngcc0.ɵɵtemplate(3, ProductListComponent_ng_template_31_ng_template_3_Template, 2, 0, \"ng-template\", null, 22, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"td\", 19);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\", 23);\n    ɵngcc0.ɵɵtemplate(8, ProductListComponent_ng_template_31_vdr_chip_8_Template, 3, 3, \"vdr-chip\", 24);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"td\", 25);\n    ɵngcc0.ɵɵelement(10, \"vdr-table-row-action\", 26);\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"td\", 25);\n    ɵngcc0.ɵɵelementStart(13, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(14, \"button\", 27);\n    ɵngcc0.ɵɵtext(15);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵelement(17, \"clr-icon\", 28);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(18, \"vdr-dropdown-menu\", 7);\n    ɵngcc0.ɵɵelementStart(19, \"button\", 29);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductListComponent_ng_template_31_Template_button_click_19_listener() { ɵngcc0.ɵɵrestoreView(_r10); const result_r3 = ctx.item; const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.deleteProduct(result_r3.productId); });\n    ɵngcc0.ɵɵpipe(20, \"hasPermission\");\n    ɵngcc0.ɵɵelement(21, \"clr-icon\", 30);\n    ɵngcc0.ɵɵtext(22);\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const result_r3 = ctx.item;\n    const _r5 = ɵngcc0.ɵɵreference(4);\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.groupByProduct ? result_r3.productAsset : result_r3.productVariantAsset || result_r3.productAsset)(\"ngIfElse\", _r5);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r2.groupByProduct ? result_r3.productName : result_r3.productVariantName, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(11, 19, \"common.edit\"))(\"linkTo\", ɵngcc0.ɵɵpureFunction1(27, _c16, result_r3.productId));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !result_r3.enabled);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(16, 21, \"common.actions\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(20, 23, ɵngcc0.ɵɵpureFunction0(29, _c27)));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(23, 25, \"common.delete\"), \" \");\n} }\nconst _c28 = function () { return [\"CreateCatalog\", \"CreateProduct\"]; };\nfunction ConfirmVariantDeletionDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.confirm-deletion-of-unused-variants-title\"), \"\\n\");\n} }\nfunction ConfirmVariantDeletionDialogComponent_li_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\"\", variant_r3.name, \" (\", variant_r3.sku, \")\");\n} }\nfunction ConfirmVariantDeletionDialogComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function ConfirmVariantDeletionDialogComponent_ng_template_5_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function ConfirmVariantDeletionDialogComponent_ng_template_5_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.confirm(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 2, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 4, \"common.confirm\"), \" \");\n} }\nfunction ProductVariantsEditorComponent_div_5_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"input\", 9);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_div_5_Template_input_ngModelChange_5_listener($event) { const group_r2 = ctx.$implicit; return group_r2.name = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(7, \"label\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"vdr-option-value-input\", 11, 12);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_div_5_Template_vdr_option_value_input_ngModelChange_10_listener($event) { const group_r2 = ctx.$implicit; return group_r2.values = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_div_5_Template_vdr_option_value_input_ngModelChange_10_listener() { ɵngcc0.ɵɵrestoreView(_r7); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.generateVariants(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const group_r2 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 7, \"catalog.option\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", group_r2.name)(\"readonly\", !group_r2.isNew);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 9, \"catalog.option-values\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", group_r2.values)(\"groupName\", group_r2.name)(\"disabled\", group_r2.name === \"\");\n} }\nfunction ProductVariantsEditorComponent_tr_30_input_2_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"input\", 15);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_30_input_2_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r19); const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit; return variant_r8.enabled = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_30_input_2_Template_input_ngModelChange_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); const ctx_r20 = ɵngcc0.ɵɵnextContext(2); return ctx_r20.formValueChanged = true; });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"ngModel\", variant_r8.enabled);\n} }\nfunction ProductVariantsEditorComponent_tr_30_clr_input_container_7_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(1, \"input\", 16);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_30_clr_input_container_7_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r24); const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit; return variant_r8.sku = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_30_clr_input_container_7_Template_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r24); const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25.onFormChanged(variant_r8); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", variant_r8.sku)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 2, \"catalog.sku\"));\n} }\nfunction ProductVariantsEditorComponent_tr_30_span_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(variant_r8.sku);\n} }\nfunction ProductVariantsEditorComponent_tr_30_clr_input_container_10_Template(rf, ctx) { if (rf & 1) {\n    const _r31 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(1, \"vdr-currency-input\", 17);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_30_clr_input_container_10_Template_vdr_currency_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r31); const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit; return variant_r8.price = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_30_clr_input_container_10_Template_vdr_currency_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r31); const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.onFormChanged(variant_r8); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r12 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", variant_r8.price)(\"currencyCode\", ctx_r12.currencyCode);\n} }\nfunction ProductVariantsEditorComponent_tr_30_span_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"localeCurrency\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r13 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(2, 1, variant_r8.price, ctx_r13.currencyCode));\n} }\nfunction ProductVariantsEditorComponent_tr_30_clr_input_container_13_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(1, \"input\", 18);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductVariantsEditorComponent_tr_30_clr_input_container_13_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r38); const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit; return variant_r8.stock = $event; })(\"ngModelChange\", function ProductVariantsEditorComponent_tr_30_clr_input_container_13_Template_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r38); const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.onFormChanged(variant_r8); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", variant_r8.stock);\n} }\nfunction ProductVariantsEditorComponent_tr_30_span_14_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(variant_r8.stock);\n} }\nfunction ProductVariantsEditorComponent_tr_30_vdr_dropdown_16_Template(rf, ctx) { if (rf & 1) {\n    const _r45 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(1, \"button\", 19);\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 20);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"vdr-dropdown-menu\", 21);\n    ɵngcc0.ɵɵelementStart(4, \"button\", 22);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsEditorComponent_tr_30_vdr_dropdown_16_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r45); const productVariantId_r43 = ctx.ngIf; const ctx_r44 = ɵngcc0.ɵɵnextContext(2); return ctx_r44.deleteVariant(productVariantId_r43); });\n    ɵngcc0.ɵɵelement(5, \"clr-icon\", 23);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(7, 1, \"common.delete\"), \" \");\n} }\nfunction ProductVariantsEditorComponent_tr_30_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵelementStart(1, \"td\");\n    ɵngcc0.ɵɵtemplate(2, ProductVariantsEditorComponent_tr_30_input_2_Template, 1, 1, \"input\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"td\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"td\");\n    ɵngcc0.ɵɵtemplate(7, ProductVariantsEditorComponent_tr_30_clr_input_container_7_Template, 3, 4, \"clr-input-container\", 14);\n    ɵngcc0.ɵɵtemplate(8, ProductVariantsEditorComponent_tr_30_span_8_Template, 2, 1, \"span\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"td\");\n    ɵngcc0.ɵɵtemplate(10, ProductVariantsEditorComponent_tr_30_clr_input_container_10_Template, 2, 2, \"clr-input-container\", 14);\n    ɵngcc0.ɵɵtemplate(11, ProductVariantsEditorComponent_tr_30_span_11_Template, 3, 4, \"span\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"td\");\n    ɵngcc0.ɵɵtemplate(13, ProductVariantsEditorComponent_tr_30_clr_input_container_13_Template, 2, 1, \"clr-input-container\", 14);\n    ɵngcc0.ɵɵtemplate(14, ProductVariantsEditorComponent_tr_30_span_14_Template, 2, 1, \"span\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"td\");\n    ɵngcc0.ɵɵtemplate(16, ProductVariantsEditorComponent_tr_30_vdr_dropdown_16_Template, 8, 3, \"vdr-dropdown\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r8 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"disabled\", !variant_r8.enabled || variant_r8.existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !variant_r8.existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 11, ctx_r1.getVariantName(variant_r8)), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !variant_r8.existing);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", variant_r8.existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !variant_r8.existing);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", variant_r8.existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !variant_r8.existing);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", variant_r8.existing);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", variant_r8.productVariantId);\n} }\nfunction CollectionTreeComponent_vdr_collection_tree_node_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-collection-tree-node\", 1);\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"expandAll\", ctx_r0.expandAll)(\"collectionTree\", ctx_r0.collectionTree)(\"activeCollectionId\", ctx_r0.activeCollectionId);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_3_clr_icon_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 31);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_3_clr_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"clr-icon\", 32);\n} }\nfunction CollectionTreeNodeComponent_div_3_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 28);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_button_3_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r16); const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit; return collection_r2.expanded = !collection_r2.expanded; });\n    ɵngcc0.ɵɵtemplate(1, CollectionTreeNodeComponent_div_3_button_3_clr_icon_1_Template, 1, 0, \"clr-icon\", 29);\n    ɵngcc0.ɵɵtemplate(2, CollectionTreeNodeComponent_div_3_button_3_clr_icon_2_Template, 1, 0, \"clr-icon\", 30);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r4.expandAll);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !collection_r2.expanded && !ctx_r4.expandAll);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", collection_r2.expanded || ctx_r4.expandAll);\n} }\nfunction CollectionTreeNodeComponent_div_3_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 33);\n} }\nfunction CollectionTreeNodeComponent_div_3_vdr_chip_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.private\"));\n} }\nfunction CollectionTreeNodeComponent_div_3_div_17_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 34);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 35);\n    ɵngcc0.ɵɵelementEnd();\n} }\nconst _c29 = function (a0) { return { parentId: a0 }; };\nconst _c30 = function (a2) { return [\"./\", \"create\", a2]; };\nfunction CollectionTreeNodeComponent_div_3_a_22_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 36);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 37);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction1(6, _c30, ɵngcc0.ɵɵpureFunction1(4, _c29, collection_r2.id)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.create-new-collection\"), \" \");\n} }\nfunction CollectionTreeNodeComponent_div_3_button_37_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_button_37_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r22); const item_r19 = ctx.$implicit; const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20.move(collection_r2, item_r19.id); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 38);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r19 = ctx.$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r10.hasUpdatePermission$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", item_r19.path, \" \");\n} }\nfunction CollectionTreeNodeComponent_div_3_vdr_collection_tree_node_44_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-collection-tree-node\", 39);\n} if (rf & 2) {\n    const collection_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r11 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"expandAll\", ctx_r11.expandAll)(\"collectionTree\", collection_r2)(\"activeCollectionId\", ctx_r11.activeCollectionId);\n} }\nconst _c31 = function (a0) { return { contents: a0 }; };\nconst _c32 = function (a1) { return [\"/catalog/collections/\", a1]; };\nconst _c33 = function () { return [\"UpdateCatalog\", \"UpdateCollection\"]; };\nfunction CollectionTreeNodeComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(3, CollectionTreeNodeComponent_div_3_button_3_Template, 3, 3, \"button\", 6);\n    ɵngcc0.ɵɵtemplate(4, CollectionTreeNodeComponent_div_3_ng_template_4_Template, 1, 0, \"ng-template\", null, 7, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(7, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(8, CollectionTreeNodeComponent_div_3_vdr_chip_8_Template, 3, 3, \"vdr-chip\", 9);\n    ɵngcc0.ɵɵelementStart(9, \"a\", 10);\n    ɵngcc0.ɵɵelement(10, \"clr-icon\", 11);\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"a\", 12);\n    ɵngcc0.ɵɵelement(14, \"clr-icon\", 13);\n    ɵngcc0.ɵɵtext(15);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(17, CollectionTreeNodeComponent_div_3_div_17_Template, 2, 0, \"div\", 14);\n    ɵngcc0.ɵɵelementStart(18, \"vdr-dropdown\");\n    ɵngcc0.ɵɵelementStart(19, \"button\", 15);\n    ɵngcc0.ɵɵelement(20, \"clr-icon\", 16);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(21, \"vdr-dropdown-menu\", 17);\n    ɵngcc0.ɵɵtemplate(22, CollectionTreeNodeComponent_div_3_a_22_Template, 4, 8, \"a\", 18);\n    ɵngcc0.ɵɵelement(23, \"div\", 19);\n    ɵngcc0.ɵɵelementStart(24, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_24_listener() { ɵngcc0.ɵɵrestoreView(_r25); const collection_r2 = ctx.$implicit; const i_r3 = ctx.index; const ctx_r24 = ɵngcc0.ɵɵnextContext(); return ctx_r24.moveUp(collection_r2, i_r3); });\n    ɵngcc0.ɵɵpipe(25, \"async\");\n    ɵngcc0.ɵɵelement(26, \"clr-icon\", 21);\n    ɵngcc0.ɵɵtext(27);\n    ɵngcc0.ɵɵpipe(28, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(29, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_29_listener() { ɵngcc0.ɵɵrestoreView(_r25); const collection_r2 = ctx.$implicit; const i_r3 = ctx.index; const ctx_r26 = ɵngcc0.ɵɵnextContext(); return ctx_r26.moveDown(collection_r2, i_r3); });\n    ɵngcc0.ɵɵpipe(30, \"async\");\n    ɵngcc0.ɵɵelement(31, \"clr-icon\", 22);\n    ɵngcc0.ɵɵtext(32);\n    ɵngcc0.ɵɵpipe(33, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(34, \"h4\", 23);\n    ɵngcc0.ɵɵtext(35);\n    ɵngcc0.ɵɵpipe(36, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(37, CollectionTreeNodeComponent_div_3_button_37_Template, 4, 4, \"button\", 24);\n    ɵngcc0.ɵɵelement(38, \"div\", 19);\n    ɵngcc0.ɵɵelementStart(39, \"button\", 25);\n    ɵngcc0.ɵɵlistener(\"click\", function CollectionTreeNodeComponent_div_3_Template_button_click_39_listener() { ɵngcc0.ɵɵrestoreView(_r25); const collection_r2 = ctx.$implicit; const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.delete(collection_r2.id); });\n    ɵngcc0.ɵɵpipe(40, \"async\");\n    ɵngcc0.ɵɵelement(41, \"clr-icon\", 26);\n    ɵngcc0.ɵɵtext(42);\n    ɵngcc0.ɵɵpipe(43, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(44, CollectionTreeNodeComponent_div_3_vdr_collection_tree_node_44_Template, 1, 3, \"vdr-collection-tree-node\", 27);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const collection_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const _r5 = ɵngcc0.ɵɵreference(5);\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"private\", collection_r2.isPrivate);\n    ɵngcc0.ɵɵproperty(\"cdkDragData\", collection_r2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"active\", collection_r2.id === ctx_r1.activeCollectionId);\n    ɵngcc0.ɵɵproperty(\"ngClass\", \"depth-\" + ctx_r1.depth);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", collection_r2.children == null ? null : collection_r2.children.length)(\"ngIfElse\", _r5);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", collection_r2.name, \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", collection_r2.isPrivate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction1(45, _c16, ɵngcc0.ɵɵpureFunction1(43, _c31, collection_r2.id)));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(12, 25, \"catalog.view-contents\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"routerLink\", ɵngcc0.ɵɵpureFunction1(47, _c32, collection_r2.id));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(16, 27, \"common.edit\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(49, _c33));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(50, _c11));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", i_r3 === 0 || !ɵngcc0.ɵɵpipeBind1(25, 29, ctx_r1.hasUpdatePermission$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(28, 31, \"catalog.move-up\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", i_r3 === ctx_r1.collectionTree.children.length - 1 || !ɵngcc0.ɵɵpipeBind1(30, 33, ctx_r1.hasUpdatePermission$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(33, 35, \"catalog.move-down\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(36, 37, \"catalog.move-to\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.getMoveListItems(collection_r2));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(40, 39, ctx_r1.hasDeletePermission$));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(43, 41, \"common.delete\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", collection_r2.expanded || ctx_r1.expandAll);\n} }\nfunction GenerateProductVariantsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"input\", 9);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_input_ngModelChange_5_listener($event) { const group_r4 = ctx.$implicit; return group_r4.name = $event; })(\"keydown.enter\", function GenerateProductVariantsComponent_div_0_Template_input_keydown_enter_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const _r5 = ɵngcc0.ɵɵreference(11); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.handleEnter($event, _r5); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"div\", 10);\n    ɵngcc0.ɵɵelementStart(7, \"label\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"vdr-option-value-input\", 11, 12);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_vdr_option_value_input_ngModelChange_10_listener($event) { const group_r4 = ctx.$implicit; return group_r4.values = $event; })(\"ngModelChange\", function GenerateProductVariantsComponent_div_0_Template_vdr_option_value_input_ngModelChange_10_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.generateVariants(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"div\", 13);\n    ɵngcc0.ɵɵelementStart(13, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function GenerateProductVariantsComponent_div_0_Template_button_click_13_listener() { ɵngcc0.ɵɵrestoreView(_r8); const group_r4 = ctx.$implicit; const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.removeOption(group_r4.name); });\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelement(15, \"clr-icon\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const group_r4 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 7, \"catalog.option\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", group_r4.name);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 9, \"catalog.option-values\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", group_r4.values)(\"groupName\", group_r4.name)(\"disabled\", group_r4.name === \"\");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(14, 11, \"catalog.remove-option\"));\n} }\nfunction GenerateProductVariantsComponent_th_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"common.create\"));\n} }\nfunction GenerateProductVariantsComponent_th_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"catalog.variant\"));\n} }\nfunction GenerateProductVariantsComponent_tr_20_td_1_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\");\n    ɵngcc0.ɵɵelementStart(1, \"input\", 19);\n    ɵngcc0.ɵɵlistener(\"change\", function GenerateProductVariantsComponent_tr_20_td_1_Template_input_change_1_listener() { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(2); return ctx_r15.onFormChange(); })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_td_1_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); const variant_r12 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.variantFormValues[variant_r12.id].enabled = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r12 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r13 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r13.variantFormValues[variant_r12.id].enabled);\n} }\nfunction GenerateProductVariantsComponent_tr_20_td_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r12 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", variant_r12.values.join(\" \"), \" \");\n} }\nfunction GenerateProductVariantsComponent_tr_20_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵtemplate(1, GenerateProductVariantsComponent_tr_20_td_1_Template, 2, 1, \"td\", 5);\n    ɵngcc0.ɵɵtemplate(2, GenerateProductVariantsComponent_tr_20_td_2_Template, 2, 1, \"td\", 5);\n    ɵngcc0.ɵɵelementStart(3, \"td\");\n    ɵngcc0.ɵɵelementStart(4, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(5, \"input\", 16);\n    ɵngcc0.ɵɵlistener(\"change\", function GenerateProductVariantsComponent_tr_20_Template_input_change_5_listener() { ɵngcc0.ɵɵrestoreView(_r22); const ctx_r21 = ɵngcc0.ɵɵnextContext(); return ctx_r21.onFormChange(); })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_input_ngModelChange_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r22); const variant_r12 = ctx.$implicit; const ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.variantFormValues[variant_r12.id].sku = $event; });\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\");\n    ɵngcc0.ɵɵelementStart(8, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(9, \"vdr-currency-input\", 17);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_vdr_currency_input_ngModelChange_9_listener($event) { ɵngcc0.ɵɵrestoreView(_r22); const variant_r12 = ctx.$implicit; const ctx_r24 = ɵngcc0.ɵɵnextContext(); return ctx_r24.variantFormValues[variant_r12.id].price = $event; })(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_vdr_currency_input_ngModelChange_9_listener() { ɵngcc0.ɵɵrestoreView(_r22); const ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25.onFormChange(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"td\");\n    ɵngcc0.ɵɵelementStart(11, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(12, \"input\", 18);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GenerateProductVariantsComponent_tr_20_Template_input_ngModelChange_12_listener($event) { ɵngcc0.ɵɵrestoreView(_r22); const variant_r12 = ctx.$implicit; const ctx_r26 = ɵngcc0.ɵɵnextContext(); return ctx_r26.variantFormValues[variant_r12.id].stock = $event; })(\"change\", function GenerateProductVariantsComponent_tr_20_Template_input_change_12_listener() { ɵngcc0.ɵɵrestoreView(_r22); const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.onFormChange(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r12 = ctx.$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"disabled\", !ctx_r3.variantFormValues[variant_r12.id].enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", 1 < ctx_r3.variants.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", 1 < ctx_r3.variants.length);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r3.variantFormValues[variant_r12.id].sku)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(6, 9, \"catalog.sku\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r3.variantFormValues[variant_r12.id].price)(\"currencyCode\", ctx_r3.currencyCode);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r3.variantFormValues[variant_r12.id].stock);\n} }\nconst _c34 = [\"textArea\"];\nfunction OptionValueInputComponent_div_1_vdr_chip_1_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 6);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function OptionValueInputComponent_div_1_vdr_chip_1_Template_vdr_chip_iconClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const option_r3 = ctx.$implicit; const ctx_r5 = ɵngcc0.ɵɵnextContext(2); return ctx_r5.removeOption(option_r3); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    const isLast_r4 = ctx.last;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵclassProp(\"selected\", isLast_r4 && ctx_r2.lastSelected)(\"locked\", option_r3.locked);\n    ɵngcc0.ɵɵproperty(\"icon\", option_r3.locked ? \"lock\" : \"times\")(\"colorFrom\", ctx_r2.groupName);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", option_r3.name, \" \");\n} }\nfunction OptionValueInputComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵtemplate(1, OptionValueInputComponent_div_1_vdr_chip_1_Template, 2, 7, \"vdr-chip\", 5);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.options);\n} }\nfunction ProductAssetsComponent_div_0_img_3_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"img\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_div_0_img_3_Template_img_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(2); return ctx_r9.previewAsset(ctx_r9.featuredAsset); });\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, ctx_r5.featuredAsset, \"small\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ProductAssetsComponent_div_0_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_div_0_div_4_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(2); return ctx_r11.selectAssets(); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 13);\n    ɵngcc0.ɵɵelementStart(2, \"div\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 1, \"catalog.no-featured-asset\"));\n} }\nfunction ProductAssetsComponent_div_0_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nfunction ProductAssetsComponent_div_0_div_7_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 14);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_div_0_div_7_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(2); return ctx_r13.selectAssets(); });\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 16);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 1, \"asset.add-asset\"), \" \");\n} }\nfunction ProductAssetsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(3, ProductAssetsComponent_div_0_img_3_Template, 2, 4, \"img\", 6);\n    ɵngcc0.ɵɵtemplate(4, ProductAssetsComponent_div_0_div_4_Template, 5, 3, \"div\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(6, ProductAssetsComponent_div_0_ng_container_6_Template, 1, 0, \"ng-container\", 9);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(7, ProductAssetsComponent_div_0_div_7_Template, 5, 3, \"div\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    const _r3 = ɵngcc0.ɵɵreference(4);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.featuredAsset);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r0.updatePermissions);\n} }\nfunction ProductAssetsComponent_ng_template_1_img_1_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"img\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_1_img_1_Template_img_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r19 = ɵngcc0.ɵɵnextContext(2); return ctx_r19.previewAsset(ctx_r19.featuredAsset); });\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, ctx_r15.featuredAsset, \"thumb\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ProductAssetsComponent_ng_template_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_1_div_2_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r22); const ctx_r21 = ɵngcc0.ɵɵnextContext(2); return ctx_r21.selectAssets(); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 19);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction ProductAssetsComponent_ng_template_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nfunction ProductAssetsComponent_ng_template_1_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_1_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r24); const ctx_r23 = ɵngcc0.ɵɵnextContext(2); return ctx_r23.selectAssets(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"clr-icon\", 16);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 2, \"asset.add-asset\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 4, \"asset.add-asset\"), \" \");\n} }\nfunction ProductAssetsComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 17);\n    ɵngcc0.ɵɵtemplate(1, ProductAssetsComponent_ng_template_1_img_1_Template, 2, 4, \"img\", 6);\n    ɵngcc0.ɵɵtemplate(2, ProductAssetsComponent_ng_template_1_div_2_Template, 2, 0, \"div\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, ProductAssetsComponent_ng_template_1_ng_container_3_Template, 1, 0, \"ng-container\", 9);\n    ɵngcc0.ɵɵtemplate(4, ProductAssetsComponent_ng_template_1_button_4_Template, 5, 6, \"button\", 18);\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    const _r3 = ɵngcc0.ɵɵreference(4);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.featuredAsset);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r2.updatePermissions);\n} }\nfunction ProductAssetsComponent_ng_template_3_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 23);\n    ɵngcc0.ɵɵlistener(\"cdkDropListDropped\", function ProductAssetsComponent_ng_template_3_div_1_Template_div_cdkDropListDropped_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r29); const ctx_r28 = ɵngcc0.ɵɵnextContext(2); return ctx_r28.dropListDropped($event); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(2, \"vdr-dropdown\", 24);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 25);\n    ɵngcc0.ɵɵelement(4, \"img\", 26);\n    ɵngcc0.ɵɵpipe(5, \"assetPreview\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"vdr-dropdown-menu\", 27);\n    ɵngcc0.ɵɵelementStart(7, \"button\", 28);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_3_div_1_Template_button_click_7_listener() { ɵngcc0.ɵɵrestoreView(_r29); const asset_r26 = ctx.$implicit; const ctx_r30 = ɵngcc0.ɵɵnextContext(2); return ctx_r30.previewAsset(asset_r26); });\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"button\", 29);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_3_div_1_Template_button_click_10_listener() { ɵngcc0.ɵɵrestoreView(_r29); const asset_r26 = ctx.$implicit; const ctx_r31 = ɵngcc0.ɵɵnextContext(2); return ctx_r31.setAsFeatured(asset_r26); });\n    ɵngcc0.ɵɵpipe(11, \"hasPermission\");\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(14, \"div\", 30);\n    ɵngcc0.ɵɵelementStart(15, \"button\", 31);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductAssetsComponent_ng_template_3_div_1_Template_button_click_15_listener() { ɵngcc0.ɵɵrestoreView(_r29); const asset_r26 = ctx.$implicit; const ctx_r32 = ɵngcc0.ɵɵnextContext(2); return ctx_r32.removeAsset(asset_r26); });\n    ɵngcc0.ɵɵpipe(16, \"hasPermission\");\n    ɵngcc0.ɵɵtext(17);\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const asset_r26 = ctx.$implicit;\n    const index_r27 = ctx.index;\n    const ctx_r25 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"cdkDropListData\", index_r27)(\"cdkDropListDisabled\", !ɵngcc0.ɵɵpipeBind1(1, 10, ctx_r25.updatePermissions));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"featured\", ctx_r25.isFeatured(asset_r26));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(5, 12, asset_r26, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 15, \"asset.preview\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r25.isFeatured(asset_r26) || !ɵngcc0.ɵɵpipeBind1(11, 17, ctx_r25.updatePermissions));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 19, \"asset.set-as-featured-asset\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(16, 21, ctx_r25.updatePermissions));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(18, 23, \"asset.remove-asset\"), \" \");\n} }\nfunction ProductAssetsComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 21);\n    ɵngcc0.ɵɵtemplate(1, ProductAssetsComponent_ng_template_3_div_1_Template, 19, 25, \"div\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"compact\", ctx_r4.compact);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r4.assets);\n} }\nfunction UpdateProductOptionDialogComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(1, 1, \"catalog.update-product-option\"));\n} }\nfunction UpdateProductOptionDialogComponent_section_14_ng_container_4_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 12);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const customField_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"customFieldsFormGroup\", ctx_r7.customFieldsForm)(\"customField\", customField_r6)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 3, ɵngcc0.ɵɵpureFunction0(5, _c21)));\n} }\nfunction UpdateProductOptionDialogComponent_section_14_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, UpdateProductOptionDialogComponent_section_14_ng_container_4_vdr_custom_field_control_1_Template, 2, 6, \"vdr-custom-field-control\", 11);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r6 = ctx.$implicit;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.customFieldsForm.get(customField_r6.name));\n} }\nfunction UpdateProductOptionDialogComponent_section_14_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\");\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, UpdateProductOptionDialogComponent_section_14_ng_container_4_Template, 2, 1, \"ng-container\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"common.custom-fields\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.customFields);\n} }\nfunction UpdateProductOptionDialogComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function UpdateProductOptionDialogComponent_ng_template_15_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.cancel(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function UpdateProductOptionDialogComponent_ng_template_15_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.update(); });\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    const _r1 = ɵngcc0.ɵɵreference(4);\n    const _r2 = ɵngcc0.ɵɵreference(8);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"common.cancel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", _r1.invalid || _r2.invalid || _r1.pristine && _r2.pristine && ctx_r4.customFieldsForm.pristine);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 5, \"catalog.update-product-option\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_toggle_wrapper_16_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(1, \"input\", 48);\n    ɵngcc0.ɵɵelementStart(2, \"label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 1, \"common.enabled\"));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"option\", 51);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const taxCategory_r19 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", taxCategory_r19.id);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", taxCategory_r19.name, \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-select-container\");\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"select\", 49);\n    ɵngcc0.ɵɵtemplate(5, ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_option_5_Template, 2, 2, \"option\", 50);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"catalog.tax-category\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r6.taxCategories);\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_template_26_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"label\", 32);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\", 52);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const formGroup_r4 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 2, \"catalog.tax-category\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r8.getTaxCategoryName(formGroup_r4), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_33_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-currency-input\", 53);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const variant_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r9 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"currencyCode\", variant_r1.currencyCode)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r9.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_34_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-currency-input\", 54);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const variant_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"currencyCode\", variant_r1.currencyCode)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r10.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_37_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"clr-select-container\");\n    ɵngcc0.ɵɵelementStart(1, \"label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelement(4, \"vdr-help-tooltip\", 30);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"select\", 55);\n    ɵngcc0.ɵɵelementStart(7, \"option\", 51);\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"option\", 51);\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"option\", 51);\n    ɵngcc0.ɵɵtext(14);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ɵngcc0.ɵɵpipeBind1(3, 8, \"catalog.track-inventory\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"content\", ɵngcc0.ɵɵpipeBind1(5, 10, \"catalog.track-inventory-tooltip\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r11.GlobalFlag.TRUE);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 12, \"catalog.track-inventory-true\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r11.GlobalFlag.FALSE);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(12, 14, \"catalog.track-inventory-false\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r11.GlobalFlag.INHERIT);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(15, 16, \"catalog.track-inventory-inherit\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_section_81_ng_container_1_vdr_custom_field_control_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-custom-field-control\", 59);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const customField_r24 = ɵngcc0.ɵɵnextContext().$implicit;\n    const formGroup_r4 = ɵngcc0.ɵɵnextContext(2).ngIf;\n    const ctx_r25 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"compact\", true)(\"customFieldsFormGroup\", formGroup_r4.get(\"customFields\"))(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 4, ctx_r25.updatePermission))(\"customField\", customField_r24);\n} }\nconst _c35 = function (a1) { return [\"customFields\", a1]; };\nfunction ProductVariantsListComponent_div_1_ng_container_1_section_81_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_ng_container_1_section_81_ng_container_1_vdr_custom_field_control_1_Template, 2, 6, \"vdr-custom-field-control\", 58);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const customField_r24 = ctx.$implicit;\n    const formGroup_r4 = ɵngcc0.ɵɵnextContext(2).ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", formGroup_r4.get(ɵngcc0.ɵɵpureFunction1(1, _c35, customField_r24.name)));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_section_81_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 56);\n    ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_ng_container_1_section_81_ng_container_1_Template, 2, 3, \"ng-container\", 57);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r12.customFields);\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_div_85_vdr_chip_2_Template(rf, ctx) { if (rf & 1) {\n    const _r32 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 62);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function ProductVariantsListComponent_div_1_ng_container_1_div_85_vdr_chip_2_Template_vdr_chip_iconClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r32); const option_r30 = ctx.$implicit; const ctx_r31 = ɵngcc0.ɵɵnextContext(4); return ctx_r31.editOption(option_r30); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(2, \"span\", 63);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const option_r30 = ctx.$implicit;\n    const ctx_r29 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"colorFrom\", ctx_r29.optionGroupName(option_r30.groupId))(\"invert\", true)(\"icon\", ɵngcc0.ɵɵpipeBind1(1, 5, ctx_r29.updatePermission) && \"pencil\");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r29.optionGroupName(option_r30.groupId));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r29.optionName(option_r30), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_div_85_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 60);\n    ɵngcc0.ɵɵtemplate(2, ProductVariantsListComponent_div_1_ng_container_1_div_85_vdr_chip_2_Template, 5, 7, \"vdr-chip\", 61);\n    ɵngcc0.ɵɵpipe(3, \"sort\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(3, 1, variant_r1.options, \"groupId\"));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_88_Template(rf, ctx) { if (rf & 1) {\n    const _r37 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-facet-value-chip\", 64);\n    ɵngcc0.ɵɵlistener(\"remove\", function ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_88_Template_vdr_facet_value_chip_remove_0_listener() { ɵngcc0.ɵɵrestoreView(_r37); const facetValue_r34 = ctx.$implicit; const variant_r1 = ɵngcc0.ɵɵnextContext(2).$implicit; const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.removeFacetValue(variant_r1, facetValue_r34.id); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const facetValue_r34 = ctx.$implicit;\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"facetValue\", facetValue_r34)(\"removable\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r14.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_89_Template(rf, ctx) { if (rf & 1) {\n    const _r41 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-facet-value-chip\", 64);\n    ɵngcc0.ɵɵlistener(\"remove\", function ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_89_Template_vdr_facet_value_chip_remove_0_listener() { ɵngcc0.ɵɵrestoreView(_r41); const facetValue_r38 = ctx.$implicit; const variant_r1 = ɵngcc0.ɵɵnextContext(2).$implicit; const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.removeFacetValue(variant_r1, facetValue_r38.id); });\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const facetValue_r38 = ctx.$implicit;\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"facetValue\", facetValue_r38)(\"removable\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r15.updatePermission));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_button_90_Template(rf, ctx) { if (rf & 1) {\n    const _r44 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 65);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsListComponent_div_1_ng_container_1_button_90_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r44); const variant_r1 = ɵngcc0.ɵɵnextContext(2).$implicit; const ctx_r42 = ɵngcc0.ɵɵnextContext(); return ctx_r42.selectFacetValueClick.emit([variant_r1.id]); });\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 66);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"catalog.add-facets\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_vdr_chip_1_Template(rf, ctx) { if (rf & 1) {\n    const _r51 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"vdr-chip\", 72);\n    ɵngcc0.ɵɵlistener(\"iconClick\", function ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_vdr_chip_1_Template_vdr_chip_iconClick_0_listener() { ɵngcc0.ɵɵrestoreView(_r51); const channel_r47 = ɵngcc0.ɵɵnextContext().$implicit; const variant_r1 = ɵngcc0.ɵɵnextContext(4).$implicit; const ctx_r49 = ɵngcc0.ɵɵnextContext(); return ctx_r49.removeFromChannel.emit({ channelId: channel_r47.id, variant: variant_r1 }); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"vdr-channel-badge\", 73);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"channelCodeToLabel\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const channel_r47 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 3, \"catalog.remove-from-channel\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"channelCode\", channel_r47.code);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 5, channel_r47.code), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_vdr_chip_1_Template, 5, 7, \"vdr-chip\", 71);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const channel_r47 = ctx.$implicit;\n    const ctx_r46 = ɵngcc0.ɵɵnextContext(5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r46.isDefaultChannel(channel_r47.code));\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r56 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 16);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 68);\n    ɵngcc0.ɵɵtemplate(2, ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_ng_container_2_Template, 2, 1, \"ng-container\", 57);\n    ɵngcc0.ɵɵelementStart(3, \"button\", 69);\n    ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r56); const variant_r1 = ɵngcc0.ɵɵnextContext(3).$implicit; const ctx_r54 = ɵngcc0.ɵɵnextContext(); return ctx_r54.assignToChannel.emit(variant_r1); });\n    ɵngcc0.ɵɵelement(4, \"clr-icon\", 70);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r1 = ɵngcc0.ɵɵnextContext(3).$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", variant_r1.channels);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 2, \"catalog.assign-to-channel\"), \" \");\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_div_1_Template, 7, 4, \"div\", 67);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction ProductVariantsListComponent_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r60 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0, 7);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 9);\n    ɵngcc0.ɵɵelementStart(3, \"vdr-title-input\", 10);\n    ɵngcc0.ɵɵpipe(4, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(5, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(6, \"input\", 11);\n    ɵngcc0.ɵɵpipe(7, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(8, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"vdr-title-input\", 12);\n    ɵngcc0.ɵɵpipe(10, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(11, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(12, \"input\", 13);\n    ɵngcc0.ɵɵpipe(13, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"div\", 14);\n    ɵngcc0.ɵɵtemplate(16, ProductVariantsListComponent_div_1_ng_container_1_clr_toggle_wrapper_16_Template, 5, 3, \"clr-toggle-wrapper\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(17, \"div\", 16);\n    ɵngcc0.ɵɵelementStart(18, \"div\", 17);\n    ɵngcc0.ɵɵelementStart(19, \"div\", 18);\n    ɵngcc0.ɵɵelementStart(20, \"vdr-product-assets\", 19);\n    ɵngcc0.ɵɵlistener(\"change\", function ProductVariantsListComponent_div_1_ng_container_1_Template_vdr_product_assets_change_20_listener($event) { ɵngcc0.ɵɵrestoreView(_r60); const variant_r1 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r58 = ɵngcc0.ɵɵnextContext(); return ctx_r58.onAssetChange(variant_r1.id, $event); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(21, \"div\", 20);\n    ɵngcc0.ɵɵelementStart(22, \"div\", 21);\n    ɵngcc0.ɵɵelementStart(23, \"div\", 22);\n    ɵngcc0.ɵɵelementStart(24, \"div\", 23);\n    ɵngcc0.ɵɵtemplate(25, ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_25_Template, 6, 4, \"clr-select-container\", 24);\n    ɵngcc0.ɵɵtemplate(26, ProductVariantsListComponent_div_1_ng_container_1_ng_template_26_Template, 5, 4, \"ng-template\", null, 25, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(28, \"div\", 26);\n    ɵngcc0.ɵɵelementStart(29, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(30, \"label\");\n    ɵngcc0.ɵɵtext(31);\n    ɵngcc0.ɵɵpipe(32, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(33, ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_33_Template, 2, 4, \"vdr-currency-input\", 27);\n    ɵngcc0.ɵɵtemplate(34, ProductVariantsListComponent_div_1_ng_container_1_vdr_currency_input_34_Template, 2, 4, \"vdr-currency-input\", 28);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(35, \"vdr-variant-price-detail\", 29);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(36, \"div\", 22);\n    ɵngcc0.ɵɵtemplate(37, ProductVariantsListComponent_div_1_ng_container_1_clr_select_container_37_Template, 16, 18, \"clr-select-container\", 15);\n    ɵngcc0.ɵɵelementStart(38, \"clr-input-container\");\n    ɵngcc0.ɵɵelementStart(39, \"label\");\n    ɵngcc0.ɵɵtext(40);\n    ɵngcc0.ɵɵpipe(41, \"translate\");\n    ɵngcc0.ɵɵelement(42, \"vdr-help-tooltip\", 30);\n    ɵngcc0.ɵɵpipe(43, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(44, \"input\", 31);\n    ɵngcc0.ɵɵpipe(45, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(46, \"div\");\n    ɵngcc0.ɵɵelementStart(47, \"label\", 32);\n    ɵngcc0.ɵɵtext(48);\n    ɵngcc0.ɵɵpipe(49, \"translate\");\n    ɵngcc0.ɵɵelement(50, \"vdr-help-tooltip\", 30);\n    ɵngcc0.ɵɵpipe(51, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(52, \"div\", 33);\n    ɵngcc0.ɵɵtext(53);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(54, \"div\");\n    ɵngcc0.ɵɵelementStart(55, \"label\", 32);\n    ɵngcc0.ɵɵtext(56);\n    ɵngcc0.ɵɵpipe(57, \"translate\");\n    ɵngcc0.ɵɵelement(58, \"vdr-help-tooltip\", 30);\n    ɵngcc0.ɵɵpipe(59, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(60, \"div\", 33);\n    ɵngcc0.ɵɵtext(61);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(62, \"div\", 22);\n    ɵngcc0.ɵɵelementStart(63, \"div\", 34);\n    ɵngcc0.ɵɵelementStart(64, \"label\", 32);\n    ɵngcc0.ɵɵtext(65);\n    ɵngcc0.ɵɵpipe(66, \"translate\");\n    ɵngcc0.ɵɵelement(67, \"vdr-help-tooltip\", 30);\n    ɵngcc0.ɵɵpipe(68, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(69, \"div\", 35);\n    ɵngcc0.ɵɵelementStart(70, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(71, \"input\", 36);\n    ɵngcc0.ɵɵpipe(72, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(73, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(74, \"input\", 37);\n    ɵngcc0.ɵɵpipe(75, \"hasPermission\");\n    ɵngcc0.ɵɵelementStart(76, \"label\");\n    ɵngcc0.ɵɵtext(77);\n    ɵngcc0.ɵɵpipe(78, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(79, \"div\", 38);\n    ɵngcc0.ɵɵelementStart(80, \"div\", 22);\n    ɵngcc0.ɵɵtemplate(81, ProductVariantsListComponent_div_1_ng_container_1_section_81_Template, 2, 1, \"section\", 39);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(82, \"div\", 16);\n    ɵngcc0.ɵɵelementStart(83, \"div\", 40);\n    ɵngcc0.ɵɵelement(84, \"vdr-entity-info\", 41);\n    ɵngcc0.ɵɵtemplate(85, ProductVariantsListComponent_div_1_ng_container_1_div_85_Template, 4, 4, \"div\", 42);\n    ɵngcc0.ɵɵelement(86, \"div\", 43);\n    ɵngcc0.ɵɵelementStart(87, \"div\", 44);\n    ɵngcc0.ɵɵtemplate(88, ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_88_Template, 2, 4, \"vdr-facet-value-chip\", 45);\n    ɵngcc0.ɵɵtemplate(89, ProductVariantsListComponent_div_1_ng_container_1_vdr_facet_value_chip_89_Template, 2, 4, \"vdr-facet-value-chip\", 45);\n    ɵngcc0.ɵɵtemplate(90, ProductVariantsListComponent_div_1_ng_container_1_button_90_Template, 4, 3, \"button\", 46);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(91, ProductVariantsListComponent_div_1_ng_container_1_ng_container_91_Template, 2, 0, \"ng-container\", 47);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const formGroup_r4 = ctx.ngIf;\n    const _r7 = ɵngcc0.ɵɵreference(27);\n    const variant_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    let tmp_39_0 = null;\n    ɵngcc0.ɵɵproperty(\"formGroup\", formGroup_r4);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(4, 53, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(7, 55, ctx_r3.updatePermission))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(8, 57, \"catalog.sku\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(10, 59, ctx_r3.updatePermission));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(13, 61, ctx_r3.updatePermission))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(14, 63, \"common.name\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r3.updatePermission);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"compact\", true)(\"assets\", (ctx_r3.pendingAssetChanges[variant_r1.id] == null ? null : ctx_r3.pendingAssetChanges[variant_r1.id].assets) || variant_r1.assets)(\"featuredAsset\", (ctx_r3.pendingAssetChanges[variant_r1.id] == null ? null : ctx_r3.pendingAssetChanges[variant_r1.id].featuredAsset) || variant_r1.featuredAsset);\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r3.updatePermission)(\"vdrIfPermissionsElse\", _r7);\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(32, 65, \"catalog.price\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r3.channelPriceIncludesTax);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.channelPriceIncludesTax);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"price\", formGroup_r4.get(\"price\").value)(\"currencyCode\", variant_r1.currencyCode)(\"priceIncludesTax\", ctx_r3.channelPriceIncludesTax)(\"taxCategoryId\", formGroup_r4.get(\"taxCategoryId\").value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r3.updatePermission);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ɵngcc0.ɵɵpipeBind1(41, 67, \"catalog.stock-on-hand\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"content\", ɵngcc0.ɵɵpipeBind1(43, 69, \"catalog.stock-on-hand-tooltip\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"inventory-untracked\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(45, 71, ctx_r3.updatePermission))(\"vdrDisabled\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"inventory-untracked\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ɵngcc0.ɵɵpipeBind1(49, 73, \"catalog.stock-allocated\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"content\", ɵngcc0.ɵɵpipeBind1(51, 75, \"catalog.stock-allocated-tooltip\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", variant_r1.stockAllocated, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"inventory-untracked\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ɵngcc0.ɵɵpipeBind1(57, 77, \"catalog.stock-saleable\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"content\", ɵngcc0.ɵɵpipeBind1(59, 79, \"catalog.stock-saleable-tooltip\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r3.getSaleableStockLevel(variant_r1), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"inventory-untracked\", ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(66, 81, \"catalog.out-of-stock-threshold\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"content\", ɵngcc0.ɵɵpipeBind1(68, 83, \"catalog.out-of-stock-threshold-tooltip\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"formControl\", formGroup_r4.get(\"outOfStockThreshold\"))(\"readonly\", !ɵngcc0.ɵɵpipeBind1(72, 85, ctx_r3.updatePermission))(\"vdrDisabled\", ((tmp_39_0 = formGroup_r4.get(\"useGlobalOutOfStockThreshold\")) == null ? null : tmp_39_0.value) !== false || ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"vdrDisabled\", !ɵngcc0.ɵɵpipeBind1(75, 87, ctx_r3.updatePermission) || ctx_r3.inventoryIsNotTracked(formGroup_r4));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate2(\"\", ɵngcc0.ɵɵpipeBind1(78, 89, \"catalog.use-global-value\"), \" (\", ctx_r3.globalOutOfStockThreshold, \")\");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.customFields.length);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"entity\", variant_r1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", variant_r1.options.length);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.existingFacetValues(variant_r1));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.pendingFacetValues(variant_r1));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ctx_r3.updatePermission);\n} }\nfunction ProductVariantsListComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_ng_container_1_Template, 92, 91, \"ng-container\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const variant_r1 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    let tmp_0_0 = null;\n    let tmp_0_1 = null;\n    ɵngcc0.ɵɵclassProp(\"disabled\", !((tmp_0_0 = ctx_r0.formGroupMap.get(variant_r1.id)) == null ? null : (tmp_0_1 = tmp_0_0.get(\"enabled\")) == null ? null : tmp_0_1.value));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.formGroupMap.get(variant_r1.id));\n} }\nfunction ProductVariantsTableComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"vdr-dt-column\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const optionGroup_r2 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(optionGroup_r2.name);\n} }\nfunction ProductVariantsTableComponent_ng_template_19_ng_container_0_img_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 17);\n    ɵngcc0.ɵɵpipe(1, \"assetPreview\");\n} if (rf & 2) {\n    const featuredAsset_r13 = ctx.ngIf;\n    ɵngcc0.ɵɵproperty(\"src\", ɵngcc0.ɵɵpipeBind2(1, 1, featuredAsset_r13, \"tiny\"), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ProductVariantsTableComponent_ng_template_19_ng_container_0_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 18);\n    ɵngcc0.ɵɵelement(1, \"clr-icon\", 19);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction ProductVariantsTableComponent_ng_template_19_ng_container_0_ng_container_17_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 4);\n    ɵngcc0.ɵɵpipe(2, \"stringToColor\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const option_r14 = ctx.$implicit;\n    const formGroup_r6 = ɵngcc0.ɵɵnextContext().ngIf;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵstyleProp(\"color\", ɵngcc0.ɵɵpipeBind1(2, 5, ctx_r10.optionGroupName(option_r14.groupId)));\n    ɵngcc0.ɵɵclassProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", option_r14.name, \" \");\n} }\nfunction ProductVariantsTableComponent_ng_template_19_ng_container_0_vdr_currency_input_21_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-currency-input\", 20);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const variant_r3 = ɵngcc0.ɵɵnextContext(2).item;\n    const ctx_r11 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"currencyCode\", variant_r3.currencyCode)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r11.updatePermission));\n} }\nfunction ProductVariantsTableComponent_ng_template_19_ng_container_0_vdr_currency_input_22_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"vdr-currency-input\", 21);\n    ɵngcc0.ɵɵpipe(1, \"hasPermission\");\n} if (rf & 2) {\n    const variant_r3 = ɵngcc0.ɵɵnextContext(2).item;\n    const ctx_r12 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"currencyCode\", variant_r3.currencyCode)(\"readonly\", !ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r12.updatePermission));\n} }\nfunction ProductVariantsTableComponent_ng_template_19_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0, 3);\n    ɵngcc0.ɵɵelementStart(1, \"td\", 4);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 5);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 6);\n    ɵngcc0.ɵɵtemplate(4, ProductVariantsTableComponent_ng_template_19_ng_container_0_img_4_Template, 2, 4, \"img\", 7);\n    ɵngcc0.ɵɵtemplate(5, ProductVariantsTableComponent_ng_template_19_ng_container_0_ng_template_5_Template, 2, 0, \"ng-template\", null, 8, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"td\", 4);\n    ɵngcc0.ɵɵelementStart(8, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(9, \"input\", 9);\n    ɵngcc0.ɵɵpipe(10, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"td\", 4);\n    ɵngcc0.ɵɵelementStart(13, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(14, \"input\", 10);\n    ɵngcc0.ɵɵpipe(15, \"hasPermission\");\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(17, ProductVariantsTableComponent_ng_template_19_ng_container_0_ng_container_17_Template, 4, 7, \"ng-container\", 1);\n    ɵngcc0.ɵɵpipe(18, \"sort\");\n    ɵngcc0.ɵɵelementStart(19, \"td\", 11);\n    ɵngcc0.ɵɵelementStart(20, \"clr-input-container\");\n    ɵngcc0.ɵɵtemplate(21, ProductVariantsTableComponent_ng_template_19_ng_container_0_vdr_currency_input_21_Template, 2, 4, \"vdr-currency-input\", 12);\n    ɵngcc0.ɵɵtemplate(22, ProductVariantsTableComponent_ng_template_19_ng_container_0_vdr_currency_input_22_Template, 2, 4, \"vdr-currency-input\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(23, \"td\", 14);\n    ɵngcc0.ɵɵelementStart(24, \"clr-input-container\");\n    ɵngcc0.ɵɵelement(25, \"input\", 15);\n    ɵngcc0.ɵɵpipe(26, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(27, \"td\", 14);\n    ɵngcc0.ɵɵelementStart(28, \"clr-toggle-wrapper\");\n    ɵngcc0.ɵɵelement(29, \"input\", 16);\n    ɵngcc0.ɵɵpipe(30, \"hasPermission\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const formGroup_r6 = ctx.ngIf;\n    const _r8 = ɵngcc0.ɵɵreference(6);\n    const variant_r3 = ɵngcc0.ɵɵnextContext().item;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", formGroup_r6);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.getFeaturedAsset(variant_r3))(\"ngIfElse\", _r8);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(10, 24, ctx_r5.updatePermission))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(11, 26, \"common.name\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(15, 28, ctx_r5.updatePermission))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(16, 30, \"catalog.sku\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(18, 32, variant_r3.options, \"groupId\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r5.channelPriceIncludesTax);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.channelPriceIncludesTax);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ɵngcc0.ɵɵpipeBind1(26, 35, ctx_r5.updatePermission));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassProp(\"disabled\", !formGroup_r6.get(\"enabled\").value);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"vdrDisabled\", !ɵngcc0.ɵɵpipeBind1(30, 37, ctx_r5.updatePermission));\n} }\nfunction ProductVariantsTableComponent_ng_template_19_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ProductVariantsTableComponent_ng_template_19_ng_container_0_Template, 31, 39, \"ng-container\", 2);\n} if (rf & 2) {\n    const variant_r3 = ctx.item;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.formGroupMap.get(variant_r3.id));\n} }\nconst _c36 = function (a0) { return { rate: a0 }; };\nfunction VariantPriceDetailComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"catalog.price-includes-tax-at\", ɵngcc0.ɵɵpureFunction1(6, _c36, ɵngcc0.ɵɵpipeBind1(3, 4, ctx_r0.taxRate$))), \"\\n\");\n} }\nconst _c37 = function (a0, a1) { return { price: a0, rate: a1 }; };\nfunction VariantPriceDetailComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"localeCurrency\");\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(2, 1, \"catalog.price-with-tax-in-default-zone\", ɵngcc0.ɵɵpureFunction2(11, _c37, ɵngcc0.ɵɵpipeBind2(3, 4, ɵngcc0.ɵɵpipeBind1(4, 7, ctx_r1.grossPrice$), ctx_r1.currencyCode), ɵngcc0.ɵɵpipeBind1(5, 9, ctx_r1.taxRate$))), \"\\n\");\n} }\nclass AssetDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, notificationService, dataService, formBuilder) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.notificationService = notificationService;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.detailForm = new FormGroup({});\r\n        this.customFields = this.getCustomFieldConfig('Asset');\r\n    }\r\n    ngOnInit() {\r\n        this.detailForm = new FormGroup({\r\n            name: new FormControl(''),\r\n            tags: new FormControl([]),\r\n            customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n        });\r\n        this.init();\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    onAssetChange(event) {\r\n        var _a, _b;\r\n        (_a = this.detailForm.get('name')) === null || _a === void 0 ? void 0 : _a.setValue(event.name);\r\n        (_b = this.detailForm.get('tags')) === null || _b === void 0 ? void 0 : _b.setValue(event.tags);\r\n        this.detailForm.markAsDirty();\r\n    }\r\n    save() {\r\n        this.dataService.product\r\n            .updateAsset({\r\n            id: this.id,\r\n            name: this.detailForm.value.name,\r\n            tags: this.detailForm.value.tags,\r\n            customFields: this.detailForm.value.customFields,\r\n        })\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-update-success'), { entity: 'Asset' });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Asset',\r\n            });\r\n        });\r\n    }\r\n    setFormValues(entity, languageCode) {\r\n        var _a, _b;\r\n        (_a = this.detailForm.get('name')) === null || _a === void 0 ? void 0 : _a.setValue(entity.name);\r\n        (_b = this.detailForm.get('tags')) === null || _b === void 0 ? void 0 : _b.setValue(entity.tags);\r\n        if (this.customFields.length) {\r\n            const customFieldsGroup = this.detailForm.get('customFields');\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = entity.customFields[key];\r\n                const control = customFieldsGroup.get(key);\r\n                if (control) {\r\n                    control.patchValue(value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\nAssetDetailComponent.ɵfac = function AssetDetailComponent_Factory(t) { return new (t || AssetDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder)); };\nAssetDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AssetDetailComponent, selectors: [[\"vdr-asset-detail\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 9, vars: 11, consts: [[3, \"entity\"], [\"locationId\", \"asset-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [3, \"asset\", \"editable\", \"customFields\", \"customFieldsForm\", \"assetChange\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function AssetDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelement(2, \"vdr-entity-info\", 0);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(5, \"vdr-action-bar-items\", 1);\n        ɵngcc0.ɵɵtemplate(6, AssetDetailComponent_button_6_Template, 3, 4, \"button\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"vdr-asset-preview\", 3);\n        ɵngcc0.ɵɵlistener(\"assetChange\", function AssetDetailComponent_Template_vdr_asset_preview_assetChange_7_listener($event) { return ctx.onAssetChange($event); });\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(3, 6, ctx.entity$));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(10, _c0));\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"asset\", ɵngcc0.ɵɵpipeBind1(8, 8, ctx.entity$))(\"editable\", true)(\"customFields\", ctx.customFields)(\"customFieldsForm\", ctx.detailForm.get(\"customFields\"));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.AssetPreviewComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}\"], changeDetection: 0 });\r\nAssetDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: NotificationService },\r\n    { type: DataService },\r\n    { type: FormBuilder }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AssetDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-asset-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"asset-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateAsset']\\\"\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            (click)=\\\"save()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.update' | translate }}\\r\\n        </button>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n<vdr-asset-preview\\r\\n    [asset]=\\\"entity$ | async\\\"\\r\\n    [editable]=\\\"true\\\"\\r\\n    [customFields]=\\\"customFields\\\"\\r\\n    [customFieldsForm]=\\\"detailForm.get('customFields')\\\"\\r\\n    (assetChange)=\\\"onAssetChange($event)\\\"\\r\\n></vdr-asset-preview>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:flex;flex-direction:column;height:100%}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.DataService }, { type: ɵngcc3.FormBuilder }]; }, null); })();\n\nclass AssetListComponent extends BaseListComponent {\r\n    constructor(notificationService, modalService, dataService, router, route) {\r\n        super(router, route);\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.dataService = dataService;\r\n        this.searchTerm$ = new BehaviorSubject(undefined);\r\n        this.filterByTags$ = new BehaviorSubject(undefined);\r\n        this.uploading = false;\r\n        super.setQueryFn((...args) => this.dataService.product.getAssetList(...args), data => data.assets, (skip, take) => {\r\n            var _a;\r\n            const searchTerm = this.searchTerm$.value;\r\n            const tags = (_a = this.filterByTags$.value) === null || _a === void 0 ? void 0 : _a.map(t => t.value);\r\n            return {\r\n                options: Object.assign(Object.assign({ skip,\r\n                    take }, (searchTerm\r\n                    ? {\r\n                        filter: {\r\n                            name: { contains: searchTerm },\r\n                        },\r\n                    }\r\n                    : {})), { sort: {\r\n                        createdAt: SortOrder.DESC,\r\n                    }, tags, tagsOperator: LogicalOperator.AND }),\r\n            };\r\n        }, { take: 25, skip: 0 });\r\n    }\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.paginationConfig$ = combineLatest(this.itemsPerPage$, this.currentPage$, this.totalItems$).pipe(map(([itemsPerPage, currentPage, totalItems]) => ({ itemsPerPage, currentPage, totalItems })));\r\n        this.searchTerm$.pipe(debounceTime(250), takeUntil(this.destroy$)).subscribe(() => this.refresh());\r\n        this.filterByTags$.pipe(takeUntil(this.destroy$)).subscribe(() => this.refresh());\r\n        this.allTags$ = this.dataService.product.getTagList().mapStream(data => data.tags.items);\r\n    }\r\n    filesSelected(files) {\r\n        if (files.length) {\r\n            this.uploading = true;\r\n            this.dataService.product\r\n                .createAssets(files)\r\n                .pipe(finalize(() => (this.uploading = false)))\r\n                .subscribe(({ createAssets }) => {\r\n                let successCount = 0;\r\n                for (const result of createAssets) {\r\n                    switch (result.__typename) {\r\n                        case 'Asset':\r\n                            successCount++;\r\n                            break;\r\n                        case 'MimeTypeError':\r\n                            this.notificationService.error(result.message);\r\n                            break;\r\n                    }\r\n                }\r\n                if (0 < successCount) {\r\n                    super.refresh();\r\n                    this.notificationService.success(marker('asset.notify-create-assets-success'), {\r\n                        count: successCount,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    deleteAssets(assets) {\r\n        this.showModalAndDelete(assets.map(a => a.id))\r\n            .pipe(switchMap(response => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(assets.map(a => a.id), response.message || '').pipe(map(r => r.result === DeletionResult.DELETED));\r\n            }\r\n        }))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Assets',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Assets',\r\n            });\r\n        });\r\n    }\r\n    showModalAndDelete(assetIds, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-assets'),\r\n            translationVars: {\r\n                count: assetIds.length,\r\n            },\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => (res ? this.dataService.product.deleteAssets(assetIds, !!message) : EMPTY)), map(res => res.deleteAssets));\r\n    }\r\n}\nAssetListComponent.ɵfac = function AssetListComponent_Factory(t) { return new (t || AssetListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute)); };\nAssetListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AssetListComponent, selectors: [[\"vdr-asset-list\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 19, vars: 31, consts: [[3, \"grow\"], [1, \"pr4\", \"mt1\", 3, \"tags\", \"searchTermChange\", \"tagsChange\"], [\"locationId\", \"asset-list\"], [\"dropZoneTarget\", \".content-area\", 3, \"uploading\", \"selectFiles\"], [3, \"assets\", \"multiSelect\", \"canDelete\", \"deleteAssets\"], [1, \"paging-controls\"], [3, \"itemsPerPage\", \"itemsPerPageChange\"], [3, \"currentPage\", \"itemsPerPage\", \"totalItems\", \"pageChange\"]], template: function AssetListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\", 0);\n        ɵngcc0.ɵɵelementStart(2, \"vdr-asset-search-input\", 1);\n        ɵngcc0.ɵɵlistener(\"searchTermChange\", function AssetListComponent_Template_vdr_asset_search_input_searchTermChange_2_listener($event) { return ctx.searchTerm$.next($event); })(\"tagsChange\", function AssetListComponent_Template_vdr_asset_search_input_tagsChange_2_listener($event) { return ctx.filterByTags$.next($event); });\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(5, \"vdr-action-bar-items\", 2);\n        ɵngcc0.ɵɵelementStart(6, \"vdr-asset-file-input\", 3);\n        ɵngcc0.ɵɵlistener(\"selectFiles\", function AssetListComponent_Template_vdr_asset_file_input_selectFiles_6_listener($event) { return ctx.filesSelected($event); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"vdr-asset-gallery\", 4);\n        ɵngcc0.ɵɵlistener(\"deleteAssets\", function AssetListComponent_Template_vdr_asset_gallery_deleteAssets_7_listener($event) { return ctx.deleteAssets($event); });\n        ɵngcc0.ɵɵpipe(8, \"paginate\");\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵpipe(10, \"async\");\n        ɵngcc0.ɵɵpipe(11, \"hasPermission\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(13, \"vdr-items-per-page-controls\", 6);\n        ɵngcc0.ɵɵlistener(\"itemsPerPageChange\", function AssetListComponent_Template_vdr_items_per_page_controls_itemsPerPageChange_13_listener($event) { return ctx.setItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(14, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(15, \"vdr-pagination-controls\", 7);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function AssetListComponent_Template_vdr_pagination_controls_pageChange_15_listener($event) { return ctx.setPageNumber($event); });\n        ɵngcc0.ɵɵpipe(16, \"async\");\n        ɵngcc0.ɵɵpipe(17, \"async\");\n        ɵngcc0.ɵɵpipe(18, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"grow\", true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"tags\", ɵngcc0.ɵɵpipeBind1(3, 10, ctx.allTags$));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"uploading\", ctx.uploading);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"assets\", ɵngcc0.ɵɵpipeBind2(8, 12, ɵngcc0.ɵɵpipeBind1(9, 15, ctx.items$), ɵngcc0.ɵɵpipeBind1(10, 17, ctx.paginationConfig$) || ɵngcc0.ɵɵpureFunction0(29, _c1)))(\"multiSelect\", true)(\"canDelete\", ɵngcc0.ɵɵpipeBind1(11, 19, ɵngcc0.ɵɵpureFunction0(30, _c2)));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(14, 21, ctx.itemsPerPage$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"currentPage\", ɵngcc0.ɵɵpipeBind1(16, 23, ctx.currentPage$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(17, 25, ctx.itemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(18, 27, ctx.totalItems$));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.AssetSearchInputComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.AssetFileInputComponent, ɵngcc2.AssetGalleryComponent, ɵngcc2.ItemsPerPageControlsComponent, ɵngcc2.PaginationControlsComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc6.PaginatePipe, ɵngcc2.HasPermissionPipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}vdr-asset-gallery[_ngcontent-%COMP%]{flex:1}.paging-controls[_ngcontent-%COMP%]{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}.search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}\"] });\r\nAssetListComponent.ctorParameters = () => [\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: DataService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AssetListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-asset-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left [grow]=\\\"true\\\">\\r\\n        <vdr-asset-search-input\\r\\n            class=\\\"pr4 mt1\\\"\\r\\n            [tags]=\\\"allTags$ | async\\\"\\r\\n            (searchTermChange)=\\\"searchTerm$.next($event)\\\"\\r\\n            (tagsChange)=\\\"filterByTags$.next($event)\\\"\\r\\n        ></vdr-asset-search-input>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"asset-list\\\"></vdr-action-bar-items>\\r\\n        <vdr-asset-file-input\\r\\n            (selectFiles)=\\\"filesSelected($event)\\\"\\r\\n            [uploading]=\\\"uploading\\\"\\r\\n            dropZoneTarget=\\\".content-area\\\"\\r\\n        ></vdr-asset-file-input>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-asset-gallery\\r\\n    [assets]=\\\"(items$ | async)! | paginate: (paginationConfig$ | async) || {}\\\"\\r\\n    [multiSelect]=\\\"true\\\"\\r\\n    [canDelete]=\\\"['DeleteCatalog', 'DeleteAsset'] | hasPermission\\\"\\r\\n    (deleteAssets)=\\\"deleteAssets($event)\\\"\\r\\n></vdr-asset-gallery>\\r\\n\\r\\n<div class=\\\"paging-controls\\\">\\r\\n    <vdr-items-per-page-controls\\r\\n        [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n        (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n    ></vdr-items-per-page-controls>\\r\\n\\r\\n    <vdr-pagination-controls\\r\\n        [currentPage]=\\\"currentPage$ | async\\\"\\r\\n        [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n        [totalItems]=\\\"totalItems$ | async\\\"\\r\\n        (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    ></vdr-pagination-controls>\\r\\n</div>\\r\\n\",\n                styles: [\":host{display:flex;flex-direction:column;height:100%}vdr-asset-gallery{flex:1}.paging-controls{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}.search-input{margin-top:6px;min-width:300px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.DataService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }]; }, null); })();\n\nclass CollectionContentsComponent {\r\n    constructor(route, router, dataService) {\r\n        this.route = route;\r\n        this.router = router;\r\n        this.dataService = dataService;\r\n        this.filterTermControl = new FormControl('');\r\n        this.collectionIdChange$ = new BehaviorSubject('');\r\n        this.refresh$ = new BehaviorSubject(true);\r\n        this.destroy$ = new Subject();\r\n    }\r\n    ngOnInit() {\r\n        this.contentsCurrentPage$ = this.route.paramMap.pipe(map(qpm => qpm.get('contentsPage')), map(page => (!page ? 1 : +page)), startWith(1), distinctUntilChanged());\r\n        this.contentsItemsPerPage$ = this.route.paramMap.pipe(map(qpm => qpm.get('contentsPerPage')), map(perPage => (!perPage ? 10 : +perPage)), startWith(10), distinctUntilChanged());\r\n        const filterTerm$ = this.filterTermControl.valueChanges.pipe(debounceTime(250), tap(() => this.setContentsPageNumber(1)), startWith(''));\r\n        const collection$ = combineLatest(this.collectionIdChange$, this.contentsCurrentPage$, this.contentsItemsPerPage$, filterTerm$, this.refresh$).pipe(takeUntil(this.destroy$), switchMap(([id, currentPage, itemsPerPage, filterTerm]) => {\r\n            const take = itemsPerPage;\r\n            const skip = (currentPage - 1) * itemsPerPage;\r\n            if (id) {\r\n                return this.dataService.collection\r\n                    .getCollectionContents(id, take, skip, filterTerm)\r\n                    .mapSingle(data => data.collection);\r\n            }\r\n            else {\r\n                return of(null);\r\n            }\r\n        }));\r\n        this.contents$ = collection$.pipe(map(result => (result ? result.productVariants.items : [])));\r\n        this.contentsTotalItems$ = collection$.pipe(map(result => (result ? result.productVariants.totalItems : 0)));\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('collectionId' in changes) {\r\n            this.collectionIdChange$.next(changes.collectionId.currentValue);\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n    setContentsPageNumber(page) {\r\n        this.setParam('contentsPage', page);\r\n    }\r\n    setContentsItemsPerPage(perPage) {\r\n        this.setParam('contentsPerPage', perPage);\r\n    }\r\n    refresh() {\r\n        this.refresh$.next(true);\r\n    }\r\n    setParam(key, value) {\r\n        this.router.navigate(['./', Object.assign(Object.assign({}, this.route.snapshot.params), { [key]: value })], {\r\n            relativeTo: this.route,\r\n            queryParamsHandling: 'merge',\r\n        });\r\n    }\r\n}\nCollectionContentsComponent.ɵfac = function CollectionContentsComponent_Factory(t) { return new (t || CollectionContentsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nCollectionContentsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionContentsComponent, selectors: [[\"vdr-collection-contents\"]], contentQueries: function CollectionContentsComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, TemplateRef, 3);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.headerTemplate = _t.first);\n    } }, inputs: { collectionId: \"collectionId\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 12, vars: 22, consts: [[1, \"contents-header\"], [1, \"header-title-row\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"type\", \"text\", 3, \"placeholder\", \"formControl\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [1, \"left\", \"align-middle\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"]], template: function CollectionContentsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, CollectionContentsComponent_ng_container_2_Template, 1, 0, \"ng-container\", 2);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(4, \"input\", 3);\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"vdr-data-table\", 4);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function CollectionContentsComponent_Template_vdr_data_table_pageChange_6_listener($event) { return ctx.setContentsPageNumber($event); })(\"itemsPerPageChange\", function CollectionContentsComponent_Template_vdr_data_table_itemsPerPageChange_6_listener($event) { return ctx.setContentsItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵpipe(10, \"async\");\n        ɵngcc0.ɵɵtemplate(11, CollectionContentsComponent_ng_template_11_Template, 5, 9, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx.headerTemplate)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(20, _c5, ɵngcc0.ɵɵpipeBind1(3, 8, ctx.contentsTotalItems$)));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(5, 10, \"catalog.filter-by-name\"))(\"formControl\", ctx.filterTermControl);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(7, 12, ctx.contents$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(8, 14, ctx.contentsItemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(9, 16, ctx.contentsTotalItems$))(\"currentPage\", ɵngcc0.ɵɵpipeBind1(10, 18, ctx.contentsCurrentPage$));\n    } }, directives: [ɵngcc4.NgTemplateOutlet, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc3.NgControlStatus, ɵngcc3.FormControlDirective, ɵngcc2.DataTableComponent, ɵngcc2.TableRowActionComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\".contents-header[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:1;border-bottom:1px solid var(--color-component-border-200)}.contents-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.contents-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     table{margin-top:-1px}\"], changeDetection: 0 });\r\nCollectionContentsComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: Router },\r\n    { type: DataService }\r\n];\r\nCollectionContentsComponent.propDecorators = {\r\n    collectionId: [{ type: Input }],\r\n    headerTemplate: [{ type: ContentChild, args: [TemplateRef, { static: true },] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CollectionContentsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-contents',\n                template: \"<div class=\\\"contents-header\\\">\\r\\n    <div class=\\\"header-title-row\\\">\\r\\n        <ng-container\\r\\n            *ngTemplateOutlet=\\\"headerTemplate; context: { $implicit: contentsTotalItems$ | async }\\\"\\r\\n        ></ng-container>\\r\\n    </div>\\r\\n    <input\\r\\n        type=\\\"text\\\"\\r\\n        [placeholder]=\\\"'catalog.filter-by-name' | translate\\\"\\r\\n        [formControl]=\\\"filterTermControl\\\"\\r\\n    />\\r\\n</div>\\r\\n<vdr-data-table\\r\\n    [items]=\\\"contents$ | async\\\"\\r\\n    [itemsPerPage]=\\\"contentsItemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"contentsTotalItems$ | async\\\"\\r\\n    [currentPage]=\\\"contentsCurrentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setContentsPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setContentsItemsPerPage($event)\\\"\\r\\n>\\r\\n    <ng-template let-variant=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\">{{ variant.name }}</td>\\r\\n        <td class=\\\"right align-middle\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['/catalog/products', variant.productId, { tab: 'variants' }]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".contents-header{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:1;border-bottom:1px solid var(--color-component-border-200)}.contents-header .header-title-row{display:flex;justify-content:space-between;align-items:center}.contents-header .clr-input{width:100%}:host ::ng-deep table{margin-top:-1px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ActivatedRoute }, { type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, { collectionId: [{\n            type: Input\n        }], headerTemplate: [{\n            type: ContentChild,\n            args: [TemplateRef, { static: true }]\n        }] }); })();\n\nclass CollectionDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, formBuilder, notificationService, modalService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.assetChanges = {};\r\n        this.filters = [];\r\n        this.allFilters = [];\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateCollection];\r\n        this.customFields = this.getCustomFieldConfig('Collection');\r\n        this.detailForm = this.formBuilder.group({\r\n            name: ['', Validators.required],\r\n            slug: '',\r\n            description: '',\r\n            visible: false,\r\n            filters: this.formBuilder.array([]),\r\n            customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.dataService.collection.getCollectionFilters().single$.subscribe(res => {\r\n            this.allFilters = res.collectionFilters;\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    getFilterDefinition(filter) {\r\n        return this.allFilters.find(f => f.code === filter.code);\r\n    }\r\n    customFieldIsSet(name) {\r\n        return !!this.detailForm.get(['customFields', name]);\r\n    }\r\n    assetsChanged() {\r\n        return !!Object.values(this.assetChanges).length;\r\n    }\r\n    /**\r\n     * If creating a new Collection, automatically generate the slug based on the collection name.\r\n     */\r\n    updateSlug(nameValue) {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1))\r\n            .subscribe(([entity, languageCode]) => {\r\n            const slugControl = this.detailForm.get(['slug']);\r\n            const currentTranslation = findTranslation(entity, languageCode);\r\n            const currentSlugIsEmpty = !currentTranslation || !currentTranslation.slug;\r\n            if (slugControl && slugControl.pristine && currentSlugIsEmpty) {\r\n                slugControl.setValue(normalizeString(`${nameValue}`, '-'));\r\n            }\r\n        });\r\n    }\r\n    addFilter(collectionFilter) {\r\n        const filtersArray = this.detailForm.get('filters');\r\n        const index = filtersArray.value.findIndex(o => o.code === collectionFilter.code);\r\n        if (index === -1) {\r\n            const argsHash = collectionFilter.args.reduce((output, arg) => (Object.assign(Object.assign({}, output), { [arg.name]: getConfigArgValue(arg.value) })), {});\r\n            filtersArray.push(this.formBuilder.control({\r\n                code: collectionFilter.code,\r\n                args: argsHash,\r\n            }));\r\n            this.filters.push({\r\n                code: collectionFilter.code,\r\n                args: collectionFilter.args.map(a => ({ name: a.name, value: getConfigArgValue(a.value) })),\r\n            });\r\n        }\r\n    }\r\n    removeFilter(collectionFilter) {\r\n        const filtersArray = this.detailForm.get('filters');\r\n        const index = filtersArray.value.findIndex(o => o.code === collectionFilter.code);\r\n        if (index !== -1) {\r\n            filtersArray.removeAt(index);\r\n            this.filters.splice(index, 1);\r\n        }\r\n    }\r\n    create() {\r\n        if (!this.detailForm.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([category, languageCode]) => {\r\n            const input = this.getUpdatedCollection(category, this.detailForm, languageCode);\r\n            const parentId = this.route.snapshot.paramMap.get('parentId');\r\n            if (parentId) {\r\n                input.parentId = parentId;\r\n            }\r\n            return this.dataService.collection.createCollection(input);\r\n        }))\r\n            .subscribe(data => {\r\n            this.notificationService.success(marker('common.notify-create-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.assetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.router.navigate(['../', data.createCollection.id], { relativeTo: this.route });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([category, languageCode]) => {\r\n            const input = this.getUpdatedCollection(category, this.detailForm, languageCode);\r\n            return this.dataService.collection.updateCollection(input);\r\n        }))\r\n            .subscribe(() => {\r\n            this.assetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.contentsComponent.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    canDeactivate() {\r\n        return super.canDeactivate() && !this.assetChanges.assets && !this.assetChanges.featuredAsset;\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the category or current language.\r\n     */\r\n    setFormValues(entity, languageCode) {\r\n        const currentTranslation = findTranslation(entity, languageCode);\r\n        this.detailForm.patchValue({\r\n            name: currentTranslation ? currentTranslation.name : '',\r\n            slug: currentTranslation ? currentTranslation.slug : '',\r\n            description: currentTranslation ? currentTranslation.description : '',\r\n            visible: !entity.isPrivate,\r\n        });\r\n        entity.filters.forEach(f => this.addFilter(f));\r\n        if (this.customFields.length) {\r\n            const customFieldsGroup = this.detailForm.get(['customFields']);\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString'\r\n                    ? currentTranslation.customFields[key]\r\n                    : entity.customFields[key];\r\n                const control = customFieldsGroup.get(key);\r\n                if (control) {\r\n                    control.patchValue(value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Given a category and the value of the form, this method creates an updated copy of the category which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedCollection(category, form, languageCode) {\r\n        var _a, _b;\r\n        const updatedCategory = createUpdatedTranslatable({\r\n            translatable: category,\r\n            updatedFields: form.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: category.name || '',\r\n                slug: category.slug || '',\r\n                description: category.description || '',\r\n            },\r\n        });\r\n        return Object.assign(Object.assign({}, updatedCategory), { assetIds: (_a = this.assetChanges.assets) === null || _a === void 0 ? void 0 : _a.map(a => a.id), featuredAssetId: (_b = this.assetChanges.featuredAsset) === null || _b === void 0 ? void 0 : _b.id, isPrivate: !form.value.visible, filters: this.mapOperationsToInputs(this.filters, this.detailForm.value.filters) });\r\n    }\r\n    /**\r\n     * Maps an array of conditions or actions to the input format expected by the GraphQL API.\r\n     */\r\n    mapOperationsToInputs(operations, formValueOperations) {\r\n        return operations.map((o, i) => {\r\n            return {\r\n                code: o.code,\r\n                arguments: Object.values(formValueOperations[i].args).map((value, j) => ({\r\n                    name: o.args[j].name,\r\n                    value: encodeConfigArgValue(value),\r\n                })),\r\n            };\r\n        });\r\n    }\r\n}\nCollectionDetailComponent.ɵfac = function CollectionDetailComponent_Factory(t) { return new (t || CollectionDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService)); };\nCollectionDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionDetailComponent, selectors: [[\"vdr-collection-detail\"]], viewQuery: function CollectionDetailComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c6, 1);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.contentsComponent = _t.first);\n    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 16, vars: 19, consts: [[3, \"entity\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"collection-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\"], [1, \"clr-row\"], [1, \"clr-col\"], [\"for\", \"visibility\", 3, \"label\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"formControlName\", \"visible\", \"id\", \"visibility\", 3, \"vdrDisabled\"], [1, \"visible-toggle\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"for\", \"slug\", 3, \"label\", \"errors\"], [\"id\", \"slug\", \"type\", \"text\", \"formControlName\", \"slug\", \"pattern\", \"[a-z0-9_-]+\", 3, \"readonly\"], [\"formControlName\", \"description\", 3, \"readonly\", \"label\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [1, \"clr-col-md-auto\"], [3, \"assets\", \"featuredAsset\", \"change\"], [\"formArrayName\", \"filters\", 1, \"clr-row\"], [4, \"ngFor\", \"ngForOf\"], [4, \"vdrIfPermissions\"], [3, \"collectionId\"], [\"collectionContents\", \"\"], [\"formGroupName\", \"customFields\"], [\"entityName\", \"Collection\", 3, \"customFieldsFormGroup\", \"customField\", 4, \"ngIf\"], [\"entityName\", \"Collection\", 3, \"customFieldsFormGroup\", \"customField\"], [3, \"operation\", \"operationDefinition\", \"formControlName\", \"readonly\", \"remove\"], [\"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-outline\"], [\"shape\", \"plus\"], [\"vdrPosition\", \"bottom-left\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\"], [1, \"contents-title\"]], template: function CollectionDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelement(2, \"vdr-entity-info\", 0);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementStart(4, \"vdr-language-selector\", 1);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function CollectionDetailComponent_Template_vdr_language_selector_languageCodeChange_4_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(9, \"vdr-action-bar-items\", 2);\n        ɵngcc0.ɵɵtemplate(10, CollectionDetailComponent_button_10_Template, 3, 4, \"button\", 3);\n        ɵngcc0.ɵɵpipe(11, \"async\");\n        ɵngcc0.ɵɵtemplate(12, CollectionDetailComponent_ng_template_12_Template, 1, 1, \"ng-template\", null, 4, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(14, CollectionDetailComponent_form_14_Template, 38, 41, \"form\", 5);\n        ɵngcc0.ɵɵpipe(15, \"async\");\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(13);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(3, 7, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(5, 9, ctx.isNew$))(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(6, 11, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(7, 13, ctx.languageCode$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(11, 15, ctx.isNew$))(\"ngIfElse\", _r1);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(15, 17, ctx.entity$));\n    } }, directives: function () { return [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.LanguageSelectorComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc4.NgIf, ɵngcc2.IfPermissionsDirective, ɵngcc3.ɵangular_packages_forms_forms_y, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc2.FormFieldComponent, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc2.DisabledDirective, ɵngcc7.ClrLabel, ɵngcc3.DefaultValueAccessor, ɵngcc3.PatternValidator, ɵngcc2.RichTextEditorComponent, ProductAssetsComponent, ɵngcc3.FormArrayName, ɵngcc4.NgForOf, CollectionContentsComponent, ɵngcc3.FormGroupName, ɵngcc2.CustomFieldControlComponent, ɵngcc2.ConfigurableInputComponent, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc7.ClrIconCustomTag, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective]; }, pipes: function () { return [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe]; }, styles: [_c15], changeDetection: 0 });\r\nCollectionDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: FormBuilder },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\r\nCollectionDetailComponent.propDecorators = {\r\n    contentsComponent: [{ type: ViewChild, args: ['collectionContents',] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CollectionDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"collection-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"updatePermission\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"(detailForm.invalid || detailForm.pristine) && !assetsChanged()\\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"entity$ | async as category\\\">\\r\\n    <div class=\\\"clr-row\\\">\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <vdr-form-field [label]=\\\"'catalog.visibility' | translate\\\" for=\\\"visibility\\\">\\r\\n                <clr-toggle-wrapper>\\r\\n                    <input\\r\\n                        type=\\\"checkbox\\\"\\r\\n                        clrToggle\\r\\n                        formControlName=\\\"visible\\\"\\r\\n                        id=\\\"visibility\\\"\\r\\n                        [vdrDisabled]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    />\\r\\n                    <label class=\\\"visible-toggle\\\">\\r\\n                        <ng-container *ngIf=\\\"detailForm.value.visible; else private\\\">{{ 'catalog.public' | translate }}</ng-container>\\r\\n                        <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n                    </label>\\r\\n                </clr-toggle-wrapper>\\r\\n            </vdr-form-field>\\r\\n            <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n                <input\\r\\n                    id=\\\"name\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    formControlName=\\\"name\\\"\\r\\n                    [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    (input)=\\\"updateSlug($event.target.value)\\\"\\r\\n                />\\r\\n            </vdr-form-field>\\r\\n            <vdr-form-field\\r\\n                [label]=\\\"'catalog.slug' | translate\\\"\\r\\n                for=\\\"slug\\\"\\r\\n                [errors]=\\\"{ pattern: ('catalog.slug-pattern-error' | translate) }\\\"\\r\\n            >\\r\\n                <input\\r\\n                    id=\\\"slug\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    formControlName=\\\"slug\\\"\\r\\n                    [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    pattern=\\\"[a-z0-9_-]+\\\"\\r\\n                />\\r\\n            </vdr-form-field>\\r\\n            <vdr-rich-text-editor\\r\\n                formControlName=\\\"description\\\"\\r\\n                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                [label]=\\\"'common.description' | translate\\\"\\r\\n            ></vdr-rich-text-editor>\\r\\n\\r\\n            <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n                <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n                    <vdr-custom-field-control\\r\\n                        *ngIf=\\\"customFieldIsSet(customField.name)\\\"\\r\\n                        entityName=\\\"Collection\\\"\\r\\n                        [customFieldsFormGroup]=\\\"detailForm.get(['customFields'])\\\"\\r\\n                        [customField]=\\\"customField\\\"\\r\\n                    ></vdr-custom-field-control>\\r\\n                </ng-container>\\r\\n            </section>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col-md-auto\\\">\\r\\n            <vdr-product-assets\\r\\n                [assets]=\\\"category.assets\\\"\\r\\n                [featuredAsset]=\\\"category.featuredAsset\\\"\\r\\n                (change)=\\\"assetChanges = $event\\\"\\r\\n            ></vdr-product-assets>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"clr-row\\\" formArrayName=\\\"filters\\\">\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <label>{{ 'catalog.filters' | translate }}</label>\\r\\n            <ng-container *ngFor=\\\"let filter of filters; index as i\\\">\\r\\n                <vdr-configurable-input\\r\\n                    (remove)=\\\"removeFilter($event)\\\"\\r\\n                    [operation]=\\\"filter\\\"\\r\\n                    [operationDefinition]=\\\"getFilterDefinition(filter)\\\"\\r\\n                    [formControlName]=\\\"i\\\"\\r\\n                    [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                ></vdr-configurable-input>\\r\\n            </ng-container>\\r\\n\\r\\n            <div *vdrIfPermissions=\\\"updatePermission\\\">\\r\\n                <vdr-dropdown>\\r\\n                    <button class=\\\"btn btn-outline\\\" vdrDropdownTrigger>\\r\\n                        <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                        {{ 'marketing.add-condition' | translate }}\\r\\n                    </button>\\r\\n                    <vdr-dropdown-menu vdrPosition=\\\"bottom-left\\\">\\r\\n                        <button\\r\\n                            *ngFor=\\\"let filter of allFilters\\\"\\r\\n                            type=\\\"button\\\"\\r\\n                            vdrDropdownItem\\r\\n                            (click)=\\\"addFilter(filter)\\\"\\r\\n                        >\\r\\n                            {{ filter.description }}\\r\\n                        </button>\\r\\n                    </vdr-dropdown-menu>\\r\\n                </vdr-dropdown>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"clr-col\\\">\\r\\n            <vdr-collection-contents [collectionId]=\\\"id\\\" #collectionContents>\\r\\n                <ng-template let-count>\\r\\n                    <div class=\\\"contents-title\\\">\\r\\n                        {{ 'catalog.collection-contents' | translate }} ({{\\r\\n                            'common.results-count' | translate: { count: count }\\r\\n                        }})\\r\\n                    </div>\\r\\n                </ng-template>\\r\\n            </vdr-collection-contents>\\r\\n        </div>\\r\\n    </div>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".visible-toggle{margin-top:-3px!important}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc2.DataService }, { type: ɵngcc3.FormBuilder }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }]; }, { contentsComponent: [{\n            type: ViewChild,\n            args: ['collectionContents']\n        }] }); })();\n\nclass CollectionListComponent {\r\n    constructor(dataService, notificationService, modalService, router, route, serverConfigService) {\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.serverConfigService = serverConfigService;\r\n        this.expandAll = false;\r\n    }\r\n    ngOnInit() {\r\n        this.queryResult = this.dataService.collection.getCollections(1000, 0).refetchOnChannelChange();\r\n        this.items$ = this.queryResult.mapStream(data => data.collections.items).pipe(shareReplay(1));\r\n        this.activeCollectionId$ = this.route.paramMap.pipe(map(pm => pm.get('contents')), distinctUntilChanged());\r\n        this.activeCollectionTitle$ = combineLatest(this.activeCollectionId$, this.items$).pipe(map(([id, collections]) => {\r\n            if (id) {\r\n                const match = collections.find(c => c.id === id);\r\n                return match ? match.name : '';\r\n            }\r\n            return '';\r\n        }));\r\n        this.availableLanguages$ = this.serverConfigService.getAvailableLanguages();\r\n        this.contentLanguage$ = this.dataService.client\r\n            .uiState()\r\n            .mapStream(({ uiState }) => uiState.contentLanguage)\r\n            .pipe(tap(() => this.refresh()));\r\n    }\r\n    ngOnDestroy() {\r\n        this.queryResult.completed$.next();\r\n    }\r\n    onRearrange(event) {\r\n        this.dataService.collection.moveCollection([event]).subscribe({\r\n            next: () => {\r\n                this.notificationService.success(marker('common.notify-saved-changes'));\r\n                this.refresh();\r\n            },\r\n            error: err => {\r\n                this.notificationService.error(marker('common.notify-save-changes-error'));\r\n            },\r\n        });\r\n    }\r\n    deleteCollection(id) {\r\n        this.items$\r\n            .pipe(take(1), map(items => -1 < items.findIndex(i => i.parent && i.parent.id === id)), switchMap(hasChildren => {\r\n            return this.modalService.dialog({\r\n                title: marker('catalog.confirm-delete-collection'),\r\n                body: hasChildren\r\n                    ? marker('catalog.confirm-delete-collection-and-children-body')\r\n                    : undefined,\r\n                buttons: [\r\n                    { type: 'secondary', label: marker('common.cancel') },\r\n                    { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n                ],\r\n            });\r\n        }), switchMap(response => (response ? this.dataService.collection.deleteCollection(id) : EMPTY)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Collection',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Collection',\r\n            });\r\n        });\r\n    }\r\n    closeContents() {\r\n        const params = Object.assign({}, this.route.snapshot.params);\r\n        delete params.contents;\r\n        this.router.navigate(['./', params], { relativeTo: this.route, queryParamsHandling: 'preserve' });\r\n    }\r\n    setLanguage(code) {\r\n        this.dataService.client.setContentLanguage(code).subscribe();\r\n    }\r\n    refresh() {\r\n        this.queryResult.ref.refetch();\r\n    }\r\n}\nCollectionListComponent.ɵfac = function CollectionListComponent_Factory(t) { return new (t || CollectionListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService)); };\nCollectionListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionListComponent, selectors: [[\"vdr-collection-list\"]], decls: 24, vars: 29, consts: [[1, \"flex\", \"center\", \"wrap\"], [1, \"mt2\", 3, \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [1, \"expand-all-toggle\", \"ml3\", 3, \"ngClass\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"locationId\", \"collection-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [1, \"collection-wrapper\"], [3, \"collections\", \"activeCollectionId\", \"expandAll\", \"rearrange\", \"deleteCollection\"], [1, \"collection-contents\"], [3, \"collectionId\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"collection-title\"], [\"type\", \"button\", 1, \"close-button\", 3, \"click\"], [\"shape\", \"close\"]], template: function CollectionListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelementStart(2, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(3, \"vdr-language-selector\", 1);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function CollectionListComponent_Template_vdr_language_selector_languageCodeChange_3_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(4, \"async\");\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"clr-checkbox-wrapper\", 2);\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵelementStart(8, \"input\", 3);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function CollectionListComponent_Template_input_ngModelChange_8_listener($event) { return ctx.expandAll = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"label\");\n        ɵngcc0.ɵɵtext(10);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(13, \"vdr-action-bar-items\", 4);\n        ɵngcc0.ɵɵtemplate(14, CollectionListComponent_a_14_Template, 4, 5, \"a\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(15, \"div\", 6);\n        ɵngcc0.ɵɵelementStart(16, \"vdr-collection-tree\", 7);\n        ɵngcc0.ɵɵlistener(\"rearrange\", function CollectionListComponent_Template_vdr_collection_tree_rearrange_16_listener($event) { return ctx.onRearrange($event); })(\"deleteCollection\", function CollectionListComponent_Template_vdr_collection_tree_deleteCollection_16_listener($event) { return ctx.deleteCollection($event); });\n        ɵngcc0.ɵɵpipe(17, \"async\");\n        ɵngcc0.ɵɵpipe(18, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(19, \"div\", 8);\n        ɵngcc0.ɵɵpipe(20, \"async\");\n        ɵngcc0.ɵɵelementStart(21, \"vdr-collection-contents\", 9);\n        ɵngcc0.ɵɵpipe(22, \"async\");\n        ɵngcc0.ɵɵtemplate(23, CollectionListComponent_ng_template_23_Template, 6, 9, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        let tmp_2_0 = null;\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(4, 12, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(5, 14, ctx.contentLanguage$));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ((tmp_2_0 = ɵngcc0.ɵɵpipeBind1(7, 16, ctx.availableLanguages$)) == null ? null : tmp_2_0.length) === 1 ? \"mt3\" : \"mt1\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.expandAll);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 18, \"catalog.expand-all-collections\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(28, _c11));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"collections\", ɵngcc0.ɵɵpipeBind1(17, 20, ctx.items$))(\"activeCollectionId\", ɵngcc0.ɵɵpipeBind1(18, 22, ctx.activeCollectionId$))(\"expandAll\", ctx.expandAll);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵclassProp(\"expanded\", ɵngcc0.ɵɵpipeBind1(20, 24, ctx.activeCollectionId$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"collectionId\", ɵngcc0.ɵɵpipeBind1(22, 26, ctx.activeCollectionId$));\n    } }, directives: function () { return [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.LanguageSelectorComponent, ɵngcc7.ClrCheckboxWrapper, ɵngcc4.NgClass, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc7.ClrLabel, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, CollectionTreeComponent, CollectionContentsComponent, ɵngcc1.RouterLinkWithHref, ɵngcc7.ClrIconCustomTag]; }, pipes: function () { return [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe]; }, styles: [\"[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.expand-all-toggle[_ngcontent-%COMP%]{display:block}.collection-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.collection-wrapper[_ngcontent-%COMP%]   vdr-collection-tree[_ngcontent-%COMP%]{flex:1;height:100%;overflow:auto}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents.expanded[_ngcontent-%COMP%]{width:30vw;visibility:visible;opacity:1;padding-left:12px}.collection-wrapper[_ngcontent-%COMP%]   .collection-contents[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.paging-controls[_ngcontent-%COMP%]{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}\"], changeDetection: 0 });\r\nCollectionListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: NotificationService },\r\n    { type: ModalService },\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CollectionListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex center wrap\\\">\\r\\n            <vdr-language-selector\\r\\n                class=\\\"mt2\\\"\\r\\n                [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                [currentLanguageCode]=\\\"contentLanguage$ | async\\\"\\r\\n                (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n            ></vdr-language-selector>\\r\\n            <clr-checkbox-wrapper\\r\\n                class=\\\"expand-all-toggle ml3\\\"\\r\\n                [ngClass]=\\\"(availableLanguages$ | async)?.length === 1 ? 'mt3' : 'mt1'\\\"\\r\\n            >\\r\\n                <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"expandAll\\\" />\\r\\n                <label>{{ 'catalog.expand-all-collections' | translate }}</label>\\r\\n            </clr-checkbox-wrapper>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"collection-list\\\"></vdr-action-bar-items>\\r\\n        <a\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *vdrIfPermissions=\\\"['CreateCatalog', 'CreateCollection']\\\"\\r\\n            [routerLink]=\\\"['./create']\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            {{ 'catalog.create-new-collection' | translate }}\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n<div class=\\\"collection-wrapper\\\">\\r\\n    <vdr-collection-tree\\r\\n        [collections]=\\\"items$ | async\\\"\\r\\n        [activeCollectionId]=\\\"activeCollectionId$ | async\\\"\\r\\n        [expandAll]=\\\"expandAll\\\"\\r\\n        (rearrange)=\\\"onRearrange($event)\\\"\\r\\n        (deleteCollection)=\\\"deleteCollection($event)\\\"\\r\\n    ></vdr-collection-tree>\\r\\n\\r\\n    <div class=\\\"collection-contents\\\" [class.expanded]=\\\"activeCollectionId$ | async\\\">\\r\\n        <vdr-collection-contents [collectionId]=\\\"activeCollectionId$ | async\\\">\\r\\n            <ng-template let-count>\\r\\n                <div class=\\\"collection-title\\\">\\r\\n                    {{ activeCollectionTitle$ | async }} ({{\\r\\n                        'common.results-count' | translate: { count: count }\\r\\n                    }})\\r\\n                </div>\\r\\n                <button type=\\\"button\\\" class=\\\"close-button\\\" (click)=\\\"closeContents()\\\">\\r\\n                    <clr-icon shape=\\\"close\\\"></clr-icon>\\r\\n                </button>\\r\\n            </ng-template>\\r\\n        </vdr-collection-contents>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{height:100%;display:flex;flex-direction:column}.expand-all-toggle{display:block}.collection-wrapper{display:flex;height:calc(100% - 50px)}.collection-wrapper vdr-collection-tree{flex:1;height:100%;overflow:auto}.collection-wrapper .collection-contents{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.collection-wrapper .collection-contents.expanded{width:30vw;visibility:visible;opacity:1;padding-left:12px}.collection-wrapper .collection-contents .close-button{margin:0;background:none;border:none;cursor:pointer}.paging-controls{padding-top:6px;border-top:1px solid var(--color-component-border-100);display:flex;justify-content:space-between}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.ServerConfigService }]; }, null); })();\n\nclass FacetDetailComponent extends BaseDetailComponent {\r\n    constructor(router, route, serverConfigService, changeDetector, dataService, formBuilder, notificationService, modalService) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.changeDetector = changeDetector;\r\n        this.dataService = dataService;\r\n        this.formBuilder = formBuilder;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateFacet];\r\n        this.customFields = this.getCustomFieldConfig('Facet');\r\n        this.customValueFields = this.getCustomFieldConfig('FacetValue');\r\n        this.detailForm = this.formBuilder.group({\r\n            facet: this.formBuilder.group({\r\n                code: ['', Validators.required],\r\n                name: '',\r\n                visible: true,\r\n                customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n            }),\r\n            values: this.formBuilder.array([]),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    updateCode(currentCode, nameValue) {\r\n        if (!currentCode) {\r\n            const codeControl = this.detailForm.get(['facet', 'code']);\r\n            if (codeControl && codeControl.pristine) {\r\n                codeControl.setValue(normalizeString(nameValue, '-'));\r\n            }\r\n        }\r\n    }\r\n    updateValueCode(currentCode, nameValue, index) {\r\n        if (!currentCode) {\r\n            const codeControl = this.detailForm.get(['values', index, 'code']);\r\n            if (codeControl && codeControl.pristine) {\r\n                codeControl.setValue(normalizeString(nameValue, '-'));\r\n            }\r\n        }\r\n    }\r\n    customFieldIsSet(name) {\r\n        return !!this.detailForm.get(['facet', 'customFields', name]);\r\n    }\r\n    customValueFieldIsSet(index, name) {\r\n        return !!this.detailForm.get(['values', index, 'customFields', name]);\r\n    }\r\n    getValuesFormArray() {\r\n        return this.detailForm.get('values');\r\n    }\r\n    addFacetValue() {\r\n        const valuesFormArray = this.detailForm.get('values');\r\n        if (valuesFormArray) {\r\n            valuesFormArray.insert(valuesFormArray.length, this.formBuilder.group({\r\n                id: '',\r\n                name: ['', Validators.required],\r\n                code: '',\r\n            }));\r\n            this.values.push({ name: '', code: '' });\r\n        }\r\n    }\r\n    create() {\r\n        const facetForm = this.detailForm.get('facet');\r\n        if (!facetForm || !facetForm.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([facet, languageCode]) => {\r\n            const newFacet = this.getUpdatedFacet(facet, facetForm, languageCode);\r\n            return this.dataService.facet.createFacet(newFacet);\r\n        }), switchMap(data => this.dataService.facet.getAllFacets().single$.pipe(mapTo(data))))\r\n            .subscribe(data => {\r\n            this.notificationService.success(marker('common.notify-create-success'), { entity: 'Facet' });\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.router.navigate(['../', data.createFacet.id], { relativeTo: this.route });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Facet',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([facet, languageCode]) => {\r\n            const facetGroup = this.detailForm.get('facet');\r\n            const updateOperations = [];\r\n            if (facetGroup && facetGroup.dirty) {\r\n                const newFacet = this.getUpdatedFacet(facet, facetGroup, languageCode);\r\n                if (newFacet) {\r\n                    updateOperations.push(this.dataService.facet.updateFacet(newFacet));\r\n                }\r\n            }\r\n            const valuesArray = this.detailForm.get('values');\r\n            if (valuesArray && valuesArray.dirty) {\r\n                const newValues = valuesArray.controls\r\n                    .filter(c => !c.value.id)\r\n                    .map(c => ({\r\n                    facetId: facet.id,\r\n                    code: c.value.code,\r\n                    translations: [{ name: c.value.name, languageCode }],\r\n                }));\r\n                if (newValues.length) {\r\n                    updateOperations.push(this.dataService.facet\r\n                        .createFacetValues(newValues)\r\n                        .pipe(switchMap(() => this.dataService.facet.getFacet(this.id).single$)));\r\n                }\r\n                const updatedValues = this.getUpdatedFacetValues(facet, valuesArray, languageCode);\r\n                if (updatedValues.length) {\r\n                    updateOperations.push(this.dataService.facet.updateFacetValues(updatedValues));\r\n                }\r\n            }\r\n            return forkJoin(updateOperations);\r\n        }), switchMap(() => this.dataService.facet.getAllFacets().single$))\r\n            .subscribe(() => {\r\n            this.detailForm.markAsPristine();\r\n            this.changeDetector.markForCheck();\r\n            this.notificationService.success(marker('common.notify-update-success'), { entity: 'Facet' });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Facet',\r\n            });\r\n        });\r\n    }\r\n    deleteFacetValue(facetValueId, index) {\r\n        if (!facetValueId) {\r\n            // deleting a newly-added (not persisted) FacetValue\r\n            const valuesFormArray = this.detailForm.get('values');\r\n            if (valuesFormArray) {\r\n                valuesFormArray.removeAt(index);\r\n            }\r\n            this.values.splice(index, 1);\r\n            return;\r\n        }\r\n        this.showModalAndDelete(facetValueId)\r\n            .pipe(switchMap(response => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(facetValueId, response.message || '').pipe(map(r => r.result === DeletionResult.DELETED));\r\n            }\r\n        }), switchMap(deleted => (deleted ? this.dataService.facet.getFacet(this.id).single$ : [])))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        });\r\n    }\r\n    showModalAndDelete(facetValueId, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-facet-value'),\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(result => result ? this.dataService.facet.deleteFacetValues([facetValueId], !!message) : EMPTY), map(result => result.deleteFacetValues[0]));\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the facet or current language.\r\n     */\r\n    setFormValues(facet, languageCode) {\r\n        var _a;\r\n        const currentTranslation = findTranslation(facet, languageCode);\r\n        this.detailForm.patchValue({\r\n            facet: {\r\n                code: facet.code,\r\n                visible: !facet.isPrivate,\r\n                name: (_a = currentTranslation === null || currentTranslation === void 0 ? void 0 : currentTranslation.name) !== null && _a !== void 0 ? _a : '',\r\n            },\r\n        });\r\n        if (this.customFields.length) {\r\n            const customFieldsGroup = this.detailForm.get(['facet', 'customFields']);\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString'\r\n                    ? currentTranslation.customFields[key]\r\n                    : facet.customFields[key];\r\n                const control = customFieldsGroup.get(key);\r\n                if (control) {\r\n                    control.patchValue(value);\r\n                }\r\n            }\r\n        }\r\n        const currentValuesFormArray = this.detailForm.get('values');\r\n        this.values = [...facet.values];\r\n        facet.values.forEach((value, i) => {\r\n            const valueTranslation = findTranslation(value, languageCode);\r\n            const group = {\r\n                id: value.id,\r\n                code: value.code,\r\n                name: valueTranslation ? valueTranslation.name : '',\r\n            };\r\n            const valueControl = currentValuesFormArray.at(i);\r\n            if (valueControl) {\r\n                valueControl.setValue(group);\r\n            }\r\n            else {\r\n                currentValuesFormArray.insert(i, this.formBuilder.group(group));\r\n            }\r\n            if (this.customValueFields.length) {\r\n                let customValueFieldsGroup = this.detailForm.get(['values', i, 'customFields']);\r\n                if (!customValueFieldsGroup) {\r\n                    customValueFieldsGroup = new FormGroup({});\r\n                    this.detailForm.get(['values', i]).addControl('customFields', customValueFieldsGroup);\r\n                }\r\n                if (customValueFieldsGroup) {\r\n                    for (const fieldDef of this.customValueFields) {\r\n                        const key = fieldDef.name;\r\n                        const fieldValue = fieldDef.type === 'localeString'\r\n                            ? valueTranslation.customFields[key]\r\n                            : value.customFields[key];\r\n                        const control = customValueFieldsGroup.get(key);\r\n                        if (control) {\r\n                            control.setValue(fieldValue);\r\n                        }\r\n                        else {\r\n                            customValueFieldsGroup.addControl(key, new FormControl(fieldValue));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Given a facet and the value of the detailForm, this method creates an updated copy of the facet which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedFacet(facet, facetFormGroup, languageCode) {\r\n        const input = createUpdatedTranslatable({\r\n            translatable: facet,\r\n            updatedFields: facetFormGroup.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: facet.name || '',\r\n            },\r\n        });\r\n        input.isPrivate = !facetFormGroup.value.visible;\r\n        return input;\r\n    }\r\n    /**\r\n     * Given an array of facet values and the values from the detailForm, this method creates an new array\r\n     * which can be persisted to the API.\r\n     */\r\n    getUpdatedFacetValues(facet, valuesFormArray, languageCode) {\r\n        const dirtyValues = facet.values.filter((v, i) => {\r\n            const formRow = valuesFormArray.get(i.toString());\r\n            return formRow && formRow.dirty && formRow.value.id;\r\n        });\r\n        const dirtyValueValues = valuesFormArray.controls\r\n            .filter(c => c.dirty && c.value.id)\r\n            .map(c => c.value);\r\n        if (dirtyValues.length !== dirtyValueValues.length) {\r\n            throw new Error(marker(`error.facet-value-form-values-do-not-match`));\r\n        }\r\n        return dirtyValues\r\n            .map((value, i) => {\r\n            return createUpdatedTranslatable({\r\n                translatable: value,\r\n                updatedFields: dirtyValueValues[i],\r\n                customFieldConfig: this.customValueFields,\r\n                languageCode,\r\n                defaultTranslation: {\r\n                    languageCode,\r\n                    name: '',\r\n                },\r\n            });\r\n        })\r\n            .filter(notNullOrUndefined);\r\n    }\r\n}\nFacetDetailComponent.ɵfac = function FacetDetailComponent_Factory(t) { return new (t || FacetDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService)); };\nFacetDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FacetDetailComponent, selectors: [[\"vdr-facet-detail\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 16, vars: 19, consts: [[3, \"entity\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"facet-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\"], [\"formGroupName\", \"facet\", 1, \"form-block\"], [\"for\", \"visibility\", 3, \"label\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"formControlName\", \"visible\", \"id\", \"visibility\", 3, \"vdrDisabled\"], [1, \"visible-toggle\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"for\", \"code\", 3, \"label\", \"readOnlyToggle\"], [\"id\", \"code\", \"type\", \"text\", \"formControlName\", \"code\", 3, \"readonly\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [\"class\", \"form-block\", 4, \"ngIf\"], [\"formGroupName\", \"customFields\"], [4, \"ngFor\", \"ngForOf\"], [\"entityName\", \"Facet\", 3, \"customFieldsFormGroup\", \"customField\", 4, \"ngIf\"], [\"entityName\", \"Facet\", 3, \"customFieldsFormGroup\", \"customField\"], [1, \"form-block\"], [\"class\", \"facet-values-list table\", \"formArrayName\", \"values\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [\"formArrayName\", \"values\", 1, \"facet-values-list\", \"table\"], [\"class\", \"facet-value\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [1, \"facet-value\", 3, \"formGroupName\"], [1, \"align-middle\"], [\"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [\"type\", \"text\", \"formControlName\", \"code\", \"readonly\", \"\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [\"entityName\", \"FacetValue\", 3, \"showLabel\", \"customFieldsFormGroup\", \"customField\", 4, \"ngIf\"], [\"entityName\", \"FacetValue\", 3, \"showLabel\", \"customFieldsFormGroup\", \"customField\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"add\"]], template: function FacetDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelement(2, \"vdr-entity-info\", 0);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementStart(4, \"vdr-language-selector\", 1);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function FacetDetailComponent_Template_vdr_language_selector_languageCodeChange_4_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(9, \"vdr-action-bar-items\", 2);\n        ɵngcc0.ɵɵtemplate(10, FacetDetailComponent_button_10_Template, 3, 4, \"button\", 3);\n        ɵngcc0.ɵɵpipe(11, \"async\");\n        ɵngcc0.ɵɵtemplate(12, FacetDetailComponent_ng_template_12_Template, 1, 1, \"ng-template\", null, 4, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(14, FacetDetailComponent_form_14_Template, 23, 28, \"form\", 5);\n        ɵngcc0.ɵɵpipe(15, \"async\");\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(13);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(3, 7, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(5, 9, ctx.isNew$))(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(6, 11, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(7, 13, ctx.languageCode$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(11, 15, ctx.isNew$))(\"ngIfElse\", _r1);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(15, 17, ctx.entity$));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.LanguageSelectorComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc4.NgIf, ɵngcc2.IfPermissionsDirective, ɵngcc3.ɵangular_packages_forms_forms_y, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc3.FormGroupName, ɵngcc2.FormFieldComponent, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc2.DisabledDirective, ɵngcc7.ClrLabel, ɵngcc3.DefaultValueAccessor, ɵngcc4.NgForOf, ɵngcc2.CustomFieldControlComponent, ɵngcc3.FormArrayName, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc7.ClrIconCustomTag, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe], styles: [_c15], changeDetection: 0 });\r\nFacetDetailComponent.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: ActivatedRoute },\r\n    { type: ServerConfigService },\r\n    { type: ChangeDetectorRef },\r\n    { type: DataService },\r\n    { type: FormBuilder },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(FacetDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-facet-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"facet-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"updatePermission\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"detailForm.invalid || detailForm.pristine\\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form class=\\\"form\\\" [formGroup]=\\\"detailForm\\\" *ngIf=\\\"entity$ | async as facet\\\">\\r\\n    <section class=\\\"form-block\\\" formGroupName=\\\"facet\\\">\\r\\n        <vdr-form-field [label]=\\\"'catalog.visibility' | translate\\\" for=\\\"visibility\\\">\\r\\n            <clr-toggle-wrapper>\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    clrToggle\\r\\n                    [vdrDisabled]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    formControlName=\\\"visible\\\"\\r\\n                    id=\\\"visibility\\\"\\r\\n                />\\r\\n                <label class=\\\"visible-toggle\\\">\\r\\n                    <ng-container *ngIf=\\\"detailForm.value.facet.visible; else private\\\">{{ 'catalog.public' | translate }}</ng-container>\\r\\n                    <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n                </label>\\r\\n            </clr-toggle-wrapper>\\r\\n        </vdr-form-field>\\r\\n        <vdr-form-field [label]=\\\"'common.name' | translate\\\" for=\\\"name\\\">\\r\\n            <input\\r\\n                id=\\\"name\\\"\\r\\n                type=\\\"text\\\"\\r\\n                formControlName=\\\"name\\\"\\r\\n                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                (input)=\\\"updateCode(facet.code, $event.target.value)\\\"\\r\\n            />\\r\\n        </vdr-form-field>\\r\\n        <vdr-form-field\\r\\n            [label]=\\\"'common.code' | translate\\\"\\r\\n            for=\\\"code\\\"\\r\\n            [readOnlyToggle]=\\\"updatePermission | hasPermission\\\"\\r\\n        >\\r\\n            <input\\r\\n                id=\\\"code\\\"\\r\\n                type=\\\"text\\\"\\r\\n                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                formControlName=\\\"code\\\"\\r\\n            />\\r\\n        </vdr-form-field>\\r\\n\\r\\n        <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n            <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n            <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n                <vdr-custom-field-control\\r\\n                    *ngIf=\\\"customFieldIsSet(customField.name)\\\"\\r\\n                    entityName=\\\"Facet\\\"\\r\\n                    [customFieldsFormGroup]=\\\"detailForm.get(['facet', 'customFields'])\\\"\\r\\n                    [customField]=\\\"customField\\\"\\r\\n                ></vdr-custom-field-control>\\r\\n            </ng-container>\\r\\n        </section>\\r\\n    </section>\\r\\n\\r\\n    <section class=\\\"form-block\\\" *ngIf=\\\"!(isNew$ | async)\\\">\\r\\n        <label>{{ 'catalog.facet-values' | translate }}</label>\\r\\n\\r\\n        <table class=\\\"facet-values-list table\\\" formArrayName=\\\"values\\\" *ngIf=\\\"0 < getValuesFormArray().length\\\">\\r\\n            <thead>\\r\\n                <tr>\\r\\n                    <th></th>\\r\\n                    <th>{{ 'common.name' | translate }}</th>\\r\\n                    <th>{{ 'common.code' | translate }}</th>\\r\\n                    <ng-container *ngFor=\\\"let customField of customValueFields\\\">\\r\\n                        <th>{{ customField.name }}</th>\\r\\n                    </ng-container>\\r\\n                    <th></th>\\r\\n                </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n                <tr\\r\\n                    class=\\\"facet-value\\\"\\r\\n                    *ngFor=\\\"let value of values; let i = index\\\"\\r\\n                    [formGroupName]=\\\"i\\\"\\r\\n                >\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <vdr-entity-info [entity]=\\\"value\\\"></vdr-entity-info>\\r\\n                    </td>\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <input\\r\\n                            type=\\\"text\\\"\\r\\n                            formControlName=\\\"name\\\"\\r\\n                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                            (input)=\\\"updateValueCode(facet.values[i]?.code, $event.target.value, i)\\\"\\r\\n                        />\\r\\n                    </td>\\r\\n                    <td class=\\\"align-middle\\\"><input type=\\\"text\\\" formControlName=\\\"code\\\" readonly /></td>\\r\\n                    <ng-container *ngFor=\\\"let customField of customValueFields\\\">\\r\\n                        <td class=\\\"align-middle\\\">\\r\\n                            <vdr-custom-field-control\\r\\n                                *ngIf=\\\"customValueFieldIsSet(i, customField.name)\\\"\\r\\n                                entityName=\\\"FacetValue\\\"\\r\\n                                [showLabel]=\\\"false\\\"\\r\\n                                [customFieldsFormGroup]=\\\"detailForm.get(['values', i, 'customFields'])\\\"\\r\\n                                [customField]=\\\"customField\\\"\\r\\n                            ></vdr-custom-field-control>\\r\\n                        </td>\\r\\n                    </ng-container>\\r\\n                    <td class=\\\"align-middle\\\">\\r\\n                        <vdr-dropdown>\\r\\n                            <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                                {{ 'common.actions' | translate }}\\r\\n                                <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                            </button>\\r\\n                            <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                                <button\\r\\n                                    type=\\\"button\\\"\\r\\n                                    class=\\\"delete-button\\\"\\r\\n                                    (click)=\\\"deleteFacetValue(facet.values[i]?.id, i)\\\"\\r\\n                                    [disabled]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                    vdrDropdownItem\\r\\n                                >\\r\\n                                    <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                                    {{ 'common.delete' | translate }}\\r\\n                                </button>\\r\\n                            </vdr-dropdown-menu>\\r\\n                        </vdr-dropdown>\\r\\n                    </td>\\r\\n                </tr>\\r\\n            </tbody>\\r\\n        </table>\\r\\n\\r\\n        <div>\\r\\n            <button\\r\\n                type=\\\"button\\\"\\r\\n                class=\\\"btn btn-secondary\\\"\\r\\n                *vdrIfPermissions=\\\"['CreateCatalog', 'CreateFacet']\\\"\\r\\n                (click)=\\\"addFacetValue()\\\"\\r\\n            >\\r\\n                <clr-icon shape=\\\"add\\\"></clr-icon>\\r\\n                {{ 'catalog.add-facet-value' | translate }}\\r\\n            </button>\\r\\n        </div>\\r\\n    </section>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".visible-toggle{margin-top:-3px!important}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc2.DataService }, { type: ɵngcc3.FormBuilder }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }]; }, null); })();\n\nclass FacetListComponent extends BaseListComponent {\r\n    constructor(dataService, modalService, notificationService, serverConfigService, router, route) {\r\n        super(router, route);\r\n        this.dataService = dataService;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.serverConfigService = serverConfigService;\r\n        this.initialLimit = 3;\r\n        this.displayLimit = {};\r\n        super.setQueryFn((...args) => this.dataService.facet.getFacets(...args).refetchOnChannelChange(), data => data.facets);\r\n    }\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.availableLanguages$ = this.serverConfigService.getAvailableLanguages();\r\n        this.contentLanguage$ = this.dataService.client\r\n            .uiState()\r\n            .mapStream(({ uiState }) => uiState.contentLanguage)\r\n            .pipe(tap(() => this.refresh()));\r\n    }\r\n    toggleDisplayLimit(facet) {\r\n        if (this.displayLimit[facet.id] === facet.values.length) {\r\n            this.displayLimit[facet.id] = this.initialLimit;\r\n        }\r\n        else {\r\n            this.displayLimit[facet.id] = facet.values.length;\r\n        }\r\n    }\r\n    deleteFacet(facetValueId) {\r\n        this.showModalAndDelete(facetValueId)\r\n            .pipe(switchMap(response => {\r\n            if (response.result === DeletionResult.DELETED) {\r\n                return [true];\r\n            }\r\n            else {\r\n                return this.showModalAndDelete(facetValueId, response.message || '').pipe(map(r => r.result === DeletionResult.DELETED));\r\n            }\r\n        }), \r\n        // Refresh the cached facets to reflect the changes\r\n        switchMap(() => this.dataService.facet.getAllFacets().single$))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'FacetValue',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'FacetValue',\r\n            });\r\n        });\r\n    }\r\n    setLanguage(code) {\r\n        this.dataService.client.setContentLanguage(code).subscribe();\r\n    }\r\n    showModalAndDelete(facetId, message) {\r\n        return this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-facet'),\r\n            body: message,\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(res => (res ? this.dataService.facet.deleteFacet(facetId, !!message) : EMPTY)), map(res => res.deleteFacet));\r\n    }\r\n}\nFacetListComponent.ɵfac = function FacetListComponent_Factory(t) { return new (t || FacetListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute)); };\nFacetListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FacetListComponent, selectors: [[\"vdr-facet-list\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 28, vars: 33, consts: [[3, \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"facet-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [3, \"expand\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"left\", \"align-middle\"], [3, \"facetValue\", \"removable\", \"displayFacetName\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary btn-icon\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"private\", \"\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"facetValue\", \"removable\", \"displayFacetName\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", \"btn-icon\", 3, \"click\"], [\"collapse\", \"\"], [\"shape\", \"minus\"]], template: function FacetListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelementStart(2, \"vdr-language-selector\", 0);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function FacetListComponent_Template_vdr_language_selector_languageCodeChange_2_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵpipe(4, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(6, \"vdr-action-bar-items\", 1);\n        ɵngcc0.ɵɵtemplate(7, FacetListComponent_a_7_Template, 4, 5, \"a\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"vdr-data-table\", 3);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function FacetListComponent_Template_vdr_data_table_pageChange_8_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function FacetListComponent_Template_vdr_data_table_itemsPerPageChange_8_listener($event) { return ctx.setItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵpipe(10, \"async\");\n        ɵngcc0.ɵɵpipe(11, \"async\");\n        ɵngcc0.ɵɵpipe(12, \"async\");\n        ɵngcc0.ɵɵelementStart(13, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(19, \"vdr-dt-column\", 4);\n        ɵngcc0.ɵɵtext(20);\n        ɵngcc0.ɵɵpipe(21, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(22, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(23);\n        ɵngcc0.ɵɵpipe(24, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(25, \"vdr-dt-column\");\n        ɵngcc0.ɵɵelement(26, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtemplate(27, FacetListComponent_ng_template_27_Template, 28, 38, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(3, 12, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(4, 14, ctx.contentLanguage$));\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(32, _c14));\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(9, 16, ctx.items$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(10, 18, ctx.itemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(11, 20, ctx.totalItems$))(\"currentPage\", ɵngcc0.ɵɵpipeBind1(12, 22, ctx.currentPage$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 24, \"common.code\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 26, \"common.name\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"expand\", true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(21, 28, \"catalog.values\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(24, 30, \"catalog.visibility\"));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.LanguageSelectorComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.DataTableComponent, ɵngcc2.DataTableColumnComponent, ɵngcc1.RouterLinkWithHref, ɵngcc7.ClrIconCustomTag, ɵngcc4.NgForOf, ɵngcc4.NgIf, ɵngcc2.ChipComponent, ɵngcc2.TableRowActionComponent, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective, ɵngcc2.FacetValueChipComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc4.SlicePipe, ɵngcc2.HasPermissionPipe], styles: [\"td.private[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}\"] });\r\nFacetListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: ServerConfigService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(FacetListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-facet-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <vdr-language-selector\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"contentLanguage$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"facet-list\\\"></vdr-action-bar-items>\\r\\n        <a class=\\\"btn btn-primary\\\"\\r\\n           *vdrIfPermissions=\\\"['CreateCatalog', 'CreateFacet']\\\"\\r\\n           [routerLink]=\\\"['./create']\\\">\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            {{ 'catalog.create-new-facet' | translate }}\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <vdr-dt-column>{{ 'common.code' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.name' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column [expand]=\\\"true\\\">{{ 'catalog.values' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'catalog.visibility' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <ng-template let-facet=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">{{ facet.code }}</td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">{{ facet.name }}</td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-facet-value-chip\\r\\n                *ngFor=\\\"let value of facet.values | slice: 0:displayLimit[facet.id] || 3\\\"\\r\\n                [facetValue]=\\\"value\\\"\\r\\n                [removable]=\\\"false\\\"\\r\\n                [displayFacetName]=\\\"false\\\"\\r\\n            ></vdr-facet-value-chip>\\r\\n            <button\\r\\n                class=\\\"btn btn-sm btn-secondary btn-icon\\\"\\r\\n                *ngIf=\\\"facet.values.length > initialLimit\\\"\\r\\n                (click)=\\\"toggleDisplayLimit(facet)\\\"\\r\\n            >\\r\\n                <ng-container *ngIf=\\\"(displayLimit[facet.id] || 0) < facet.values.length; else collapse\\\">\\r\\n                    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                    {{ facet.values.length - initialLimit }}\\r\\n                </ng-container>\\r\\n                <ng-template #collapse>\\r\\n                    <clr-icon shape=\\\"minus\\\"></clr-icon>\\r\\n                </ng-template>\\r\\n            </button>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-chip>\\r\\n                <ng-container *ngIf=\\\"!facet.isPrivate; else private\\\">{{ 'catalog.public' | translate }}</ng-container>\\r\\n                <ng-template #private>{{ 'catalog.private' | translate }}</ng-template>\\r\\n            </vdr-chip>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['./', facet.id]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.private]=\\\"facet.isPrivate\\\">\\r\\n            <vdr-dropdown>\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                    {{ 'common.actions' | translate }}\\r\\n                    <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"delete-button\\\"\\r\\n                        (click)=\\\"deleteFacet(facet.id)\\\"\\r\\n                        [disabled]=\\\"!(['DeleteCatalog', 'DeleteFacet'] | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                styles: [\"td.private{background-color:var(--color-component-bg-200)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }]; }, null); })();\n\n/**\r\n * @description\r\n * Like String.prototype.replace(), but replaces the last instance\r\n * rather than the first.\r\n */\r\nfunction replaceLast(target, search, replace) {\r\n    if (!target) {\r\n        return '';\r\n    }\r\n    const lastIndex = target.lastIndexOf(search);\r\n    if (lastIndex === -1) {\r\n        return target;\r\n    }\r\n    const head = target.substr(0, lastIndex);\r\n    const tail = target.substr(lastIndex).replace(search, replace);\r\n    return head + tail;\r\n}\n\n/**\r\n * Handles the logic for making the API calls to perform CRUD operations on a Product and its related\r\n * entities. This logic was extracted out of the component because it became too large and hard to follow.\r\n */\r\nclass ProductDetailService {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n    }\r\n    getFacets() {\r\n        return this.dataService.facet.getAllFacets().mapSingle(data => data.facets.items);\r\n    }\r\n    getTaxCategories() {\r\n        return this.dataService.settings\r\n            .getTaxCategories()\r\n            .mapSingle(data => data.taxCategories)\r\n            .pipe(shareReplay(1));\r\n    }\r\n    createProductWithVariants(input, createVariantsConfig, languageCode) {\r\n        const createProduct$ = this.dataService.product.createProduct(input);\r\n        const nonEmptyOptionGroups = createVariantsConfig.groups.filter(g => 0 < g.values.length);\r\n        const createOptionGroups$ = this.createProductOptionGroups(nonEmptyOptionGroups, languageCode);\r\n        return forkJoin(createProduct$, createOptionGroups$).pipe(mergeMap(([{ createProduct }, optionGroups]) => {\r\n            const addOptionsToProduct$ = optionGroups.length\r\n                ? forkJoin(optionGroups.map(optionGroup => {\r\n                    return this.dataService.product.addOptionGroupToProduct({\r\n                        productId: createProduct.id,\r\n                        optionGroupId: optionGroup.id,\r\n                    });\r\n                }))\r\n                : of([]);\r\n            return addOptionsToProduct$.pipe(map(() => {\r\n                return { createProduct, optionGroups };\r\n            }));\r\n        }), mergeMap(({ createProduct, optionGroups }) => {\r\n            const variants = createVariantsConfig.variants.map(v => {\r\n                const optionIds = optionGroups.length\r\n                    ? v.optionValues.map((optionName, index) => {\r\n                        const option = optionGroups[index].options.find(o => o.name === optionName);\r\n                        if (!option) {\r\n                            throw new Error(`Could not find a matching ProductOption \"${optionName}\" when creating variant`);\r\n                        }\r\n                        return option.id;\r\n                    })\r\n                    : [];\r\n                return Object.assign(Object.assign({}, v), { optionIds });\r\n            });\r\n            const options = optionGroups.map(og => og.options).reduce((flat, o) => [...flat, ...o], []);\r\n            return this.createProductVariants(createProduct, variants, options, languageCode);\r\n        }));\r\n    }\r\n    createProductOptionGroups(groups, languageCode) {\r\n        return groups.length\r\n            ? forkJoin(groups.map(c => {\r\n                return this.dataService.product\r\n                    .createProductOptionGroups({\r\n                    code: normalizeString(c.name, '-'),\r\n                    translations: [{ languageCode, name: c.name }],\r\n                    options: c.values.map(v => ({\r\n                        code: normalizeString(v, '-'),\r\n                        translations: [{ languageCode, name: v }],\r\n                    })),\r\n                })\r\n                    .pipe(map(data => data.createProductOptionGroup));\r\n            }))\r\n            : of([]);\r\n    }\r\n    createProductVariants(product, variantData, options, languageCode) {\r\n        const variants = variantData.map(v => {\r\n            const name = options.length\r\n                ? `${product.name} ${v.optionIds\r\n                    .map(id => options.find(o => o.id === id))\r\n                    .filter(notNullOrUndefined)\r\n                    .map(o => o.name)\r\n                    .join(' ')}`\r\n                : product.name;\r\n            return {\r\n                productId: product.id,\r\n                price: v.price,\r\n                sku: v.sku,\r\n                stockOnHand: v.stock,\r\n                translations: [\r\n                    {\r\n                        languageCode,\r\n                        name,\r\n                    },\r\n                ],\r\n                optionIds: v.optionIds,\r\n            };\r\n        });\r\n        return this.dataService.product.createProductVariants(variants).pipe(map(({ createProductVariants }) => ({\r\n            createProductVariants,\r\n            productId: product.id,\r\n        })));\r\n    }\r\n    updateProduct(updateOptions) {\r\n        var _a, _b, _c;\r\n        const { product, languageCode, autoUpdate, productInput, variantsInput } = updateOptions;\r\n        const updateOperations = [];\r\n        const updateVariantsInput = variantsInput || [];\r\n        if (productInput) {\r\n            updateOperations.push(this.dataService.product.updateProduct(productInput));\r\n            const productOldName = (_a = findTranslation(product, languageCode)) === null || _a === void 0 ? void 0 : _a.name;\r\n            const productNewName = (_b = findTranslation(productInput, languageCode)) === null || _b === void 0 ? void 0 : _b.name;\r\n            if (productOldName && productNewName && productOldName !== productNewName && autoUpdate) {\r\n                for (const variant of product.variants) {\r\n                    const currentVariantName = ((_c = findTranslation(variant, languageCode)) === null || _c === void 0 ? void 0 : _c.name) || '';\r\n                    let variantInput;\r\n                    const existingVariantInput = updateVariantsInput.find(i => i.id === variant.id);\r\n                    if (existingVariantInput) {\r\n                        variantInput = existingVariantInput;\r\n                    }\r\n                    else {\r\n                        variantInput = {\r\n                            id: variant.id,\r\n                            translations: [{ languageCode, name: currentVariantName }],\r\n                        };\r\n                        updateVariantsInput.push(variantInput);\r\n                    }\r\n                    const variantTranslation = findTranslation(variantInput, languageCode);\r\n                    if (variantTranslation) {\r\n                        variantTranslation.name = replaceLast(variantTranslation.name, productOldName, productNewName);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (updateVariantsInput.length) {\r\n            updateOperations.push(this.dataService.product.updateProductVariants(updateVariantsInput));\r\n        }\r\n        return forkJoin(updateOperations);\r\n    }\r\n    updateProductOption(input, product, languageCode) {\r\n        var _a, _b, _c;\r\n        let updateProductVariantNames$ = of([]);\r\n        if (input.autoUpdate) {\r\n            // Update any ProductVariants' names which include the option name\r\n            let oldOptionName;\r\n            const newOptionName = (_a = findTranslation(input, languageCode)) === null || _a === void 0 ? void 0 : _a.name;\r\n            if (!newOptionName) {\r\n                updateProductVariantNames$ = of([]);\r\n            }\r\n            const variantsToUpdate = [];\r\n            for (const variant of product.variants) {\r\n                if (variant.options.map(o => o.id).includes(input.id)) {\r\n                    if (!oldOptionName) {\r\n                        oldOptionName = (_b = findTranslation(variant.options.find(o => o.id === input.id), languageCode)) === null || _b === void 0 ? void 0 : _b.name;\r\n                    }\r\n                    const variantName = ((_c = findTranslation(variant, languageCode)) === null || _c === void 0 ? void 0 : _c.name) || '';\r\n                    if (oldOptionName && newOptionName && variantName.includes(oldOptionName)) {\r\n                        variantsToUpdate.push({\r\n                            id: variant.id,\r\n                            translations: [\r\n                                {\r\n                                    languageCode,\r\n                                    name: replaceLast(variantName, oldOptionName, newOptionName),\r\n                                },\r\n                            ],\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            if (variantsToUpdate.length) {\r\n                updateProductVariantNames$ = this.dataService.product.updateProductVariants(variantsToUpdate);\r\n            }\r\n        }\r\n        return this.dataService.product\r\n            .updateProductOption(input)\r\n            .pipe(mergeMap(() => updateProductVariantNames$));\r\n    }\r\n    deleteProductVariant(id, productId) {\r\n        return this.dataService.product.deleteProductVariant(id).pipe(switchMap(result => {\r\n            if (result.deleteProductVariant.result === DeletionResult.DELETED) {\r\n                return this.dataService.product.getProduct(productId).single$;\r\n            }\r\n            else {\r\n                return throwError(result.deleteProductVariant.message);\r\n            }\r\n        }));\r\n    }\r\n}\nProductDetailService.ɵfac = function ProductDetailService_Factory(t) { return new (t || ProductDetailService)(ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nProductDetailService.ɵprov = ɵɵdefineInjectable({ factory: function ProductDetailService_Factory() { return new ProductDetailService(ɵɵinject(DataService)); }, token: ProductDetailService, providedIn: \"root\" });\r\nProductDetailService.ctorParameters = () => [\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductDetailService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }]; }, null); })();\n\nclass ApplyFacetDialogComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.selectedValues = [];\r\n    }\r\n    ngAfterViewInit() {\r\n        setTimeout(() => this.selector.focus(), 0);\r\n    }\r\n    selectValues() {\r\n        this.resolveWith(this.selectedValues);\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nApplyFacetDialogComponent.ɵfac = function ApplyFacetDialogComponent_Factory(t) { return new (t || ApplyFacetDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nApplyFacetDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ApplyFacetDialogComponent, selectors: [[\"vdr-apply-facet-dialog\"]], viewQuery: function ApplyFacetDialogComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(FacetValueSelectorComponent, 1);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.selector = _t.first);\n    } }, decls: 3, vars: 1, consts: [[\"vdrDialogTitle\", \"\"], [3, \"facets\", \"selectedValuesChange\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function ApplyFacetDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ApplyFacetDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"vdr-facet-value-selector\", 1);\n        ɵngcc0.ɵɵlistener(\"selectedValuesChange\", function ApplyFacetDialogComponent_Template_vdr_facet_value_selector_selectedValuesChange_1_listener($event) { return ctx.selectedValues = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(2, ApplyFacetDialogComponent_ng_template_2_Template, 6, 7, \"ng-template\", 2);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"facets\", ctx.facets);\n    } }, directives: [ɵngcc2.DialogTitleDirective, ɵngcc2.FacetValueSelectorComponent, ɵngcc2.DialogButtonsDirective], pipes: [ɵngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\r\nApplyFacetDialogComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\nApplyFacetDialogComponent.propDecorators = {\r\n    selector: [{ type: ViewChild, args: [FacetValueSelectorComponent,] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ApplyFacetDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-apply-facet-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'catalog.add-facets' | translate }}</ng-template>\\r\\n\\r\\n<vdr-facet-value-selector\\r\\n    [facets]=\\\"facets\\\"\\r\\n    (selectedValuesChange)=\\\"selectedValues = $event\\\"\\r\\n></vdr-facet-value-selector>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"selectValues()\\\"\\r\\n        [disabled]=\\\"selectedValues.length === 0\\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'catalog.add-facets' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { selector: [{\n            type: ViewChild,\n            args: [FacetValueSelectorComponent]\n        }] }); })();\n\nclass AssignProductsToChannelDialogComponent {\r\n    constructor(dataService, notificationService) {\r\n        this.dataService = dataService;\r\n        this.notificationService = notificationService;\r\n        this.priceFactorControl = new FormControl(1);\r\n        this.selectedChannelIdControl = new FormControl();\r\n    }\r\n    get isProductVariantMode() {\r\n        return this.productVariantIds != null;\r\n    }\r\n    ngOnInit() {\r\n        const activeChannelId$ = this.dataService.client\r\n            .userStatus()\r\n            .mapSingle(({ userStatus }) => userStatus.activeChannelId);\r\n        const allChannels$ = this.dataService.settings.getChannels().mapSingle(data => data.channels);\r\n        combineLatest(activeChannelId$, allChannels$).subscribe(([activeChannelId, channels]) => {\r\n            // tslint:disable-next-line:no-non-null-assertion\r\n            this.currentChannel = channels.find(c => c.id === activeChannelId);\r\n            this.availableChannels = channels;\r\n        });\r\n        this.selectedChannelIdControl.valueChanges.subscribe(ids => {\r\n            this.selectChannel(ids);\r\n        });\r\n        this.variantsPreview$ = combineLatest(from(this.getTopVariants(10)), this.priceFactorControl.valueChanges.pipe(startWith(1))).pipe(map(([variants, factor]) => {\r\n            return variants.map(v => ({\r\n                id: v.id,\r\n                name: v.name,\r\n                price: v.price,\r\n                pricePreview: v.price * +factor,\r\n            }));\r\n        }));\r\n    }\r\n    selectChannel(channelIds) {\r\n        this.selectedChannel = this.availableChannels.find(c => c.id === channelIds[0]);\r\n    }\r\n    assign() {\r\n        const selectedChannel = this.selectedChannel;\r\n        if (selectedChannel) {\r\n            if (!this.isProductVariantMode) {\r\n                this.dataService.product\r\n                    .assignProductsToChannel({\r\n                    channelId: selectedChannel.id,\r\n                    productIds: this.productIds,\r\n                    priceFactor: +this.priceFactorControl.value,\r\n                })\r\n                    .subscribe(() => {\r\n                    this.notificationService.success(marker('catalog.assign-product-to-channel-success'), {\r\n                        channel: selectedChannel.code,\r\n                    });\r\n                    this.resolveWith(true);\r\n                });\r\n            }\r\n            else if (this.productVariantIds) {\r\n                this.dataService.product\r\n                    .assignVariantsToChannel({\r\n                    channelId: selectedChannel.id,\r\n                    productVariantIds: this.productVariantIds,\r\n                    priceFactor: +this.priceFactorControl.value,\r\n                })\r\n                    .subscribe(() => {\r\n                    this.notificationService.success(marker('catalog.assign-variant-to-channel-success'), {\r\n                        channel: selectedChannel.code,\r\n                    });\r\n                    this.resolveWith(true);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    getTopVariants(take) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const variants = [];\r\n            for (let i = 0; i < this.productIds.length && variants.length < take; i++) {\r\n                const productVariants = yield this.dataService.product\r\n                    .getProduct(this.productIds[i])\r\n                    .mapSingle(({ product }) => {\r\n                    const _variants = product ? product.variants : [];\r\n                    return _variants.filter(v => { var _a; return this.isProductVariantMode ? (_a = this.productVariantIds) === null || _a === void 0 ? void 0 : _a.includes(v.id) : true; });\r\n                })\r\n                    .toPromise();\r\n                variants.push(...(productVariants || []));\r\n            }\r\n            return variants.slice(0, take);\r\n        });\r\n    }\r\n}\nAssignProductsToChannelDialogComponent.ɵfac = function AssignProductsToChannelDialogComponent_Factory(t) { return new (t || AssignProductsToChannelDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService)); };\nAssignProductsToChannelDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AssignProductsToChannelDialogComponent, selectors: [[\"vdr-assign-products-to-channel-dialog\"]], decls: 36, vars: 32, consts: [[\"vdrDialogTitle\", \"\"], [1, \"flex\"], [\"clrInput\", \"\", 3, \"multiple\", \"includeDefaultChannel\", \"disableChannelIds\", \"formControl\"], [1, \"flex-spacer\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"max\", \"99999\", 3, \"formControl\"], [1, \"channel-price-preview\"], [1, \"clr-control-label\"], [1, \"table\"], [3, \"ngIf\", \"ngIfElse\"], [\"noSelection\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"vdrDialogButtons\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"productModeTitle\", \"\"], [\"noChannelSelected\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function AssignProductsToChannelDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, AssignProductsToChannelDialogComponent_ng_template_0_Template, 3, 2, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"clr-input-container\");\n        ɵngcc0.ɵɵelementStart(3, \"label\");\n        ɵngcc0.ɵɵtext(4);\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(6, \"vdr-channel-assignment-control\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(7, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(8, \"clr-input-container\");\n        ɵngcc0.ɵɵelementStart(9, \"label\");\n        ɵngcc0.ɵɵtext(10);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(12, \"input\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(14, \"label\", 6);\n        ɵngcc0.ɵɵtext(15);\n        ɵngcc0.ɵɵpipe(16, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"table\", 7);\n        ɵngcc0.ɵɵelementStart(18, \"thead\");\n        ɵngcc0.ɵɵelementStart(19, \"tr\");\n        ɵngcc0.ɵɵelementStart(20, \"th\");\n        ɵngcc0.ɵɵtext(21);\n        ɵngcc0.ɵɵpipe(22, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"th\");\n        ɵngcc0.ɵɵtext(24);\n        ɵngcc0.ɵɵpipe(25, \"translate\");\n        ɵngcc0.ɵɵpipe(26, \"translate\");\n        ɵngcc0.ɵɵpipe(27, \"channelCodeToLabel\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(28, \"th\");\n        ɵngcc0.ɵɵtemplate(29, AssignProductsToChannelDialogComponent_ng_template_29_Template, 2, 6, \"ng-template\", 8);\n        ɵngcc0.ɵɵtemplate(30, AssignProductsToChannelDialogComponent_ng_template_30_Template, 2, 3, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(32, \"tbody\");\n        ɵngcc0.ɵɵtemplate(33, AssignProductsToChannelDialogComponent_tr_33_Template, 10, 7, \"tr\", 10);\n        ɵngcc0.ɵɵpipe(34, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(35, AssignProductsToChannelDialogComponent_ng_template_35_Template, 7, 6, \"ng-template\", 11);\n    } if (rf & 2) {\n        const _r2 = ɵngcc0.ɵɵreference(31);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 13, \"common.channel\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"multiple\", false)(\"includeDefaultChannel\", false)(\"disableChannelIds\", ctx.currentChannelIds)(\"formControl\", ctx.selectedChannelIdControl);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 15, \"catalog.price-conversion-factor\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"formControl\", ctx.priceFactorControl);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(16, 17, \"catalog.channel-price-preview\"));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(22, 19, \"common.name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(25, 21, \"catalog.price-in-channel\", ɵngcc0.ɵɵpureFunction1(30, _c18, ɵngcc0.ɵɵpipeBind1(26, 24, ɵngcc0.ɵɵpipeBind1(27, 26, ctx.currentChannel == null ? null : ctx.currentChannel.code)))), \" \");\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectedChannel)(\"ngIfElse\", _r2);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(34, 28, ctx.variantsPreview$));\n    } }, directives: [ɵngcc2.DialogTitleDirective, ɵngcc7.ClrInputContainer, ɵngcc7.ClrLabel, ɵngcc2.ChannelAssignmentControlComponent, ɵngcc7.ClrInput, ɵngcc3.NgControlStatus, ɵngcc3.FormControlDirective, ɵngcc2.FormFieldControlDirective, ɵngcc3.NumberValueAccessor, ɵngcc3.DefaultValueAccessor, ɵngcc4.NgIf, ɵngcc4.NgForOf, ɵngcc2.DialogButtonsDirective], pipes: [ɵngcc5.TranslatePipe, ɵngcc2.ChannelLabelPipe, ɵngcc4.AsyncPipe, ɵngcc2.LocaleCurrencyPipe], styles: [\"vdr-channel-assignment-control[_ngcontent-%COMP%]{min-width:200px}.channel-price-preview[_ngcontent-%COMP%]{margin-top:24px}.channel-price-preview[_ngcontent-%COMP%]   table.table[_ngcontent-%COMP%]{margin-top:6px}\"], changeDetection: 0 });\r\nAssignProductsToChannelDialogComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: NotificationService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AssignProductsToChannelDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-assign-products-to-channel-dialog',\n                template: \"<ng-template vdrDialogTitle>\\r\\n    <ng-container *ngIf=\\\"isProductVariantMode; else productModeTitle\\\">{{\\r\\n        'catalog.assign-variants-to-channel' | translate\\r\\n    }}</ng-container>\\r\\n    <ng-template #productModeTitle>{{ 'catalog.assign-products-to-channel' | translate }}</ng-template>\\r\\n</ng-template>\\r\\n\\r\\n<div class=\\\"flex\\\">\\r\\n    <clr-input-container>\\r\\n        <label>{{ 'common.channel' | translate }}</label>\\r\\n        <vdr-channel-assignment-control\\r\\n            clrInput\\r\\n            [multiple]=\\\"false\\\"\\r\\n            [includeDefaultChannel]=\\\"false\\\"\\r\\n            [disableChannelIds]=\\\"currentChannelIds\\\"\\r\\n            [formControl]=\\\"selectedChannelIdControl\\\"\\r\\n        ></vdr-channel-assignment-control>\\r\\n    </clr-input-container>\\r\\n    <div class=\\\"flex-spacer\\\"></div>\\r\\n    <clr-input-container>\\r\\n        <label>{{ 'catalog.price-conversion-factor' | translate }}</label>\\r\\n        <input clrInput type=\\\"number\\\" min=\\\"0\\\" max=\\\"99999\\\" [formControl]=\\\"priceFactorControl\\\" />\\r\\n    </clr-input-container>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"channel-price-preview\\\">\\r\\n    <label class=\\\"clr-control-label\\\">{{ 'catalog.channel-price-preview' | translate }}</label>\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{ 'common.name' | translate }}</th>\\r\\n                <th>\\r\\n                    {{\\r\\n                        'catalog.price-in-channel'\\r\\n                            | translate: { channel: currentChannel?.code | channelCodeToLabel | translate }\\r\\n                    }}\\r\\n                </th>\\r\\n                <th>\\r\\n                    <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noSelection\\\">\\r\\n                        {{ 'catalog.price-in-channel' | translate: { channel: selectedChannel?.code } }}\\r\\n                    </ng-template>\\r\\n                    <ng-template #noSelection>\\r\\n                        {{ 'catalog.no-channel-selected' | translate }}\\r\\n                    </ng-template>\\r\\n                </th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            <tr *ngFor=\\\"let row of variantsPreview$ | async\\\">\\r\\n                <td>{{ row.name }}</td>\\r\\n                <td>{{ row.price | localeCurrency: currentChannel?.currencyCode }}</td>\\r\\n                <td>\\r\\n                    <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noChannelSelected\\\">\\r\\n                        {{ row.pricePreview | localeCurrency: selectedChannel?.currencyCode }}\\r\\n                    </ng-template>\\r\\n                    <ng-template #noChannelSelected> - </ng-template>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </tbody>\\r\\n    </table>\\r\\n</div>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"assign()\\\" [disabled]=\\\"!selectedChannel\\\" class=\\\"btn btn-primary\\\">\\r\\n        <ng-template [ngIf]=\\\"selectedChannel\\\" [ngIfElse]=\\\"noSelection\\\">\\r\\n            {{ 'catalog.assign-to-named-channel' | translate: { channelCode: selectedChannel?.code } }}\\r\\n        </ng-template>\\r\\n        <ng-template #noSelection>\\r\\n            {{ 'catalog.no-channel-selected' | translate }}\\r\\n        </ng-template>\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"vdr-channel-assignment-control{min-width:200px}.channel-price-preview{margin-top:24px}.channel-price-preview table.table{margin-top:6px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc2.NotificationService }]; }, null); })();\n\nclass ProductDetailComponent extends BaseDetailComponent {\r\n    constructor(route, router, serverConfigService, productDetailService, formBuilder, modalService, notificationService, dataService, location, changeDetector) {\r\n        super(route, router, serverConfigService, dataService);\r\n        this.productDetailService = productDetailService;\r\n        this.formBuilder = formBuilder;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.dataService = dataService;\r\n        this.location = location;\r\n        this.changeDetector = changeDetector;\r\n        this.filterInput = new FormControl('');\r\n        this.assetChanges = {};\r\n        this.variantAssetChanges = {};\r\n        this.selectedVariantIds = [];\r\n        this.variantDisplayMode = 'card';\r\n        this.createVariantsConfig = { groups: [], variants: [] };\r\n        this.customFields = this.getCustomFieldConfig('Product');\r\n        this.customVariantFields = this.getCustomFieldConfig('ProductVariant');\r\n        this.customOptionGroupFields = this.getCustomFieldConfig('ProductOptionGroup');\r\n        this.customOptionFields = this.getCustomFieldConfig('ProductOption');\r\n        this.detailForm = this.formBuilder.group({\r\n            product: this.formBuilder.group({\r\n                enabled: true,\r\n                name: ['', Validators.required],\r\n                autoUpdateVariantNames: true,\r\n                slug: '',\r\n                description: '',\r\n                facetValueIds: [[]],\r\n                customFields: this.formBuilder.group(this.customFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {})),\r\n            }),\r\n            variants: this.formBuilder.array([]),\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.init();\r\n        this.product$ = this.entity$;\r\n        const variants$ = this.product$.pipe(map(product => product.variants));\r\n        const filterTerm$ = this.filterInput.valueChanges.pipe(startWith(''), debounceTime(50), shareReplay());\r\n        this.variants$ = combineLatest(variants$, filterTerm$).pipe(map(([variants, term]) => {\r\n            return term\r\n                ? variants.filter(v => {\r\n                    const lcTerm = term.toLocaleLowerCase();\r\n                    return (v.name.toLocaleLowerCase().includes(term) ||\r\n                        v.sku.toLocaleLowerCase().includes(term));\r\n                })\r\n                : variants;\r\n        }));\r\n        this.taxCategories$ = this.productDetailService.getTaxCategories().pipe(takeUntil(this.destroy$));\r\n        this.activeTab$ = this.route.paramMap.pipe(map(qpm => qpm.get('tab')));\r\n        // FacetValues are provided initially by the nested array of the\r\n        // Product entity, but once a fetch to get all Facets is made (as when\r\n        // opening the FacetValue selector modal), then these additional values\r\n        // are concatenated onto the initial array.\r\n        this.facets$ = this.productDetailService.getFacets();\r\n        const productFacetValues$ = this.product$.pipe(map(product => product.facetValues));\r\n        const allFacetValues$ = this.facets$.pipe(map(flattenFacetValues));\r\n        const productGroup = this.getProductFormGroup();\r\n        const formFacetValueIdChanges$ = productGroup.valueChanges.pipe(map(val => val.facetValueIds), distinctUntilChanged());\r\n        const formChangeFacetValues$ = combineLatest(formFacetValueIdChanges$, productFacetValues$, allFacetValues$).pipe(map(([ids, productFacetValues, allFacetValues]) => {\r\n            const combined = [...productFacetValues, ...allFacetValues];\r\n            return ids.map(id => combined.find(fv => fv.id === id)).filter(notNullOrUndefined);\r\n        }));\r\n        this.facetValues$ = merge(productFacetValues$, formChangeFacetValues$);\r\n        this.productChannels$ = this.product$.pipe(map(p => p.channels));\r\n        this.channelPriceIncludesTax$ = this.dataService.settings\r\n            .getActiveChannel('cache-first')\r\n            .refetchOnChannelChange()\r\n            .mapStream(data => data.activeChannel.pricesIncludeTax)\r\n            .pipe(shareReplay(1));\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy();\r\n    }\r\n    navigateToTab(tabName) {\r\n        this.location.replaceState(this.router\r\n            .createUrlTree(['./', Object.assign(Object.assign({}, this.route.snapshot.params), { tab: tabName })], {\r\n            queryParamsHandling: 'merge',\r\n            relativeTo: this.route,\r\n        })\r\n            .toString());\r\n    }\r\n    isDefaultChannel(channelCode) {\r\n        return channelCode === DEFAULT_CHANNEL_CODE;\r\n    }\r\n    assignToChannel() {\r\n        this.productChannels$\r\n            .pipe(take(1), switchMap(channels => {\r\n            return this.modalService.fromComponent(AssignProductsToChannelDialogComponent, {\r\n                size: 'lg',\r\n                locals: {\r\n                    productIds: [this.id],\r\n                    currentChannelIds: channels.map(c => c.id),\r\n                },\r\n            });\r\n        }))\r\n            .subscribe();\r\n    }\r\n    removeFromChannel(channelId) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.remove-product-from-channel'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('catalog.remove-from-channel'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(response => response\r\n            ? this.dataService.product.removeProductsFromChannel({\r\n                channelId,\r\n                productIds: [this.id],\r\n            })\r\n            : EMPTY))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('catalog.notify-remove-product-from-channel-success'));\r\n        }, err => {\r\n            this.notificationService.error(marker('catalog.notify-remove-product-from-channel-error'));\r\n        });\r\n    }\r\n    assignVariantToChannel(variant) {\r\n        return this.modalService\r\n            .fromComponent(AssignProductsToChannelDialogComponent, {\r\n            size: 'lg',\r\n            locals: {\r\n                productIds: [this.id],\r\n                productVariantIds: [variant.id],\r\n                currentChannelIds: variant.channels.map(c => c.id),\r\n            },\r\n        })\r\n            .subscribe();\r\n    }\r\n    removeVariantFromChannel({ channelId, variant, }) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.remove-product-variant-from-channel'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('catalog.remove-from-channel'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(response => response\r\n            ? this.dataService.product.removeVariantsFromChannel({\r\n                channelId,\r\n                productVariantIds: [variant.id],\r\n            })\r\n            : EMPTY))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('catalog.notify-remove-variant-from-channel-success'));\r\n        }, err => {\r\n            this.notificationService.error(marker('catalog.notify-remove-variant-from-channel-error'));\r\n        });\r\n    }\r\n    customFieldIsSet(name) {\r\n        return !!this.detailForm.get(['product', 'customFields', name]);\r\n    }\r\n    assetsChanged() {\r\n        return !!Object.values(this.assetChanges).length;\r\n    }\r\n    variantAssetsChanged() {\r\n        return !!Object.keys(this.variantAssetChanges).length;\r\n    }\r\n    variantAssetChange(event) {\r\n        this.variantAssetChanges[event.variantId] = event;\r\n    }\r\n    /**\r\n     * If creating a new product, automatically generate the slug based on the product name.\r\n     */\r\n    updateSlug(nameValue) {\r\n        combineLatest(this.entity$, this.languageCode$)\r\n            .pipe(take(1))\r\n            .subscribe(([entity, languageCode]) => {\r\n            const slugControl = this.detailForm.get(['product', 'slug']);\r\n            const currentTranslation = findTranslation(entity, languageCode);\r\n            const currentSlugIsEmpty = !currentTranslation || !currentTranslation.slug;\r\n            if (slugControl && slugControl.pristine && currentSlugIsEmpty) {\r\n                slugControl.setValue(normalizeString(`${nameValue}`, '-'));\r\n            }\r\n        });\r\n    }\r\n    selectProductFacetValue() {\r\n        this.displayFacetValueModal().subscribe(facetValueIds => {\r\n            if (facetValueIds) {\r\n                const productGroup = this.getProductFormGroup();\r\n                const currentFacetValueIds = productGroup.value.facetValueIds;\r\n                productGroup.patchValue({\r\n                    facetValueIds: unique([...currentFacetValueIds, ...facetValueIds]),\r\n                });\r\n                productGroup.markAsDirty();\r\n            }\r\n        });\r\n    }\r\n    updateProductOption(input) {\r\n        combineLatest(this.product$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([product, languageCode]) => this.productDetailService.updateProductOption(input, product, languageCode)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'ProductOption',\r\n            });\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'ProductOption',\r\n            });\r\n        });\r\n    }\r\n    removeProductFacetValue(facetValueId) {\r\n        const productGroup = this.getProductFormGroup();\r\n        const currentFacetValueIds = productGroup.value.facetValueIds;\r\n        productGroup.patchValue({\r\n            facetValueIds: currentFacetValueIds.filter(id => id !== facetValueId),\r\n        });\r\n        productGroup.markAsDirty();\r\n    }\r\n    /**\r\n     * Opens a dialog to select FacetValues to apply to the select ProductVariants.\r\n     */\r\n    selectVariantFacetValue(selectedVariantIds) {\r\n        this.displayFacetValueModal()\r\n            .pipe(withLatestFrom(this.variants$))\r\n            .subscribe(([facetValueIds, variants]) => {\r\n            if (facetValueIds) {\r\n                for (const variantId of selectedVariantIds) {\r\n                    const index = variants.findIndex(v => v.id === variantId);\r\n                    const variant = variants[index];\r\n                    const existingFacetValueIds = variant ? variant.facetValues.map(fv => fv.id) : [];\r\n                    const variantFormGroup = this.detailForm.get(['variants', index]);\r\n                    if (variantFormGroup) {\r\n                        variantFormGroup.patchValue({\r\n                            facetValueIds: unique([...existingFacetValueIds, ...facetValueIds]),\r\n                        });\r\n                        variantFormGroup.markAsDirty();\r\n                    }\r\n                }\r\n                this.changeDetector.markForCheck();\r\n            }\r\n        });\r\n    }\r\n    variantsToCreateAreValid() {\r\n        return (0 < this.createVariantsConfig.variants.length &&\r\n            this.createVariantsConfig.variants.every(v => {\r\n                return v.sku !== '';\r\n            }));\r\n    }\r\n    displayFacetValueModal() {\r\n        return this.productDetailService.getFacets().pipe(mergeMap(facets => this.modalService.fromComponent(ApplyFacetDialogComponent, {\r\n            size: 'md',\r\n            closable: true,\r\n            locals: { facets },\r\n        })), map(facetValues => facetValues && facetValues.map(v => v.id)));\r\n    }\r\n    create() {\r\n        const productGroup = this.getProductFormGroup();\r\n        if (!productGroup.dirty) {\r\n            return;\r\n        }\r\n        combineLatest(this.product$, this.languageCode$)\r\n            .pipe(take(1), mergeMap(([product, languageCode]) => {\r\n            const newProduct = this.getUpdatedProduct(product, productGroup, languageCode);\r\n            return this.productDetailService.createProductWithVariants(newProduct, this.createVariantsConfig, languageCode);\r\n        }))\r\n            .subscribe(({ createProductVariants, productId }) => {\r\n            this.notificationService.success(marker('common.notify-create-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.assetChanges = {};\r\n            this.variantAssetChanges = {};\r\n            this.detailForm.markAsPristine();\r\n            this.router.navigate(['../', productId], { relativeTo: this.route });\r\n        }, err => {\r\n            // tslint:disable-next-line:no-console\r\n            console.error(err);\r\n            this.notificationService.error(marker('common.notify-create-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        combineLatest(this.product$, this.languageCode$, this.channelPriceIncludesTax$)\r\n            .pipe(take(1), mergeMap(([product, languageCode, priceIncludesTax]) => {\r\n            var _a, _b;\r\n            const productGroup = this.getProductFormGroup();\r\n            let productInput;\r\n            let variantsInput;\r\n            if (productGroup.dirty || this.assetsChanged()) {\r\n                productInput = this.getUpdatedProduct(product, productGroup, languageCode);\r\n            }\r\n            const variantsArray = this.detailForm.get('variants');\r\n            if ((variantsArray && variantsArray.dirty) || this.variantAssetsChanged()) {\r\n                variantsInput = this.getUpdatedProductVariants(product, variantsArray, languageCode, priceIncludesTax);\r\n            }\r\n            return this.productDetailService.updateProduct({\r\n                product,\r\n                languageCode,\r\n                autoUpdate: (_b = (_a = this.detailForm.get(['product', 'autoUpdateVariantNames'])) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : false,\r\n                productInput,\r\n                variantsInput,\r\n            });\r\n        }))\r\n            .subscribe(result => {\r\n            this.updateSlugAfterSave(result);\r\n            this.detailForm.markAsPristine();\r\n            this.assetChanges = {};\r\n            this.variantAssetChanges = {};\r\n            this.notificationService.success(marker('common.notify-update-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.changeDetector.markForCheck();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-update-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n    canDeactivate() {\r\n        return super.canDeactivate() && !this.assetChanges.assets && !this.assetChanges.featuredAsset;\r\n    }\r\n    /**\r\n     * Sets the values of the form on changes to the product or current language.\r\n     */\r\n    setFormValues(product, languageCode) {\r\n        const currentTranslation = findTranslation(product, languageCode);\r\n        this.detailForm.patchValue({\r\n            product: {\r\n                enabled: product.enabled,\r\n                name: currentTranslation ? currentTranslation.name : '',\r\n                slug: currentTranslation ? currentTranslation.slug : '',\r\n                description: currentTranslation ? currentTranslation.description : '',\r\n                facetValueIds: product.facetValues.map(fv => fv.id),\r\n            },\r\n        });\r\n        if (this.customFields.length) {\r\n            const customFieldsGroup = this.detailForm.get(['product', 'customFields']);\r\n            const cfCurrentTranslation = (currentTranslation && currentTranslation.customFields) || {};\r\n            const cfProduct = product.customFields || {};\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString' ? cfCurrentTranslation[key] : cfProduct[key];\r\n                const control = customFieldsGroup.get(key);\r\n                if (control) {\r\n                    control.patchValue(value);\r\n                }\r\n            }\r\n        }\r\n        const variantsFormArray = this.detailForm.get('variants');\r\n        product.variants.forEach((variant, i) => {\r\n            const variantTranslation = findTranslation(variant, languageCode);\r\n            const facetValueIds = variant.facetValues.map(fv => fv.id);\r\n            const group = {\r\n                id: variant.id,\r\n                enabled: variant.enabled,\r\n                sku: variant.sku,\r\n                name: variantTranslation ? variantTranslation.name : '',\r\n                price: variant.price,\r\n                priceWithTax: variant.priceWithTax,\r\n                taxCategoryId: variant.taxCategory.id,\r\n                stockOnHand: variant.stockOnHand,\r\n                useGlobalOutOfStockThreshold: variant.useGlobalOutOfStockThreshold,\r\n                outOfStockThreshold: variant.outOfStockThreshold,\r\n                trackInventory: variant.trackInventory,\r\n                facetValueIds,\r\n            };\r\n            let variantFormGroup = variantsFormArray.at(i);\r\n            if (variantFormGroup) {\r\n                variantFormGroup.patchValue(group);\r\n            }\r\n            else {\r\n                variantFormGroup = this.formBuilder.group(Object.assign(Object.assign({}, group), { facetValueIds: this.formBuilder.control(facetValueIds) }));\r\n                variantsFormArray.insert(i, variantFormGroup);\r\n            }\r\n            if (this.customVariantFields.length) {\r\n                let customFieldsGroup = variantFormGroup.get(['customFields']);\r\n                if (!customFieldsGroup) {\r\n                    customFieldsGroup = this.formBuilder.group(this.customVariantFields.reduce((hash, field) => (Object.assign(Object.assign({}, hash), { [field.name]: '' })), {}));\r\n                    variantFormGroup.addControl('customFields', customFieldsGroup);\r\n                }\r\n                for (const fieldDef of this.customVariantFields) {\r\n                    const key = fieldDef.name;\r\n                    const value = fieldDef.type === 'localeString'\r\n                        ? variantTranslation.customFields[key]\r\n                        : variant.customFields[key];\r\n                    const control = customFieldsGroup.get(key);\r\n                    if (control) {\r\n                        control.patchValue(value);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Given a product and the value of the detailForm, this method creates an updated copy of the product which\r\n     * can then be persisted to the API.\r\n     */\r\n    getUpdatedProduct(product, productFormGroup, languageCode) {\r\n        var _a, _b;\r\n        const updatedProduct = createUpdatedTranslatable({\r\n            translatable: product,\r\n            updatedFields: productFormGroup.value,\r\n            customFieldConfig: this.customFields,\r\n            languageCode,\r\n            defaultTranslation: {\r\n                languageCode,\r\n                name: product.name || '',\r\n                slug: product.slug || '',\r\n                description: product.description || '',\r\n            },\r\n        });\r\n        return Object.assign(Object.assign({}, updatedProduct), { assetIds: (_a = this.assetChanges.assets) === null || _a === void 0 ? void 0 : _a.map(a => a.id), featuredAssetId: (_b = this.assetChanges.featuredAsset) === null || _b === void 0 ? void 0 : _b.id, facetValueIds: productFormGroup.value.facetValueIds });\r\n    }\r\n    /**\r\n     * Given an array of product variants and the values from the detailForm, this method creates an new array\r\n     * which can be persisted to the API.\r\n     */\r\n    getUpdatedProductVariants(product, variantsFormArray, languageCode, priceIncludesTax) {\r\n        const dirtyVariants = product.variants.filter((v, i) => {\r\n            const formRow = variantsFormArray.get(i.toString());\r\n            return formRow && formRow.dirty;\r\n        });\r\n        const dirtyVariantValues = variantsFormArray.controls.filter(c => c.dirty).map(c => c.value);\r\n        if (dirtyVariants.length !== dirtyVariantValues.length) {\r\n            throw new Error(marker(`error.product-variant-form-values-do-not-match`));\r\n        }\r\n        return dirtyVariants\r\n            .map((variant, i) => {\r\n            var _a, _b;\r\n            const formValue = dirtyVariantValues[i];\r\n            const result = createUpdatedTranslatable({\r\n                translatable: variant,\r\n                updatedFields: formValue,\r\n                customFieldConfig: this.customVariantFields,\r\n                languageCode,\r\n                defaultTranslation: {\r\n                    languageCode,\r\n                    name: '',\r\n                },\r\n            });\r\n            result.taxCategoryId = formValue.taxCategoryId;\r\n            result.facetValueIds = formValue.facetValueIds;\r\n            result.price = priceIncludesTax ? formValue.priceWithTax : formValue.price;\r\n            const assetChanges = this.variantAssetChanges[variant.id];\r\n            if (assetChanges) {\r\n                result.featuredAssetId = (_a = assetChanges.featuredAsset) === null || _a === void 0 ? void 0 : _a.id;\r\n                result.assetIds = (_b = assetChanges.assets) === null || _b === void 0 ? void 0 : _b.map(a => a.id);\r\n            }\r\n            return result;\r\n        })\r\n            .filter(notNullOrUndefined);\r\n    }\r\n    getProductFormGroup() {\r\n        return this.detailForm.get('product');\r\n    }\r\n    /**\r\n     * The server may alter the slug value in order to normalize and ensure uniqueness upon saving.\r\n     */\r\n    updateSlugAfterSave(results) {\r\n        const firstResult = results[0];\r\n        const slugControl = this.detailForm.get(['product', 'slug']);\r\n        function isUpdateMutation(input) {\r\n            return input.hasOwnProperty('updateProduct');\r\n        }\r\n        if (slugControl && isUpdateMutation(firstResult)) {\r\n            slugControl.setValue(firstResult.updateProduct.slug, { emitEvent: false });\r\n        }\r\n    }\r\n}\nProductDetailComponent.ɵfac = function ProductDetailComponent_Factory(t) { return new (t || ProductDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ProductDetailService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.Location), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nProductDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductDetailComponent, selectors: [[\"vdr-product-detail\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 18, vars: 21, consts: [[1, \"flex\", \"clr-flex-row\"], [3, \"entity\"], [4, \"vdrIfPermissions\"], [3, \"disabled\", \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"product-detail\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"updateButton\", \"\"], [\"class\", \"form\", 3, \"formGroup\", 4, \"ngIf\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", 3, \"formControl\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"btn btn-primary\", 3, \"disabled\", \"click\", 4, \"vdrIfPermissions\"], [1, \"form\", 3, \"formGroup\"], [\"type\", \"submit\", \"hidden\", \"\", \"x-data\", \"prevents enter key from triggering other buttons\"], [\"clrTabLink\", \"\", 3, \"click\"], [4, \"clrIfActive\"], [4, \"ngIf\"], [1, \"clr-row\"], [1, \"clr-col\"], [\"formGroupName\", \"product\", 1, \"form-block\"], [4, \"vdrIfMultichannel\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"input\"], [1, \"auto-rename-wrapper\"], [\"clrCheckbox\", \"\", \"type\", \"checkbox\", \"id\", \"auto-update\", \"formControlName\", \"autoUpdateVariantNames\"], [\"for\", \"slug\", 3, \"label\", \"errors\"], [\"id\", \"slug\", \"type\", \"text\", \"formControlName\", \"slug\", \"pattern\", \"[a-z0-9_-]+\", 3, \"readonly\"], [\"formControlName\", \"description\", 3, \"readonly\", \"label\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [1, \"facets\"], [3, \"facetValue\", \"removable\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [1, \"clr-col-md-auto\"], [3, \"assets\", \"featuredAsset\", \"change\"], [3, \"label\", 4, \"vdrIfDefaultChannelActive\"], [3, \"label\"], [1, \"flex\", \"channel-assignment\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-sm\", 3, \"click\"], [\"shape\", \"layers\"], [\"icon\", \"times-circle\", 3, \"iconClick\", 4, \"ngIf\"], [\"icon\", \"times-circle\", 3, \"iconClick\"], [3, \"channelCode\"], [\"formGroupName\", \"customFields\"], [\"entityName\", \"Product\", 3, \"customFieldsFormGroup\", \"customField\", \"readonly\", 4, \"ngIf\"], [\"entityName\", \"Product\", 3, \"customFieldsFormGroup\", \"customField\", \"readonly\"], [3, \"facetValue\", \"removable\", \"remove\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"plus\"], [3, \"variantsChange\"], [1, \"form-block\"], [1, \"view-mode\"], [1, \"btn-group\"], [1, \"btn\", \"btn-secondary-outline\", 3, \"click\"], [\"shape\", \"list\"], [1, \"btn\", 3, \"click\"], [\"shape\", \"table\"], [1, \"variant-filter\"], [3, \"formControl\", \"placeholder\"], [1, \"icon-button\", 3, \"click\"], [\"shape\", \"times\"], [1, \"flex-spacer\"], [\"class\", \"btn btn-secondary edit-variants-btn\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"variants\", \"optionGroups\", \"channelPriceIncludesTax\", \"productVariantsFormArray\", \"pendingAssetChanges\", 4, \"ngIf\"], [3, \"variants\", \"channelPriceIncludesTax\", \"facets\", \"optionGroups\", \"productVariantsFormArray\", \"taxCategories\", \"customFields\", \"customOptionFields\", \"activeLanguage\", \"pendingAssetChanges\", \"assignToChannel\", \"removeFromChannel\", \"assetChange\", \"updateProductOption\", \"selectionChange\", \"selectFacetValueClick\", 4, \"ngIf\"], [1, \"btn\", \"btn-secondary\", \"edit-variants-btn\", 3, \"routerLink\"], [\"shape\", \"add-text\"], [3, \"variants\", \"optionGroups\", \"channelPriceIncludesTax\", \"productVariantsFormArray\", \"pendingAssetChanges\"], [3, \"variants\", \"channelPriceIncludesTax\", \"facets\", \"optionGroups\", \"productVariantsFormArray\", \"taxCategories\", \"customFields\", \"customOptionFields\", \"activeLanguage\", \"pendingAssetChanges\", \"assignToChannel\", \"removeFromChannel\", \"assetChange\", \"updateProductOption\", \"selectionChange\", \"selectFacetValueClick\"]], template: function ProductDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\");\n        ɵngcc0.ɵɵelementStart(2, \"div\", 0);\n        ɵngcc0.ɵɵelement(3, \"vdr-entity-info\", 1);\n        ɵngcc0.ɵɵpipe(4, \"async\");\n        ɵngcc0.ɵɵtemplate(5, ProductDetailComponent_clr_toggle_wrapper_5_Template, 5, 5, \"clr-toggle-wrapper\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"vdr-language-selector\", 3);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function ProductDetailComponent_Template_vdr_language_selector_languageCodeChange_6_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(11, \"vdr-action-bar-items\", 4);\n        ɵngcc0.ɵɵtemplate(12, ProductDetailComponent_button_12_Template, 3, 4, \"button\", 5);\n        ɵngcc0.ɵɵpipe(13, \"async\");\n        ɵngcc0.ɵɵtemplate(14, ProductDetailComponent_ng_template_14_Template, 1, 2, \"ng-template\", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(16, ProductDetailComponent_form_16_Template, 11, 10, \"form\", 7);\n        ɵngcc0.ɵɵpipe(17, \"async\");\n    } if (rf & 2) {\n        const _r2 = ɵngcc0.ɵɵreference(15);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"entity\", ɵngcc0.ɵɵpipeBind1(4, 8, ctx.entity$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(20, _c21));\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(7, 10, ctx.isNew$))(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(8, 12, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(9, 14, ctx.languageCode$));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(13, 16, ctx.isNew$))(\"ngIfElse\", _r2);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(17, 18, ctx.product$));\n    } }, directives: function () { return [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ɵngcc2.EntityInfoComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.LanguageSelectorComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc4.NgIf, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.FormControlDirective, ɵngcc7.ClrLabel, ɵngcc3.ɵangular_packages_forms_forms_y, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc7.ClrTabs, ɵngcc7.ÇlrTabsWillyWonka, ɵngcc7.ClrTab, ɵngcc7.ClrTabLink, ɵngcc7.ÇlrActiveOompaLoompa, ɵngcc7.ClrIfActive, ɵngcc7.ClrTabContent, ɵngcc3.FormGroupName, ɵngcc2.IfMultichannelDirective, ɵngcc2.FormFieldComponent, ɵngcc3.DefaultValueAccessor, ɵngcc3.FormControlName, ɵngcc3.PatternValidator, ɵngcc2.RichTextEditorComponent, ɵngcc4.NgForOf, ProductAssetsComponent, ɵngcc2.IfDefaultChannelActiveDirective, ɵngcc2.FormItemComponent, ɵngcc7.ClrIconCustomTag, ɵngcc2.ChipComponent, ɵngcc2.ChannelBadgeComponent, ɵngcc2.CustomFieldControlComponent, ɵngcc2.FacetValueChipComponent, GenerateProductVariantsComponent, ɵngcc1.RouterLinkWithHref, ProductVariantsTableComponent, ProductVariantsListComponent]; }, pipes: function () { return [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe, ɵngcc2.ChannelLabelPipe]; }, styles: [\"[_nghost-%COMP%]     trix-toolbar{top:24px}vdr-action-bar[_ngcontent-%COMP%]   clr-toggle-wrapper[_ngcontent-%COMP%]{margin-top:12px}.variant-filter[_ngcontent-%COMP%]{flex:1;display:flex}.variant-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;max-width:none;border-radius:3px 0 0 3px!important}.variant-filter[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{border:1px solid var(--color-component-border-300);background-color:var(--color-component-bg-100);border-radius:0 3px 3px 0;border-left:none}.group-name[_ngcontent-%COMP%]{padding-right:6px}.view-mode[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.edit-variants-btn[_ngcontent-%COMP%]{margin-top:0}.channel-assignment[_ngcontent-%COMP%]{flex-wrap:wrap}.auto-rename-wrapper[_ngcontent-%COMP%]{overflow:hidden;max-height:0;padding-left:9.5rem;margin-bottom:0;transition:max-height .2s,margin-bottom .2s}.auto-rename-wrapper.visible[_ngcontent-%COMP%]{max-height:24px;margin-bottom:12px}\"], changeDetection: 0 });\r\nProductDetailComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: Router },\r\n    { type: ServerConfigService },\r\n    { type: ProductDetailService },\r\n    { type: FormBuilder },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: DataService },\r\n    { type: Location },\r\n    { type: ChangeDetectorRef }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-detail',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left>\\r\\n        <div class=\\\"flex clr-flex-row\\\">\\r\\n            <vdr-entity-info [entity]=\\\"entity$ | async\\\"></vdr-entity-info>\\r\\n            <clr-toggle-wrapper *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateProduct']\\\">\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    clrToggle\\r\\n                    name=\\\"enabled\\\"\\r\\n                    [formControl]=\\\"detailForm.get(['product', 'enabled'])\\\"\\r\\n                />\\r\\n                <label>{{ 'common.enabled' | translate }}</label>\\r\\n            </clr-toggle-wrapper>\\r\\n        </div>\\r\\n        <vdr-language-selector\\r\\n            [disabled]=\\\"isNew$ | async\\\"\\r\\n            [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n            [currentLanguageCode]=\\\"languageCode$ | async\\\"\\r\\n            (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n        ></vdr-language-selector>\\r\\n    </vdr-ab-left>\\r\\n\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"product-detail\\\"></vdr-action-bar-items>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            *ngIf=\\\"isNew$ | async; else updateButton\\\"\\r\\n            (click)=\\\"create()\\\"\\r\\n            [disabled]=\\\"detailForm.invalid || detailForm.pristine || !variantsToCreateAreValid()\\\"\\r\\n        >\\r\\n            {{ 'common.create' | translate }}\\r\\n        </button>\\r\\n        <ng-template #updateButton>\\r\\n            <button\\r\\n                *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateProduct']\\\"\\r\\n                class=\\\"btn btn-primary\\\"\\r\\n                (click)=\\\"save()\\\"\\r\\n                [disabled]=\\\"\\r\\n                    (detailForm.invalid || detailForm.pristine) && !assetsChanged() && !variantAssetsChanged()\\r\\n                \\\"\\r\\n            >\\r\\n                {{ 'common.update' | translate }}\\r\\n            </button>\\r\\n        </ng-template>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<form\\r\\n    class=\\\"form\\\"\\r\\n    [formGroup]=\\\"detailForm\\\"\\r\\n    *ngIf=\\\"product$ | async as product\\\"\\r\\n>\\r\\n    <button type=\\\"submit\\\" hidden x-data=\\\"prevents enter key from triggering other buttons\\\"></button>\\r\\n    <clr-tabs>\\r\\n        <clr-tab>\\r\\n            <button clrTabLink (click)=\\\"navigateToTab('details')\\\">\\r\\n                {{ 'catalog.product-details' | translate }}\\r\\n            </button>\\r\\n            <clr-tab-content *clrIfActive=\\\"(activeTab$ | async) === 'details'\\\">\\r\\n                <div class=\\\"clr-row\\\">\\r\\n                    <div class=\\\"clr-col\\\">\\r\\n                        <section class=\\\"form-block\\\" formGroupName=\\\"product\\\">\\r\\n                            <ng-container *vdrIfMultichannel>\\r\\n                                <vdr-form-item\\r\\n                                    [label]=\\\"'common.channels' | translate\\\"\\r\\n                                    *vdrIfDefaultChannelActive\\r\\n                                >\\r\\n                                    <div class=\\\"flex channel-assignment\\\">\\r\\n                                        <ng-container *ngFor=\\\"let channel of productChannels$ | async\\\">\\r\\n                                            <vdr-chip\\r\\n                                                *ngIf=\\\"!isDefaultChannel(channel.code)\\\"\\r\\n                                                icon=\\\"times-circle\\\"\\r\\n                                                (iconClick)=\\\"removeFromChannel(channel.id)\\\"\\r\\n                                            >\\r\\n                                                <vdr-channel-badge\\r\\n                                                    [channelCode]=\\\"channel.code\\\"\\r\\n                                                ></vdr-channel-badge>\\r\\n                                                {{ channel.code | channelCodeToLabel }}\\r\\n                                            </vdr-chip>\\r\\n                                        </ng-container>\\r\\n                                        <button class=\\\"btn btn-sm\\\" (click)=\\\"assignToChannel()\\\">\\r\\n                                            <clr-icon shape=\\\"layers\\\"></clr-icon>\\r\\n                                            {{ 'catalog.assign-to-channel' | translate }}\\r\\n                                        </button>\\r\\n                                    </div>\\r\\n                                </vdr-form-item>\\r\\n                            </ng-container>\\r\\n                            <vdr-form-field [label]=\\\"'catalog.product-name' | translate\\\" for=\\\"name\\\">\\r\\n                                <input\\r\\n                                    id=\\\"name\\\"\\r\\n                                    type=\\\"text\\\"\\r\\n                                    formControlName=\\\"name\\\"\\r\\n                                    [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                                    (input)=\\\"updateSlug($event.target.value)\\\"\\r\\n                                />\\r\\n                            </vdr-form-field>\\r\\n                            <div\\r\\n                                class=\\\"auto-rename-wrapper\\\"\\r\\n                                [class.visible]=\\\"\\r\\n                                    (isNew$ | async) === false && detailForm.get(['product', 'name'])?.dirty\\r\\n                                \\\"\\r\\n                            >\\r\\n                                <clr-checkbox-wrapper>\\r\\n                                    <input\\r\\n                                        clrCheckbox\\r\\n                                        type=\\\"checkbox\\\"\\r\\n                                        id=\\\"auto-update\\\"\\r\\n                                        formControlName=\\\"autoUpdateVariantNames\\\"\\r\\n                                    />\\r\\n                                    <label>{{\\r\\n                                        'catalog.auto-update-product-variant-name' | translate\\r\\n                                    }}</label>\\r\\n                                </clr-checkbox-wrapper>\\r\\n                            </div>\\r\\n                            <vdr-form-field\\r\\n                                [label]=\\\"'catalog.slug' | translate\\\"\\r\\n                                for=\\\"slug\\\"\\r\\n                                [errors]=\\\"{ pattern: 'catalog.slug-pattern-error' | translate }\\\"\\r\\n                            >\\r\\n                                <input\\r\\n                                    id=\\\"slug\\\"\\r\\n                                    type=\\\"text\\\"\\r\\n                                    formControlName=\\\"slug\\\"\\r\\n                                    [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                                    pattern=\\\"[a-z0-9_-]+\\\"\\r\\n                                />\\r\\n                            </vdr-form-field>\\r\\n                            <vdr-rich-text-editor\\r\\n                                formControlName=\\\"description\\\"\\r\\n                                [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                                [label]=\\\"'common.description' | translate\\\"\\r\\n                            ></vdr-rich-text-editor>\\r\\n\\r\\n                            <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                                <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n                                <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n                                    <vdr-custom-field-control\\r\\n                                        *ngIf=\\\"customFieldIsSet(customField.name)\\\"\\r\\n                                        entityName=\\\"Product\\\"\\r\\n                                        [customFieldsFormGroup]=\\\"detailForm.get(['product', 'customFields'])\\\"\\r\\n                                        [customField]=\\\"customField\\\"\\r\\n                                        [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                                    ></vdr-custom-field-control>\\r\\n                                </ng-container>\\r\\n                            </section>\\r\\n\\r\\n                            <div class=\\\"facets\\\">\\r\\n                                <vdr-facet-value-chip\\r\\n                                    *ngFor=\\\"let facetValue of facetValues$ | async\\\"\\r\\n                                    [facetValue]=\\\"facetValue\\\"\\r\\n                                    [removable]=\\\"['UpdateCatalog', 'UpdateProduct'] | hasPermission\\\"\\r\\n                                    (remove)=\\\"removeProductFacetValue(facetValue.id)\\\"\\r\\n                                ></vdr-facet-value-chip>\\r\\n                                <button\\r\\n                                    class=\\\"btn btn-sm btn-secondary\\\"\\r\\n                                    *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateProduct']\\\"\\r\\n                                    (click)=\\\"selectProductFacetValue()\\\"\\r\\n                                >\\r\\n                                    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                                    {{ 'catalog.add-facets' | translate }}\\r\\n                                </button>\\r\\n                            </div>\\r\\n                        </section>\\r\\n                    </div>\\r\\n                    <div class=\\\"clr-col-md-auto\\\">\\r\\n                        <vdr-product-assets\\r\\n                            [assets]=\\\"assetChanges.assets || product.assets\\\"\\r\\n                            [featuredAsset]=\\\"assetChanges.featuredAsset || product.featuredAsset\\\"\\r\\n                            (change)=\\\"assetChanges = $event\\\"\\r\\n                        ></vdr-product-assets>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <div *ngIf=\\\"isNew$ | async\\\">\\r\\n                    <h4>{{ 'catalog.product-variants' | translate }}</h4>\\r\\n                    <vdr-generate-product-variants\\r\\n                        (variantsChange)=\\\"createVariantsConfig = $event\\\"\\r\\n                    ></vdr-generate-product-variants>\\r\\n                </div>\\r\\n            </clr-tab-content>\\r\\n        </clr-tab>\\r\\n        <clr-tab *ngIf=\\\"!(isNew$ | async)\\\">\\r\\n            <button clrTabLink (click)=\\\"navigateToTab('variants')\\\">\\r\\n                {{ 'catalog.product-variants' | translate }}\\r\\n            </button>\\r\\n            <clr-tab-content *clrIfActive=\\\"(activeTab$ | async) === 'variants'\\\">\\r\\n                <section class=\\\"form-block\\\">\\r\\n                    <div class=\\\"view-mode\\\">\\r\\n                        <div class=\\\"btn-group\\\">\\r\\n                            <button\\r\\n                                class=\\\"btn btn-secondary-outline\\\"\\r\\n                                (click)=\\\"variantDisplayMode = 'card'\\\"\\r\\n                                [class.btn-primary]=\\\"variantDisplayMode === 'card'\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"list\\\"></clr-icon>\\r\\n                                {{ 'catalog.display-variant-cards' | translate }}\\r\\n                            </button>\\r\\n                            <button\\r\\n                                class=\\\"btn\\\"\\r\\n                                (click)=\\\"variantDisplayMode = 'table'\\\"\\r\\n                                [class.btn-primary]=\\\"variantDisplayMode === 'table'\\\"\\r\\n                            >\\r\\n                                <clr-icon shape=\\\"table\\\"></clr-icon>\\r\\n                                {{ 'catalog.display-variant-table' | translate }}\\r\\n                            </button>\\r\\n                        </div>\\r\\n                        <div class=\\\"variant-filter\\\">\\r\\n                            <input\\r\\n                                [formControl]=\\\"filterInput\\\"\\r\\n                                [placeholder]=\\\"'catalog.filter-by-name-or-sku' | translate\\\"\\r\\n                            />\\r\\n                            <button class=\\\"icon-button\\\" (click)=\\\"filterInput.setValue('')\\\">\\r\\n                                <clr-icon shape=\\\"times\\\"></clr-icon>\\r\\n                            </button>\\r\\n                        </div>\\r\\n                        <div class=\\\"flex-spacer\\\"></div>\\r\\n                        <a\\r\\n                            *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateProduct']\\\"\\r\\n                            [routerLink]=\\\"['./', 'manage-variants']\\\"\\r\\n                            class=\\\"btn btn-secondary edit-variants-btn\\\"\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"add-text\\\"></clr-icon>\\r\\n                            {{ 'catalog.manage-variants' | translate }}\\r\\n                        </a>\\r\\n                    </div>\\r\\n\\r\\n                    <vdr-product-variants-table\\r\\n                        *ngIf=\\\"variantDisplayMode === 'table'\\\"\\r\\n                        [variants]=\\\"variants$ | async\\\"\\r\\n                        [optionGroups]=\\\"product.optionGroups\\\"\\r\\n                        [channelPriceIncludesTax]=\\\"channelPriceIncludesTax$ | async\\\"\\r\\n                        [productVariantsFormArray]=\\\"detailForm.get('variants')\\\"\\r\\n                        [pendingAssetChanges]=\\\"variantAssetChanges\\\"\\r\\n                    ></vdr-product-variants-table>\\r\\n                    <vdr-product-variants-list\\r\\n                        *ngIf=\\\"variantDisplayMode === 'card'\\\"\\r\\n                        [variants]=\\\"variants$ | async\\\"\\r\\n                        [channelPriceIncludesTax]=\\\"channelPriceIncludesTax$ | async\\\"\\r\\n                        [facets]=\\\"facets$ | async\\\"\\r\\n                        [optionGroups]=\\\"product.optionGroups\\\"\\r\\n                        [productVariantsFormArray]=\\\"detailForm.get('variants')\\\"\\r\\n                        [taxCategories]=\\\"taxCategories$ | async\\\"\\r\\n                        [customFields]=\\\"customVariantFields\\\"\\r\\n                        [customOptionFields]=\\\"customOptionFields\\\"\\r\\n                        [activeLanguage]=\\\"languageCode$ | async\\\"\\r\\n                        [pendingAssetChanges]=\\\"variantAssetChanges\\\"\\r\\n                        (assignToChannel)=\\\"assignVariantToChannel($event)\\\"\\r\\n                        (removeFromChannel)=\\\"removeVariantFromChannel($event)\\\"\\r\\n                        (assetChange)=\\\"variantAssetChange($event)\\\"\\r\\n                        (updateProductOption)=\\\"updateProductOption($event)\\\"\\r\\n                        (selectionChange)=\\\"selectedVariantIds = $event\\\"\\r\\n                        (selectFacetValueClick)=\\\"selectVariantFacetValue($event)\\\"\\r\\n                    ></vdr-product-variants-list>\\r\\n                </section>\\r\\n            </clr-tab-content>\\r\\n        </clr-tab>\\r\\n    </clr-tabs>\\r\\n</form>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host ::ng-deep trix-toolbar{top:24px}vdr-action-bar clr-toggle-wrapper{margin-top:12px}.variant-filter{flex:1;display:flex}.variant-filter input{flex:1;max-width:none;border-radius:3px 0 0 3px!important}.variant-filter .icon-button{border:1px solid var(--color-component-border-300);background-color:var(--color-component-bg-100);border-radius:0 3px 3px 0;border-left:none}.group-name{padding-right:6px}.view-mode{display:flex;justify-content:flex-end;align-items:center}.edit-variants-btn{margin-top:0}.channel-assignment{flex-wrap:wrap}.auto-rename-wrapper{overflow:hidden;max-height:0;padding-left:9.5rem;margin-bottom:0;transition:max-height .2s,margin-bottom .2s}.auto-rename-wrapper.visible{max-height:24px;margin-bottom:12px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ActivatedRoute }, { type: ɵngcc1.Router }, { type: ɵngcc2.ServerConfigService }, { type: ProductDetailService }, { type: ɵngcc3.FormBuilder }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.DataService }, { type: ɵngcc4.Location }, { type: ɵngcc0.ChangeDetectorRef }]; }, null); })();\n\nconst ɵ0$1 = SingleSearchSelectionModelFactory;\r\nclass ProductSearchInputComponent {\r\n    constructor() {\r\n        this.searchTermChange = new EventEmitter();\r\n        this.facetValueChange = new EventEmitter();\r\n        this.lastTerm = '';\r\n        this.lastFacetValueIds = [];\r\n        this.filterFacetResults = (term, item) => {\r\n            if (!this.isFacetValueItem(item)) {\r\n                return false;\r\n            }\r\n            return (item.facetValue.name.toLowerCase().startsWith(term.toLowerCase()) ||\r\n                item.facetValue.facet.name.toLowerCase().startsWith(term.toLowerCase()));\r\n        };\r\n        this.isFacetValueItem = (input) => {\r\n            return typeof input === 'object' && !!input && input.hasOwnProperty('facetValue');\r\n        };\r\n    }\r\n    setSearchTerm(term) {\r\n        if (term) {\r\n            this.selectComponent.select({ label: term, value: { label: term } });\r\n        }\r\n        else {\r\n            const currentTerm = this.selectComponent.selectedItems.find(i => !this.isFacetValueItem(i.value));\r\n            if (currentTerm) {\r\n                this.selectComponent.unselect(currentTerm);\r\n            }\r\n        }\r\n    }\r\n    setFacetValues(ids) {\r\n        const items = this.selectComponent.items;\r\n        this.selectComponent.selectedItems.forEach(item => {\r\n            if (this.isFacetValueItem(item.value) && !ids.includes(item.value.facetValue.id)) {\r\n                this.selectComponent.unselect(item);\r\n            }\r\n        });\r\n        ids.map(id => {\r\n            return items.find(item => this.isFacetValueItem(item) && item.facetValue.id === id);\r\n        })\r\n            .filter(notNullOrUndefined)\r\n            .forEach(item => {\r\n            const isSelected = this.selectComponent.selectedItems.find(i => {\r\n                const val = i.value;\r\n                if (this.isFacetValueItem(val)) {\r\n                    return val.facetValue.id === item.facetValue.id;\r\n                }\r\n                return false;\r\n            });\r\n            if (!isSelected) {\r\n                this.selectComponent.select({ label: '', value: item });\r\n            }\r\n        });\r\n    }\r\n    onSelectChange(selectedItems) {\r\n        if (!Array.isArray(selectedItems)) {\r\n            selectedItems = [selectedItems];\r\n        }\r\n        const searchTermItem = selectedItems.find(item => !this.isFacetValueItem(item));\r\n        const searchTerm = searchTermItem ? searchTermItem.label : '';\r\n        const facetValueIds = selectedItems.filter(this.isFacetValueItem).map(i => i.facetValue.id);\r\n        if (searchTerm !== this.lastTerm) {\r\n            this.searchTermChange.emit(searchTerm);\r\n            this.lastTerm = searchTerm;\r\n        }\r\n        if (this.lastFacetValueIds.join(',') !== facetValueIds.join(',')) {\r\n            this.facetValueChange.emit(facetValueIds);\r\n            this.lastFacetValueIds = facetValueIds;\r\n        }\r\n    }\r\n    addTagFn(item) {\r\n        return { label: item };\r\n    }\r\n    isSearchHeaderSelected() {\r\n        return this.selectComponent.itemsList.markedIndex === -1;\r\n    }\r\n}\nProductSearchInputComponent.ɵfac = function ProductSearchInputComponent_Factory(t) { return new (t || ProductSearchInputComponent)(); };\nProductSearchInputComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductSearchInputComponent, selectors: [[\"vdr-product-search-input\"]], viewQuery: function ProductSearchInputComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c25, 3);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.selectComponent = _t.first);\n    } }, inputs: { facetValueResults: \"facetValueResults\" }, outputs: { searchTermChange: \"searchTermChange\", facetValueChange: \"facetValueChange\" }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: SELECTION_MODEL_FACTORY, useValue: ɵ0$1 }])], decls: 6, vars: 9, consts: [[3, \"addTag\", \"placeholder\", \"items\", \"searchFn\", \"hideSelected\", \"multiple\", \"markFirst\", \"change\"], [\"selectComponent\", \"\"], [\"ng-header-tmp\", \"\"], [\"ng-label-tmp\", \"\"], [\"ng-option-tmp\", \"\"], [\"class\", \"search-header\", 3, \"selected\", \"click\", 4, \"ngIf\"], [1, \"search-header\", 3, \"click\"], [4, \"ngIf\"], [3, \"facetValue\", \"removable\", \"remove\"], [3, \"icon\", \"iconClick\"], [3, \"facetValue\", \"removable\"]], template: function ProductSearchInputComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"ng-select\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"change\", function ProductSearchInputComponent_Template_ng_select_change_0_listener($event) { return ctx.onSelectChange($event); });\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵtemplate(3, ProductSearchInputComponent_ng_template_3_Template, 1, 1, \"ng-template\", 2);\n        ɵngcc0.ɵɵtemplate(4, ProductSearchInputComponent_ng_template_4_Template, 2, 2, \"ng-template\", 3);\n        ɵngcc0.ɵɵtemplate(5, ProductSearchInputComponent_ng_template_5_Template, 1, 1, \"ng-template\", 4);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"addTag\", ctx.addTagFn)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 7, \"catalog.search-product-name-or-code\"))(\"items\", ctx.facetValueResults)(\"searchFn\", ctx.filterFacetResults)(\"hideSelected\", true)(\"multiple\", true)(\"markFirst\", false);\n    } }, directives: [ɵngcc8.NgSelectComponent, ɵngcc8.ɵj, ɵngcc8.ɵh, ɵngcc8.ɵf, ɵngcc4.NgIf, ɵngcc2.FacetValueChipComponent, ɵngcc2.ChipComponent], pipes: [ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{margin-top:6px;display:block;width:100%}[_nghost-%COMP%]     .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{background:none;margin:0}[_nghost-%COMP%]     .ng-dropdown-panel-items div.ng-option:last-child{display:none}[_nghost-%COMP%]     .ng-dropdown-panel .ng-dropdown-header{border:none;padding:0}[_nghost-%COMP%]     .ng-select.ng-select-multiple .ng-select-container .ng-value-container{padding:0}[_nghost-%COMP%]     .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{padding-left:8px}ng-select[_ngcontent-%COMP%]{width:100%;min-width:300px;margin-right:12px}.search-header[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid var(--color-component-border-100);cursor:pointer}.search-header.selected[_ngcontent-%COMP%], .search-header[_ngcontent-%COMP%]:hover{background-color:var(--color-component-bg-200)}\"], changeDetection: 0 });\r\nProductSearchInputComponent.propDecorators = {\r\n    facetValueResults: [{ type: Input }],\r\n    searchTermChange: [{ type: Output }],\r\n    facetValueChange: [{ type: Output }],\r\n    selectComponent: [{ type: ViewChild, args: ['selectComponent', { static: true },] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductSearchInputComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-search-input',\n                template: \"<ng-select\\r\\n    [addTag]=\\\"addTagFn\\\"\\r\\n    [placeholder]=\\\"'catalog.search-product-name-or-code' | translate\\\"\\r\\n    [items]=\\\"facetValueResults\\\"\\r\\n    [searchFn]=\\\"filterFacetResults\\\"\\r\\n    [hideSelected]=\\\"true\\\"\\r\\n    [multiple]=\\\"true\\\"\\r\\n    [markFirst]=\\\"false\\\"\\r\\n    (change)=\\\"onSelectChange($event)\\\"\\r\\n    #selectComponent\\r\\n>\\r\\n    <ng-template ng-header-tmp>\\r\\n        <div\\r\\n            class=\\\"search-header\\\"\\r\\n            *ngIf=\\\"selectComponent.searchTerm\\\"\\r\\n            [class.selected]=\\\"isSearchHeaderSelected()\\\"\\r\\n            (click)=\\\"selectComponent.selectTag()\\\"\\r\\n        >\\r\\n            {{ 'catalog.search-for-term' | translate }}: {{ selectComponent.searchTerm }}\\r\\n        </div>\\r\\n    </ng-template>\\r\\n    <ng-template ng-label-tmp let-item=\\\"item\\\" let-clear=\\\"clear\\\">\\r\\n        <ng-container *ngIf=\\\"item.facetValue\\\">\\r\\n            <vdr-facet-value-chip\\r\\n                [facetValue]=\\\"item.facetValue\\\"\\r\\n                [removable]=\\\"true\\\"\\r\\n                (remove)=\\\"clear(item)\\\"\\r\\n            ></vdr-facet-value-chip>\\r\\n        </ng-container>\\r\\n        <ng-container *ngIf=\\\"!item.facetValue\\\">\\r\\n            <vdr-chip [icon]=\\\"'times'\\\" (iconClick)=\\\"clear(item)\\\">\\\"{{ item.label }}\\\"</vdr-chip>\\r\\n        </ng-container>\\r\\n    </ng-template>\\r\\n    <ng-template ng-option-tmp let-item=\\\"item\\\" let-index=\\\"index\\\" let-search=\\\"searchTerm\\\">\\r\\n        <ng-container *ngIf=\\\"item.facetValue\\\">\\r\\n            <vdr-facet-value-chip [facetValue]=\\\"item.facetValue\\\" [removable]=\\\"false\\\"></vdr-facet-value-chip>\\r\\n        </ng-container>\\r\\n    </ng-template>\\r\\n</ng-select>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                providers: [{ provide: SELECTION_MODEL_FACTORY, useValue: ɵ0$1 }],\n                styles: [\":host{margin-top:6px;display:block;width:100%}:host ::ng-deep .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{background:none;margin:0}:host ::ng-deep .ng-dropdown-panel-items div.ng-option:last-child{display:none}:host ::ng-deep .ng-dropdown-panel .ng-dropdown-header{border:none;padding:0}:host ::ng-deep .ng-select.ng-select-multiple .ng-select-container .ng-value-container{padding:0}:host ::ng-deep .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{padding-left:8px}ng-select{width:100%;min-width:300px;margin-right:12px}.search-header{padding:8px 10px;border-bottom:1px solid var(--color-component-border-100);cursor:pointer}.search-header.selected,.search-header:hover{background-color:var(--color-component-bg-200)}\"]\n            }]\n    }], function () { return []; }, { searchTermChange: [{\n            type: Output\n        }], facetValueChange: [{\n            type: Output\n        }], facetValueResults: [{\n            type: Input\n        }], selectComponent: [{\n            type: ViewChild,\n            args: ['selectComponent', { static: true }]\n        }] }); })();\n\nclass ProductListComponent extends BaseListComponent {\r\n    constructor(dataService, modalService, notificationService, jobQueueService, serverConfigService, router, route) {\r\n        super(router, route);\r\n        this.dataService = dataService;\r\n        this.modalService = modalService;\r\n        this.notificationService = notificationService;\r\n        this.jobQueueService = jobQueueService;\r\n        this.serverConfigService = serverConfigService;\r\n        this.searchTerm = '';\r\n        this.facetValueIds = [];\r\n        this.groupByProduct = true;\r\n        super.setQueryFn((...args) => this.dataService.product.searchProducts(this.searchTerm, ...args).refetchOnChannelChange(), data => data.search, \r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        (skip, take) => ({\r\n            input: {\r\n                skip,\r\n                take,\r\n                term: this.searchTerm,\r\n                facetValueIds: this.facetValueIds,\r\n                facetValueOperator: LogicalOperator.AND,\r\n                groupByProduct: this.groupByProduct,\r\n            },\r\n        }));\r\n    }\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.facetValues$ = this.result$.pipe(map(data => data.search.facetValues));\r\n        // this.facetValues$ = of([]);\r\n        this.route.queryParamMap\r\n            .pipe(map(qpm => qpm.get('q')), takeUntil(this.destroy$))\r\n            .subscribe(term => {\r\n            this.productSearchInput.setSearchTerm(term);\r\n        });\r\n        const fvids$ = this.route.queryParamMap.pipe(map(qpm => qpm.getAll('fvids')));\r\n        fvids$.pipe(takeUntil(this.destroy$)).subscribe(ids => {\r\n            this.productSearchInput.setFacetValues(ids);\r\n        });\r\n        this.facetValues$.pipe(take(1), delay(100), withLatestFrom(fvids$)).subscribe(([__, ids]) => {\r\n            this.productSearchInput.setFacetValues(ids);\r\n        });\r\n        this.availableLanguages$ = this.serverConfigService.getAvailableLanguages();\r\n        this.contentLanguage$ = this.dataService.client\r\n            .uiState()\r\n            .mapStream(({ uiState }) => uiState.contentLanguage)\r\n            .pipe(tap(() => this.refresh()));\r\n    }\r\n    setSearchTerm(term) {\r\n        this.searchTerm = term;\r\n        this.setQueryParam({ q: term || null, page: 1 });\r\n        this.refresh();\r\n    }\r\n    setFacetValueIds(ids) {\r\n        this.facetValueIds = ids;\r\n        this.setQueryParam({ fvids: ids, page: 1 });\r\n        this.refresh();\r\n    }\r\n    rebuildSearchIndex() {\r\n        this.dataService.product.reindex().subscribe(({ reindex }) => {\r\n            this.notificationService.info(marker('catalog.reindexing'));\r\n            this.jobQueueService.addJob(reindex.id, job => {\r\n                if (job.state === JobState.COMPLETED) {\r\n                    const time = new Intl.NumberFormat().format(job.duration || 0);\r\n                    this.notificationService.success(marker('catalog.reindex-successful'), {\r\n                        count: job.result.indexedItemCount,\r\n                        time,\r\n                    });\r\n                    this.refresh();\r\n                }\r\n                else {\r\n                    this.notificationService.error(marker('catalog.reindex-error'));\r\n                }\r\n            });\r\n        });\r\n    }\r\n    deleteProduct(productId) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-product'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(response => (response ? this.dataService.product.deleteProduct(productId) : EMPTY)), \r\n        // Short delay to allow the product to be removed from the search index before\r\n        // refreshing.\r\n        delay(500))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'Product',\r\n            });\r\n            this.refresh();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'Product',\r\n            });\r\n        });\r\n    }\r\n    setLanguage(code) {\r\n        this.dataService.client.setContentLanguage(code).subscribe();\r\n    }\r\n}\nProductListComponent.ɵfac = function ProductListComponent_Factory(t) { return new (t || ProductListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.JobQueueService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ServerConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute)); };\nProductListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductListComponent, selectors: [[\"vdr-products-list\"]], viewQuery: function ProductListComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c26, 3);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.productSearchInput = _t.first);\n    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 32, vars: 35, consts: [[3, \"grow\"], [1, \"search-form\"], [3, \"facetValueResults\", \"searchTermChange\", \"facetValueChange\"], [\"productSearchInputComponent\", \"\"], [1, \"search-settings-menu\", \"mr3\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"cog\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [1, \"flex\", \"wrap\"], [1, \"mt2\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"availableLanguageCodes\", \"currentLanguageCode\", \"languageCodeChange\"], [\"locationId\", \"product-list\"], [\"class\", \"btn btn-primary\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [3, \"items\", \"itemsPerPage\", \"totalItems\", \"currentPage\", \"pageChange\", \"itemsPerPageChange\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"shape\", \"plus\"], [1, \"full-label\"], [1, \"left\", \"align-middle\"], [1, \"image-placeholder\"], [3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"imagePlaceholder\", \"\"], [1, \"align-middle\"], [4, \"ngIf\"], [1, \"right\", \"align-middle\"], [\"iconShape\", \"edit\", 3, \"label\", \"linkTo\"], [\"type\", \"button\", \"vdrDropdownTrigger\", \"\", 1, \"btn\", \"btn-link\", \"btn-sm\"], [\"shape\", \"caret down\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"src\"], [1, \"placeholder\"], [\"shape\", \"image\", \"size\", \"48\"]], template: function ProductListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-left\", 0);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(3, \"vdr-product-search-input\", 2, 3);\n        ɵngcc0.ɵɵlistener(\"searchTermChange\", function ProductListComponent_Template_vdr_product_search_input_searchTermChange_3_listener($event) { return ctx.setSearchTerm($event); })(\"facetValueChange\", function ProductListComponent_Template_vdr_product_search_input_facetValueChange_3_listener($event) { return ctx.setFacetValueIds($event); });\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"vdr-dropdown\", 4);\n        ɵngcc0.ɵɵelementStart(7, \"button\", 5);\n        ɵngcc0.ɵɵelement(8, \"clr-icon\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"vdr-dropdown-menu\", 7);\n        ɵngcc0.ɵɵelementStart(10, \"button\", 8);\n        ɵngcc0.ɵɵlistener(\"click\", function ProductListComponent_Template_button_click_10_listener() { return ctx.rebuildSearchIndex(); });\n        ɵngcc0.ɵɵpipe(11, \"hasPermission\");\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"div\", 9);\n        ɵngcc0.ɵɵelementStart(15, \"clr-checkbox-wrapper\", 10);\n        ɵngcc0.ɵɵelementStart(16, \"input\", 11);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_input_ngModelChange_16_listener($event) { return ctx.groupByProduct = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"label\");\n        ɵngcc0.ɵɵtext(18);\n        ɵngcc0.ɵɵpipe(19, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(20, \"vdr-language-selector\", 12);\n        ɵngcc0.ɵɵlistener(\"languageCodeChange\", function ProductListComponent_Template_vdr_language_selector_languageCodeChange_20_listener($event) { return ctx.setLanguage($event); });\n        ɵngcc0.ɵɵpipe(21, \"async\");\n        ɵngcc0.ɵɵpipe(22, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelement(24, \"vdr-action-bar-items\", 13);\n        ɵngcc0.ɵɵtemplate(25, ProductListComponent_a_25_Template, 5, 5, \"a\", 14);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(26, \"vdr-data-table\", 15);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function ProductListComponent_Template_vdr_data_table_pageChange_26_listener($event) { return ctx.setPageNumber($event); })(\"itemsPerPageChange\", function ProductListComponent_Template_vdr_data_table_itemsPerPageChange_26_listener($event) { return ctx.setItemsPerPage($event); });\n        ɵngcc0.ɵɵpipe(27, \"async\");\n        ɵngcc0.ɵɵpipe(28, \"async\");\n        ɵngcc0.ɵɵpipe(29, \"async\");\n        ɵngcc0.ɵɵpipe(30, \"async\");\n        ɵngcc0.ɵɵtemplate(31, ProductListComponent_ng_template_31_Template, 24, 30, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"grow\", true);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"facetValueResults\", ɵngcc0.ɵɵpipeBind1(5, 13, ctx.facetValues$));\n        ɵngcc0.ɵɵadvance(7);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ɵngcc0.ɵɵpipeBind1(11, 15, ɵngcc0.ɵɵpureFunction0(33, _c21)));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 17, \"catalog.rebuild-search-index\"), \" \");\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.groupByProduct);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(19, 19, \"catalog.group-by-product\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"availableLanguageCodes\", ɵngcc0.ɵɵpipeBind1(21, 21, ctx.availableLanguages$))(\"currentLanguageCode\", ɵngcc0.ɵɵpipeBind1(22, 23, ctx.contentLanguage$));\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"vdrIfPermissions\", ɵngcc0.ɵɵpureFunction0(34, _c28));\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"items\", ɵngcc0.ɵɵpipeBind1(27, 25, ctx.items$))(\"itemsPerPage\", ɵngcc0.ɵɵpipeBind1(28, 27, ctx.itemsPerPage$))(\"totalItems\", ɵngcc0.ɵɵpipeBind1(29, 29, ctx.totalItems$))(\"currentPage\", ɵngcc0.ɵɵpipeBind1(30, 31, ctx.currentPage$));\n    } }, directives: [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarLeftComponent, ProductSearchInputComponent, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc7.ClrIconCustomTag, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective, ɵngcc7.ClrCheckboxWrapper, ɵngcc2.FormFieldControlDirective, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc7.ClrLabel, ɵngcc2.LanguageSelectorComponent, ɵngcc2.ActionBarRightComponent, ɵngcc2.ActionBarItemsComponent, ɵngcc2.IfPermissionsDirective, ɵngcc2.DataTableComponent, ɵngcc1.RouterLinkWithHref, ɵngcc4.NgIf, ɵngcc2.TableRowActionComponent, ɵngcc2.ChipComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc2.HasPermissionPipe, ɵngcc5.TranslatePipe, ɵngcc2.AssetPreviewPipe], styles: [\".image-placeholder[_ngcontent-%COMP%]{width:50px;height:50px;background-color:var(--color-component-bg-200)}.image-placeholder[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{text-align:center;color:var(--color-grey-300)}.search-form[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin-bottom:6px}.search-input[_ngcontent-%COMP%]{min-width:300px}@media screen and (max-width:768px){.search-input[_ngcontent-%COMP%]{min-width:100px}}.search-settings-menu[_ngcontent-%COMP%]{margin:0 12px}td.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}\"] });\r\nProductListComponent.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: ModalService },\r\n    { type: NotificationService },\r\n    { type: JobQueueService },\r\n    { type: ServerConfigService },\r\n    { type: Router },\r\n    { type: ActivatedRoute }\r\n];\r\nProductListComponent.propDecorators = {\r\n    productSearchInput: [{ type: ViewChild, args: ['productSearchInputComponent', { static: true },] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-products-list',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-left [grow]=\\\"true\\\">\\r\\n        <div class=\\\"search-form\\\">\\r\\n            <vdr-product-search-input\\r\\n                #productSearchInputComponent\\r\\n                [facetValueResults]=\\\"facetValues$ | async\\\"\\r\\n                (searchTermChange)=\\\"setSearchTerm($event)\\\"\\r\\n                (facetValueChange)=\\\"setFacetValueIds($event)\\\"\\r\\n            ></vdr-product-search-input>\\r\\n            <vdr-dropdown class=\\\"search-settings-menu mr3\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                    <clr-icon shape=\\\"cog\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"rebuildSearchIndex()\\\"\\r\\n                        [disabled]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n                    >\\r\\n                        {{ 'catalog.rebuild-search-index' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n        <div class=\\\"flex wrap\\\">\\r\\n            <clr-checkbox-wrapper class=\\\"mt2\\\">\\r\\n                <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"groupByProduct\\\"/>\\r\\n                <label>{{ 'catalog.group-by-product' | translate }}</label>\\r\\n            </clr-checkbox-wrapper>\\r\\n            <vdr-language-selector\\r\\n                [availableLanguageCodes]=\\\"availableLanguages$ | async\\\"\\r\\n                [currentLanguageCode]=\\\"contentLanguage$ | async\\\"\\r\\n                (languageCodeChange)=\\\"setLanguage($event)\\\"\\r\\n            ></vdr-language-selector>\\r\\n        </div>\\r\\n    </vdr-ab-left>\\r\\n    <vdr-ab-right>\\r\\n        <vdr-action-bar-items locationId=\\\"product-list\\\"></vdr-action-bar-items>\\r\\n        <a class=\\\"btn btn-primary\\\" [routerLink]=\\\"['./create']\\\" *vdrIfPermissions=\\\"['CreateCatalog', 'CreateProduct']\\\">\\r\\n            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n            <span class=\\\"full-label\\\">{{ 'catalog.create-new-product' | translate }}</span>\\r\\n        </a>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<vdr-data-table\\r\\n    [items]=\\\"items$ | async\\\"\\r\\n    [itemsPerPage]=\\\"itemsPerPage$ | async\\\"\\r\\n    [totalItems]=\\\"totalItems$ | async\\\"\\r\\n    [currentPage]=\\\"currentPage$ | async\\\"\\r\\n    (pageChange)=\\\"setPageNumber($event)\\\"\\r\\n    (itemsPerPageChange)=\\\"setItemsPerPage($event)\\\"\\r\\n>\\r\\n    <ng-template let-result=\\\"item\\\">\\r\\n        <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <div class=\\\"image-placeholder\\\">\\r\\n                <img\\r\\n                    *ngIf=\\\"\\r\\n                        groupByProduct\\r\\n                            ? result.productAsset\\r\\n                            : result.productVariantAsset || result.productAsset as asset;\\r\\n                        else imagePlaceholder\\r\\n                    \\\"\\r\\n                    [src]=\\\"asset | assetPreview:'tiny'\\\"\\r\\n                />\\r\\n                <ng-template #imagePlaceholder>\\r\\n                    <div class=\\\"placeholder\\\">\\r\\n                        <clr-icon shape=\\\"image\\\" size=\\\"48\\\"></clr-icon>\\r\\n                    </div>\\r\\n                </ng-template>\\r\\n            </div>\\r\\n        </td>\\r\\n        <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            {{ groupByProduct ? result.productName : result.productVariantName }}\\r\\n        </td>\\r\\n        <td class=\\\"align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <vdr-chip *ngIf=\\\"!result.enabled\\\">{{ 'common.disabled' | translate }}</vdr-chip>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <vdr-table-row-action\\r\\n                iconShape=\\\"edit\\\"\\r\\n                [label]=\\\"'common.edit' | translate\\\"\\r\\n                [linkTo]=\\\"['./', result.productId]\\\"\\r\\n            ></vdr-table-row-action>\\r\\n        </td>\\r\\n        <td class=\\\"right align-middle\\\" [class.disabled]=\\\"!result.enabled\\\">\\r\\n            <vdr-dropdown>\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-link btn-sm\\\" vdrDropdownTrigger>\\r\\n                    {{ 'common.actions' | translate }}\\r\\n                    <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"delete-button\\\"\\r\\n                        (click)=\\\"deleteProduct(result.productId)\\\"\\r\\n                        [disabled]=\\\"!(['DeleteCatalog', 'DeleteProduct'] | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </td>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                styles: [\".image-placeholder{width:50px;height:50px;background-color:var(--color-component-bg-200)}.image-placeholder .placeholder{text-align:center;color:var(--color-grey-300)}.search-form{display:flex;align-items:center;width:100%;margin-bottom:6px}.search-input{min-width:300px}@media screen and (max-width:768px){.search-input{min-width:100px}}.search-settings-menu{margin:0 12px}td.disabled{background-color:var(--color-component-bg-200)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.JobQueueService }, { type: ɵngcc2.ServerConfigService }, { type: ɵngcc1.Router }, { type: ɵngcc1.ActivatedRoute }]; }, { productSearchInput: [{\n            type: ViewChild,\n            args: ['productSearchInputComponent', { static: true }]\n        }] }); })();\n\nclass ConfirmVariantDeletionDialogComponent {\r\n    constructor() {\r\n        this.variants = [];\r\n    }\r\n    confirm() {\r\n        this.resolveWith(true);\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n}\nConfirmVariantDeletionDialogComponent.ɵfac = function ConfirmVariantDeletionDialogComponent_Factory(t) { return new (t || ConfirmVariantDeletionDialogComponent)(); };\nConfirmVariantDeletionDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ConfirmVariantDeletionDialogComponent, selectors: [[\"vdr-confirm-variant-deletion-dialog\"]], decls: 6, vars: 4, consts: [[\"vdrDialogTitle\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"vdrDialogButtons\", \"\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"]], template: function ConfirmVariantDeletionDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ConfirmVariantDeletionDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementStart(3, \"ul\");\n        ɵngcc0.ɵɵtemplate(4, ConfirmVariantDeletionDialogComponent_li_4_Template, 2, 2, \"li\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(5, ConfirmVariantDeletionDialogComponent_ng_template_5_Template, 6, 6, \"ng-template\", 2);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\"\\n\", ɵngcc0.ɵɵpipeBind1(2, 2, \"catalog.confirm-deletion-of-unused-variants-body\"), \"\\n\");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.variants);\n    } }, directives: [ɵngcc2.DialogTitleDirective, ɵngcc4.NgForOf, ɵngcc2.DialogButtonsDirective], pipes: [ɵngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ConfirmVariantDeletionDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-confirm-variant-deletion-dialog',\n                template: \"<ng-template vdrDialogTitle>\\r\\n    {{ 'catalog.confirm-deletion-of-unused-variants-title' | translate }}\\r\\n</ng-template>\\r\\n{{ 'catalog.confirm-deletion-of-unused-variants-body' | translate }}\\r\\n<ul>\\r\\n    <li *ngFor=\\\"let variant of variants\\\">{{ variant.name }} ({{ variant.sku }})</li>\\r\\n</ul>\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button type=\\\"submit\\\" (click)=\\\"confirm()\\\" class=\\\"btn btn-primary\\\">\\r\\n        {{ 'common.confirm' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass GeneratedVariant {\r\n    constructor(config) {\r\n        for (const key of Object.keys(config)) {\r\n            this[key] = config[key];\r\n        }\r\n    }\r\n}\r\nclass ProductVariantsEditorComponent {\r\n    constructor(route, dataService, productDetailService, notificationService, modalService) {\r\n        this.route = route;\r\n        this.dataService = dataService;\r\n        this.productDetailService = productDetailService;\r\n        this.notificationService = notificationService;\r\n        this.modalService = modalService;\r\n        this.formValueChanged = false;\r\n        this.generatedVariants = [];\r\n    }\r\n    ngOnInit() {\r\n        this.initOptionsAndVariants();\r\n        this.languageCode =\r\n            this.route.snapshot.paramMap.get('lang') || getDefaultUiLanguage();\r\n        this.dataService.settings.getActiveChannel().single$.subscribe(data => {\r\n            this.currencyCode = data.activeChannel.currencyCode;\r\n        });\r\n    }\r\n    onFormChanged(variantInfo) {\r\n        this.formValueChanged = true;\r\n        variantInfo.enabled = true;\r\n    }\r\n    canDeactivate() {\r\n        return !this.formValueChanged;\r\n    }\r\n    getVariantsToAdd() {\r\n        return this.generatedVariants.filter(v => !v.existing && v.enabled);\r\n    }\r\n    getVariantName(variant) {\r\n        return variant.options.length === 0\r\n            ? marker('catalog.default-variant')\r\n            : variant.options.map(o => o.name).join(' ');\r\n    }\r\n    addOption() {\r\n        this.optionGroups.push({\r\n            isNew: true,\r\n            name: '',\r\n            values: [],\r\n        });\r\n    }\r\n    generateVariants() {\r\n        const groups = this.optionGroups.map(g => g.values);\r\n        const previousVariants = this.generatedVariants;\r\n        const generatedVariantFactory = (isDefault, options, existingVariant, prototypeVariant) => {\r\n            var _a, _b, _c, _d, _e, _f;\r\n            const prototype = this.getVariantPrototype(options, previousVariants);\r\n            return new GeneratedVariant({\r\n                enabled: true,\r\n                existing: !!existingVariant,\r\n                productVariantId: existingVariant === null || existingVariant === void 0 ? void 0 : existingVariant.id,\r\n                isDefault,\r\n                options,\r\n                price: (_b = (_a = existingVariant === null || existingVariant === void 0 ? void 0 : existingVariant.price) !== null && _a !== void 0 ? _a : prototypeVariant === null || prototypeVariant === void 0 ? void 0 : prototypeVariant.price) !== null && _b !== void 0 ? _b : prototype.price,\r\n                sku: (_d = (_c = existingVariant === null || existingVariant === void 0 ? void 0 : existingVariant.sku) !== null && _c !== void 0 ? _c : prototypeVariant === null || prototypeVariant === void 0 ? void 0 : prototypeVariant.sku) !== null && _d !== void 0 ? _d : prototype.sku,\r\n                stock: (_f = (_e = existingVariant === null || existingVariant === void 0 ? void 0 : existingVariant.stockOnHand) !== null && _e !== void 0 ? _e : prototypeVariant === null || prototypeVariant === void 0 ? void 0 : prototypeVariant.stockOnHand) !== null && _f !== void 0 ? _f : prototype.stock,\r\n            });\r\n        };\r\n        this.generatedVariants = groups.length\r\n            ? generateAllCombinations(groups).map(options => {\r\n                const existingVariant = this.product.variants.find(v => this.optionsAreEqual(v.options, options));\r\n                const prototypeVariant = this.product.variants.find(v => this.optionsAreSubset(v.options, options));\r\n                return generatedVariantFactory(false, options, existingVariant, prototypeVariant);\r\n            })\r\n            : [generatedVariantFactory(true, [], this.product.variants[0])];\r\n    }\r\n    /**\r\n     * Returns one of the existing variants to base the newly-generated variant's\r\n     * details off.\r\n     */\r\n    getVariantPrototype(options, previousVariants) {\r\n        const variantsWithSimilarOptions = previousVariants.filter(v => options.map(o => o.name).filter(name => v.options.map(o => o.name).includes(name)));\r\n        if (variantsWithSimilarOptions.length) {\r\n            return pick(previousVariants[0], ['sku', 'price', 'stock']);\r\n        }\r\n        return {\r\n            sku: '',\r\n            price: 0,\r\n            stock: 0,\r\n        };\r\n    }\r\n    deleteVariant(id) {\r\n        this.modalService\r\n            .dialog({\r\n            title: marker('catalog.confirm-delete-product-variant'),\r\n            buttons: [\r\n                { type: 'secondary', label: marker('common.cancel') },\r\n                { type: 'danger', label: marker('common.delete'), returnValue: true },\r\n            ],\r\n        })\r\n            .pipe(switchMap(response => response ? this.productDetailService.deleteProductVariant(id, this.product.id) : EMPTY), switchMap(() => this.reFetchProduct(null)))\r\n            .subscribe(() => {\r\n            this.notificationService.success(marker('common.notify-delete-success'), {\r\n                entity: 'ProductVariant',\r\n            });\r\n            this.initOptionsAndVariants();\r\n        }, err => {\r\n            this.notificationService.error(marker('common.notify-delete-error'), {\r\n                entity: 'ProductVariant',\r\n            });\r\n        });\r\n    }\r\n    save() {\r\n        const newOptionGroups = this.optionGroups\r\n            .filter(og => og.isNew)\r\n            .map(og => ({\r\n            name: og.name,\r\n            values: [],\r\n        }));\r\n        this.checkUniqueSkus()\r\n            .pipe(mergeMap(() => this.confirmDeletionOfObsoleteVariants()), mergeMap(() => this.productDetailService.createProductOptionGroups(newOptionGroups, this.languageCode)), mergeMap(createdOptionGroups => this.addOptionGroupsToProduct(createdOptionGroups)), mergeMap(createdOptionGroups => this.addNewOptionsToGroups(createdOptionGroups)), mergeMap(groupsIds => this.fetchOptionGroups(groupsIds)), mergeMap(groups => this.createNewProductVariants(groups)), mergeMap(res => this.deleteObsoleteVariants(res.createProductVariants)), mergeMap(variants => this.reFetchProduct(variants)))\r\n            .subscribe({\r\n            next: variants => {\r\n                this.formValueChanged = false;\r\n                this.notificationService.success(marker('catalog.created-new-variants-success'), {\r\n                    count: variants.length,\r\n                });\r\n                this.initOptionsAndVariants();\r\n            },\r\n        });\r\n    }\r\n    checkUniqueSkus() {\r\n        const withDuplicateSkus = this.generatedVariants.filter((variant, index) => {\r\n            return this.generatedVariants.find(gv => gv.sku.trim() === variant.sku.trim() && gv !== variant);\r\n        });\r\n        if (withDuplicateSkus.length) {\r\n            return this.modalService\r\n                .dialog({\r\n                title: marker('catalog.duplicate-sku-warning'),\r\n                body: unique(withDuplicateSkus.map(v => `${v.sku}`)).join(', '),\r\n                buttons: [{ label: marker('common.close'), returnValue: false, type: 'primary' }],\r\n            })\r\n                .pipe(mergeMap(res => EMPTY));\r\n        }\r\n        else {\r\n            return of(true);\r\n        }\r\n    }\r\n    confirmDeletionOfObsoleteVariants() {\r\n        const obsoleteVariants = this.getObsoleteVariants();\r\n        if (obsoleteVariants.length) {\r\n            return this.modalService\r\n                .fromComponent(ConfirmVariantDeletionDialogComponent, {\r\n                locals: {\r\n                    variants: obsoleteVariants,\r\n                },\r\n            })\r\n                .pipe(mergeMap(res => {\r\n                return res === true ? of(true) : EMPTY;\r\n            }));\r\n        }\r\n        else {\r\n            return of(true);\r\n        }\r\n    }\r\n    getObsoleteVariants() {\r\n        return this.product.variants.filter(variant => !this.generatedVariants.find(gv => gv.productVariantId === variant.id));\r\n    }\r\n    hasOnlyDefaultVariant(product) {\r\n        return product.variants.length === 1 && product.optionGroups.length === 0;\r\n    }\r\n    addOptionGroupsToProduct(createdOptionGroups) {\r\n        if (createdOptionGroups.length) {\r\n            return forkJoin(createdOptionGroups.map(optionGroup => {\r\n                return this.dataService.product.addOptionGroupToProduct({\r\n                    productId: this.product.id,\r\n                    optionGroupId: optionGroup.id,\r\n                });\r\n            })).pipe(map(() => createdOptionGroups));\r\n        }\r\n        else {\r\n            return of([]);\r\n        }\r\n    }\r\n    addNewOptionsToGroups(createdOptionGroups) {\r\n        const newOptions = this.optionGroups\r\n            .map(og => {\r\n            const createdGroup = createdOptionGroups.find(cog => cog.name === og.name);\r\n            const productOptionGroupId = createdGroup ? createdGroup.id : og.id;\r\n            if (!productOptionGroupId) {\r\n                throw new Error('Could not get a productOptionGroupId');\r\n            }\r\n            return og.values\r\n                .filter(v => !v.locked)\r\n                .map(v => ({\r\n                productOptionGroupId,\r\n                code: normalizeString(v.name, '-'),\r\n                translations: [{ name: v.name, languageCode: this.languageCode }],\r\n            }));\r\n        })\r\n            .reduce((flat, options) => [...flat, ...options], []);\r\n        const allGroupIds = [\r\n            ...createdOptionGroups.map(g => g.id),\r\n            ...this.optionGroups.map(g => g.id).filter(notNullOrUndefined),\r\n        ];\r\n        if (newOptions.length) {\r\n            return forkJoin(newOptions.map(input => this.dataService.product.addOptionToGroup(input))).pipe(map(() => allGroupIds));\r\n        }\r\n        else {\r\n            return of(allGroupIds);\r\n        }\r\n    }\r\n    fetchOptionGroups(groupsIds) {\r\n        return forkJoin(groupsIds.map(id => this.dataService.product\r\n            .getProductOptionGroup(id)\r\n            .mapSingle(data => data.productOptionGroup)\r\n            .pipe(filter(notNullOrUndefined))));\r\n    }\r\n    createNewProductVariants(groups) {\r\n        const options = groups\r\n            .filter(notNullOrUndefined)\r\n            .map(og => og.options)\r\n            .reduce((flat, o) => [...flat, ...o], []);\r\n        const variants = this.generatedVariants\r\n            .filter(v => v.enabled && !v.existing)\r\n            .map(v => ({\r\n            price: v.price,\r\n            sku: v.sku,\r\n            stock: v.stock,\r\n            optionIds: v.options\r\n                .map(name => options.find(o => o.name === name.name))\r\n                .filter(notNullOrUndefined)\r\n                .map(o => o.id),\r\n        }));\r\n        return this.productDetailService.createProductVariants(this.product, variants, options, this.languageCode);\r\n    }\r\n    deleteObsoleteVariants(input) {\r\n        const obsoleteVariants = this.getObsoleteVariants();\r\n        if (obsoleteVariants.length) {\r\n            const deleteOperations = obsoleteVariants.map(v => this.dataService.product.deleteProductVariant(v.id).pipe(map(() => input)));\r\n            return forkJoin(...deleteOperations);\r\n        }\r\n        else {\r\n            return of(input);\r\n        }\r\n    }\r\n    reFetchProduct(input) {\r\n        // Re-fetch the Product to force an update to the view.\r\n        const id = this.route.snapshot.paramMap.get('id');\r\n        if (id) {\r\n            return this.dataService.product.getProduct(id).single$.pipe(map(() => input));\r\n        }\r\n        else {\r\n            return of(input);\r\n        }\r\n    }\r\n    initOptionsAndVariants() {\r\n        this.dataService.product\r\n            // tslint:disable-next-line:no-non-null-assertion\r\n            .getProductVariantsOptions(this.route.snapshot.paramMap.get('id'))\r\n            // tslint:disable-next-line:no-non-null-assertion\r\n            .mapSingle(({ product }) => product)\r\n            .subscribe(p => {\r\n            this.product = p;\r\n            this.optionGroups = p.optionGroups.map(og => {\r\n                return {\r\n                    id: og.id,\r\n                    isNew: false,\r\n                    name: og.name,\r\n                    values: og.options.map(o => ({\r\n                        id: o.id,\r\n                        name: o.name,\r\n                        locked: true,\r\n                    })),\r\n                };\r\n            });\r\n            this.generateVariants();\r\n        });\r\n    }\r\n    optionsAreEqual(a, b) {\r\n        return this.toOptionString(a) === this.toOptionString(b);\r\n    }\r\n    optionsAreSubset(a, b) {\r\n        return this.toOptionString(b).includes(this.toOptionString(a));\r\n    }\r\n    toOptionString(o) {\r\n        return o\r\n            .map(x => x.name)\r\n            .sort()\r\n            .join('|');\r\n    }\r\n}\nProductVariantsEditorComponent.ɵfac = function ProductVariantsEditorComponent_Factory(t) { return new (t || ProductVariantsEditorComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService), ɵngcc0.ɵɵdirectiveInject(ProductDetailService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NotificationService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService)); };\nProductVariantsEditorComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductVariantsEditorComponent, selectors: [[\"vdr-product-variants-editor\"]], decls: 31, vars: 27, consts: [[1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"option-groups\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary-outline\", \"btn-sm\", 3, \"click\"], [\"shape\", \"plus\"], [1, \"variants-preview\"], [1, \"table\"], [3, \"disabled\", 4, \"ngFor\", \"ngForOf\"], [1, \"option-groups\"], [1, \"name\"], [\"clrInput\", \"\", \"name\", \"name\", 3, \"ngModel\", \"readonly\", \"ngModelChange\"], [1, \"values\"], [3, \"ngModel\", \"groupName\", \"disabled\", \"ngModelChange\"], [\"optionValueInputComponent\", \"\"], [\"type\", \"checkbox\", \"name\", \"enabled\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [4, \"ngIf\"], [\"type\", \"checkbox\", \"name\", \"enabled\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"text\", \"name\", \"sku\", \"required\", \"\", 3, \"ngModel\", \"placeholder\", \"ngModelChange\"], [\"clrInput\", \"\", \"name\", \"price\", 3, \"ngModel\", \"currencyCode\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"number\", \"name\", \"stock\", \"min\", \"0\", \"step\", \"1\", 3, \"ngModel\", \"ngModelChange\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"delete-button\", 3, \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"]], template: function ProductVariantsEditorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-action-bar\");\n        ɵngcc0.ɵɵelementStart(1, \"vdr-ab-right\");\n        ɵngcc0.ɵɵelementStart(2, \"button\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsEditorComponent_Template_button_click_2_listener() { return ctx.save(); });\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(5, ProductVariantsEditorComponent_div_5_Template, 12, 11, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(6, \"button\", 2);\n        ɵngcc0.ɵɵlistener(\"click\", function ProductVariantsEditorComponent_Template_button_click_6_listener() { return ctx.addOption(); });\n        ɵngcc0.ɵɵelement(7, \"clr-icon\", 3);\n        ɵngcc0.ɵɵtext(8);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\", 4);\n        ɵngcc0.ɵɵelementStart(11, \"table\", 5);\n        ɵngcc0.ɵɵelementStart(12, \"thead\");\n        ɵngcc0.ɵɵelementStart(13, \"tr\");\n        ɵngcc0.ɵɵelementStart(14, \"th\");\n        ɵngcc0.ɵɵtext(15);\n        ɵngcc0.ɵɵpipe(16, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"th\");\n        ɵngcc0.ɵɵtext(18);\n        ɵngcc0.ɵɵpipe(19, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(20, \"th\");\n        ɵngcc0.ɵɵtext(21);\n        ɵngcc0.ɵɵpipe(22, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"th\");\n        ɵngcc0.ɵɵtext(24);\n        ɵngcc0.ɵɵpipe(25, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(26, \"th\");\n        ɵngcc0.ɵɵtext(27);\n        ɵngcc0.ɵɵpipe(28, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(29, \"th\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(30, ProductVariantsEditorComponent_tr_30_Template, 17, 13, \"tr\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.formValueChanged || ctx.getVariantsToAdd().length === 0);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind2(4, 10, \"common.add-new-variants\", ɵngcc0.ɵɵpureFunction1(25, _c8, ctx.getVariantsToAdd().length)), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.optionGroups);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 13, \"catalog.add-option\"), \"\\n\");\n        ɵngcc0.ɵɵadvance(7);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(16, 15, \"common.create\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(19, 17, \"catalog.variant\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(22, 19, \"catalog.sku\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(25, 21, \"catalog.price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(28, 23, \"catalog.stock-on-hand\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.generatedVariants);\n    } }, directives: function () { return [ɵngcc2.ActionBarComponent, ɵngcc2.ActionBarRightComponent, ɵngcc4.NgForOf, ɵngcc7.ClrIconCustomTag, ɵngcc7.ClrLabel, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc7.ClrInput, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, OptionValueInputComponent, ɵngcc4.NgIf, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc7.ClrInputContainer, ɵngcc3.RequiredValidator, ɵngcc2.CurrencyInputComponent, ɵngcc3.NumberValueAccessor, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective]; }, pipes: function () { return [ɵngcc5.TranslatePipe, ɵngcc2.LocaleCurrencyPipe]; }, styles: [\".option-groups[_ngcontent-%COMP%]{display:flex}.option-groups[_ngcontent-%COMP%]:first-of-type{margin-top:24px}.values[_ngcontent-%COMP%]{flex:1;margin:0 6px}.variants-preview[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}\"] });\r\nProductVariantsEditorComponent.ctorParameters = () => [\r\n    { type: ActivatedRoute },\r\n    { type: DataService },\r\n    { type: ProductDetailService },\r\n    { type: NotificationService },\r\n    { type: ModalService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductVariantsEditorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-editor',\n                template: \"<vdr-action-bar>\\r\\n    <vdr-ab-right>\\r\\n        <button\\r\\n            class=\\\"btn btn-primary\\\"\\r\\n            (click)=\\\"save()\\\"\\r\\n            [disabled]=\\\"!formValueChanged || getVariantsToAdd().length === 0\\\"\\r\\n        >\\r\\n            {{ 'common.add-new-variants' | translate: { count: getVariantsToAdd().length } }}\\r\\n        </button>\\r\\n    </vdr-ab-right>\\r\\n</vdr-action-bar>\\r\\n\\r\\n<div *ngFor=\\\"let group of optionGroups\\\" class=\\\"option-groups\\\">\\r\\n    <div class=\\\"name\\\">\\r\\n        <label>{{ 'catalog.option' | translate }}</label>\\r\\n        <input clrInput [(ngModel)]=\\\"group.name\\\" name=\\\"name\\\" [readonly]=\\\"!group.isNew\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"values\\\">\\r\\n        <label>{{ 'catalog.option-values' | translate }}</label>\\r\\n        <vdr-option-value-input\\r\\n            #optionValueInputComponent\\r\\n            [(ngModel)]=\\\"group.values\\\"\\r\\n            (ngModelChange)=\\\"generateVariants()\\\"\\r\\n            [groupName]=\\\"group.name\\\"\\r\\n            [disabled]=\\\"group.name === ''\\\"\\r\\n        ></vdr-option-value-input>\\r\\n    </div>\\r\\n</div>\\r\\n<button\\r\\n    class=\\\"btn btn-primary-outline btn-sm\\\"\\r\\n    (click)=\\\"addOption()\\\"\\r\\n>\\r\\n    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n    {{ 'catalog.add-option' | translate }}\\r\\n</button>\\r\\n\\r\\n<div class=\\\"variants-preview\\\">\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>{{ 'common.create' | translate }}</th>\\r\\n                <th>{{ 'catalog.variant' | translate }}</th>\\r\\n                <th>{{ 'catalog.sku' | translate }}</th>\\r\\n                <th>{{ 'catalog.price' | translate }}</th>\\r\\n                <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n                <th></th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tr *ngFor=\\\"let variant of generatedVariants\\\" [class.disabled]=\\\"!variant.enabled || variant.existing\\\">\\r\\n            <td>\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    *ngIf=\\\"!variant.existing\\\"\\r\\n                    [(ngModel)]=\\\"variant.enabled\\\"\\r\\n                    name=\\\"enabled\\\"\\r\\n                    clrCheckbox\\r\\n                    (ngModelChange)=\\\"formValueChanged = true\\\"\\r\\n                />\\r\\n            </td>\\r\\n            <td>\\r\\n                {{ getVariantName(variant) | translate }}\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container *ngIf=\\\"!variant.existing\\\">\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        [(ngModel)]=\\\"variant.sku\\\"\\r\\n                        [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                        name=\\\"sku\\\"\\r\\n                        required\\r\\n                        (ngModelChange)=\\\"onFormChanged(variant)\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n                <span *ngIf=\\\"variant.existing\\\">{{ variant.sku }}</span>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container *ngIf=\\\"!variant.existing\\\">\\r\\n                    <vdr-currency-input\\r\\n                        clrInput\\r\\n                        [(ngModel)]=\\\"variant.price\\\"\\r\\n                        name=\\\"price\\\"\\r\\n                        [currencyCode]=\\\"currencyCode\\\"\\r\\n                        (ngModelChange)=\\\"onFormChanged(variant)\\\"\\r\\n                    ></vdr-currency-input>\\r\\n                </clr-input-container>\\r\\n                <span *ngIf=\\\"variant.existing\\\">{{ variant.price | localeCurrency: currencyCode }}</span>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container *ngIf=\\\"!variant.existing\\\">\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"number\\\"\\r\\n                        [(ngModel)]=\\\"variant.stock\\\"\\r\\n                        name=\\\"stock\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        step=\\\"1\\\"\\r\\n                        (ngModelChange)=\\\"onFormChanged(variant)\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n                <span *ngIf=\\\"variant.existing\\\">{{ variant.stock }}</span>\\r\\n            </td>\\r\\n            <td>\\r\\n                <vdr-dropdown *ngIf=\\\"variant.productVariantId as productVariantId\\\">\\r\\n                    <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                        <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n                    </button>\\r\\n                    <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                        <button\\r\\n                            type=\\\"button\\\"\\r\\n                            class=\\\"delete-button\\\"\\r\\n                            (click)=\\\"deleteVariant(productVariantId)\\\"\\r\\n                            vdrDropdownItem\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                            {{ 'common.delete' | translate }}\\r\\n                        </button>\\r\\n                    </vdr-dropdown-menu>\\r\\n                </vdr-dropdown>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </table>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.Default,\n                styles: [\".option-groups{display:flex}.option-groups:first-of-type{margin-top:24px}.values{flex:1;margin:0 6px}.variants-preview tr.disabled td{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc1.ActivatedRoute }, { type: ɵngcc2.DataService }, { type: ProductDetailService }, { type: ɵngcc2.NotificationService }, { type: ɵngcc2.ModalService }]; }, null); })();\n\nclass AssetResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Asset',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            name: '',\r\n            type: AssetType.IMAGE,\r\n            fileSize: 0,\r\n            mimeType: '',\r\n            width: 0,\r\n            height: 0,\r\n            source: '',\r\n            preview: '',\r\n            focalPoint: null,\r\n        }, id => dataService.product.getAsset(id).mapStream(data => data.asset));\r\n    }\r\n}\nAssetResolver.ɵfac = function AssetResolver_Factory(t) { return new (t || AssetResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nAssetResolver.ɵprov = ɵɵdefineInjectable({ factory: function AssetResolver_Factory() { return new AssetResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: AssetResolver, providedIn: \"root\" });\r\nAssetResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AssetResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n\nclass CollectionResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Collection',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            slug: '',\r\n            isPrivate: false,\r\n            description: '',\r\n            featuredAsset: null,\r\n            assets: [],\r\n            translations: [],\r\n            filters: [],\r\n            parent: {},\r\n            children: null,\r\n        }, id => dataService.collection.getCollection(id).mapStream(data => data.collection));\r\n    }\r\n}\nCollectionResolver.ɵfac = function CollectionResolver_Factory(t) { return new (t || CollectionResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nCollectionResolver.ɵprov = ɵɵdefineInjectable({ factory: function CollectionResolver_Factory() { return new CollectionResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: CollectionResolver, providedIn: \"root\" });\r\nCollectionResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CollectionResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n\nclass FacetResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Facet',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            isPrivate: false,\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            code: '',\r\n            translations: [],\r\n            values: [],\r\n        }, (id) => dataService.facet.getFacet(id).mapStream((data) => data.facet));\r\n    }\r\n}\nFacetResolver.ɵfac = function FacetResolver_Factory(t) { return new (t || FacetResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nFacetResolver.ɵprov = ɵɵdefineInjectable({ factory: function FacetResolver_Factory() { return new FacetResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: FacetResolver, providedIn: \"root\" });\r\nFacetResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(FacetResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n\nclass ProductResolver extends BaseEntityResolver {\r\n    constructor(dataService, router) {\r\n        super(router, {\r\n            __typename: 'Product',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            enabled: true,\r\n            languageCode: getDefaultUiLanguage(),\r\n            name: '',\r\n            slug: '',\r\n            featuredAsset: null,\r\n            assets: [],\r\n            description: '',\r\n            translations: [],\r\n            optionGroups: [],\r\n            facetValues: [],\r\n            variants: [],\r\n            channels: [],\r\n        }, (id) => dataService.product\r\n            .getProduct(id)\r\n            .refetchOnChannelChange()\r\n            .mapStream((data) => data.product));\r\n    }\r\n}\nProductResolver.ɵfac = function ProductResolver_Factory(t) { return new (t || ProductResolver)(ɵngcc0.ɵɵinject(ɵngcc2.DataService), ɵngcc0.ɵɵinject(ɵngcc1.Router)); };\r\nProductResolver.ɵprov = ɵɵdefineInjectable({ factory: function ProductResolver_Factory() { return new ProductResolver(ɵɵinject(DataService), ɵɵinject(Router)); }, token: ProductResolver, providedIn: \"root\" });\r\nProductResolver.ctorParameters = () => [\r\n    { type: DataService },\r\n    { type: Router }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }, { type: ɵngcc1.Router }]; }, null); })();\n\nclass ProductVariantsResolver extends BaseEntityResolver {\r\n    constructor(router, dataService) {\r\n        super(router, {\r\n            __typename: 'Product',\r\n            id: '',\r\n            createdAt: '',\r\n            updatedAt: '',\r\n            name: '',\r\n            optionGroups: [],\r\n            variants: [],\r\n        }, id => dataService.product.getProductVariantsOptions(id).mapStream(data => data.product));\r\n    }\r\n}\nProductVariantsResolver.ɵfac = function ProductVariantsResolver_Factory(t) { return new (t || ProductVariantsResolver)(ɵngcc0.ɵɵinject(ɵngcc1.Router), ɵngcc0.ɵɵinject(ɵngcc2.DataService)); };\r\nProductVariantsResolver.ɵprov = ɵɵdefineInjectable({ factory: function ProductVariantsResolver_Factory() { return new ProductVariantsResolver(ɵɵinject(Router), ɵɵinject(DataService)); }, token: ProductVariantsResolver, providedIn: \"root\" });\r\nProductVariantsResolver.ctorParameters = () => [\r\n    { type: Router },\r\n    { type: DataService }\r\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductVariantsResolver, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Router }, { type: ɵngcc2.DataService }]; }, null); })();\n\nconst ɵ0 = {\r\n    breadcrumb: marker('breadcrumb.products'),\r\n}, ɵ1 = {\r\n    breadcrumb: productBreadcrumb,\r\n}, ɵ2 = {\r\n    breadcrumb: productVariantEditorBreadcrumb,\r\n}, ɵ3 = {\r\n    breadcrumb: marker('breadcrumb.facets'),\r\n}, ɵ4 = {\r\n    breadcrumb: facetBreadcrumb,\r\n}, ɵ5 = {\r\n    breadcrumb: marker('breadcrumb.collections'),\r\n}, ɵ6 = {\r\n    breadcrumb: collectionBreadcrumb,\r\n}, ɵ7 = {\r\n    breadcrumb: marker('breadcrumb.assets'),\r\n}, ɵ8 = {\r\n    breadcrumb: assetBreadcrumb,\r\n};\r\nconst catalogRoutes = [\r\n    {\r\n        path: 'products',\r\n        component: ProductListComponent,\r\n        data: ɵ0,\r\n    },\r\n    {\r\n        path: 'products/:id',\r\n        component: ProductDetailComponent,\r\n        resolve: createResolveData(ProductResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ1,\r\n    },\r\n    {\r\n        path: 'products/:id/manage-variants',\r\n        component: ProductVariantsEditorComponent,\r\n        resolve: createResolveData(ProductVariantsResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ2,\r\n    },\r\n    {\r\n        path: 'facets',\r\n        component: FacetListComponent,\r\n        data: ɵ3,\r\n    },\r\n    {\r\n        path: 'facets/:id',\r\n        component: FacetDetailComponent,\r\n        resolve: createResolveData(FacetResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ4,\r\n    },\r\n    {\r\n        path: 'collections',\r\n        component: CollectionListComponent,\r\n        data: ɵ5,\r\n    },\r\n    {\r\n        path: 'collections/:id',\r\n        component: CollectionDetailComponent,\r\n        resolve: createResolveData(CollectionResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: ɵ6,\r\n    },\r\n    {\r\n        path: 'assets',\r\n        component: AssetListComponent,\r\n        data: ɵ7,\r\n    },\r\n    {\r\n        path: 'assets/:id',\r\n        component: AssetDetailComponent,\r\n        resolve: createResolveData(AssetResolver),\r\n        data: ɵ8,\r\n    },\r\n];\r\nfunction productBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.products',\r\n        getName: product => product.name,\r\n        route: 'products',\r\n    });\r\n}\r\nfunction productVariantEditorBreadcrumb(data, params) {\r\n    return data.entity.pipe(map((entity) => {\r\n        return [\r\n            {\r\n                label: marker('breadcrumb.products'),\r\n                link: ['../', 'products'],\r\n            },\r\n            {\r\n                label: `${entity.name}`,\r\n                link: ['../', 'products', params.id, { tab: 'variants' }],\r\n            },\r\n            {\r\n                label: marker('breadcrumb.manage-variants'),\r\n                link: ['manage-variants'],\r\n            },\r\n        ];\r\n    }));\r\n}\r\nfunction facetBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.facets',\r\n        getName: facet => facet.name,\r\n        route: 'facets',\r\n    });\r\n}\r\nfunction collectionBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.collections',\r\n        getName: collection => collection.name,\r\n        route: 'collections',\r\n    });\r\n}\r\nfunction assetBreadcrumb(data, params) {\r\n    return detailBreadcrumb({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.assets',\r\n        getName: asset => asset.name,\r\n        route: 'assets',\r\n    });\r\n}\n\n/**\r\n * Builds a tree from an array of nodes which have a parent.\r\n * Based on https://stackoverflow.com/a/31247960/772859, modified to preserve ordering.\r\n */\r\nfunction arrayToTree(nodes, currentState) {\r\n    var _a, _b;\r\n    const topLevelNodes = [];\r\n    const mappedArr = {};\r\n    const currentStateMap = treeToMap(currentState);\r\n    // First map the nodes of the array to an object -> create a hash table.\r\n    for (const node of nodes) {\r\n        mappedArr[node.id] = Object.assign(Object.assign({}, node), { children: [] });\r\n    }\r\n    for (const id of nodes.map(n => n.id)) {\r\n        if (mappedArr.hasOwnProperty(id)) {\r\n            const mappedElem = mappedArr[id];\r\n            mappedElem.expanded = (_b = (_a = currentStateMap.get(id)) === null || _a === void 0 ? void 0 : _a.expanded) !== null && _b !== void 0 ? _b : false;\r\n            const parent = mappedElem.parent;\r\n            if (!parent) {\r\n                continue;\r\n            }\r\n            // If the element is not at the root level, add it to its parent array of children.\r\n            const parentIsRoot = !mappedArr[parent.id];\r\n            if (!parentIsRoot) {\r\n                if (mappedArr[parent.id]) {\r\n                    mappedArr[parent.id].children.push(mappedElem);\r\n                }\r\n                else {\r\n                    mappedArr[parent.id] = { children: [mappedElem] };\r\n                }\r\n            }\r\n            else {\r\n                topLevelNodes.push(mappedElem);\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:no-non-null-assertion\r\n    const rootId = topLevelNodes.length ? topLevelNodes[0].parent.id : undefined;\r\n    return { id: rootId, children: topLevelNodes };\r\n}\r\n/**\r\n * Converts an existing tree (as generated by the arrayToTree function) into a flat\r\n * Map. This is used to persist certain states (e.g. `expanded`) when re-building the\r\n * tree.\r\n */\r\nfunction treeToMap(tree) {\r\n    const nodeMap = new Map();\r\n    function visit(node) {\r\n        nodeMap.set(node.id, node);\r\n        node.children.forEach(visit);\r\n    }\r\n    if (tree) {\r\n        visit(tree);\r\n    }\r\n    return nodeMap;\r\n}\n\nclass CollectionTreeComponent {\r\n    constructor() {\r\n        this.expandAll = false;\r\n        this.rearrange = new EventEmitter();\r\n        this.deleteCollection = new EventEmitter();\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('collections' in changes && this.collections) {\r\n            this.collectionTree = arrayToTree(this.collections, this.collectionTree);\r\n        }\r\n    }\r\n    onDrop(event) {\r\n        const item = event.item.data;\r\n        const newParent = event.container.data;\r\n        const newParentId = newParent.id;\r\n        if (newParentId == null) {\r\n            throw new Error(`Could not determine the ID of the root Collection`);\r\n        }\r\n        this.rearrange.emit({\r\n            collectionId: item.id,\r\n            parentId: newParentId,\r\n            index: event.currentIndex,\r\n        });\r\n    }\r\n    onMove(event) {\r\n        this.rearrange.emit(event);\r\n    }\r\n    onDelete(id) {\r\n        this.deleteCollection.emit(id);\r\n    }\r\n    isRootNode(node) {\r\n        return !node.hasOwnProperty('parent');\r\n    }\r\n}\nCollectionTreeComponent.ɵfac = function CollectionTreeComponent_Factory(t) { return new (t || CollectionTreeComponent)(); };\nCollectionTreeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionTreeComponent, selectors: [[\"vdr-collection-tree\"]], inputs: { expandAll: \"expandAll\", collections: \"collections\", activeCollectionId: \"activeCollectionId\" }, outputs: { rearrange: \"rearrange\", deleteCollection: \"deleteCollection\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 1, consts: [[\"cdkDropListGroup\", \"\", 3, \"expandAll\", \"collectionTree\", \"activeCollectionId\", 4, \"ngIf\"], [\"cdkDropListGroup\", \"\", 3, \"expandAll\", \"collectionTree\", \"activeCollectionId\"]], template: function CollectionTreeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, CollectionTreeComponent_vdr_collection_tree_node_0_Template, 1, 3, \"vdr-collection-tree-node\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.collectionTree);\n    } }, directives: function () { return [ɵngcc4.NgIf, CollectionTreeNodeComponent, ɵngcc9.CdkDropListGroup]; }, styles: [\"\"], changeDetection: 0 });\r\nCollectionTreeComponent.propDecorators = {\r\n    collections: [{ type: Input }],\r\n    activeCollectionId: [{ type: Input }],\r\n    expandAll: [{ type: Input }],\r\n    rearrange: [{ type: Output }],\r\n    deleteCollection: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CollectionTreeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-tree',\n                template: \"<vdr-collection-tree-node\\r\\n    *ngIf=\\\"collectionTree\\\"\\r\\n    cdkDropListGroup\\r\\n    [expandAll]=\\\"expandAll\\\"\\r\\n    [collectionTree]=\\\"collectionTree\\\"\\r\\n    [activeCollectionId]=\\\"activeCollectionId\\\"\\r\\n></vdr-collection-tree-node>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { expandAll: [{\n            type: Input\n        }], rearrange: [{\n            type: Output\n        }], deleteCollection: [{\n            type: Output\n        }], collections: [{\n            type: Input\n        }], activeCollectionId: [{\n            type: Input\n        }] }); })();\n\nclass CollectionTreeNodeComponent {\r\n    constructor(parent, root, dataService) {\r\n        this.parent = parent;\r\n        this.root = root;\r\n        this.dataService = dataService;\r\n        this.depth = 0;\r\n        this.expandAll = false;\r\n        if (parent) {\r\n            this.depth = parent.depth + 1;\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        this.parentName = this.collectionTree.name || '<root>';\r\n        const permissions$ = this.dataService.client\r\n            .userStatus()\r\n            .mapStream(data => data.userStatus.permissions)\r\n            .pipe(shareReplay(1));\r\n        this.hasUpdatePermission$ = permissions$.pipe(map(perms => perms.includes(Permission.UpdateCatalog) || perms.includes(Permission.UpdateCollection)));\r\n        this.hasDeletePermission$ = permissions$.pipe(map(perms => perms.includes(Permission.DeleteCatalog) || perms.includes(Permission.DeleteCollection)));\r\n    }\r\n    ngOnChanges(changes) {\r\n        const expandAllChange = changes['expandAll'];\r\n        if (expandAllChange) {\r\n            if (expandAllChange.previousValue === true && expandAllChange.currentValue === false) {\r\n                this.collectionTree.children.forEach(c => (c.expanded = false));\r\n            }\r\n        }\r\n    }\r\n    trackByFn(index, item) {\r\n        return item.id;\r\n    }\r\n    getMoveListItems(collection) {\r\n        const visit = (node, parentPath, output) => {\r\n            if (node.id !== collection.id) {\r\n                const path = parentPath.concat(node.name);\r\n                const parentId = collection.parent && collection.parent.id;\r\n                if (node.id !== parentId) {\r\n                    output.push({ path: path.slice(1).join(' / ') || 'root', id: node.id });\r\n                }\r\n                node.children.forEach(child => visit(child, path, output));\r\n            }\r\n            return output;\r\n        };\r\n        return visit(this.root.collectionTree, [], []);\r\n    }\r\n    move(collection, parentId) {\r\n        this.root.onMove({\r\n            index: 0,\r\n            parentId,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    moveUp(collection, currentIndex) {\r\n        if (!collection.parent) {\r\n            return;\r\n        }\r\n        this.root.onMove({\r\n            index: currentIndex - 1,\r\n            parentId: collection.parent.id,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    moveDown(collection, currentIndex) {\r\n        if (!collection.parent) {\r\n            return;\r\n        }\r\n        this.root.onMove({\r\n            index: currentIndex + 1,\r\n            parentId: collection.parent.id,\r\n            collectionId: collection.id,\r\n        });\r\n    }\r\n    drop(event) {\r\n        moveItemInArray(this.collectionTree.children, event.previousIndex, event.currentIndex);\r\n        this.root.onDrop(event);\r\n    }\r\n    delete(id) {\r\n        this.root.onDelete(id);\r\n    }\r\n}\nCollectionTreeNodeComponent.ɵfac = function CollectionTreeNodeComponent_Factory(t) { return new (t || CollectionTreeNodeComponent)(ɵngcc0.ɵɵdirectiveInject(CollectionTreeNodeComponent, 12), ɵngcc0.ɵɵdirectiveInject(CollectionTreeComponent), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nCollectionTreeNodeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollectionTreeNodeComponent, selectors: [[\"vdr-collection-tree-node\"]], inputs: { expandAll: \"expandAll\", collectionTree: \"collectionTree\", activeCollectionId: \"activeCollectionId\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 4, vars: 6, consts: [[\"cdkDropList\", \"\", 1, \"tree-node\", 3, \"cdkDropListData\", \"cdkDropListDisabled\", \"cdkDropListDropped\"], [\"dropList\", \"\"], [\"class\", \"collection\", \"cdkDrag\", \"\", 3, \"private\", \"cdkDragData\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"cdkDrag\", \"\", 1, \"collection\", 3, \"cdkDragData\"], [1, \"collection-detail\", 3, \"ngClass\"], [1, \"name\"], [\"class\", \"icon-button folder-button\", 3, \"disabled\", \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"folderSpacer\", \"\"], [1, \"flex-spacer\"], [4, \"ngIf\"], [\"queryParamsHandling\", \"preserve\", 1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"routerLink\"], [\"shape\", \"view-list\"], [1, \"btn\", \"btn-link\", \"btn-sm\", 3, \"routerLink\"], [\"shape\", \"edit\"], [\"class\", \"drag-handle\", \"cdkDragHandle\", \"\", 4, \"vdrIfPermissions\"], [\"vdrDropdownTrigger\", \"\", 1, \"icon-button\"], [\"shape\", \"ellipsis-vertical\"], [\"vdrPosition\", \"bottom-right\"], [\"class\", \"dropdown-item\", 3, \"routerLink\", 4, \"vdrIfPermissions\"], [1, \"dropdown-divider\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [\"shape\", \"caret up\"], [\"shape\", \"caret down\"], [1, \"dropdown-header\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"vdrDropdownItem\", \"\", 1, \"button\", 3, \"disabled\", \"click\"], [\"shape\", \"trash\", 1, \"is-danger\"], [3, \"expandAll\", \"collectionTree\", \"activeCollectionId\", 4, \"ngIf\"], [1, \"icon-button\", \"folder-button\", 3, \"disabled\", \"click\"], [\"shape\", \"folder\", 4, \"ngIf\"], [\"shape\", \"folder-open\", 4, \"ngIf\"], [\"shape\", \"folder\"], [\"shape\", \"folder-open\"], [1, \"folder-button-spacer\"], [\"cdkDragHandle\", \"\", 1, \"drag-handle\"], [\"shape\", \"drag-handle\", \"size\", \"24\"], [1, \"dropdown-item\", 3, \"routerLink\"], [\"shape\", \"plus\"], [\"shape\", \"child-arrow\"], [3, \"expandAll\", \"collectionTree\", \"activeCollectionId\"]], template: function CollectionTreeNodeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"cdkDropListDropped\", function CollectionTreeNodeComponent_Template_div_cdkDropListDropped_0_listener($event) { return ctx.drop($event); });\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵtemplate(3, CollectionTreeNodeComponent_div_3_Template, 45, 51, \"div\", 2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"cdkDropListData\", ctx.collectionTree)(\"cdkDropListDisabled\", !ɵngcc0.ɵɵpipeBind1(2, 4, ctx.hasUpdatePermission$));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.collectionTree.children)(\"ngForTrackBy\", ctx.trackByFn);\n    } }, directives: [ɵngcc9.CdkDropList, ɵngcc4.NgForOf, ɵngcc7.ClrDatagridItemsTrackBy, ɵngcc9.CdkDrag, ɵngcc4.NgClass, ɵngcc4.NgIf, ɵngcc1.RouterLinkWithHref, ɵngcc7.ClrIconCustomTag, ɵngcc2.IfPermissionsDirective, ɵngcc2.DropdownComponent, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective, ɵngcc2.ChipComponent, ɵngcc9.CdkDragHandle, CollectionTreeNodeComponent], pipes: [ɵngcc4.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:block}.collection[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);font-size:.65rem;transition:transform .25s cubic-bezier(0,0,.2,1);margin-bottom:2px;border-left:2px solid transparent;transition:border-left-color .2s}.collection.private[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.collection[_ngcontent-%COMP%]   .collection-detail[_ngcontent-%COMP%]{padding:6px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--color-component-border-100)}.collection[_ngcontent-%COMP%]   .collection-detail.active[_ngcontent-%COMP%]{background-color:var(--clr-global-selection-color)}.collection[_ngcontent-%COMP%]   .collection-detail.depth-1[_ngcontent-%COMP%]{padding-left:36px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-2[_ngcontent-%COMP%]{padding-left:60px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-3[_ngcontent-%COMP%]{padding-left:84px}.collection[_ngcontent-%COMP%]   .collection-detail.depth-4[_ngcontent-%COMP%]{padding-left:108px}.collection[_ngcontent-%COMP%]   .collection-detail[_ngcontent-%COMP%]   .folder-button-spacer[_ngcontent-%COMP%]{display:inline-block;width:28px}.tree-node[_ngcontent-%COMP%]{display:block;background:var(--color-component-bg-100);overflow:hidden}.tree-node.cdk-drop-list-dragging[_ngcontent-%COMP%] > .collection[_ngcontent-%COMP%]{border-left-color:var(--color-primary-300)}.drag-placeholder[_ngcontent-%COMP%]{min-height:120px;background-color:var(--color-component-bg-300);transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .tree-node[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}\"], changeDetection: 0 });\r\nCollectionTreeNodeComponent.ctorParameters = () => [\r\n    { type: CollectionTreeNodeComponent, decorators: [{ type: SkipSelf }, { type: Optional }] },\r\n    { type: CollectionTreeComponent },\r\n    { type: DataService }\r\n];\r\nCollectionTreeNodeComponent.propDecorators = {\r\n    collectionTree: [{ type: Input }],\r\n    activeCollectionId: [{ type: Input }],\r\n    expandAll: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CollectionTreeNodeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-collection-tree-node',\n                template: \"<div\\r\\n    cdkDropList\\r\\n    class=\\\"tree-node\\\"\\r\\n    #dropList\\r\\n    [cdkDropListData]=\\\"collectionTree\\\"\\r\\n    [cdkDropListDisabled]=\\\"!(hasUpdatePermission$ | async)\\\"\\r\\n    (cdkDropListDropped)=\\\"drop($event)\\\"\\r\\n>\\r\\n    <div\\r\\n        class=\\\"collection\\\"\\r\\n        [class.private]=\\\"collection.isPrivate\\\"\\r\\n        *ngFor=\\\"let collection of collectionTree.children; index as i; trackBy: trackByFn\\\"\\r\\n        cdkDrag\\r\\n        [cdkDragData]=\\\"collection\\\"\\r\\n    >\\r\\n        <div\\r\\n            class=\\\"collection-detail\\\"\\r\\n            [ngClass]=\\\"'depth-' + depth\\\"\\r\\n            [class.active]=\\\"collection.id === activeCollectionId\\\"\\r\\n        >\\r\\n            <div class=\\\"name\\\">\\r\\n                <button\\r\\n                    class=\\\"icon-button folder-button\\\"\\r\\n                    [disabled]=\\\"expandAll\\\"\\r\\n                    *ngIf=\\\"collection.children?.length; else folderSpacer\\\"\\r\\n                    (click)=\\\"collection.expanded = !collection.expanded\\\"\\r\\n                >\\r\\n                    <clr-icon shape=\\\"folder\\\" *ngIf=\\\"!collection.expanded && !expandAll\\\"></clr-icon>\\r\\n                    <clr-icon shape=\\\"folder-open\\\" *ngIf=\\\"collection.expanded || expandAll\\\"></clr-icon>\\r\\n                </button>\\r\\n                <ng-template #folderSpacer>\\r\\n                    <div class=\\\"folder-button-spacer\\\"></div>\\r\\n                </ng-template>\\r\\n                {{ collection.name }}\\r\\n            </div>\\r\\n            <div class=\\\"flex-spacer\\\"></div>\\r\\n            <vdr-chip *ngIf=\\\"collection.isPrivate\\\">{{ 'catalog.private' | translate }}</vdr-chip>\\r\\n            <a\\r\\n                class=\\\"btn btn-link btn-sm\\\"\\r\\n                [routerLink]=\\\"['./', { contents: collection.id }]\\\"\\r\\n                queryParamsHandling=\\\"preserve\\\"\\r\\n            >\\r\\n                <clr-icon shape=\\\"view-list\\\"></clr-icon>\\r\\n                {{ 'catalog.view-contents' | translate }}\\r\\n            </a>\\r\\n            <a class=\\\"btn btn-link btn-sm\\\" [routerLink]=\\\"['/catalog/collections/', collection.id]\\\">\\r\\n                <clr-icon shape=\\\"edit\\\"></clr-icon>\\r\\n                {{ 'common.edit' | translate }}\\r\\n            </a>\\r\\n            <div class=\\\"drag-handle\\\" cdkDragHandle *vdrIfPermissions=\\\"['UpdateCatalog', 'UpdateCollection']\\\">\\r\\n                <clr-icon shape=\\\"drag-handle\\\" size=\\\"24\\\"></clr-icon>\\r\\n            </div>\\r\\n            <vdr-dropdown>\\r\\n                <button class=\\\"icon-button\\\" vdrDropdownTrigger>\\r\\n                    <clr-icon shape=\\\"ellipsis-vertical\\\"></clr-icon>\\r\\n                </button>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <a\\r\\n                        class=\\\"dropdown-item\\\"\\r\\n                        [routerLink]=\\\"['./', 'create', { parentId: collection.id }]\\\"\\r\\n                        *vdrIfPermissions=\\\"['CreateCatalog', 'CreateCollection']\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                        {{ 'catalog.create-new-collection' | translate }}\\r\\n                    </a>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"i === 0 || !(hasUpdatePermission$ | async)\\\"\\r\\n                        (click)=\\\"moveUp(collection, i)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"caret up\\\"></clr-icon>\\r\\n                        {{ 'catalog.move-up' | translate }}\\r\\n                    </button>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"\\r\\n                            i === collectionTree.children.length - 1 || !(hasUpdatePermission$ | async)\\r\\n                        \\\"\\r\\n                        (click)=\\\"moveDown(collection, i)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"caret down\\\"></clr-icon>\\r\\n                        {{ 'catalog.move-down' | translate }}\\r\\n                    </button>\\r\\n                    <h4 class=\\\"dropdown-header\\\">{{ 'catalog.move-to' | translate }}</h4>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        *ngFor=\\\"let item of getMoveListItems(collection)\\\"\\r\\n                        (click)=\\\"move(collection, item.id)\\\"\\r\\n                        [disabled]=\\\"!(hasUpdatePermission$ | async)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"child-arrow\\\"></clr-icon>\\r\\n                        {{ item.path }}\\r\\n                    </button>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        class=\\\"button\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"delete(collection.id)\\\"\\r\\n                        [disabled]=\\\"!(hasDeletePermission$ | async)\\\"\\r\\n                    >\\r\\n                        <clr-icon shape=\\\"trash\\\" class=\\\"is-danger\\\"></clr-icon>\\r\\n                        {{ 'common.delete' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n        <vdr-collection-tree-node\\r\\n            *ngIf=\\\"collection.expanded || expandAll\\\"\\r\\n            [expandAll]=\\\"expandAll\\\"\\r\\n            [collectionTree]=\\\"collection\\\"\\r\\n            [activeCollectionId]=\\\"activeCollectionId\\\"\\r\\n        ></vdr-collection-tree-node>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}.collection{background-color:var(--color-component-bg-100);font-size:.65rem;transition:transform .25s cubic-bezier(0,0,.2,1);margin-bottom:2px;border-left:2px solid transparent;transition:border-left-color .2s}.collection.private{background-color:var(--color-component-bg-200)}.collection .collection-detail{padding:6px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--color-component-border-100)}.collection .collection-detail.active{background-color:var(--clr-global-selection-color)}.collection .collection-detail.depth-1{padding-left:36px}.collection .collection-detail.depth-2{padding-left:60px}.collection .collection-detail.depth-3{padding-left:84px}.collection .collection-detail.depth-4{padding-left:108px}.collection .collection-detail .folder-button-spacer{display:inline-block;width:28px}.tree-node{display:block;background:var(--color-component-bg-100);overflow:hidden}.tree-node.cdk-drop-list-dragging>.collection{border-left-color:var(--color-primary-300)}.drag-placeholder{min-height:120px;background-color:var(--color-component-bg-300);transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating,.example-list.cdk-drop-list-dragging .tree-node:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}\"]\n            }]\n    }], function () { return [{ type: CollectionTreeNodeComponent, decorators: [{\n                type: SkipSelf\n            }, {\n                type: Optional\n            }] }, { type: CollectionTreeComponent }, { type: ɵngcc2.DataService }]; }, { expandAll: [{\n            type: Input\n        }], collectionTree: [{\n            type: Input\n        }], activeCollectionId: [{\n            type: Input\n        }] }); })();\n\nconst DEFAULT_VARIANT_CODE = '__DEFAULT_VARIANT__';\r\nclass GenerateProductVariantsComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.variantsChange = new EventEmitter();\r\n        this.optionGroups = [];\r\n        this.variantFormValues = {};\r\n    }\r\n    ngOnInit() {\r\n        this.dataService.settings.getActiveChannel().single$.subscribe(data => {\r\n            this.currencyCode = data.activeChannel.currencyCode;\r\n        });\r\n        this.generateVariants();\r\n    }\r\n    addOption() {\r\n        this.optionGroups.push({ name: '', values: [] });\r\n    }\r\n    removeOption(name) {\r\n        this.optionGroups = this.optionGroups.filter(g => g.name !== name);\r\n        this.generateVariants();\r\n    }\r\n    generateVariants() {\r\n        const totalValuesCount = this.optionGroups.reduce((sum, group) => sum + group.values.length, 0);\r\n        const groups = totalValuesCount\r\n            ? this.optionGroups.map(g => g.values.map(v => v.name))\r\n            : [[DEFAULT_VARIANT_CODE]];\r\n        this.variants = generateAllCombinations(groups).map(values => ({ id: values.join('|'), values }));\r\n        this.variants.forEach(variant => {\r\n            if (!this.variantFormValues[variant.id]) {\r\n                this.variantFormValues[variant.id] = {\r\n                    optionValues: variant.values,\r\n                    enabled: true,\r\n                    price: this.copyFromDefault(variant.id, 'price', 0),\r\n                    sku: this.copyFromDefault(variant.id, 'sku', ''),\r\n                    stock: this.copyFromDefault(variant.id, 'stock', 0),\r\n                };\r\n            }\r\n        });\r\n        this.onFormChange();\r\n    }\r\n    trackByFn(index, variant) {\r\n        return variant.values.join('|');\r\n    }\r\n    handleEnter(event, optionValueInputComponent) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        optionValueInputComponent.focus();\r\n    }\r\n    onFormChange() {\r\n        const variantsToCreate = this.variants.map(v => this.variantFormValues[v.id]).filter(v => v.enabled);\r\n        this.variantsChange.emit({\r\n            groups: this.optionGroups.map(og => ({ name: og.name, values: og.values.map(v => v.name) })),\r\n            variants: variantsToCreate,\r\n        });\r\n    }\r\n    copyFromDefault(variantId, prop, value) {\r\n        return variantId !== DEFAULT_VARIANT_CODE\r\n            ? this.variantFormValues[DEFAULT_VARIANT_CODE][prop]\r\n            : value;\r\n    }\r\n}\nGenerateProductVariantsComponent.ɵfac = function GenerateProductVariantsComponent_Factory(t) { return new (t || GenerateProductVariantsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nGenerateProductVariantsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: GenerateProductVariantsComponent, selectors: [[\"vdr-generate-product-variants\"]], outputs: { variantsChange: \"variantsChange\" }, decls: 21, vars: 17, consts: [[\"class\", \"option-groups\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary-outline\", \"btn-sm\", 3, \"click\"], [\"shape\", \"plus\"], [1, \"variants-preview\"], [1, \"table\"], [4, \"ngIf\"], [3, \"disabled\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"option-groups\"], [1, \"name\"], [\"placeholder\", \"e.g. Size\", \"clrInput\", \"\", \"name\", \"name\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"keydown.enter\"], [1, \"values\"], [3, \"ngModel\", \"groupName\", \"disabled\", \"ngModelChange\"], [\"optionValueInputComponent\", \"\"], [1, \"remove-group\"], [1, \"btn\", \"btn-icon\", \"btn-warning-outline\", 3, \"title\", \"click\"], [\"shape\", \"trash\"], [\"clrInput\", \"\", \"type\", \"text\", 3, \"ngModel\", \"placeholder\", \"change\", \"ngModelChange\"], [\"clrInput\", \"\", 3, \"ngModel\", \"currencyCode\", \"ngModelChange\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"step\", \"1\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"change\", \"ngModelChange\"]], template: function GenerateProductVariantsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, GenerateProductVariantsComponent_div_0_Template, 16, 13, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"button\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function GenerateProductVariantsComponent_Template_button_click_1_listener() { return ctx.addOption(); });\n        ɵngcc0.ɵɵelement(2, \"clr-icon\", 2);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(6, \"table\", 4);\n        ɵngcc0.ɵɵelementStart(7, \"thead\");\n        ɵngcc0.ɵɵelementStart(8, \"tr\");\n        ɵngcc0.ɵɵtemplate(9, GenerateProductVariantsComponent_th_9_Template, 3, 3, \"th\", 5);\n        ɵngcc0.ɵɵtemplate(10, GenerateProductVariantsComponent_th_10_Template, 3, 3, \"th\", 5);\n        ɵngcc0.ɵɵelementStart(11, \"th\");\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"th\");\n        ɵngcc0.ɵɵtext(15);\n        ɵngcc0.ɵɵpipe(16, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"th\");\n        ɵngcc0.ɵɵtext(18);\n        ɵngcc0.ɵɵpipe(19, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(20, GenerateProductVariantsComponent_tr_20_Template, 13, 11, \"tr\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.optionGroups);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 9, \"catalog.add-option\"), \"\\n\");\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵproperty(\"ngIf\", 1 < ctx.variants.length);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", 1 < ctx.variants.length);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(13, 11, \"catalog.sku\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(16, 13, \"catalog.price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(19, 15, \"catalog.stock-on-hand\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.variants)(\"ngForTrackBy\", ctx.trackByFn);\n    } }, directives: function () { return [ɵngcc4.NgForOf, ɵngcc7.ClrIconCustomTag, ɵngcc4.NgIf, ɵngcc7.ClrDatagridItemsTrackBy, ɵngcc7.ClrLabel, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc7.ClrInput, ɵngcc3.RequiredValidator, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, OptionValueInputComponent, ɵngcc7.ClrInputContainer, ɵngcc2.CurrencyInputComponent, ɵngcc3.NumberValueAccessor, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox]; }, pipes: function () { return [ɵngcc5.TranslatePipe]; }, styles: [\"[_nghost-%COMP%]{display:block;margin-bottom:120px}.option-groups[_ngcontent-%COMP%]{display:flex}.values[_ngcontent-%COMP%]{flex:1;margin:0 6px}.remove-group[_ngcontent-%COMP%]{padding-top:18px}.variants-preview[_ngcontent-%COMP%]   tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}\"] });\r\nGenerateProductVariantsComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\nGenerateProductVariantsComponent.propDecorators = {\r\n    variantsChange: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(GenerateProductVariantsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-generate-product-variants',\n                template: \"<div *ngFor=\\\"let group of optionGroups\\\" class=\\\"option-groups\\\">\\r\\n    <div class=\\\"name\\\">\\r\\n        <label>{{ 'catalog.option' | translate }}</label>\\r\\n        <input\\r\\n            placeholder=\\\"e.g. Size\\\"\\r\\n            clrInput\\r\\n            [(ngModel)]=\\\"group.name\\\"\\r\\n            name=\\\"name\\\"\\r\\n            required\\r\\n            (keydown.enter)=\\\"handleEnter($event, optionValueInputComponent)\\\"\\r\\n        />\\r\\n    </div>\\r\\n    <div class=\\\"values\\\">\\r\\n        <label>{{ 'catalog.option-values' | translate }}</label>\\r\\n        <vdr-option-value-input\\r\\n            #optionValueInputComponent\\r\\n            [(ngModel)]=\\\"group.values\\\"\\r\\n            (ngModelChange)=\\\"generateVariants()\\\"\\r\\n            [groupName]=\\\"group.name\\\"\\r\\n            [disabled]=\\\"group.name === ''\\\"\\r\\n        ></vdr-option-value-input>\\r\\n    </div>\\r\\n    <div class=\\\"remove-group\\\">\\r\\n        <button\\r\\n            class=\\\"btn btn-icon btn-warning-outline\\\"\\r\\n            [title]=\\\"'catalog.remove-option' | translate\\\"\\r\\n            (click)=\\\"removeOption(group.name)\\\"\\r\\n        >\\r\\n            <clr-icon shape=\\\"trash\\\"></clr-icon>\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n<button class=\\\"btn btn-primary-outline btn-sm\\\" (click)=\\\"addOption()\\\">\\r\\n    <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n    {{ 'catalog.add-option' | translate }}\\r\\n</button>\\r\\n\\r\\n<div class=\\\"variants-preview\\\">\\r\\n    <table class=\\\"table\\\">\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th *ngIf=\\\"1 < variants.length\\\">{{ 'common.create' | translate }}</th>\\r\\n                <th *ngIf=\\\"1 < variants.length\\\">{{ 'catalog.variant' | translate }}</th>\\r\\n                <th>{{ 'catalog.sku' | translate }}</th>\\r\\n                <th>{{ 'catalog.price' | translate }}</th>\\r\\n                <th>{{ 'catalog.stock-on-hand' | translate }}</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tr\\r\\n            *ngFor=\\\"let variant of variants; trackBy: trackByFn\\\"\\r\\n            [class.disabled]=\\\"!variantFormValues[variant.id].enabled\\\"\\r\\n        >\\r\\n            <td *ngIf=\\\"1 < variants.length\\\">\\r\\n                <input\\r\\n                    type=\\\"checkbox\\\"\\r\\n                    (change)=\\\"onFormChange()\\\"\\r\\n                    [(ngModel)]=\\\"variantFormValues[variant.id].enabled\\\"\\r\\n                    clrCheckbox\\r\\n                />\\r\\n            </td>\\r\\n            <td *ngIf=\\\"1 < variants.length\\\">\\r\\n                {{ variant.values.join(' ') }}\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        (change)=\\\"onFormChange()\\\"\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].sku\\\"\\r\\n                        [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <vdr-currency-input\\r\\n                        clrInput\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].price\\\"\\r\\n                        (ngModelChange)=\\\"onFormChange()\\\"\\r\\n                        [currencyCode]=\\\"currencyCode\\\"\\r\\n                    ></vdr-currency-input>\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td>\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"number\\\"\\r\\n                        [(ngModel)]=\\\"variantFormValues[variant.id].stock\\\"\\r\\n                        (change)=\\\"onFormChange()\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        step=\\\"1\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </table>\\r\\n</div>\\r\\n\",\n                styles: [\":host{display:block;margin-bottom:120px}.option-groups{display:flex}.values{flex:1;margin:0 6px}.remove-group{padding-top:18px}.variants-preview tr.disabled td{background-color:var(--color-component-bg-100);color:var(--color-grey-400)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }]; }, { variantsChange: [{\n            type: Output\n        }] }); })();\n\nconst OPTION_VALUE_INPUT_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => OptionValueInputComponent),\r\n    multi: true,\r\n};\r\nclass OptionValueInputComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.groupName = '';\r\n        this.disabled = false;\r\n        this.input = '';\r\n        this.isFocussed = false;\r\n        this.lastSelected = false;\r\n    }\r\n    registerOnChange(fn) {\r\n        this.onChangeFn = fn;\r\n    }\r\n    registerOnTouched(fn) {\r\n        this.onTouchFn = fn;\r\n    }\r\n    setDisabledState(isDisabled) {\r\n        this.disabled = isDisabled;\r\n        this.changeDetector.markForCheck();\r\n    }\r\n    writeValue(obj) {\r\n        this.options = obj || [];\r\n    }\r\n    focus() {\r\n        this.textArea.nativeElement.focus();\r\n    }\r\n    removeOption(option) {\r\n        if (!option.locked) {\r\n            this.options = this.options.filter(o => o.name !== option.name);\r\n            this.onChangeFn(this.options);\r\n        }\r\n    }\r\n    handleKey(event) {\r\n        switch (event.key) {\r\n            case ',':\r\n            case 'Enter':\r\n                this.addOptionValue();\r\n                event.preventDefault();\r\n                break;\r\n            case 'Backspace':\r\n                if (this.lastSelected) {\r\n                    this.removeLastOption();\r\n                    this.lastSelected = false;\r\n                }\r\n                else if (this.input === '') {\r\n                    this.lastSelected = true;\r\n                }\r\n                break;\r\n            default:\r\n                this.lastSelected = false;\r\n        }\r\n    }\r\n    handleBlur() {\r\n        this.isFocussed = false;\r\n        this.addOptionValue();\r\n    }\r\n    addOptionValue() {\r\n        this.options = unique([...this.options, ...this.parseInputIntoOptions(this.input)]);\r\n        this.input = '';\r\n        this.onChangeFn(this.options);\r\n    }\r\n    parseInputIntoOptions(input) {\r\n        return input\r\n            .split(/[,\\n]/)\r\n            .map(s => s.trim())\r\n            .filter(s => s !== '')\r\n            .map(s => ({ name: s, locked: false }));\r\n    }\r\n    removeLastOption() {\r\n        if (!this.options[this.options.length - 1].locked) {\r\n            this.options = this.options.slice(0, this.options.length - 1);\r\n        }\r\n    }\r\n}\nOptionValueInputComponent.ɵfac = function OptionValueInputComponent_Factory(t) { return new (t || OptionValueInputComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nOptionValueInputComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OptionValueInputComponent, selectors: [[\"vdr-option-value-input\"]], viewQuery: function OptionValueInputComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c34, 3);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.textArea = _t.first);\n    } }, inputs: { groupName: \"groupName\" }, features: [ɵngcc0.ɵɵProvidersFeature([OPTION_VALUE_INPUT_VALUE_ACCESSOR])], decls: 4, vars: 5, consts: [[1, \"input-wrapper\", 3, \"click\"], [\"class\", \"chips\", 4, \"ngIf\"], [3, \"ngModel\", \"disabled\", \"keyup\", \"focus\", \"blur\", \"ngModelChange\"], [\"textArea\", \"\"], [1, \"chips\"], [3, \"icon\", \"selected\", \"locked\", \"colorFrom\", \"iconClick\", 4, \"ngFor\", \"ngForOf\"], [3, \"icon\", \"colorFrom\", \"iconClick\"]], template: function OptionValueInputComponent_Template(rf, ctx) { if (rf & 1) {\n        const _r7 = ɵngcc0.ɵɵgetCurrentView();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function OptionValueInputComponent_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r7); const _r1 = ɵngcc0.ɵɵreference(3); return _r1.focus(); });\n        ɵngcc0.ɵɵtemplate(1, OptionValueInputComponent_div_1_Template, 2, 1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"textarea\", 2, 3);\n        ɵngcc0.ɵɵlistener(\"keyup\", function OptionValueInputComponent_Template_textarea_keyup_2_listener($event) { return ctx.handleKey($event); })(\"focus\", function OptionValueInputComponent_Template_textarea_focus_2_listener() { return ctx.isFocussed = true; })(\"blur\", function OptionValueInputComponent_Template_textarea_blur_2_listener() { return ctx.handleBlur(); })(\"ngModelChange\", function OptionValueInputComponent_Template_textarea_ngModelChange_2_listener($event) { return ctx.input = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"focus\", ctx.isFocussed);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", 0 < ctx.options.length);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.input)(\"disabled\", ctx.disabled);\n    } }, directives: [ɵngcc4.NgIf, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc4.NgForOf, ɵngcc2.ChipComponent], styles: [\".input-wrapper[_ngcontent-%COMP%]{background-color:#fff;border-radius:3px!important;border:1px solid var(--color-grey-300)!important;cursor:text}.input-wrapper.focus[_ngcontent-%COMP%]{border-color:var(--color-primary-500)!important;box-shadow:0 0 1px 1px var(--color-primary-100)}.input-wrapper[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{padding:5px}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:none;width:100%;height:24px;margin-top:3px;padding:0 6px}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none}.input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background-color:var(--color-component-bg-100)}vdr-chip[_ngcontent-%COMP%]     .wrapper{margin:0 3px}vdr-chip.locked[_ngcontent-%COMP%]{opacity:.8}vdr-chip.selected[_ngcontent-%COMP%]     .wrapper{border-color:var(--color-warning-500)!important;box-shadow:0 0 1px 1px var(--color-warning-400);opacity:.6}\"] });\r\nOptionValueInputComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\nOptionValueInputComponent.propDecorators = {\r\n    groupName: [{ type: Input }],\r\n    textArea: [{ type: ViewChild, args: ['textArea', { static: true },] }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OptionValueInputComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-option-value-input',\n                template: \"<div class=\\\"input-wrapper\\\" [class.focus]=\\\"isFocussed\\\" (click)=\\\"textArea.focus()\\\">\\r\\n    <div class=\\\"chips\\\" *ngIf=\\\"0 < options.length\\\">\\r\\n        <vdr-chip\\r\\n            *ngFor=\\\"let option of options; last as isLast\\\"\\r\\n            [icon]=\\\"option.locked ? 'lock' : 'times'\\\"\\r\\n            [class.selected]=\\\"isLast && lastSelected\\\"\\r\\n            [class.locked]=\\\"option.locked\\\"\\r\\n            [colorFrom]=\\\"groupName\\\"\\r\\n            (iconClick)=\\\"removeOption(option)\\\"\\r\\n        >\\r\\n            {{ option.name }}\\r\\n        </vdr-chip>\\r\\n    </div>\\r\\n    <textarea\\r\\n        #textArea\\r\\n        (keyup)=\\\"handleKey($event)\\\"\\r\\n        (focus)=\\\"isFocussed = true\\\"\\r\\n        (blur)=\\\"handleBlur()\\\"\\r\\n        [(ngModel)]=\\\"input\\\"\\r\\n        [disabled]=\\\"disabled\\\"\\r\\n    ></textarea>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.Default,\n                providers: [OPTION_VALUE_INPUT_VALUE_ACCESSOR],\n                styles: [\".input-wrapper{background-color:#fff;border-radius:3px!important;border:1px solid var(--color-grey-300)!important;cursor:text}.input-wrapper.focus{border-color:var(--color-primary-500)!important;box-shadow:0 0 1px 1px var(--color-primary-100)}.input-wrapper .chips{padding:5px}.input-wrapper textarea{border:none;width:100%;height:24px;margin-top:3px;padding:0 6px}.input-wrapper textarea:focus{outline:none}.input-wrapper textarea:disabled{background-color:var(--color-component-bg-100)}vdr-chip ::ng-deep .wrapper{margin:0 3px}vdr-chip.locked{opacity:.8}vdr-chip.selected ::ng-deep .wrapper{border-color:var(--color-warning-500)!important;box-shadow:0 0 1px 1px var(--color-warning-400);opacity:.6}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { groupName: [{\n            type: Input\n        }], textArea: [{\n            type: ViewChild,\n            args: ['textArea', { static: true }]\n        }] }); })();\n\n/**\r\n * A component which displays the Assets associated with a product, and allows assets to be removed and\r\n * added, and for the featured asset to be set.\r\n *\r\n * Note: rather complex code for drag drop is due to a limitation of the default CDK implementation\r\n * which is addressed by a work-around from here: https://github.com/angular/components/issues/13372#issuecomment-483998378\r\n */\r\nclass ProductAssetsComponent {\r\n    constructor(modalService, changeDetector, viewportRuler, collectionDetailComponent) {\r\n        this.modalService = modalService;\r\n        this.changeDetector = changeDetector;\r\n        this.viewportRuler = viewportRuler;\r\n        this.collectionDetailComponent = collectionDetailComponent;\r\n        this.compact = false;\r\n        this.change = new EventEmitter();\r\n        this.assets = [];\r\n        this.updateCollectionPermissions = [Permission.UpdateCatalog, Permission.UpdateCollection];\r\n        this.updateProductPermissions = [Permission.UpdateCatalog, Permission.UpdateProduct];\r\n    }\r\n    set assetsSetter(val) {\r\n        // create a new non-readonly array of assets\r\n        this.assets = val.slice();\r\n    }\r\n    get updatePermissions() {\r\n        if (this.collectionDetailComponent) {\r\n            return this.updateCollectionPermissions;\r\n        }\r\n        else {\r\n            return this.updateProductPermissions;\r\n        }\r\n    }\r\n    selectAssets() {\r\n        this.modalService\r\n            .fromComponent(AssetPickerDialogComponent, {\r\n            size: 'xl',\r\n        })\r\n            .subscribe(result => {\r\n            if (result && result.length) {\r\n                this.assets = unique(this.assets.concat(result), 'id');\r\n                if (!this.featuredAsset) {\r\n                    this.featuredAsset = result[0];\r\n                }\r\n                this.emitChangeEvent(this.assets, this.featuredAsset);\r\n                this.changeDetector.markForCheck();\r\n            }\r\n        });\r\n    }\r\n    setAsFeatured(asset) {\r\n        this.featuredAsset = asset;\r\n        this.emitChangeEvent(this.assets, asset);\r\n    }\r\n    isFeatured(asset) {\r\n        return !!this.featuredAsset && this.featuredAsset.id === asset.id;\r\n    }\r\n    previewAsset(asset) {\r\n        this.modalService\r\n            .fromComponent(AssetPreviewDialogComponent, {\r\n            size: 'xl',\r\n            closable: true,\r\n            locals: { asset },\r\n        })\r\n            .subscribe();\r\n    }\r\n    removeAsset(asset) {\r\n        this.assets = this.assets.filter(a => a.id !== asset.id);\r\n        if (this.featuredAsset && this.featuredAsset.id === asset.id) {\r\n            this.featuredAsset = this.assets.length > 0 ? this.assets[0] : undefined;\r\n        }\r\n        this.emitChangeEvent(this.assets, this.featuredAsset);\r\n    }\r\n    emitChangeEvent(assets, featuredAsset) {\r\n        this.change.emit({\r\n            assets,\r\n            featuredAsset,\r\n        });\r\n    }\r\n    dropListDropped(event) {\r\n        moveItemInArray(this.assets, event.previousContainer.data, event.container.data);\r\n        this.emitChangeEvent(this.assets, this.featuredAsset);\r\n    }\r\n}\nProductAssetsComponent.ɵfac = function ProductAssetsComponent_Factory(t) { return new (t || ProductAssetsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc10.ViewportRuler), ɵngcc0.ɵɵdirectiveInject(CollectionDetailComponent, 8)); };\nProductAssetsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductAssetsComponent, selectors: [[\"vdr-product-assets\"]], hostVars: 2, hostBindings: function ProductAssetsComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"compact\", ctx.compact);\n    } }, inputs: { compact: \"compact\", assetsSetter: [\"assets\", \"assetsSetter\"], featuredAsset: \"featuredAsset\" }, outputs: { change: \"change\" }, decls: 5, vars: 2, consts: [[\"class\", \"card\", 4, \"ngIf\", \"ngIfElse\"], [\"compactView\", \"\"], [\"assetList\", \"\"], [1, \"card\"], [1, \"card-img\"], [1, \"featured-asset\"], [3, \"src\", \"click\", 4, \"ngIf\"], [\"class\", \"placeholder\", 3, \"click\", 4, \"ngIf\"], [1, \"card-block\"], [4, \"ngTemplateOutlet\"], [\"class\", \"card-footer\", 4, \"vdrIfPermissions\"], [3, \"src\", \"click\"], [1, \"placeholder\", 3, \"click\"], [\"shape\", \"image\", \"size\", \"128\"], [1, \"card-footer\"], [1, \"btn\", 3, \"click\"], [\"shape\", \"attachment\"], [1, \"featured-asset\", \"compact\"], [\"class\", \"compact-select btn btn-icon btn-sm btn-block\", 3, \"title\", \"click\", 4, \"vdrIfPermissions\"], [\"shape\", \"image\", \"size\", \"150\"], [1, \"compact-select\", \"btn\", \"btn-icon\", \"btn-sm\", \"btn-block\", 3, \"title\", \"click\"], [\"cdkDropListGroup\", \"\", 1, \"all-assets\"], [\"class\", \"drop-list\", \"cdkDropList\", \"\", \"cdkDropListOrientation\", \"horizontal\", 3, \"cdkDropListData\", \"cdkDropListDisabled\", \"cdkDropListDropped\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDropList\", \"\", \"cdkDropListOrientation\", \"horizontal\", 1, \"drop-list\", 3, \"cdkDropListData\", \"cdkDropListDisabled\", \"cdkDropListDropped\"], [\"cdkDrag\", \"\"], [\"vdrDropdownTrigger\", \"\", \"tabindex\", \"0\", 1, \"asset-thumb\", 3, \"title\"], [3, \"src\"], [\"vdrPosition\", \"bottom-right\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"click\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 3, \"disabled\", \"click\"], [1, \"dropdown-divider\"], [\"type\", \"button\", \"vdrDropdownItem\", \"\", 1, \"remove-asset\", 3, \"disabled\", \"click\"]], template: function ProductAssetsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ProductAssetsComponent_div_0_Template, 8, 4, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, ProductAssetsComponent_ng_template_1_Template, 5, 4, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵtemplate(3, ProductAssetsComponent_ng_template_3_Template, 2, 3, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.compact)(\"ngIfElse\", _r1);\n    } }, directives: [ɵngcc4.NgIf, ɵngcc4.NgTemplateOutlet, ɵngcc2.IfPermissionsDirective, ɵngcc7.ClrIconCustomTag, ɵngcc9.CdkDropListGroup, ɵngcc4.NgForOf, ɵngcc9.CdkDropList, ɵngcc2.DropdownComponent, ɵngcc9.CdkDrag, ɵngcc2.DropdownTriggerDirective, ɵngcc2.DropdownMenuComponent, ɵngcc2.DropdownItemDirective], pipes: [ɵngcc2.AssetPreviewPipe, ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe], styles: [\"[_nghost-%COMP%]{width:340px;display:block}.compact[_nghost-%COMP%]{width:162px}.placeholder[_ngcontent-%COMP%]{text-align:center;color:var(--color-grey-300)}.featured-asset[_ngcontent-%COMP%]{text-align:center;background:var(--color-component-bg-200);padding:6px;cursor:pointer}.featured-asset.compact[_ngcontent-%COMP%]{width:100%;min-height:40px;position:relative;padding:6px}.featured-asset[_ngcontent-%COMP%]   .compact-select[_ngcontent-%COMP%]{position:absolute;bottom:6px;right:6px;margin:0}.all-assets[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.all-assets[_ngcontent-%COMP%]   .drop-list[_ngcontent-%COMP%]{min-width:60px}.all-assets[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{margin:3px;padding:0;border:2px solid var(--color-component-border-100);cursor:pointer}.all-assets[_ngcontent-%COMP%]   .asset-thumb.featured[_ngcontent-%COMP%]{border-color:var(--color-primary-500)}.all-assets[_ngcontent-%COMP%]   .remove-asset[_ngcontent-%COMP%]{color:var(--color-warning-500)}.all-assets.compact[_ngcontent-%COMP%]   .drop-list[_ngcontent-%COMP%]{min-width:54px}.all-assets.compact[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{margin:1px;border-width:1px}.all-assets.compact[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%], .all-assets.compact[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .asset-thumb[_ngcontent-%COMP%]{width:50px}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.all-assets.cdk-drop-list-dragging[_ngcontent-%COMP%]   vdr-dropdown[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.cdk-drag-placeholder){display:none}\"], changeDetection: 0 });\r\nProductAssetsComponent.ctorParameters = () => [\r\n    { type: ModalService },\r\n    { type: ChangeDetectorRef },\r\n    { type: ViewportRuler },\r\n    { type: CollectionDetailComponent, decorators: [{ type: Optional }] }\r\n];\r\nProductAssetsComponent.propDecorators = {\r\n    assetsSetter: [{ type: Input, args: ['assets',] }],\r\n    featuredAsset: [{ type: Input }],\r\n    compact: [{ type: HostBinding, args: ['class.compact',] }, { type: Input }],\r\n    change: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductAssetsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-assets',\n                template: \"<div class=\\\"card\\\" *ngIf=\\\"!compact; else compactView\\\">\\r\\n    <div class=\\\"card-img\\\">\\r\\n        <div class=\\\"featured-asset\\\">\\r\\n            <img\\r\\n                *ngIf=\\\"featuredAsset\\\"\\r\\n                [src]=\\\"featuredAsset | assetPreview:'small'\\\"\\r\\n                (click)=\\\"previewAsset(featuredAsset)\\\"\\r\\n            />\\r\\n            <div class=\\\"placeholder\\\" *ngIf=\\\"!featuredAsset\\\" (click)=\\\"selectAssets()\\\">\\r\\n                <clr-icon shape=\\\"image\\\" size=\\\"128\\\"></clr-icon>\\r\\n                <div>{{ 'catalog.no-featured-asset' | translate }}</div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"card-block\\\"><ng-container *ngTemplateOutlet=\\\"assetList\\\"></ng-container></div>\\r\\n    <div class=\\\"card-footer\\\" *vdrIfPermissions=\\\"updatePermissions\\\">\\r\\n        <button class=\\\"btn\\\" (click)=\\\"selectAssets()\\\">\\r\\n            <clr-icon shape=\\\"attachment\\\"></clr-icon>\\r\\n            {{ 'asset.add-asset' | translate }}\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<ng-template #compactView>\\r\\n    <div class=\\\"featured-asset compact\\\">\\r\\n        <img\\r\\n            *ngIf=\\\"featuredAsset\\\"\\r\\n            [src]=\\\"featuredAsset | assetPreview:'thumb'\\\"\\r\\n            (click)=\\\"previewAsset(featuredAsset)\\\"\\r\\n        />\\r\\n\\r\\n        <div class=\\\"placeholder\\\" *ngIf=\\\"!featuredAsset\\\" (click)=\\\"selectAssets()\\\"><clr-icon shape=\\\"image\\\" size=\\\"150\\\"></clr-icon></div>\\r\\n    </div>\\r\\n    <ng-container *ngTemplateOutlet=\\\"assetList\\\"></ng-container>\\r\\n    <button\\r\\n        *vdrIfPermissions=\\\"updatePermissions\\\"\\r\\n        class=\\\"compact-select btn btn-icon btn-sm btn-block\\\"\\r\\n        [title]=\\\"'asset.add-asset' | translate\\\"\\r\\n        (click)=\\\"selectAssets()\\\"\\r\\n    >\\r\\n        <clr-icon shape=\\\"attachment\\\"></clr-icon>\\r\\n        {{ 'asset.add-asset' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\\r\\n<ng-template #assetList>\\r\\n    <div class=\\\"all-assets\\\" [class.compact]=\\\"compact\\\" cdkDropListGroup>\\r\\n        <div\\r\\n            *ngFor=\\\"let asset of assets; let index = index\\\"\\r\\n            class=\\\"drop-list\\\"\\r\\n            cdkDropList\\r\\n            cdkDropListOrientation=\\\"horizontal\\\"\\r\\n            [cdkDropListData]=\\\"index\\\"\\r\\n            [cdkDropListDisabled]=\\\"!(updatePermissions | hasPermission)\\\"\\r\\n            (cdkDropListDropped)=\\\"dropListDropped($event)\\\"\\r\\n        >\\r\\n            <vdr-dropdown cdkDrag>\\r\\n                <div\\r\\n                    class=\\\"asset-thumb\\\"\\r\\n                    vdrDropdownTrigger\\r\\n                    [class.featured]=\\\"isFeatured(asset)\\\"\\r\\n                    [title]=\\\"\\\"\\r\\n                    tabindex=\\\"0\\\"\\r\\n                >\\r\\n                    <img [src]=\\\"asset | assetPreview:'tiny'\\\" />\\r\\n                </div>\\r\\n                <vdr-dropdown-menu vdrPosition=\\\"bottom-right\\\">\\r\\n                    <button type=\\\"button\\\" vdrDropdownItem (click)=\\\"previewAsset(asset)\\\">\\r\\n                        {{ 'asset.preview' | translate }}\\r\\n                    </button>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        [disabled]=\\\"isFeatured(asset) || !(updatePermissions | hasPermission)\\\"\\r\\n                        vdrDropdownItem\\r\\n                        (click)=\\\"setAsFeatured(asset)\\\"\\r\\n                    >\\r\\n                        {{ 'asset.set-as-featured-asset' | translate }}\\r\\n                    </button>\\r\\n                    <div class=\\\"dropdown-divider\\\"></div>\\r\\n                    <button\\r\\n                        type=\\\"button\\\"\\r\\n                        class=\\\"remove-asset\\\"\\r\\n                        vdrDropdownItem\\r\\n                        [disabled]=\\\"!(updatePermissions | hasPermission)\\\"\\r\\n                        (click)=\\\"removeAsset(asset)\\\"\\r\\n                    >\\r\\n                        {{ 'asset.remove-asset' | translate }}\\r\\n                    </button>\\r\\n                </vdr-dropdown-menu>\\r\\n            </vdr-dropdown>\\r\\n        </div>\\r\\n    </div>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{width:340px;display:block}:host.compact{width:162px}.placeholder{text-align:center;color:var(--color-grey-300)}.featured-asset{text-align:center;background:var(--color-component-bg-200);padding:6px;cursor:pointer}.featured-asset.compact{width:100%;min-height:40px;position:relative;padding:6px}.featured-asset .compact-select{position:absolute;bottom:6px;right:6px;margin:0}.all-assets{display:flex;flex-wrap:wrap}.all-assets .drop-list{min-width:60px}.all-assets .asset-thumb{margin:3px;padding:0;border:2px solid var(--color-component-border-100);cursor:pointer}.all-assets .asset-thumb.featured{border-color:var(--color-primary-500)}.all-assets .remove-asset{color:var(--color-warning-500)}.all-assets.compact .drop-list{min-width:54px}.all-assets.compact .asset-thumb{margin:1px;border-width:1px}.all-assets.compact .cdk-drag-placeholder,.all-assets.compact .cdk-drag-placeholder .asset-thumb{width:50px}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box:last-child{border:none}.all-assets.cdk-drop-list-dragging vdr-dropdown:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging>:not(.cdk-drag-placeholder){display:none}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.ModalService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc10.ViewportRuler }, { type: CollectionDetailComponent, decorators: [{\n                type: Optional\n            }] }]; }, { compact: [{\n            type: HostBinding,\n            args: ['class.compact']\n        }, {\n            type: Input\n        }], change: [{\n            type: Output\n        }], assetsSetter: [{\n            type: Input,\n            args: ['assets']\n        }], featuredAsset: [{\n            type: Input\n        }] }); })();\n\nclass UpdateProductOptionDialogComponent {\r\n    constructor() {\r\n        this.updateVariantName = true;\r\n        this.codeInputTouched = false;\r\n    }\r\n    ngOnInit() {\r\n        var _a;\r\n        const currentTranslation = this.productOption.translations.find(t => t.languageCode === this.activeLanguage);\r\n        this.name = (_a = currentTranslation === null || currentTranslation === void 0 ? void 0 : currentTranslation.name) !== null && _a !== void 0 ? _a : '';\r\n        this.code = this.productOption.code;\r\n        this.customFieldsForm = new FormGroup({});\r\n        if (this.customFields) {\r\n            const cfCurrentTranslation = (currentTranslation && currentTranslation.customFields) || {};\r\n            for (const fieldDef of this.customFields) {\r\n                const key = fieldDef.name;\r\n                const value = fieldDef.type === 'localeString'\r\n                    ? cfCurrentTranslation[key]\r\n                    : this.productOption.customFields[key];\r\n                this.customFieldsForm.addControl(fieldDef.name, new FormControl(value));\r\n            }\r\n        }\r\n    }\r\n    update() {\r\n        const result = createUpdatedTranslatable({\r\n            translatable: this.productOption,\r\n            languageCode: this.activeLanguage,\r\n            updatedFields: {\r\n                code: this.code,\r\n                name: this.name,\r\n                customFields: this.customFieldsForm.value,\r\n            },\r\n            customFieldConfig: this.customFields,\r\n            defaultTranslation: {\r\n                languageCode: this.activeLanguage,\r\n                name: '',\r\n            },\r\n        });\r\n        this.resolveWith(Object.assign(Object.assign({}, result), { autoUpdate: this.updateVariantName }));\r\n    }\r\n    cancel() {\r\n        this.resolveWith();\r\n    }\r\n    updateCode(nameValue) {\r\n        if (!this.codeInputTouched && !this.productOption.code) {\r\n            this.code = normalizeString(nameValue, '-');\r\n        }\r\n    }\r\n}\nUpdateProductOptionDialogComponent.ɵfac = function UpdateProductOptionDialogComponent_Factory(t) { return new (t || UpdateProductOptionDialogComponent)(); };\nUpdateProductOptionDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: UpdateProductOptionDialogComponent, selectors: [[\"vdr-update-product-option-dialog\"]], decls: 16, vars: 13, consts: [[\"vdrDialogTitle\", \"\"], [\"for\", \"name\", 3, \"label\"], [\"id\", \"name\", \"type\", \"text\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"nameInput\", \"ngModel\"], [\"for\", \"code\", 3, \"label\"], [\"id\", \"code\", \"type\", \"text\", \"required\", \"\", \"pattern\", \"[a-z0-9_-]+\", 3, \"ngModel\", \"ngModelChange\"], [\"codeInput\", \"ngModel\"], [\"type\", \"checkbox\", \"clrCheckbox\", \"\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"vdrDialogButtons\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"entityName\", \"ProductOption\", 3, \"customFieldsFormGroup\", \"customField\", \"readonly\", 4, \"ngIf\"], [\"entityName\", \"ProductOption\", 3, \"customFieldsFormGroup\", \"customField\", \"readonly\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"]], template: function UpdateProductOptionDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, UpdateProductOptionDialogComponent_ng_template_0_Template, 2, 3, \"ng-template\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"vdr-form-field\", 1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementStart(3, \"input\", 2, 3);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function UpdateProductOptionDialogComponent_Template_input_ngModelChange_3_listener($event) { return ctx.name = $event; })(\"input\", function UpdateProductOptionDialogComponent_Template_input_input_3_listener($event) { return ctx.updateCode($event.target.value); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"vdr-form-field\", 4);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementStart(7, \"input\", 5, 6);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function UpdateProductOptionDialogComponent_Template_input_ngModelChange_7_listener($event) { return ctx.code = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"clr-checkbox-wrapper\");\n        ɵngcc0.ɵɵelementStart(10, \"input\", 7);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function UpdateProductOptionDialogComponent_Template_input_ngModelChange_10_listener($event) { return ctx.updateVariantName = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(11, \"label\");\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(14, UpdateProductOptionDialogComponent_section_14_Template, 5, 4, \"section\", 8);\n        ɵngcc0.ɵɵtemplate(15, UpdateProductOptionDialogComponent_ng_template_15_Template, 6, 7, \"ng-template\", 9);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(2, 7, \"catalog.option-name\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.name);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(6, 9, \"common.code\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.code);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngModel\", ctx.updateVariantName);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(13, 11, \"catalog.auto-update-option-variant-name\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.customFields.length);\n    } }, directives: [ɵngcc2.DialogTitleDirective, ɵngcc2.FormFieldComponent, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc3.RequiredValidator, ɵngcc3.NgControlStatus, ɵngcc3.NgModel, ɵngcc3.PatternValidator, ɵngcc7.ClrCheckboxWrapper, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc7.ClrLabel, ɵngcc4.NgIf, ɵngcc2.DialogButtonsDirective, ɵngcc4.NgForOf, ɵngcc2.CustomFieldControlComponent], pipes: [ɵngcc5.TranslatePipe, ɵngcc2.HasPermissionPipe], styles: [\"\"], changeDetection: 0 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(UpdateProductOptionDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-update-product-option-dialog',\n                template: \"<ng-template vdrDialogTitle>{{ 'catalog.update-product-option' | translate }}</ng-template>\\r\\n<vdr-form-field [label]=\\\"'catalog.option-name' | translate\\\" for=\\\"name\\\">\\r\\n    <input\\r\\n        id=\\\"name\\\"\\r\\n        type=\\\"text\\\"\\r\\n        #nameInput=\\\"ngModel\\\"\\r\\n        [(ngModel)]=\\\"name\\\"\\r\\n        required\\r\\n        (input)=\\\"updateCode($event.target.value)\\\"\\r\\n    />\\r\\n</vdr-form-field>\\r\\n<vdr-form-field [label]=\\\"'common.code' | translate\\\" for=\\\"code\\\">\\r\\n    <input id=\\\"code\\\" type=\\\"text\\\" #codeInput=\\\"ngModel\\\" required [(ngModel)]=\\\"code\\\" pattern=\\\"[a-z0-9_-]+\\\" />\\r\\n</vdr-form-field>\\r\\n<clr-checkbox-wrapper>\\r\\n    <input type=\\\"checkbox\\\" clrCheckbox [(ngModel)]=\\\"updateVariantName\\\" />\\r\\n    <label>{{ 'catalog.auto-update-option-variant-name' | translate }}</label>\\r\\n</clr-checkbox-wrapper>\\r\\n<section *ngIf=\\\"customFields.length\\\">\\r\\n    <label>{{ 'common.custom-fields' | translate }}</label>\\r\\n    <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n        <vdr-custom-field-control\\r\\n            *ngIf=\\\"customFieldsForm.get(customField.name)\\\"\\r\\n            entityName=\\\"ProductOption\\\"\\r\\n            [customFieldsFormGroup]=\\\"customFieldsForm\\\"\\r\\n            [customField]=\\\"customField\\\"\\r\\n            [readonly]=\\\"!(['UpdateCatalog', 'UpdateProduct'] | hasPermission)\\\"\\r\\n        ></vdr-custom-field-control>\\r\\n    </ng-container>\\r\\n</section>\\r\\n\\r\\n<ng-template vdrDialogButtons>\\r\\n    <button type=\\\"button\\\" class=\\\"btn\\\" (click)=\\\"cancel()\\\">{{ 'common.cancel' | translate }}</button>\\r\\n    <button\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"update()\\\"\\r\\n        [disabled]=\\\"\\r\\n            nameInput.invalid ||\\r\\n            codeInput.invalid ||\\r\\n            (nameInput.pristine && codeInput.pristine && customFieldsForm.pristine)\\r\\n        \\\"\\r\\n        class=\\\"btn btn-primary\\\"\\r\\n    >\\r\\n        {{ 'catalog.update-product-option' | translate }}\\r\\n    </button>\\r\\n</ng-template>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, null); })();\n\nclass ProductVariantsListComponent {\r\n    constructor(changeDetector, modalService, dataService) {\r\n        this.changeDetector = changeDetector;\r\n        this.modalService = modalService;\r\n        this.dataService = dataService;\r\n        this.assignToChannel = new EventEmitter();\r\n        this.removeFromChannel = new EventEmitter();\r\n        this.assetChange = new EventEmitter();\r\n        this.selectionChange = new EventEmitter();\r\n        this.selectFacetValueClick = new EventEmitter();\r\n        this.updateProductOption = new EventEmitter();\r\n        this.selectedVariantIds = [];\r\n        this.pagination = {\r\n            currentPage: 1,\r\n            itemsPerPage: 10,\r\n        };\r\n        this.formGroupMap = new Map();\r\n        this.GlobalFlag = GlobalFlag;\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateProduct];\r\n    }\r\n    ngOnInit() {\r\n        this.dataService.settings.getGlobalSettings('cache-first').single$.subscribe(({ globalSettings }) => {\r\n            this.globalTrackInventory = globalSettings.trackInventory;\r\n            this.globalOutOfStockThreshold = globalSettings.outOfStockThreshold;\r\n            this.changeDetector.markForCheck();\r\n        });\r\n        this.subscription = this.formArray.valueChanges.subscribe(() => this.changeDetector.markForCheck());\r\n        this.subscription.add(this.formArray.valueChanges\r\n            .pipe(map(value => value.length), debounceTime(1), distinctUntilChanged())\r\n            .subscribe(() => {\r\n            this.buildFormGroupMap();\r\n        }));\r\n        this.buildFormGroupMap();\r\n    }\r\n    ngOnChanges(changes) {\r\n        var _a, _b;\r\n        if ('facets' in changes && !!changes['facets'].currentValue) {\r\n            this.facetValues = flattenFacetValues(this.facets);\r\n        }\r\n        if ('variants' in changes) {\r\n            if (((_a = changes['variants'].currentValue) === null || _a === void 0 ? void 0 : _a.length) !== ((_b = changes['variants'].previousValue) === null || _b === void 0 ? void 0 : _b.length)) {\r\n                this.pagination.currentPage = 1;\r\n            }\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n        }\r\n    }\r\n    isDefaultChannel(channelCode) {\r\n        return channelCode === DEFAULT_CHANNEL_CODE;\r\n    }\r\n    trackById(index, item) {\r\n        return item.id;\r\n    }\r\n    inventoryIsNotTracked(formGroup) {\r\n        var _a;\r\n        const trackInventory = (_a = formGroup.get('trackInventory')) === null || _a === void 0 ? void 0 : _a.value;\r\n        return (trackInventory === GlobalFlag.FALSE ||\r\n            (trackInventory === GlobalFlag.INHERIT && this.globalTrackInventory === false));\r\n    }\r\n    getTaxCategoryName(group) {\r\n        const control = group.get(['taxCategoryId']);\r\n        if (control && this.taxCategories) {\r\n            const match = this.taxCategories.find(t => t.id === control.value);\r\n            return match ? match.name : '';\r\n        }\r\n        return '';\r\n    }\r\n    getSaleableStockLevel(variant) {\r\n        const effectiveOutOfStockThreshold = variant.useGlobalOutOfStockThreshold\r\n            ? this.globalOutOfStockThreshold\r\n            : variant.outOfStockThreshold;\r\n        return variant.stockOnHand - variant.stockAllocated - effectiveOutOfStockThreshold;\r\n    }\r\n    areAllSelected() {\r\n        return !!this.variants && this.selectedVariantIds.length === this.variants.length;\r\n    }\r\n    onAssetChange(variantId, event) {\r\n        this.assetChange.emit(Object.assign({ variantId }, event));\r\n        const index = this.variants.findIndex(v => v.id === variantId);\r\n        this.formArray.at(index).markAsDirty();\r\n    }\r\n    toggleSelectAll() {\r\n        if (this.areAllSelected()) {\r\n            this.selectedVariantIds = [];\r\n        }\r\n        else {\r\n            this.selectedVariantIds = this.variants.map(v => v.id);\r\n        }\r\n        this.selectionChange.emit(this.selectedVariantIds);\r\n    }\r\n    toggleSelectVariant(variantId) {\r\n        const index = this.selectedVariantIds.indexOf(variantId);\r\n        if (-1 < index) {\r\n            this.selectedVariantIds.splice(index, 1);\r\n        }\r\n        else {\r\n            this.selectedVariantIds.push(variantId);\r\n        }\r\n        this.selectionChange.emit(this.selectedVariantIds);\r\n    }\r\n    optionGroupName(optionGroupId) {\r\n        var _a;\r\n        const group = this.optionGroups.find(g => g.id === optionGroupId);\r\n        if (group) {\r\n            const translation = (_a = group === null || group === void 0 ? void 0 : group.translations.find(t => t.languageCode === this.activeLanguage)) !== null && _a !== void 0 ? _a : group.translations[0];\r\n            return translation.name;\r\n        }\r\n    }\r\n    optionName(option) {\r\n        var _a;\r\n        const translation = (_a = option.translations.find(t => t.languageCode === this.activeLanguage)) !== null && _a !== void 0 ? _a : option.translations[0];\r\n        return translation.name;\r\n    }\r\n    pendingFacetValues(variant) {\r\n        if (this.facets) {\r\n            const formFacetValueIds = this.getFacetValueIds(variant.id);\r\n            const variantFacetValueIds = variant.facetValues.map(fv => fv.id);\r\n            return formFacetValueIds\r\n                .filter(x => !variantFacetValueIds.includes(x))\r\n                .map(id => this.facetValues.find(fv => fv.id === id))\r\n                .filter(notNullOrUndefined);\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n    existingFacetValues(variant) {\r\n        const formFacetValueIds = this.getFacetValueIds(variant.id);\r\n        const intersection = [...formFacetValueIds].filter(x => variant.facetValues.map(fv => fv.id).includes(x));\r\n        return intersection\r\n            .map(id => variant.facetValues.find(fv => fv.id === id))\r\n            .filter(notNullOrUndefined);\r\n    }\r\n    removeFacetValue(variant, facetValueId) {\r\n        const formGroup = this.formGroupMap.get(variant.id);\r\n        if (formGroup) {\r\n            const newValue = formGroup.value.facetValueIds.filter(id => id !== facetValueId);\r\n            formGroup.patchValue({\r\n                facetValueIds: newValue,\r\n            });\r\n            formGroup.markAsDirty();\r\n        }\r\n    }\r\n    isVariantSelected(variantId) {\r\n        return -1 < this.selectedVariantIds.indexOf(variantId);\r\n    }\r\n    editOption(option) {\r\n        this.modalService\r\n            .fromComponent(UpdateProductOptionDialogComponent, {\r\n            size: 'md',\r\n            locals: {\r\n                productOption: option,\r\n                activeLanguage: this.activeLanguage,\r\n                customFields: this.customOptionFields,\r\n            },\r\n        })\r\n            .subscribe(result => {\r\n            if (result) {\r\n                this.updateProductOption.emit(result);\r\n            }\r\n        });\r\n    }\r\n    buildFormGroupMap() {\r\n        this.formGroupMap.clear();\r\n        for (const controlGroup of this.formArray.controls) {\r\n            this.formGroupMap.set(controlGroup.value.id, controlGroup);\r\n        }\r\n        this.changeDetector.markForCheck();\r\n    }\r\n    getFacetValueIds(id) {\r\n        var _a;\r\n        const formValue = (_a = this.formGroupMap.get(id)) === null || _a === void 0 ? void 0 : _a.value;\r\n        return formValue.facetValueIds;\r\n    }\r\n}\nProductVariantsListComponent.ɵfac = function ProductVariantsListComponent_Factory(t) { return new (t || ProductVariantsListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ModalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nProductVariantsListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductVariantsListComponent, selectors: [[\"vdr-product-variants-list\"]], inputs: { formArray: [\"productVariantsFormArray\", \"formArray\"], variants: \"variants\", channelPriceIncludesTax: \"channelPriceIncludesTax\", taxCategories: \"taxCategories\", facets: \"facets\", optionGroups: \"optionGroups\", customFields: \"customFields\", customOptionFields: \"customOptionFields\", activeLanguage: \"activeLanguage\", pendingAssetChanges: \"pendingAssetChanges\" }, outputs: { assignToChannel: \"assignToChannel\", removeFromChannel: \"removeFromChannel\", assetChange: \"assetChange\", selectionChange: \"selectionChange\", selectFacetValueClick: \"selectFacetValueClick\", updateProductOption: \"updateProductOption\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 6, vars: 8, consts: [[1, \"variants-list\"], [\"class\", \"variant-container card\", 3, \"disabled\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"table-footer\"], [3, \"itemsPerPage\", \"itemsPerPageChange\"], [3, \"currentPage\", \"itemsPerPage\", \"pageChange\"], [1, \"variant-container\", \"card\"], [3, \"formGroup\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"card-block\", \"header-row\"], [1, \"details\"], [1, \"sku\", 3, \"readonly\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"sku\", 3, \"readonly\", \"placeholder\"], [1, \"name\", 3, \"readonly\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"placeholder\"], [1, \"right-controls\"], [4, \"vdrIfPermissions\"], [1, \"card-block\"], [1, \"variant-body\"], [1, \"assets\"], [3, \"compact\", \"assets\", \"featuredAsset\", \"change\"], [1, \"variant-form-inputs\"], [1, \"standard-fields\"], [1, \"variant-form-input-row\"], [1, \"tax-category\"], [4, \"vdrIfPermissions\", \"vdrIfPermissionsElse\"], [\"taxCategoryLabel\", \"\"], [1, \"price\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\", 4, \"ngIf\"], [\"clrInput\", \"\", \"formControlName\", \"priceWithTax\", 3, \"currencyCode\", \"readonly\", 4, \"ngIf\"], [3, \"price\", \"currencyCode\", \"priceIncludesTax\", \"taxCategoryId\"], [3, \"content\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"step\", \"1\", \"formControlName\", \"stockOnHand\", 3, \"readonly\", \"vdrDisabled\"], [1, \"clr-control-label\"], [1, \"value\"], [1, \"out-of-stock-threshold-wrapper\"], [1, \"flex\"], [\"clrInput\", \"\", \"type\", \"number\", 3, \"formControl\", \"readonly\", \"vdrDisabled\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"useGlobalOutOfStockThreshold\", \"formControlName\", \"useGlobalOutOfStockThreshold\", 3, \"vdrDisabled\"], [1, \"custom-fields\"], [\"formGroupName\", \"customFields\", 4, \"ngIf\"], [1, \"options-facets\"], [3, \"entity\"], [4, \"ngIf\"], [1, \"flex-spacer\"], [1, \"facets\"], [3, \"facetValue\", \"removable\", \"remove\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-sm btn-secondary\", 3, \"click\", 4, \"vdrIfPermissions\"], [4, \"vdrIfMultichannel\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", \"formControlName\", \"enabled\"], [\"clrSelect\", \"\", \"name\", \"options\", \"formControlName\", \"taxCategoryId\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"tax-category-label\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\"], [\"clrInput\", \"\", \"formControlName\", \"priceWithTax\", 3, \"currencyCode\", \"readonly\"], [\"clrSelect\", \"\", \"name\", \"options\", \"formControlName\", \"trackInventory\"], [\"formGroupName\", \"customFields\"], [4, \"ngFor\", \"ngForOf\"], [\"entityName\", \"ProductVariant\", 3, \"compact\", \"customFieldsFormGroup\", \"readonly\", \"customField\", 4, \"ngIf\"], [\"entityName\", \"ProductVariant\", 3, \"compact\", \"customFieldsFormGroup\", \"readonly\", \"customField\"], [1, \"options\"], [3, \"colorFrom\", \"invert\", \"icon\", \"iconClick\", 4, \"ngFor\", \"ngForOf\"], [3, \"colorFrom\", \"invert\", \"icon\", \"iconClick\"], [1, \"option-group-name\"], [3, \"facetValue\", \"removable\", \"remove\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"click\"], [\"shape\", \"plus\"], [\"class\", \"card-block\", 4, \"vdrIfDefaultChannelActive\"], [1, \"flex\", \"channel-assignment\"], [1, \"btn\", \"btn-sm\", 3, \"click\"], [\"shape\", \"layers\"], [\"icon\", \"times-circle\", 3, \"title\", \"iconClick\", 4, \"ngIf\"], [\"icon\", \"times-circle\", 3, \"title\", \"iconClick\"], [3, \"channelCode\"]], template: function ProductVariantsListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, ProductVariantsListComponent_div_1_Template, 2, 3, \"div\", 1);\n        ɵngcc0.ɵɵpipe(2, \"paginate\");\n        ɵngcc0.ɵɵelementStart(3, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(4, \"vdr-items-per-page-controls\", 3);\n        ɵngcc0.ɵɵlistener(\"itemsPerPageChange\", function ProductVariantsListComponent_Template_vdr_items_per_page_controls_itemsPerPageChange_4_listener($event) { return ctx.pagination.itemsPerPage = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"vdr-pagination-controls\", 4);\n        ɵngcc0.ɵɵlistener(\"pageChange\", function ProductVariantsListComponent_Template_vdr_pagination_controls_pageChange_5_listener($event) { return ctx.pagination.currentPage = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(2, 5, ctx.variants, ctx.pagination))(\"ngForTrackBy\", ctx.trackById);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"itemsPerPage\", ctx.pagination.itemsPerPage);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"currentPage\", ctx.pagination.currentPage)(\"itemsPerPage\", ctx.pagination.itemsPerPage);\n    } }, directives: function () { return [ɵngcc4.NgForOf, ɵngcc7.ClrDatagridItemsTrackBy, ɵngcc2.ItemsPerPageControlsComponent, ɵngcc2.PaginationControlsComponent, ɵngcc4.NgIf, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc2.TitleInputComponent, ɵngcc7.ClrInputContainer, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc7.ClrInput, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc2.IfPermissionsDirective, ProductAssetsComponent, ɵngcc7.ClrLabel, VariantPriceDetailComponent, ɵngcc2.HelpTooltipComponent, ɵngcc3.NumberValueAccessor, ɵngcc2.DisabledDirective, ɵngcc3.FormControlDirective, ɵngcc7.ClrCheckboxWrapper, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc2.EntityInfoComponent, ɵngcc2.IfMultichannelDirective, ɵngcc7.ClrSelectContainer, ɵngcc3.SelectControlValueAccessor, ɵngcc7.ClrSelect, ɵngcc3.NgSelectOption, ɵngcc3.ɵangular_packages_forms_forms_x, ɵngcc2.CurrencyInputComponent, ɵngcc3.FormGroupName, ɵngcc2.CustomFieldControlComponent, ɵngcc2.ChipComponent, ɵngcc2.FacetValueChipComponent, ɵngcc7.ClrIconCustomTag, ɵngcc2.IfDefaultChannelActiveDirective, ɵngcc2.ChannelBadgeComponent]; }, pipes: function () { return [ɵngcc6.PaginatePipe, ɵngcc2.HasPermissionPipe, ɵngcc5.TranslatePipe, ɵngcc2.SortPipe, ɵngcc2.ChannelLabelPipe]; }, styles: [\".with-selected[_ngcontent-%COMP%]{display:flex;min-height:52px;align-items:center;border:1px solid var(--color-component-border-100);border-radius:3px;padding:6px 18px}.with-selected[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .with-selected[_ngcontent-%COMP%]   vdr-select-toggle[_ngcontent-%COMP%]{margin-right:12px}.variant-container[_ngcontent-%COMP%]{transition:background-color .2s;min-height:330px}.variant-container.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.variant-container[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.variant-container[_ngcontent-%COMP%]   .variant-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width:768px){.variant-container[_ngcontent-%COMP%]   .variant-body[_ngcontent-%COMP%]{flex-direction:row}}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:12px}@media screen and (min-width:768px){.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex-direction:row;height:36px}}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]     .clr-control-container{width:100%}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]     .clr-control-container input.clr-input{min-width:100%}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .sku[_ngcontent-%COMP%]{width:160px;margin-right:20px;flex:0}.variant-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]     .name input{min-width:300px}.variant-container[_ngcontent-%COMP%]   .right-controls[_ngcontent-%COMP%]{display:flex}.variant-container[_ngcontent-%COMP%]   .tax-category-label[_ngcontent-%COMP%]{margin-top:3px}.variant-container[_ngcontent-%COMP%]   .variant-form-inputs[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}@media screen and (min-width:768px){.variant-container[_ngcontent-%COMP%]   .variant-form-inputs[_ngcontent-%COMP%]{flex-direction:row}}.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}@media screen and (min-width:768px){.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%]{margin:0 6px 8px 24px}}.variant-container[_ngcontent-%COMP%]   .variant-form-input-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:24px;margin-bottom:24px}.variant-container[_ngcontent-%COMP%]   .track-inventory-toggle[_ngcontent-%COMP%]{margin-top:22px}.variant-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]{margin-top:0}.variant-container[_ngcontent-%COMP%]   .facets[_ngcontent-%COMP%]{display:flex;align-items:center}.variant-container[_ngcontent-%COMP%]   .pricing[_ngcontent-%COMP%]{display:flex}.variant-container[_ngcontent-%COMP%]   .pricing[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:12px}.variant-container[_ngcontent-%COMP%]   .option-group-name[_ngcontent-%COMP%]{color:var(--color-text-200);text-transform:uppercase;font-size:10px;margin-right:3px;height:11px}.variant-container[_ngcontent-%COMP%]   .options-facets[_ngcontent-%COMP%]{display:flex;color:var(--color-grey-400)}.channel-assignment[_ngcontent-%COMP%]{justify-content:flex-end}.channel-assignment[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:6px 12px 6px 0}.out-of-stock-threshold-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.out-of-stock-threshold-wrapper[_ngcontent-%COMP%]   clr-toggle-wrapper[_ngcontent-%COMP%]{margin-left:24px}.inventory-untracked[_ngcontent-%COMP%]{opacity:.5}.table-footer[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;margin-top:6px}\"], changeDetection: 0 });\r\nProductVariantsListComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef },\r\n    { type: ModalService },\r\n    { type: DataService }\r\n];\r\nProductVariantsListComponent.propDecorators = {\r\n    formArray: [{ type: Input, args: ['productVariantsFormArray',] }],\r\n    variants: [{ type: Input }],\r\n    channelPriceIncludesTax: [{ type: Input }],\r\n    taxCategories: [{ type: Input }],\r\n    facets: [{ type: Input }],\r\n    optionGroups: [{ type: Input }],\r\n    customFields: [{ type: Input }],\r\n    customOptionFields: [{ type: Input }],\r\n    activeLanguage: [{ type: Input }],\r\n    pendingAssetChanges: [{ type: Input }],\r\n    assignToChannel: [{ type: Output }],\r\n    removeFromChannel: [{ type: Output }],\r\n    assetChange: [{ type: Output }],\r\n    selectionChange: [{ type: Output }],\r\n    selectFacetValueClick: [{ type: Output }],\r\n    updateProductOption: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductVariantsListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-list',\n                template: \"<div class=\\\"variants-list\\\">\\r\\n    <div\\r\\n        class=\\\"variant-container card\\\"\\r\\n        *ngFor=\\\"let variant of variants | paginate: pagination; trackBy: trackById; let i = index\\\"\\r\\n        [class.disabled]=\\\"!formGroupMap.get(variant.id)?.get('enabled')?.value\\\"\\r\\n    >\\r\\n        <ng-container *ngIf=\\\"formGroupMap.get(variant.id) as formGroup\\\" [formGroup]=\\\"formGroup\\\">\\r\\n            <div class=\\\"card-block header-row\\\">\\r\\n                <div class=\\\"details\\\">\\r\\n                    <vdr-title-input class=\\\"sku\\\" [readonly]=\\\"!(updatePermission | hasPermission)\\\">\\r\\n                        <clr-input-container>\\r\\n                            <input\\r\\n                                clrInput\\r\\n                                type=\\\"text\\\"\\r\\n                                formControlName=\\\"sku\\\"\\r\\n                                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                            />\\r\\n                        </clr-input-container>\\r\\n                    </vdr-title-input>\\r\\n                    <vdr-title-input class=\\\"name\\\" [readonly]=\\\"!(updatePermission | hasPermission)\\\">\\r\\n                        <clr-input-container>\\r\\n                            <input\\r\\n                                clrInput\\r\\n                                type=\\\"text\\\"\\r\\n                                formControlName=\\\"name\\\"\\r\\n                                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                [placeholder]=\\\"'common.name' | translate\\\"\\r\\n                            />\\r\\n                        </clr-input-container>\\r\\n                    </vdr-title-input>\\r\\n                </div>\\r\\n                <div class=\\\"right-controls\\\">\\r\\n                    <clr-toggle-wrapper *vdrIfPermissions=\\\"updatePermission\\\">\\r\\n                        <input type=\\\"checkbox\\\" clrToggle name=\\\"enabled\\\" formControlName=\\\"enabled\\\" />\\r\\n                        <label>{{ 'common.enabled' | translate }}</label>\\r\\n                    </clr-toggle-wrapper>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card-block\\\">\\r\\n                <div class=\\\"variant-body\\\">\\r\\n                    <div class=\\\"assets\\\">\\r\\n                        <vdr-product-assets\\r\\n                            [compact]=\\\"true\\\"\\r\\n                            [assets]=\\\"pendingAssetChanges[variant.id]?.assets || variant.assets\\\"\\r\\n                            [featuredAsset]=\\\"pendingAssetChanges[variant.id]?.featuredAsset || variant.featuredAsset\\\"\\r\\n                            (change)=\\\"onAssetChange(variant.id, $event)\\\"\\r\\n                        ></vdr-product-assets>\\r\\n                    </div>\\r\\n                    <div class=\\\"variant-form-inputs\\\">\\r\\n                        <div class=\\\"standard-fields\\\">\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <div class=\\\"tax-category\\\">\\r\\n                                    <clr-select-container\\r\\n                                        *vdrIfPermissions=\\\"updatePermission; else taxCategoryLabel\\\"\\r\\n                                    >\\r\\n                                        <label>{{ 'catalog.tax-category' | translate }}</label>\\r\\n                                        <select clrSelect name=\\\"options\\\" formControlName=\\\"taxCategoryId\\\">\\r\\n                                            <option\\r\\n                                                *ngFor=\\\"let taxCategory of taxCategories\\\"\\r\\n                                                [value]=\\\"taxCategory.id\\\"\\r\\n                                            >\\r\\n                                                {{ taxCategory.name }}\\r\\n                                            </option>\\r\\n                                        </select>\\r\\n                                    </clr-select-container>\\r\\n                                    <ng-template #taxCategoryLabel>\\r\\n                                        <label class=\\\"clr-control-label\\\">{{\\r\\n                                            'catalog.tax-category' | translate\\r\\n                                        }}</label>\\r\\n                                        <div class=\\\"tax-category-label\\\">\\r\\n                                            {{ getTaxCategoryName(formGroup) }}\\r\\n                                        </div>\\r\\n                                    </ng-template>\\r\\n                                </div>\\r\\n                                <div class=\\\"price\\\">\\r\\n                                    <clr-input-container>\\r\\n                                        <label>{{ 'catalog.price' | translate }}</label>\\r\\n                                        <vdr-currency-input\\r\\n                                            *ngIf=\\\"!channelPriceIncludesTax\\\"\\r\\n                                            clrInput\\r\\n                                            [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                            formControlName=\\\"price\\\"\\r\\n                                        ></vdr-currency-input>\\r\\n                                        <vdr-currency-input\\r\\n                                            *ngIf=\\\"channelPriceIncludesTax\\\"\\r\\n                                            clrInput\\r\\n                                            [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                            formControlName=\\\"priceWithTax\\\"\\r\\n                                        ></vdr-currency-input>\\r\\n                                    </clr-input-container>\\r\\n                                </div>\\r\\n                                <vdr-variant-price-detail\\r\\n                                    [price]=\\\"formGroup.get('price')!.value\\\"\\r\\n                                    [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                                    [priceIncludesTax]=\\\"channelPriceIncludesTax\\\"\\r\\n                                    [taxCategoryId]=\\\"formGroup.get('taxCategoryId')!.value\\\"\\r\\n                                ></vdr-variant-price-detail>\\r\\n                            </div>\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <clr-select-container *vdrIfPermissions=\\\"updatePermission\\\">\\r\\n                                    <label\\r\\n                                        >{{ 'catalog.track-inventory' | translate }}\\r\\n                                        <vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.track-inventory-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip>\\r\\n                                    </label>\\r\\n                                    <select clrSelect name=\\\"options\\\" formControlName=\\\"trackInventory\\\">\\r\\n                                        <option [value]=\\\"GlobalFlag.TRUE\\\">\\r\\n                                            {{ 'catalog.track-inventory-true' | translate }}\\r\\n                                        </option>\\r\\n                                        <option [value]=\\\"GlobalFlag.FALSE\\\">\\r\\n                                            {{ 'catalog.track-inventory-false' | translate }}\\r\\n                                        </option>\\r\\n                                        <option [value]=\\\"GlobalFlag.INHERIT\\\">\\r\\n                                            {{ 'catalog.track-inventory-inherit' | translate }}\\r\\n                                        </option>\\r\\n                                    </select>\\r\\n                                </clr-select-container>\\r\\n                                <clr-input-container>\\r\\n                                    <label\\r\\n                                        >{{ 'catalog.stock-on-hand' | translate }}\\r\\n                                        <vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.stock-on-hand-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip\\r\\n                                    ></label>\\r\\n                                    <input\\r\\n                                        [class.inventory-untracked]=\\\"inventoryIsNotTracked(formGroup)\\\"\\r\\n                                        clrInput\\r\\n                                        type=\\\"number\\\"\\r\\n                                        min=\\\"0\\\"\\r\\n                                        step=\\\"1\\\"\\r\\n                                        formControlName=\\\"stockOnHand\\\"\\r\\n                                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                        [vdrDisabled]=\\\"inventoryIsNotTracked(formGroup)\\\"\\r\\n                                    />\\r\\n                                </clr-input-container>\\r\\n                                <div [class.inventory-untracked]=\\\"inventoryIsNotTracked(formGroup)\\\">\\r\\n                                    <label class=\\\"clr-control-label\\\"\\r\\n                                        >{{ 'catalog.stock-allocated' | translate }}\\r\\n                                        <vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.stock-allocated-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip\\r\\n                                    ></label>\\r\\n                                    <div class=\\\"value\\\">\\r\\n                                        {{ variant.stockAllocated }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div [class.inventory-untracked]=\\\"inventoryIsNotTracked(formGroup)\\\">\\r\\n                                    <label class=\\\"clr-control-label\\\"\\r\\n                                        >{{ 'catalog.stock-saleable' | translate }}\\r\\n                                        <vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.stock-saleable-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip\\r\\n                                    ></label>\\r\\n                                    <div class=\\\"value\\\">\\r\\n                                        {{ getSaleableStockLevel(variant) }}\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <div\\r\\n                                    class=\\\"out-of-stock-threshold-wrapper\\\"\\r\\n                                    [class.inventory-untracked]=\\\"inventoryIsNotTracked(formGroup)\\\"\\r\\n                                >\\r\\n                                    <label class=\\\"clr-control-label\\\"\\r\\n                                        >{{ 'catalog.out-of-stock-threshold' | translate\\r\\n                                        }}<vdr-help-tooltip\\r\\n                                            [content]=\\\"'catalog.out-of-stock-threshold-tooltip' | translate\\\"\\r\\n                                        ></vdr-help-tooltip\\r\\n                                    ></label>\\r\\n                                    <div class=\\\"flex\\\">\\r\\n                                        <clr-input-container>\\r\\n                                            <input\\r\\n                                                clrInput\\r\\n                                                type=\\\"number\\\"\\r\\n                                                [formControl]=\\\"formGroup.get('outOfStockThreshold')\\\"\\r\\n                                                [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                                [vdrDisabled]=\\\"\\r\\n                                                    formGroup.get('useGlobalOutOfStockThreshold')?.value !==\\r\\n                                                        false || inventoryIsNotTracked(formGroup)\\r\\n                                                \\\"\\r\\n                                            />\\r\\n                                        </clr-input-container>\\r\\n                                        <clr-toggle-wrapper>\\r\\n                                            <input\\r\\n                                                type=\\\"checkbox\\\"\\r\\n                                                clrToggle\\r\\n                                                name=\\\"useGlobalOutOfStockThreshold\\\"\\r\\n                                                formControlName=\\\"useGlobalOutOfStockThreshold\\\"\\r\\n                                                [vdrDisabled]=\\\"\\r\\n                                                    !(updatePermission | hasPermission) ||\\r\\n                                                    inventoryIsNotTracked(formGroup)\\r\\n                                                \\\"\\r\\n                                            />\\r\\n                                            <label\\r\\n                                                >{{ 'catalog.use-global-value' | translate }} ({{\\r\\n                                                    globalOutOfStockThreshold\\r\\n                                                }})</label\\r\\n                                            >\\r\\n                                        </clr-toggle-wrapper>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"custom-fields\\\">\\r\\n                            <div class=\\\"variant-form-input-row\\\">\\r\\n                                <section formGroupName=\\\"customFields\\\" *ngIf=\\\"customFields.length\\\">\\r\\n                                    <!--<label>{{ 'common.custom-fields' | translate }}</label>-->\\r\\n                                    <ng-container *ngFor=\\\"let customField of customFields\\\">\\r\\n                                        <vdr-custom-field-control\\r\\n                                            *ngIf=\\\"formGroup.get(['customFields', customField.name])\\\"\\r\\n                                            entityName=\\\"ProductVariant\\\"\\r\\n                                            [compact]=\\\"true\\\"\\r\\n                                            [customFieldsFormGroup]=\\\"formGroup.get('customFields')\\\"\\r\\n                                            [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                                            [customField]=\\\"customField\\\"\\r\\n                                        ></vdr-custom-field-control>\\r\\n                                    </ng-container>\\r\\n                                </section>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card-block\\\">\\r\\n                <div class=\\\"options-facets\\\">\\r\\n                    <vdr-entity-info [entity]=\\\"variant\\\"></vdr-entity-info>\\r\\n                    <div *ngIf=\\\"variant.options.length\\\">\\r\\n                        <div class=\\\"options\\\">\\r\\n                            <vdr-chip\\r\\n                                *ngFor=\\\"let option of variant.options | sort: 'groupId'\\\"\\r\\n                                [colorFrom]=\\\"optionGroupName(option.groupId)\\\"\\r\\n                                [invert]=\\\"true\\\"\\r\\n                                (iconClick)=\\\"editOption(option)\\\"\\r\\n                                [icon]=\\\"(updatePermission | hasPermission) && 'pencil'\\\"\\r\\n                            >\\r\\n                                <span class=\\\"option-group-name\\\">{{ optionGroupName(option.groupId) }}</span>\\r\\n                                {{ optionName(option) }}\\r\\n                            </vdr-chip>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"flex-spacer\\\"></div>\\r\\n                    <div class=\\\"facets\\\">\\r\\n                        <vdr-facet-value-chip\\r\\n                            *ngFor=\\\"let facetValue of existingFacetValues(variant)\\\"\\r\\n                            [facetValue]=\\\"facetValue\\\"\\r\\n                            [removable]=\\\"updatePermission | hasPermission\\\"\\r\\n                            (remove)=\\\"removeFacetValue(variant, facetValue.id)\\\"\\r\\n                        ></vdr-facet-value-chip>\\r\\n                        <vdr-facet-value-chip\\r\\n                            *ngFor=\\\"let facetValue of pendingFacetValues(variant)\\\"\\r\\n                            [facetValue]=\\\"facetValue\\\"\\r\\n                            [removable]=\\\"updatePermission | hasPermission\\\"\\r\\n                            (remove)=\\\"removeFacetValue(variant, facetValue.id)\\\"\\r\\n                        ></vdr-facet-value-chip>\\r\\n                        <button\\r\\n                            *vdrIfPermissions=\\\"updatePermission\\\"\\r\\n                            class=\\\"btn btn-sm btn-secondary\\\"\\r\\n                            (click)=\\\"selectFacetValueClick.emit([variant.id])\\\"\\r\\n                        >\\r\\n                            <clr-icon shape=\\\"plus\\\"></clr-icon>\\r\\n                            {{ 'catalog.add-facets' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <ng-container *vdrIfMultichannel>\\r\\n                <div class=\\\"card-block\\\" *vdrIfDefaultChannelActive>\\r\\n                    <div class=\\\"flex channel-assignment\\\">\\r\\n                        <ng-container *ngFor=\\\"let channel of variant.channels\\\">\\r\\n                            <vdr-chip\\r\\n                                *ngIf=\\\"!isDefaultChannel(channel.code)\\\"\\r\\n                                icon=\\\"times-circle\\\"\\r\\n                                [title]=\\\"'catalog.remove-from-channel' | translate\\\"\\r\\n                                (iconClick)=\\\"\\r\\n                                    removeFromChannel.emit({ channelId: channel.id, variant: variant })\\r\\n                                \\\"\\r\\n                            >\\r\\n                                <vdr-channel-badge [channelCode]=\\\"channel.code\\\"></vdr-channel-badge>\\r\\n                                {{ channel.code | channelCodeToLabel }}\\r\\n                            </vdr-chip>\\r\\n                        </ng-container>\\r\\n                        <button class=\\\"btn btn-sm\\\" (click)=\\\"assignToChannel.emit(variant)\\\">\\r\\n                            <clr-icon shape=\\\"layers\\\"></clr-icon>\\r\\n                            {{ 'catalog.assign-to-channel' | translate }}\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </ng-container>\\r\\n        </ng-container>\\r\\n    </div>\\r\\n    <div class=\\\"table-footer\\\">\\r\\n        <vdr-items-per-page-controls [(itemsPerPage)]=\\\"pagination.itemsPerPage\\\"></vdr-items-per-page-controls>\\r\\n\\r\\n        <vdr-pagination-controls\\r\\n            [currentPage]=\\\"pagination.currentPage\\\"\\r\\n            [itemsPerPage]=\\\"pagination.itemsPerPage\\\"\\r\\n            (pageChange)=\\\"pagination.currentPage = $event\\\"\\r\\n        ></vdr-pagination-controls>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".with-selected{display:flex;min-height:52px;align-items:center;border:1px solid var(--color-component-border-100);border-radius:3px;padding:6px 18px}.with-selected>label,.with-selected vdr-select-toggle{margin-right:12px}.variant-container{transition:background-color .2s;min-height:330px}.variant-container.disabled{background-color:var(--color-component-bg-200)}.variant-container .header-row{display:flex;align-items:center;flex-wrap:wrap}.variant-container .variant-body{display:flex;flex-direction:column}@media screen and (min-width:768px){.variant-container .variant-body{flex-direction:row}}.variant-container .details{display:flex;flex-direction:column;flex:1;margin-right:12px}@media screen and (min-width:768px){.variant-container .details{flex-direction:row;height:36px}}.variant-container .details .name{flex:1}.variant-container .details .name ::ng-deep .clr-control-container{width:100%}.variant-container .details .name ::ng-deep .clr-control-container input.clr-input{min-width:100%}.variant-container .details .sku{width:160px;margin-right:20px;flex:0}.variant-container .details ::ng-deep .name input{min-width:300px}.variant-container .right-controls{display:flex}.variant-container .tax-category-label{margin-top:3px}.variant-container .variant-form-inputs{flex:1;display:flex;flex-direction:column}@media screen and (min-width:768px){.variant-container .variant-form-inputs{flex-direction:row}}.variant-container .variant-form-input-row{display:flex;flex-wrap:wrap}@media screen and (min-width:768px){.variant-container .variant-form-input-row{margin:0 6px 8px 24px}}.variant-container .variant-form-input-row>*{margin-right:24px;margin-bottom:24px}.variant-container .track-inventory-toggle{margin-top:22px}.variant-container .clr-form-control{margin-top:0}.variant-container .facets{display:flex;align-items:center}.variant-container .pricing{display:flex}.variant-container .pricing>div{margin-right:12px}.variant-container .option-group-name{color:var(--color-text-200);text-transform:uppercase;font-size:10px;margin-right:3px;height:11px}.variant-container .options-facets{display:flex;color:var(--color-grey-400)}.channel-assignment{justify-content:flex-end}.channel-assignment .btn{margin:6px 12px 6px 0}.out-of-stock-threshold-wrapper{display:flex;flex-direction:column}.out-of-stock-threshold-wrapper clr-toggle-wrapper{margin-left:24px}.inventory-untracked{opacity:.5}.table-footer{display:flex;align-items:baseline;justify-content:space-between;margin-top:6px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc2.ModalService }, { type: ɵngcc2.DataService }]; }, { assignToChannel: [{\n            type: Output\n        }], removeFromChannel: [{\n            type: Output\n        }], assetChange: [{\n            type: Output\n        }], selectionChange: [{\n            type: Output\n        }], selectFacetValueClick: [{\n            type: Output\n        }], updateProductOption: [{\n            type: Output\n        }], formArray: [{\n            type: Input,\n            args: ['productVariantsFormArray']\n        }], variants: [{\n            type: Input\n        }], channelPriceIncludesTax: [{\n            type: Input\n        }], taxCategories: [{\n            type: Input\n        }], facets: [{\n            type: Input\n        }], optionGroups: [{\n            type: Input\n        }], customFields: [{\n            type: Input\n        }], customOptionFields: [{\n            type: Input\n        }], activeLanguage: [{\n            type: Input\n        }], pendingAssetChanges: [{\n            type: Input\n        }] }); })();\n\nclass ProductVariantsTableComponent {\r\n    constructor(changeDetector) {\r\n        this.changeDetector = changeDetector;\r\n        this.formGroupMap = new Map();\r\n        this.updatePermission = [Permission.UpdateCatalog, Permission.UpdateProduct];\r\n    }\r\n    ngOnInit() {\r\n        this.subscription = this.formArray.valueChanges\r\n            .pipe(map(value => value.length), debounceTime(1), distinctUntilChanged())\r\n            .subscribe(() => {\r\n            this.buildFormGroupMap();\r\n        });\r\n        this.buildFormGroupMap();\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n        }\r\n    }\r\n    getFeaturedAsset(variant) {\r\n        var _a;\r\n        return ((_a = this.pendingAssetChanges[variant.id]) === null || _a === void 0 ? void 0 : _a.featuredAsset) || variant.featuredAsset;\r\n    }\r\n    optionGroupName(optionGroupId) {\r\n        const group = this.optionGroups.find(g => g.id === optionGroupId);\r\n        return group && group.name;\r\n    }\r\n    buildFormGroupMap() {\r\n        this.formGroupMap.clear();\r\n        for (const controlGroup of this.formArray.controls) {\r\n            this.formGroupMap.set(controlGroup.value.id, controlGroup);\r\n        }\r\n        this.changeDetector.markForCheck();\r\n    }\r\n}\nProductVariantsTableComponent.ɵfac = function ProductVariantsTableComponent_Factory(t) { return new (t || ProductVariantsTableComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nProductVariantsTableComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ProductVariantsTableComponent, selectors: [[\"vdr-product-variants-table\"]], inputs: { formArray: [\"productVariantsFormArray\", \"formArray\"], variants: \"variants\", channelPriceIncludesTax: \"channelPriceIncludesTax\", optionGroups: \"optionGroups\", pendingAssetChanges: \"pendingAssetChanges\" }, decls: 20, vars: 20, consts: [[3, \"items\"], [4, \"ngFor\", \"ngForOf\"], [3, \"formGroup\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"left\", \"align-middle\"], [1, \"card-img\"], [1, \"featured-asset\"], [3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"placeholder\", \"\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", 3, \"readonly\", \"placeholder\"], [\"clrInput\", \"\", \"type\", \"text\", \"formControlName\", \"sku\", 3, \"readonly\", \"placeholder\"], [1, \"left\", \"align-middle\", \"price\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\", 4, \"ngIf\"], [\"clrInput\", \"\", \"formControlName\", \"priceWithTax\", 3, \"currencyCode\", \"readonly\", 4, \"ngIf\"], [1, \"left\", \"align-middle\", \"stock\"], [\"clrInput\", \"\", \"type\", \"number\", \"min\", \"0\", \"step\", \"1\", \"formControlName\", \"stockOnHand\", 3, \"readonly\"], [\"type\", \"checkbox\", \"clrToggle\", \"\", \"name\", \"enabled\", \"formControlName\", \"enabled\", 3, \"vdrDisabled\"], [3, \"src\"], [1, \"placeholder\"], [\"shape\", \"image\", \"size\", \"48\"], [\"clrInput\", \"\", \"formControlName\", \"price\", 3, \"currencyCode\", \"readonly\"], [\"clrInput\", \"\", \"formControlName\", \"priceWithTax\", 3, \"currencyCode\", \"readonly\"]], template: function ProductVariantsTableComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"vdr-data-table\", 0);\n        ɵngcc0.ɵɵelement(1, \"vdr-dt-column\");\n        ɵngcc0.ɵɵelementStart(2, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(6);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, ProductVariantsTableComponent_ng_container_8_Template, 3, 1, \"ng-container\", 1);\n        ɵngcc0.ɵɵpipe(9, \"sort\");\n        ɵngcc0.ɵɵelementStart(10, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"vdr-dt-column\");\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(19, ProductVariantsTableComponent_ng_template_19_Template, 1, 1, \"ng-template\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"items\", ctx.variants);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 7, \"common.name\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(7, 9, \"catalog.sku\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(9, 11, ctx.optionGroups, \"id\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 14, \"catalog.price\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 16, \"catalog.stock-on-hand\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 18, \"common.enabled\"));\n    } }, directives: [ɵngcc2.DataTableComponent, ɵngcc2.DataTableColumnComponent, ɵngcc4.NgForOf, ɵngcc4.NgIf, ɵngcc3.NgControlStatusGroup, ɵngcc3.FormGroupDirective, ɵngcc7.ClrInputContainer, ɵngcc2.FormFieldControlDirective, ɵngcc3.DefaultValueAccessor, ɵngcc7.ClrInput, ɵngcc3.NgControlStatus, ɵngcc3.FormControlName, ɵngcc3.NumberValueAccessor, ɵngcc7.ClrCheckboxWrapper, ɵngcc3.CheckboxControlValueAccessor, ɵngcc7.ClrCheckbox, ɵngcc2.DisabledDirective, ɵngcc7.ClrIconCustomTag, ɵngcc2.CurrencyInputComponent], pipes: [ɵngcc5.TranslatePipe, ɵngcc2.SortPipe, ɵngcc2.HasPermissionPipe, ɵngcc2.AssetPreviewPipe, ɵngcc2.StringToColorPipe], styles: [\".placeholder[_ngcontent-%COMP%]{color:var(--color-grey-300)}.price[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .stock[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:96px}td[_ngcontent-%COMP%]{transition:background-color .2s}td.disabled[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}\"], changeDetection: 0 });\r\nProductVariantsTableComponent.ctorParameters = () => [\r\n    { type: ChangeDetectorRef }\r\n];\r\nProductVariantsTableComponent.propDecorators = {\r\n    formArray: [{ type: Input, args: ['productVariantsFormArray',] }],\r\n    variants: [{ type: Input }],\r\n    channelPriceIncludesTax: [{ type: Input }],\r\n    optionGroups: [{ type: Input }],\r\n    pendingAssetChanges: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ProductVariantsTableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-product-variants-table',\n                template: \"<vdr-data-table [items]=\\\"variants\\\">\\r\\n    <vdr-dt-column></vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.name' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'catalog.sku' | translate }}</vdr-dt-column>\\r\\n    <ng-container *ngFor=\\\"let optionGroup of optionGroups | sort: 'id'\\\">\\r\\n        <vdr-dt-column>{{ optionGroup.name }}</vdr-dt-column>\\r\\n    </ng-container>\\r\\n    <vdr-dt-column>{{ 'catalog.price' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'catalog.stock-on-hand' | translate }}</vdr-dt-column>\\r\\n    <vdr-dt-column>{{ 'common.enabled' | translate }}</vdr-dt-column>\\r\\n    <ng-template let-variant=\\\"item\\\" let-i=\\\"index\\\">\\r\\n        <ng-container *ngIf=\\\"formGroupMap.get(variant.id) as formGroup\\\" [formGroup]=\\\"formGroup\\\">\\r\\n            <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                <div class=\\\"card-img\\\">\\r\\n                    <div class=\\\"featured-asset\\\">\\r\\n                        <img\\r\\n                            *ngIf=\\\"getFeaturedAsset(variant) as featuredAsset; else placeholder\\\"\\r\\n                            [src]=\\\"featuredAsset | assetPreview: 'tiny'\\\"\\r\\n                        />\\r\\n                        <ng-template #placeholder>\\r\\n                            <div class=\\\"placeholder\\\">\\r\\n                                <clr-icon shape=\\\"image\\\" size=\\\"48\\\"></clr-icon>\\r\\n                            </div>\\r\\n                        </ng-template>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </td>\\r\\n            <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        formControlName=\\\"name\\\"\\r\\n                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                        [placeholder]=\\\"'common.name' | translate\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td class=\\\"left align-middle\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"text\\\"\\r\\n                        formControlName=\\\"sku\\\"\\r\\n                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                        [placeholder]=\\\"'catalog.sku' | translate\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <ng-container *ngFor=\\\"let option of variant.options | sort: 'groupId'\\\">\\r\\n                <td\\r\\n                    class=\\\"left align-middle\\\"\\r\\n                    [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\"\\r\\n                    [style.color]=\\\"optionGroupName(option.groupId) | stringToColor\\\"\\r\\n                >\\r\\n                    {{ option.name }}\\r\\n                </td>\\r\\n            </ng-container>\\r\\n            <td class=\\\"left align-middle price\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                <clr-input-container>\\r\\n                    <vdr-currency-input\\r\\n                        *ngIf=\\\"!channelPriceIncludesTax\\\"\\r\\n                        clrInput\\r\\n                        [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                        formControlName=\\\"price\\\"\\r\\n                    ></vdr-currency-input>\\r\\n                    <vdr-currency-input\\r\\n                        *ngIf=\\\"channelPriceIncludesTax\\\"\\r\\n                        clrInput\\r\\n                        [currencyCode]=\\\"variant.currencyCode\\\"\\r\\n                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                        formControlName=\\\"priceWithTax\\\"\\r\\n                    ></vdr-currency-input>\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td class=\\\"left align-middle stock\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                <clr-input-container>\\r\\n                    <input\\r\\n                        clrInput\\r\\n                        type=\\\"number\\\"\\r\\n                        min=\\\"0\\\"\\r\\n                        step=\\\"1\\\"\\r\\n                        formControlName=\\\"stockOnHand\\\"\\r\\n                        [readonly]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    />\\r\\n                </clr-input-container>\\r\\n            </td>\\r\\n            <td class=\\\"left align-middle stock\\\" [class.disabled]=\\\"!formGroup.get('enabled')!.value\\\">\\r\\n                <clr-toggle-wrapper>\\r\\n                    <input\\r\\n                        type=\\\"checkbox\\\"\\r\\n                        clrToggle\\r\\n                        name=\\\"enabled\\\"\\r\\n                        formControlName=\\\"enabled\\\"\\r\\n                        [vdrDisabled]=\\\"!(updatePermission | hasPermission)\\\"\\r\\n                    />\\r\\n                </clr-toggle-wrapper>\\r\\n            </td>\\r\\n        </ng-container>\\r\\n    </ng-template>\\r\\n</vdr-data-table>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".placeholder{color:var(--color-grey-300)}.price input,.stock input{max-width:96px}td{transition:background-color .2s}td.disabled{background-color:var(--color-component-bg-200)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { formArray: [{\n            type: Input,\n            args: ['productVariantsFormArray']\n        }], variants: [{\n            type: Input\n        }], channelPriceIncludesTax: [{\n            type: Input\n        }], optionGroups: [{\n            type: Input\n        }], pendingAssetChanges: [{\n            type: Input\n        }] }); })();\n\nclass VariantPriceDetailComponent {\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.priceChange$ = new BehaviorSubject(0);\r\n        this.taxCategoryIdChange$ = new BehaviorSubject('');\r\n    }\r\n    ngOnInit() {\r\n        const taxRates$ = this.dataService.settings\r\n            .getTaxRates(999, 0, 'cache-first')\r\n            .mapStream(data => data.taxRates.items);\r\n        const activeChannel$ = this.dataService.settings\r\n            .getActiveChannel('cache-first')\r\n            .refetchOnChannelChange()\r\n            .mapStream(data => data.activeChannel);\r\n        this.taxRate$ = combineLatest(activeChannel$, taxRates$, this.taxCategoryIdChange$).pipe(map(([channel, taxRates, taxCategoryId]) => {\r\n            const defaultTaxZone = channel.defaultTaxZone;\r\n            if (!defaultTaxZone) {\r\n                return 0;\r\n            }\r\n            const applicableRate = taxRates.find(taxRate => taxRate.zone.id === defaultTaxZone.id && taxRate.category.id === taxCategoryId);\r\n            if (!applicableRate) {\r\n                return 0;\r\n            }\r\n            return applicableRate.value;\r\n        }));\r\n        this.grossPrice$ = combineLatest(this.taxRate$, this.priceChange$).pipe(map(([taxRate, price]) => {\r\n            return Math.round(price * ((100 + taxRate) / 100));\r\n        }));\r\n    }\r\n    ngOnChanges(changes) {\r\n        if ('price' in changes) {\r\n            this.priceChange$.next(changes.price.currentValue);\r\n        }\r\n        if ('taxCategoryId' in changes) {\r\n            this.taxCategoryIdChange$.next(changes.taxCategoryId.currentValue);\r\n        }\r\n    }\r\n}\nVariantPriceDetailComponent.ɵfac = function VariantPriceDetailComponent_Factory(t) { return new (t || VariantPriceDetailComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DataService)); };\nVariantPriceDetailComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: VariantPriceDetailComponent, selectors: [[\"vdr-variant-price-detail\"]], inputs: { priceIncludesTax: \"priceIncludesTax\", price: \"price\", currencyCode: \"currencyCode\", taxCategoryId: \"taxCategoryId\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 5, vars: 5, consts: [[1, \"clr-control-label\"], [\"class\", \"value\", 4, \"ngIf\"], [1, \"value\"]], template: function VariantPriceDetailComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"label\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, VariantPriceDetailComponent_div_3_Template, 4, 8, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(4, VariantPriceDetailComponent_div_4_Template, 6, 14, \"div\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 3, \"catalog.taxes\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.priceIncludesTax);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.priceIncludesTax);\n    } }, directives: [ɵngcc7.ClrLabel, ɵngcc4.NgIf], pipes: [ɵngcc5.TranslatePipe, ɵngcc4.AsyncPipe, ɵngcc2.LocaleCurrencyPipe], styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column}.value[_ngcontent-%COMP%]{margin-top:3px}\"], changeDetection: 0 });\r\nVariantPriceDetailComponent.ctorParameters = () => [\r\n    { type: DataService }\r\n];\r\nVariantPriceDetailComponent.propDecorators = {\r\n    priceIncludesTax: [{ type: Input }],\r\n    price: [{ type: Input }],\r\n    currencyCode: [{ type: Input }],\r\n    taxCategoryId: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(VariantPriceDetailComponent, [{\n        type: Component,\n        args: [{\n                selector: 'vdr-variant-price-detail',\n                template: \"<label class=\\\"clr-control-label\\\">{{ 'catalog.taxes' | translate }}</label>\\r\\n<div *ngIf=\\\"priceIncludesTax\\\" class=\\\"value\\\">\\r\\n    {{ 'catalog.price-includes-tax-at' | translate: { rate: taxRate$ | async } }}\\r\\n</div>\\r\\n<div *ngIf=\\\"!priceIncludesTax\\\" class=\\\"value\\\">\\r\\n    {{\\r\\n        'catalog.price-with-tax-in-default-zone'\\r\\n            | translate: { price: grossPrice$ | async | localeCurrency: currencyCode, rate: taxRate$ | async }\\r\\n    }}\\r\\n</div>\\r\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:flex;flex-direction:column}.value{margin-top:3px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.DataService }]; }, { priceIncludesTax: [{\n            type: Input\n        }], price: [{\n            type: Input\n        }], currencyCode: [{\n            type: Input\n        }], taxCategoryId: [{\n            type: Input\n        }] }); })();\n\nclass CatalogModule {\r\n}\nCatalogModule.ɵfac = function CatalogModule_Factory(t) { return new (t || CatalogModule)(); };\nCatalogModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: CatalogModule });\nCatalogModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ imports: [[SharedModule, RouterModule.forChild(catalogRoutes)]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(CatalogModule, { declarations: function () { return [ProductListComponent, ProductDetailComponent, FacetListComponent, FacetDetailComponent, GenerateProductVariantsComponent, ProductVariantsListComponent, ApplyFacetDialogComponent, AssetListComponent, ProductAssetsComponent, VariantPriceDetailComponent, CollectionListComponent, CollectionDetailComponent, CollectionTreeComponent, CollectionTreeNodeComponent, CollectionContentsComponent, ProductVariantsTableComponent, ProductSearchInputComponent, OptionValueInputComponent, UpdateProductOptionDialogComponent, ProductVariantsEditorComponent, AssignProductsToChannelDialogComponent, AssetDetailComponent, ConfirmVariantDeletionDialogComponent]; }, imports: function () { return [SharedModule, ɵngcc1.RouterModule]; } }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CatalogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [SharedModule, RouterModule.forChild(catalogRoutes)],\n                exports: [],\n                declarations: [\n                    ProductListComponent,\n                    ProductDetailComponent,\n                    FacetListComponent,\n                    FacetDetailComponent,\n                    GenerateProductVariantsComponent,\n                    ProductVariantsListComponent,\n                    ApplyFacetDialogComponent,\n                    AssetListComponent,\n                    ProductAssetsComponent,\n                    VariantPriceDetailComponent,\n                    CollectionListComponent,\n                    CollectionDetailComponent,\n                    CollectionTreeComponent,\n                    CollectionTreeNodeComponent,\n                    CollectionContentsComponent,\n                    ProductVariantsTableComponent,\n                    ProductSearchInputComponent,\n                    OptionValueInputComponent,\n                    UpdateProductOptionDialogComponent,\n                    ProductVariantsEditorComponent,\n                    AssignProductsToChannelDialogComponent,\n                    AssetDetailComponent,\n                    ConfirmVariantDeletionDialogComponent,\n                ]\n            }]\n    }], null, null); })();\n\n// This file was generated by the build-public-api.ts script\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { ApplyFacetDialogComponent, AssetDetailComponent, AssetListComponent, AssetResolver, AssignProductsToChannelDialogComponent, CatalogModule, CollectionContentsComponent, CollectionDetailComponent, CollectionListComponent, CollectionResolver, CollectionTreeComponent, CollectionTreeNodeComponent, ConfirmVariantDeletionDialogComponent, FacetDetailComponent, FacetListComponent, FacetResolver, GenerateProductVariantsComponent, GeneratedVariant, OPTION_VALUE_INPUT_VALUE_ACCESSOR, OptionValueInputComponent, ProductAssetsComponent, ProductDetailComponent, ProductDetailService, ProductListComponent, ProductResolver, ProductSearchInputComponent, ProductVariantsEditorComponent, ProductVariantsListComponent, ProductVariantsResolver, ProductVariantsTableComponent, UpdateProductOptionDialogComponent, VariantPriceDetailComponent, arrayToTree, assetBreadcrumb, catalogRoutes, collectionBreadcrumb, facetBreadcrumb, productBreadcrumb, productVariantEditorBreadcrumb, replaceLast, ɵ0, ɵ1, ɵ2, ɵ3, ɵ4, ɵ5, ɵ6, ɵ7, ɵ8 };\n\n//# sourceMappingURL=vendure-admin-ui-catalog.js.map"]}