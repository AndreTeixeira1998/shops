!function(){"use strict";function t(e,o,n){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(o):r.value}})(e,o,n||e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var o,n=u(t);if(e){var r=u(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return c(this,o)}}function c(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[638],{17638:function(o,i,c){c.r(i),c.d(i,{MarketingModule:function(){return z},PromotionDetailComponent:function(){return S},PromotionListComponent:function(){return $},PromotionResolver:function(){return B},marketingRoutes:function(){return M},promotionBreadcrumb:function(){return G},"\u02750":function(){return R},"\u02751":function(){return H}});var l=c(51694),d=c(21067),m=c(41460),p=c(24791),f=c(49594),v=c(94769),g=c(15405),h=c(72041),Z=c(8603),y=c(86184),A=c(82957),b=c(65519),C=c(70942),x=c(86123),k=c(53198),q=function(){return["enabled"]};function P(t,e){if(1&t&&(l.TgZ(0,"clr-toggle-wrapper"),l._UZ(1,"input",23),l.TgZ(2,"label"),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.qZA()),2&t){var o=l.oxw();l.xp6(1),l.Q6J("formControl",o.detailForm.get(l.DdM(4,q))),l.xp6(2),l.Oqu(l.lcZ(4,2,"common.enabled"))}}function O(t,e){if(1&t){var o=l.EpF();l.TgZ(0,"button",24),l.NdJ("click",function(){return l.CHM(o),l.oxw().create()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&t){var n=l.oxw();l.Q6J("disabled",!n.saveButtonEnabled()),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.create")," ")}}function T(t,e){if(1&t){var o=l.EpF();l.TgZ(0,"button",24),l.NdJ("click",function(){return l.CHM(o),l.oxw(2).save()}),l._uU(1),l.ALo(2,"translate"),l.qZA()}if(2&t){var n=l.oxw(2);l.Q6J("disabled",!n.saveButtonEnabled()),l.xp6(1),l.hij(" ",l.lcZ(2,2,"common.update")," ")}}function w(t,e){1&t&&l.YNc(0,T,3,4,"button",25),2&t&&l.Q6J("vdrIfPermissions","UpdatePromotion")}function _(t,e){if(1&t){var o=l.EpF();l.ynx(0),l.TgZ(1,"vdr-configurable-input",26),l.NdJ("remove",function(t){return l.CHM(o),l.oxw().removeCondition(t)}),l.ALo(2,"hasPermission"),l.qZA(),l.BQk()}if(2&t){var n=e.$implicit,r=e.index,i=l.oxw();l.xp6(1),l.Q6J("readonly",!l.lcZ(2,4,"UpdatePromotion"))("operation",n)("operationDefinition",i.getConditionDefinition(n))("formControlName",r)}}function U(t,e){if(1&t){var o=l.EpF();l.TgZ(0,"button",31),l.NdJ("click",function(){var t=l.CHM(o).$implicit;return l.oxw(2).addCondition(t)}),l._uU(1),l.qZA()}if(2&t){var n=e.$implicit;l.xp6(1),l.hij(" ",n.description," ")}}function L(t,e){if(1&t&&(l.TgZ(0,"vdr-dropdown"),l.TgZ(1,"button",27),l._UZ(2,"clr-icon",28),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"vdr-dropdown-menu",29),l.YNc(6,U,2,1,"button",30),l.qZA(),l.qZA()),2&t){var o=l.oxw();l.xp6(3),l.hij(" ",l.lcZ(4,2,"marketing.add-condition")," "),l.xp6(3),l.Q6J("ngForOf",o.getAvailableConditions())}}function J(t,e){if(1&t){var o=l.EpF();l.TgZ(0,"vdr-configurable-input",32),l.NdJ("remove",function(t){return l.CHM(o),l.oxw().removeAction(t)}),l.ALo(1,"hasPermission"),l.qZA()}if(2&t){var n=e.$implicit,r=e.index,i=l.oxw();l.Q6J("operation",n)("readonly",!l.lcZ(1,4,"UpdatePromotion"))("operationDefinition",i.getActionDefinition(n))("formControlName",r)}}function F(t,e){if(1&t){var o=l.EpF();l.TgZ(0,"button",31),l.NdJ("click",function(){var t=l.CHM(o).$implicit;return l.oxw(2).addAction(t)}),l._uU(1),l.qZA()}if(2&t){var n=e.$implicit;l.xp6(1),l.hij(" ",n.description," ")}}function D(t,e){if(1&t&&(l.TgZ(0,"vdr-dropdown"),l.TgZ(1,"button",27),l._UZ(2,"clr-icon",28),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"vdr-dropdown-menu",29),l.YNc(6,F,2,1,"button",30),l.qZA(),l.qZA()),2&t){var o=l.oxw();l.xp6(3),l.hij(" ",l.lcZ(4,2,"marketing.add-action")," "),l.xp6(3),l.Q6J("ngForOf",o.getAvailableActions())}}var N=function(){return["./create"]};function Q(t,e){1&t&&(l.TgZ(0,"a",6),l._UZ(1,"clr-icon",7),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&t&&(l.Q6J("routerLink",l.DdM(4,N)),l.xp6(2),l.hij(" ",l.lcZ(3,2,"marketing.create-new-promotion")," "))}function I(t,e){if(1&t&&(l.TgZ(0,"vdr-chip"),l._uU(1),l.qZA()),2&t){var o=l.oxw().item;l.xp6(1),l.hij(" ",o.couponCode," ")}}function j(t,e){1&t&&(l.TgZ(0,"vdr-chip"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&t&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"common.disabled")))}var Y=function(t){return["./",t]};function E(t,e){if(1&t){var o=l.EpF();l.TgZ(0,"td",8),l._uU(1),l.qZA(),l.TgZ(2,"td",8),l.YNc(3,I,2,1,"vdr-chip",9),l.qZA(),l.TgZ(4,"td",8),l._uU(5),l.ALo(6,"localeDate"),l.qZA(),l.TgZ(7,"td",8),l._uU(8),l.ALo(9,"localeDate"),l.qZA(),l.TgZ(10,"td",10),l.YNc(11,j,3,3,"vdr-chip",9),l.qZA(),l.TgZ(12,"td",11),l._UZ(13,"vdr-table-row-action",12),l.ALo(14,"translate"),l.qZA(),l.TgZ(15,"td",11),l.TgZ(16,"vdr-dropdown"),l.TgZ(17,"button",13),l._uU(18),l.ALo(19,"translate"),l._UZ(20,"clr-icon",14),l.qZA(),l.TgZ(21,"vdr-dropdown-menu",15),l.TgZ(22,"button",16),l.NdJ("click",function(){var t=l.CHM(o).item;return l.oxw().deletePromotion(t.id)}),l.ALo(23,"hasPermission"),l._UZ(24,"clr-icon",17),l._uU(25),l.ALo(26,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){var n=e.item;l.xp6(1),l.Oqu(n.name),l.xp6(2),l.Q6J("ngIf",n.couponCode),l.xp6(2),l.Oqu(l.xi3(6,10,n.startsAt,"longDate")),l.xp6(3),l.Oqu(l.xi3(9,13,n.endsAt,"longDate")),l.xp6(3),l.Q6J("ngIf",!n.enabled),l.xp6(2),l.Q6J("label",l.lcZ(14,16,"common.edit"))("linkTo",l.VKq(24,Y,n.id)),l.xp6(5),l.hij(" ",l.lcZ(19,18,"common.actions")," "),l.xp6(4),l.Q6J("disabled",!l.lcZ(23,20,"DeletePromotion")),l.xp6(3),l.hij(" ",l.lcZ(26,22,"common.delete")," ")}}var S=function(t){r(i,t);var o=a(i);function i(t,n,r,a,c,s,u){var l;return e(this,i),(l=o.call(this,n,t,r,c)).changeDetector=a,l.dataService=c,l.formBuilder=s,l.notificationService=u,l.conditions=[],l.actions=[],l.allConditions=[],l.allActions=[],l.detailForm=l.formBuilder.group({name:["",d.kI.required],enabled:!0,couponCode:null,perCustomerUsageLimit:null,startsAt:null,endsAt:null,conditions:l.formBuilder.array([]),actions:l.formBuilder.array([])}),l}return n(i,[{key:"ngOnInit",value:function(){var t=this;this.init(),this.promotion$=this.entity$,this.dataService.promotion.getPromotionActionsAndConditions().single$.subscribe(function(e){t.allActions=e.promotionActions,t.allConditions=e.promotionConditions,t.changeDetector.markForCheck()})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"getAvailableConditions",value:function(){var t=this;return this.allConditions.filter(function(e){return!t.conditions.find(function(t){return t.code===e.code})})}},{key:"getConditionDefinition",value:function(t){return this.allConditions.find(function(e){return e.code===t.code})}},{key:"getAvailableActions",value:function(){var t=this;return this.allActions.filter(function(e){return!t.actions.find(function(t){return t.code===e.code})})}},{key:"getActionDefinition",value:function(t){return this.allActions.find(function(e){return e.code===t.code})}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid&&(0!==this.conditions.length||this.detailForm.value.couponCode)&&0!==this.actions.length}},{key:"addCondition",value:function(t){this.addOperation("conditions",t),this.detailForm.markAsDirty()}},{key:"addAction",value:function(t){this.addOperation("actions",t),this.detailForm.markAsDirty()}},{key:"removeCondition",value:function(t){this.removeOperation("conditions",t),this.detailForm.markAsDirty()}},{key:"removeAction",value:function(t){this.removeOperation("actions",t),this.detailForm.markAsDirty()}},{key:"formArrayOf",value:function(t){return this.detailForm.get(t)}},{key:"create",value:function(){var t=this;if(this.detailForm.dirty){var e=this.detailForm.value,o={name:e.name,enabled:!0,couponCode:e.couponCode,perCustomerUsageLimit:e.perCustomerUsageLimit,startsAt:e.startsAt,endsAt:e.endsAt,conditions:this.mapOperationsToInputs(this.conditions,e.conditions),actions:this.mapOperationsToInputs(this.actions,e.actions)};this.dataService.promotion.createPromotion(o).subscribe(function(e){var o=e.createPromotion;switch(o.__typename){case"Promotion":t.notificationService.success((0,p.J)("common.notify-create-success"),{entity:"Promotion"}),t.detailForm.markAsPristine(),t.changeDetector.markForCheck(),t.router.navigate(["../",o.id],{relativeTo:t.route});break;case"MissingConditionsError":t.notificationService.error(o.message)}},function(e){t.notificationService.error((0,p.J)("common.notify-create-error"),{entity:"Promotion"})})}}},{key:"save",value:function(){var t=this;if(this.detailForm.dirty){var e=this.detailForm.value;this.promotion$.pipe((0,v.q)(1),(0,g.zg)(function(o){var n={id:o.id,name:e.name,enabled:e.enabled,couponCode:e.couponCode,perCustomerUsageLimit:e.perCustomerUsageLimit,startsAt:e.startsAt,endsAt:e.endsAt,conditions:t.mapOperationsToInputs(t.conditions,e.conditions),actions:t.mapOperationsToInputs(t.actions,e.actions)};return t.dataService.promotion.updatePromotion(n)})).subscribe(function(e){t.notificationService.success((0,p.J)("common.notify-update-success"),{entity:"Promotion"}),t.detailForm.markAsPristine(),t.changeDetector.markForCheck()},function(e){t.notificationService.error((0,p.J)("common.notify-update-error"),{entity:"Promotion"})})}}},{key:"setFormValues",value:function(t,e){var o=this;this.detailForm.patchValue({name:t.name,enabled:t.enabled,couponCode:t.couponCode,perCustomerUsageLimit:t.perCustomerUsageLimit,startsAt:t.startsAt,endsAt:t.endsAt}),t.conditions.forEach(function(t){o.addOperation("conditions",t)}),t.actions.forEach(function(t){return o.addOperation("actions",t)})}},{key:"mapOperationsToInputs",value:function(t,e){return t.map(function(t,o){return{code:t.code,arguments:Object.values(e[o].args).map(function(e,o){return{name:t.args[o].name,value:(0,f.qrw)(e)}})}})}},{key:"addOperation",value:function(t,e){var o=this,n=this.formArrayOf(t),r="conditions"===t?this.conditions:this.actions;if(-1===n.value.findIndex(function(t){return t.code===e.code})){var i=e.args.reduce(function(n,r){var i,a,c,s;return Object.assign(Object.assign({},n),(a={},c=r.name,s=null!==(i=(0,f.sux)(r.value))&&void 0!==i?i:o.getDefaultArgValue(t,e,r.name),c in a?Object.defineProperty(a,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[c]=s,a))},{});n.push(this.formBuilder.control({code:e.code,args:i})),r.push({code:e.code,args:e.args.map(function(t){return{name:t.name,value:(0,f.sux)(t.value)}})})}}},{key:"getDefaultArgValue",value:function(t,e,o){var n="conditions"===t?this.allConditions.find(function(t){return t.code===e.code}):this.allActions.find(function(t){return t.code===e.code});if(n){var r=n.args.find(function(t){return t.name===o});if(r)return(0,f.NWQ)(r)}throw new Error('Could not determine default value for "argName"')}},{key:"removeOperation",value:function(t,e){var o=this.formArrayOf(t),n="conditions"===t?this.conditions:this.actions,r=o.value.findIndex(function(t){return t.code===e.code});-1!==r&&(o.removeAt(r),n.splice(r,1))}}]),i}(f.UT_);S.\u0275fac=function(t){return new(t||S)(l.Y36(m.F0),l.Y36(m.gz),l.Y36(f.iHG),l.Y36(l.sBO),l.Y36(f.DoR),l.Y36(d.qu),l.Y36(f.gqp))},S.\u0275cmp=l.Xpm({type:S,selectors:[["vdr-promotion-detail"]],features:[l.qOj],decls:46,vars:43,consts:[[1,"flex","clr-align-items-center"],[3,"entity"],[4,"vdrIfPermissions"],["locationId","promotion-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","startsAt",3,"label"],["formControlName","startsAt"],["for","endsAt",3,"label"],["formControlName","endsAt"],["for","couponCode",3,"label"],["id","couponCode","type","text","formControlName","couponCode",3,"readonly"],["for","perCustomerUsageLimit",3,"label"],["id","perCustomerUsageLimit","type","number","min","1","max","999","formControlName","perCustomerUsageLimit",3,"readonly"],[1,"clr-row"],["formArrayName","conditions",1,"clr-col"],[1,"clr-control-label"],[4,"ngFor","ngForOf"],["formArrayName","actions",1,"clr-col"],[3,"operation","readonly","operationDefinition","formControlName","remove",4,"ngFor","ngForOf"],["type","checkbox","clrToggle","","name","enabled",3,"formControl"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"readonly","operation","operationDefinition","formControlName","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],[3,"operation","readonly","operationDefinition","formControlName","remove"]],template:function(t,e){if(1&t&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l.TgZ(2,"div",0),l._UZ(3,"vdr-entity-info",1),l.ALo(4,"async"),l.YNc(5,P,5,5,"clr-toggle-wrapper",2),l.qZA(),l.qZA(),l.TgZ(6,"vdr-ab-right"),l._UZ(7,"vdr-action-bar-items",3),l.YNc(8,O,3,4,"button",4),l.ALo(9,"async"),l.YNc(10,w,1,1,"ng-template",null,5,l.W1O),l.qZA(),l.qZA(),l.TgZ(12,"form",6),l.TgZ(13,"vdr-form-field",7),l.ALo(14,"translate"),l._UZ(15,"input",8),l.ALo(16,"hasPermission"),l.qZA(),l.TgZ(17,"vdr-form-field",9),l.ALo(18,"translate"),l._UZ(19,"vdr-datetime-picker",10),l.qZA(),l.TgZ(20,"vdr-form-field",11),l.ALo(21,"translate"),l._UZ(22,"vdr-datetime-picker",12),l.qZA(),l.TgZ(23,"vdr-form-field",13),l.ALo(24,"translate"),l._UZ(25,"input",14),l.ALo(26,"hasPermission"),l.qZA(),l.TgZ(27,"vdr-form-field",15),l.ALo(28,"translate"),l._UZ(29,"input",16),l.ALo(30,"hasPermission"),l.qZA(),l.TgZ(31,"div",17),l.TgZ(32,"div",18),l.TgZ(33,"label",19),l._uU(34),l.ALo(35,"translate"),l.qZA(),l.YNc(36,_,3,6,"ng-container",20),l.TgZ(37,"div"),l.YNc(38,L,7,4,"vdr-dropdown",2),l.qZA(),l.qZA(),l.TgZ(39,"div",21),l.TgZ(40,"label",19),l._uU(41),l.ALo(42,"translate"),l.qZA(),l.YNc(43,J,2,6,"vdr-configurable-input",22),l.TgZ(44,"div"),l.YNc(45,D,7,4,"vdr-dropdown",2),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){var o=l.MAs(11);l.xp6(3),l.Q6J("entity",l.lcZ(4,19,e.entity$)),l.xp6(2),l.Q6J("vdrIfPermissions","UpdatePromotion"),l.xp6(3),l.Q6J("ngIf",l.lcZ(9,21,e.isNew$))("ngIfElse",o),l.xp6(4),l.Q6J("formGroup",e.detailForm),l.xp6(1),l.Q6J("label",l.lcZ(14,23,"common.name")),l.xp6(2),l.Q6J("readonly",!l.lcZ(16,25,"UpdatePromotion")),l.xp6(2),l.Q6J("label",l.lcZ(18,27,"marketing.starts-at")),l.xp6(3),l.Q6J("label",l.lcZ(21,29,"marketing.ends-at")),l.xp6(3),l.Q6J("label",l.lcZ(24,31,"marketing.coupon-code")),l.xp6(2),l.Q6J("readonly",!l.lcZ(26,33,"UpdatePromotion")),l.xp6(2),l.Q6J("label",l.lcZ(28,35,"marketing.per-customer-limit")),l.xp6(2),l.Q6J("readonly",!l.lcZ(30,37,"UpdatePromotion")),l.xp6(5),l.Oqu(l.lcZ(35,39,"marketing.conditions")),l.xp6(2),l.Q6J("ngForOf",e.conditions),l.xp6(2),l.Q6J("vdrIfPermissions","UpdatePromotion"),l.xp6(3),l.Oqu(l.lcZ(42,41,"marketing.actions")),l.xp6(2),l.Q6J("ngForOf",e.actions),l.xp6(2),l.Q6J("vdrIfPermissions","UpdatePromotion")}},directives:[f.KkL,f.BND,f.Vqt,f.HAh,f.mz,f.WWO,C.O5,d._Y,d.JL,d.sg,f.hgI,f.y_K,d.Fj,d.JJ,d.u,f.IPv,d.qQ,d.Fd,d.wV,d.CE,x.MgK,C.sg,x.PEh,d.Wl,x.KKC,d.oH,f.qq8,f.JOL,f.UaT,x.qvL,f.N9E,f.HH4],pipes:[C.Ov,k.X$,f.j$k],styles:[""],changeDetection:0}),S.ctorParameters=function(){return[{type:m.F0},{type:m.gz},{type:f.iHG},{type:l.sBO},{type:f.DoR},{type:d.qu},{type:f.gqp}]};var $=function(o){r(c,o);var i=a(c);function c(o,n,r,a,l){var m,p;return e(this,c),(p=i.call(this,n,r)).dataService=o,p.notificationService=a,p.modalService=l,p.searchForm=new d.cw({name:new d.NI(""),couponCode:new d.NI("")}),t((m=s(p),u(c.prototype)),"setQueryFn",m).call(m,function(){var t;return(t=p.dataService.promotion).getPromotions.apply(t,arguments).refetchOnChannelChange()},function(t){return t.promotions},function(t,e){return p.createQueryOptions(t,e,p.searchForm.value)}),p}return n(c,[{key:"ngOnInit",value:function(){var e=this;t(u(c.prototype),"ngOnInit",this).call(this),(0,A.T)(this.searchForm.valueChanges.pipe((0,h.b)(250)),this.route.queryParamMap).pipe((0,Z.R)(this.destroy$)).subscribe(function(t){t.params||e.setPageNumber(1),e.refresh()})}},{key:"deletePromotion",value:function(t){var e=this;this.modalService.dialog({title:(0,p.J)("catalog.confirm-delete-promotion"),buttons:[{type:"secondary",label:(0,p.J)("common.cancel")},{type:"danger",label:(0,p.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(o){return o?e.dataService.promotion.deletePromotion(t):b.E})).subscribe(function(){e.notificationService.success((0,p.J)("common.notify-delete-success"),{entity:"Promotion"}),e.refresh()},function(t){e.notificationService.error((0,p.J)("common.notify-delete-error"),{entity:"Promotion"})})}},{key:"createQueryOptions",value:function(t,e,o){var n={};return o.couponCode&&(n.couponCode={contains:o.couponCode}),o.name&&(n.name={contains:o.name}),{options:{skip:t,take:e,filter:n}}}}]),c}(f.t7C);$.\u0275fac=function(t){return new(t||$)(l.Y36(f.DoR),l.Y36(m.F0),l.Y36(m.gz),l.Y36(f.gqp),l.Y36(f.Z7U))},$.\u0275cmp=l.Xpm({type:$,selectors:[["vdr-promotion-list"]],features:[l.qOj],decls:31,vars:32,consts:[[1,"search-form",3,"formGroup"],["type","text","formControlName","name",1,"search-input",3,"placeholder"],["type","text","formControlName","couponCode",1,"search-input",3,"placeholder"],["locationId","promotion-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[1,"align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(t,e){1&t&&(l.TgZ(0,"vdr-action-bar"),l.TgZ(1,"vdr-ab-left"),l.TgZ(2,"form",0),l._UZ(3,"input",1),l.ALo(4,"translate"),l._UZ(5,"input",2),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.TgZ(7,"vdr-ab-right"),l._UZ(8,"vdr-action-bar-items",3),l.YNc(9,Q,4,5,"a",4),l.qZA(),l.qZA(),l.TgZ(10,"vdr-data-table",5),l.NdJ("pageChange",function(t){return e.setPageNumber(t)})("itemsPerPageChange",function(t){return e.setItemsPerPage(t)}),l.ALo(11,"async"),l.ALo(12,"async"),l.ALo(13,"async"),l.ALo(14,"async"),l.TgZ(15,"vdr-dt-column"),l._uU(16),l.ALo(17,"translate"),l.qZA(),l.TgZ(18,"vdr-dt-column"),l._uU(19),l.ALo(20,"translate"),l.qZA(),l.TgZ(21,"vdr-dt-column"),l._uU(22),l.ALo(23,"translate"),l.qZA(),l.TgZ(24,"vdr-dt-column"),l._uU(25),l.ALo(26,"translate"),l.qZA(),l._UZ(27,"vdr-dt-column"),l._UZ(28,"vdr-dt-column"),l._UZ(29,"vdr-dt-column"),l.YNc(30,E,27,26,"ng-template"),l.qZA()),2&t&&(l.xp6(2),l.Q6J("formGroup",e.searchForm),l.xp6(1),l.Q6J("placeholder",l.lcZ(4,12,"marketing.search-by-name")),l.xp6(2),l.Q6J("placeholder",l.lcZ(6,14,"marketing.search-by-coupon-code")),l.xp6(4),l.Q6J("vdrIfPermissions","CreatePromotion"),l.xp6(1),l.Q6J("items",l.lcZ(11,16,e.items$))("itemsPerPage",l.lcZ(12,18,e.itemsPerPage$))("totalItems",l.lcZ(13,20,e.totalItems$))("currentPage",l.lcZ(14,22,e.currentPage$)),l.xp6(6),l.Oqu(l.lcZ(17,24,"common.name")),l.xp6(3),l.Oqu(l.lcZ(20,26,"marketing.coupon-code")),l.xp6(3),l.Oqu(l.lcZ(23,28,"marketing.starts-at")),l.xp6(3),l.Oqu(l.lcZ(26,30,"marketing.ends-at")))},directives:[f.KkL,f.BND,d._Y,d.JL,d.sg,f.y_K,d.Fj,d.JJ,d.u,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,m.yS,x.qvL,C.O5,f.v_8,f.JOL,f.UaT,f.N9E,f.HH4,f.Ywx],pipes:[k.X$,C.Ov,f.HbD,f.j$k],styles:[".search-form[_ngcontent-%COMP%]{padding:0}.search-input[_ngcontent-%COMP%]{margin:6px 8px 0 0;min-width:200px}"],changeDetection:0}),$.ctorParameters=function(){return[{type:f.DoR},{type:m.F0},{type:m.gz},{type:f.gqp},{type:f.Z7U}]};var B=function(t){r(n,t);var o=a(n);function n(t,r){return e(this,n),o.call(this,t,{__typename:"Promotion",id:"",createdAt:"",updatedAt:"",name:"",enabled:!1,conditions:[],actions:[]},function(t){return r.promotion.getPromotion(t).mapStream(function(t){return t.promotion})})}return n}(f.p_9);B.\u0275fac=function(t){return new(t||B)(l.LFG(m.F0),l.LFG(f.DoR))},B.\u0275prov=l.Yz7({factory:function(){return new B(l.LFG(m.F0),l.LFG(f.DoR))},token:B,providedIn:"root"}),B.ctorParameters=function(){return[{type:m.F0},{type:f.DoR}]};var R={breadcrumb:(0,p.J)("breadcrumb.promotions")},H={breadcrumb:G},M=[{path:"promotions",component:$,data:R},{path:"promotions/:id",component:S,resolve:(0,f.Po4)(B),canDeactivate:[f.TSp],data:H}];function G(t,e){return(0,f.YWC)({entity:t.entity,id:e.id,breadcrumbKey:"breadcrumb.promotions",getName:function(t){return t.name},route:"promotions"})}var z=function t(){e(this,t)};z.\u0275fac=function(t){return new(t||z)},z.\u0275mod=l.oAB({type:z}),z.\u0275inj=l.cJS({imports:[[f.m81,m.Bz.forChild(M)]]})}}])}();
//# sourceMappingURL=638-es5.883109055fb006a91207.js.map