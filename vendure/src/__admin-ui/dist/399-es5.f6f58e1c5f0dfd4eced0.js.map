{"version":3,"mappings":"ynOAEaA,EAA0BC,KAA1BD,qLAUAE,EAAuBD,KAAvBC,+ICmBNC,aAGLC,WACUC,EACEC,EACFC,EACAC,aAHAC,mBACEA,mBACFA,sBACAA,2BAERA,KAAKC,KAAOD,KAAKE,YAAYC,MAAM,CACjCC,OAAQ,CAAC,eACTC,UAAW,CAAC,uDAIVC,8JACEN,KAAKO,YACRC,MAAMf,GACNgB,UAAWb,mBAAWA,EAAEc,kBACxBC,UAAWf,YACVI,EAAKC,KAAKW,SAASR,OAAUS,SAASjB,EAAOQ,QAC7CJ,EAAKC,KAAKW,SAASP,UAAaQ,SAASjB,EAAOS,aANhDC,kEAUAQ,sJAEEd,KAAKC,KAAKc,MAFZD,gBAG4BE,OAAtBpB,EAAYI,KAAKC,KAAKe,MAH5BF,SAIMd,KAAKO,YACRU,OAAO1B,EAAyB,CAC/B2B,MAAO,CAAEd,OAAQR,EAAUQ,OAAQC,UAAWT,EAAUS,aAEzDc,YARHL,OAUFd,KAAKC,KAAKmB,iBACVpB,KAAKqB,eAAeC,eACpBtB,KAAKuB,oBAAoBC,QAAQ,+BAAgC,CAC/DC,OAAQ,qBAbRX,gDAgBFd,KAAKuB,oBAAoBG,MAAM,6BAA8B,CAC3DD,OAAQ,qBAjBRX,gEAiBQpB,sCA1CHA,GAAkBiC,6EAAlBjC,EAAkBkC,oaAvB3BD,iBACEA,iBACEA,kBACEA,qBACEA,4BACEA,mBACFA,QACAA,4BACEA,mBACFA,QACAA,oBAEEA,gCAAS9B,WAGT8B,kBACFA,QACFA,QACFA,QACFA,QACFA,eAlBuBA,mCAWbA,yICDPE,mEAAMA,6DAHA,GAAEC,SAXJ,CACPC,MACAC,cAAsB,CACpB,CACEC,KAAM,GACNC,UAAW,OACXC,UAAWzC,EACX0C,KAAM,CAAEC,WAAY","names":["p","a","y","u","constructor","o","r","m","v","this","form","formBuilder","group","secret","publicKey","ngOnInit","dataService","query","mapStream","sendCloudConfig","subscribe","controls","setValue","save","dirty","value","mutate","input","toPromise","markAsPristine","changeDetector","markForCheck","notificationService","success","entity","error","e","selectors","n","imports","c","f","path","pathMatch","component","data","breadcrumb"],"sources":["webpack:///src/extensions/fb7f8506373513100ed78ddac8513b479688a3f0598a9e860d7fddc3e44a9d43/queries.ts","webpack:///src/extensions/fb7f8506373513100ed78ddac8513b479688a3f0598a9e860d7fddc3e44a9d43/sendcloud.component.ts","webpack:///src/extensions/fb7f8506373513100ed78ddac8513b479688a3f0598a9e860d7fddc3e44a9d43/sendcloud.module.ts"],"sourcesContent":["import gql from 'graphql-tag';\r\n\r\nexport const UPDATE_SENDCLOUD_CONFIG = gql`\r\n  mutation updateSendCloudConfig($input: SendCloudConfigInput) {\r\n    updateSendCloudConfig(input: $input) {\r\n      id\r\n      secret\r\n      publicKey\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_SENDCLOUD_CONFIG = gql`\r\n  query sendCloudConfig {\r\n    sendCloudConfig {\r\n      id\r\n      secret\r\n      publicKey\r\n    }\r\n  }\r\n`;\r\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { DataService, NotificationService } from '@vendure/admin-ui/core';\r\nimport { GET_SENDCLOUD_CONFIG, UPDATE_SENDCLOUD_CONFIG } from './queries';\r\n\r\n@Component({\r\n  selector: 'sendcloud-component',\r\n  template: `\r\n    <div class=\"clr-row\">\r\n      <div class=\"clr-col\">\r\n        <form class=\"form\" [formGroup]=\"form\">\r\n          <section class=\"form-block\">\r\n            <vdr-form-field label=\"SendCloud secret\" for=\"apiKey\">\r\n              <input id=\"secret\" type=\"text\" formControlName=\"secret\" />\r\n            </vdr-form-field>\r\n            <vdr-form-field label=\"SendCloud public key\" for=\"publicKey\">\r\n              <input id=\"publicKey\" type=\"text\" formControlName=\"publicKey\" />\r\n            </vdr-form-field>\r\n            <button\r\n              class=\"btn btn-primary\"\r\n              (click)=\"save()\"\r\n              [disabled]=\"form.invalid || form.pristine\"\r\n            >\r\n              Save\r\n            </button>\r\n          </section>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  `,\r\n})\r\nexport class SendcloudComponent implements OnInit {\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    protected dataService: DataService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private notificationService: NotificationService\r\n  ) {\r\n    this.form = this.formBuilder.group({\r\n      secret: ['your-secret'],\r\n      publicKey: ['your-public-key'],\r\n    });\r\n  }\r\n\r\n  async ngOnInit(): Promise<void> {\r\n    await this.dataService\r\n      .query(GET_SENDCLOUD_CONFIG)\r\n      .mapStream((d: any) => d.sendCloudConfig)\r\n      .subscribe((config) => {\r\n        this.form.controls['secret'].setValue(config.secret);\r\n        this.form.controls['publicKey'].setValue(config.publicKey);\r\n      });\r\n  }\r\n\r\n  async save(): Promise<void> {\r\n    try {\r\n      if (this.form.dirty) {\r\n        const formValue = this.form.value;\r\n        await this.dataService\r\n          .mutate(UPDATE_SENDCLOUD_CONFIG, {\r\n            input: { secret: formValue.secret, publicKey: formValue.publicKey },\r\n          })\r\n          .toPromise();\r\n      }\r\n      this.form.markAsPristine();\r\n      this.changeDetector.markForCheck();\r\n      this.notificationService.success('common.notify-update-success', {\r\n        entity: 'SendCloud config',\r\n      });\r\n    } catch (e) {\r\n      this.notificationService.error('common.notify-update-error', {\r\n        entity: 'SendCloud config',\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { addNavMenuItem, SharedModule } from '@vendure/admin-ui/core';\r\nimport { SendcloudComponent } from './sendcloud.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        pathMatch: 'full',\r\n        component: SendcloudComponent,\r\n        data: { breadcrumb: 'SendCloud' },\r\n      },\r\n    ]),\r\n  ],\r\n  providers: [],\r\n  declarations: [SendcloudComponent],\r\n})\r\nexport class SendcloudModule {}\r\n"]}