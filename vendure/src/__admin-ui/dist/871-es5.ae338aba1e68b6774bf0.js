!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n,r){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,n,r||e)}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[871],{74871:function(i,o,c){c.r(o),c.d(o,{AddCountryToZoneDialogComponent:function(){return Dn},AdminDetailComponent:function(){return Nn},AdministratorListComponent:function(){return Qn},AdministratorResolver:function(){return mr},ChannelDetailComponent:function(){return Mn},ChannelListComponent:function(){return Yn},ChannelResolver:function(){return pr},CountryDetailComponent:function(){return Rn},CountryListComponent:function(){return $n},CountryResolver:function(){return fr},GlobalSettingsComponent:function(){return jn},GlobalSettingsResolver:function(){return gr},PaymentMethodDetailComponent:function(){return zn},PaymentMethodListComponent:function(){return En},PaymentMethodResolver:function(){return vr},PermissionGridComponent:function(){return Hn},ProfileComponent:function(){return Gn},ProfileResolver:function(){return hr},RoleDetailComponent:function(){return Bn},RoleListComponent:function(){return Vn},RoleResolver:function(){return Zr},SettingsModule:function(){return Vr},ShippingEligibilityTestResultComponent:function(){return Kn},ShippingMethodDetailComponent:function(){return Wn},ShippingMethodListComponent:function(){return Xn},ShippingMethodResolver:function(){return yr},ShippingMethodTestResultComponent:function(){return er},TaxCategoryDetailComponent:function(){return tr},TaxCategoryListComponent:function(){return nr},TaxCategoryResolver:function(){return br},TaxRateDetailComponent:function(){return rr},TaxRateListComponent:function(){return ir},TaxRateResolver:function(){return Ar},TestAddressFormComponent:function(){return or},TestOrderBuilderComponent:function(){return ar},ZoneDetailDialogComponent:function(){return sr},ZoneListComponent:function(){return cr},ZoneMemberControlsDirective:function(){return lr},ZoneMemberListComponent:function(){return dr},ZoneMemberListHeaderDirective:function(){return ur},administratorBreadcrumb:function(){return Rr},channelBreadcrumb:function(){return $r},countryBreadcrumb:function(){return Hr},paymentMethodBreadcrumb:function(){return Br},roleBreadcrumb:function(){return jr},settingsRoutes:function(){return Yr},shippingMethodBreadcrumb:function(){return Gr},taxCategoryBreadcrumb:function(){return zr},taxRateBreadcrumb:function(){return Er},"\u02750":function(){return xr},"\u02751":function(){return Tr},"\u027510":function(){return wr},"\u027511":function(){return Ir},"\u027512":function(){return Sr},"\u027513":function(){return Pr},"\u027514":function(){return Or},"\u027515":function(){return Dr},"\u027516":function(){return Nr},"\u027517":function(){return Qr},"\u027518":function(){return Mr},"\u02752":function(){return qr},"\u02753":function(){return Cr},"\u02754":function(){return kr},"\u02755":function(){return Lr},"\u02756":function(){return Fr},"\u02757":function(){return Jr},"\u02758":function(){return _r},"\u02759":function(){return Ur}});var u=c(51694),f=c(49594),v=c(37097),h=c(94769),Z=c(15405),y=c(86184),b=c(69874),A=c(9219),x=c(73341),T=c(8603),q=c(90380),C=c(1956),k=c(21067),L=c(41460),F=c(24791),J=c(61607),_=c(65519),U=c(22277),w=c(75250),I=c(80188),S=c(82957),P=c(98059),O=c(84435),D=c(70942),N=c(53198),Q=c(86123),M=c(38564),Y=c(34131),R=function(e){return{zoneName:e}};function $(e,t){if(1&e&&(u._uU(0),u.ALo(1,"translate")),2&e){var n=u.oxw();u.Oqu(u.xi3(1,1,"settings.add-countries-to-zone",u.VKq(4,R,n.zoneName)))}}function j(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",3),u.NdJ("click",function(){return u.CHM(n),u.oxw().cancel()}),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"button",4),u.NdJ("click",function(){return u.CHM(n),u.oxw().add()}),u._uU(4),u.ALo(5,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.xp6(1),u.Oqu(u.lcZ(2,3,"common.cancel")),u.xp6(2),u.Q6J("disabled",!r.selectedMemberIds.length),u.xp6(1),u.hij(" ",u.xi3(5,5,"settings.add-countries-to-zone",u.VKq(8,R,r.zoneName))," ")}}function z(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function E(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function H(e,t){1&e&&u.YNc(0,E,3,4,"button",20),2&e&&u.Q6J("vdrIfPermissions","UpdateAdministrator")}function G(e,t){1&e&&(u.TgZ(0,"vdr-form-field",21),u.ALo(1,"translate"),u._UZ(2,"input",22),u.qZA()),2&e&&u.Q6J("label",u.lcZ(1,1,"settings.password"))}function B(e,t){1&e&&(u.TgZ(0,"vdr-form-field",23),u.ALo(1,"translate"),u._UZ(2,"input",22),u.qZA()),2&e&&u.Q6J("label",u.lcZ(1,2,"settings.password"))("readOnlyToggle",!0)}function V(e,t){if(1&e&&u._UZ(0,"vdr-custom-field-control",27),2&e){var n=u.oxw().$implicit,r=u.oxw(2);u.Q6J("customFieldsFormGroup",r.detailForm.get("customFields"))("customField",n)}}function K(e,t){if(1&e&&(u.ynx(0),u.YNc(1,V,1,2,"vdr-custom-field-control",26),u.BQk()),2&e){var n=t.$implicit,r=u.oxw(2);u.xp6(1),u.Q6J("ngIf",r.customFieldIsSet(n.name))}}function W(e,t){if(1&e&&(u.TgZ(0,"section",24),u.TgZ(1,"label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,K,2,1,"ng-container",25),u.qZA()),2&e){var n=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"common.custom-fields")),u.xp6(2),u.Q6J("ngForOf",n.customFields)}}function X(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"li",28),u.TgZ(1,"button",29),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().selectedChannelId=e.channelId}),u._uU(2),u.ALo(3,"translate"),u.ALo(4,"channelCodeToLabel"),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit,i=u.oxw();u.xp6(1),u.ekj("active",i.selectedChannelId===r.channelId),u.Q6J("id",r.channelId),u.uIk("aria-selected",i.selectedChannelId===r.channelId),u.xp6(1),u.hij(" ",u.lcZ(3,5,u.lcZ(4,7,r.channelCode))," ")}}var ee=function(){return["./create"]};function te(e,t){1&e&&(u.TgZ(0,"a",3),u._UZ(1,"clr-icon",4),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,ee)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"admin.create-new-administrator")," "))}var ne=function(e){return["./",e]};function re(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td",5),u._uU(1),u.qZA(),u.TgZ(2,"td",5),u._uU(3),u.qZA(),u.TgZ(4,"td",5),u._uU(5),u.qZA(),u.TgZ(6,"td",6),u._UZ(7,"vdr-table-row-action",7),u.ALo(8,"translate"),u.qZA(),u.TgZ(9,"td"),u.TgZ(10,"vdr-dropdown"),u.TgZ(11,"button",8),u._uU(12),u.ALo(13,"translate"),u._UZ(14,"clr-icon",9),u.qZA(),u.TgZ(15,"vdr-dropdown-menu",10),u.TgZ(16,"button",11),u.NdJ("click",function(){var e=u.CHM(n).item;return u.oxw().deleteAdministrator(e)}),u.ALo(17,"hasPermission"),u._UZ(18,"clr-icon",12),u._uU(19),u.ALo(20,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.item;u.xp6(1),u.Oqu(r.firstName),u.xp6(2),u.Oqu(r.lastName),u.xp6(2),u.Oqu(r.emailAddress),u.xp6(2),u.Q6J("label",u.lcZ(8,8,"common.edit"))("linkTo",u.VKq(16,ne,r.id)),u.xp6(5),u.hij(" ",u.lcZ(13,10,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(17,12,"DeleteAdministrator")),u.xp6(3),u.hij(" ",u.lcZ(20,14,"common.delete")," ")}}function ie(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",!r.saveButtonEnabled()),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function oe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("disabled",!r.saveButtonEnabled()),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}var ae=function(){return["SuperAdmin","UpdateChannel"]};function se(e,t){1&e&&u.YNc(0,oe,3,4,"button",24),2&e&&u.Q6J("vdrIfPermissions",u.DdM(1,ae))}function ce(e,t){if(1&e&&(u.TgZ(0,"option",25),u._uU(1),u.ALo(2,"localeCurrencyName"),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n),u.xp6(1),u.Oqu(u.lcZ(2,2,n))}}function le(e,t){if(1&e&&(u.TgZ(0,"option",25),u._uU(1),u.ALo(2,"localeLanguageName"),u.ALo(3,"uppercase"),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n),u.xp6(1),u.AsE(" ",u.lcZ(2,3,n)," (",u.lcZ(3,5,n),") ")}}function ue(e,t){if(1&e&&(u.TgZ(0,"option",25),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.id),u.xp6(1),u.Oqu(n.name)}}function de(e,t){1&e&&(u.TgZ(0,"clr-alert",26),u.TgZ(1,"clr-alert-item"),u.TgZ(2,"span",27),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.Q6J("clrAlertClosable",!1),u.xp6(3),u.hij(" ",u.lcZ(4,2,"error.no-default-tax-zone-set")," "))}function me(e,t){if(1&e&&(u.TgZ(0,"option",25),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.id),u.xp6(1),u.Oqu(n.name)}}function pe(e,t){1&e&&(u.TgZ(0,"clr-alert",28),u.TgZ(1,"clr-alert-item"),u.TgZ(2,"span",27),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.Q6J("clrAlertClosable",!1),u.xp6(3),u.hij(" ",u.lcZ(4,2,"error.no-default-shipping-zone-set")," "))}function fe(e,t){if(1&e&&u._UZ(0,"vdr-custom-field-control",32),2&e){var n=u.oxw().$implicit,r=u.oxw(2);u.Q6J("customFieldsFormGroup",r.detailForm.get("customFields"))("customField",n)}}function ge(e,t){if(1&e&&(u.ynx(0),u.YNc(1,fe,1,2,"vdr-custom-field-control",31),u.BQk()),2&e){var n=t.$implicit,r=u.oxw(2);u.xp6(1),u.Q6J("ngIf",r.customFieldIsSet(n.name))}}function ve(e,t){if(1&e&&(u.TgZ(0,"section",29),u.TgZ(1,"label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,ge,2,1,"ng-container",30),u.qZA()),2&e){var n=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"common.custom-fields")),u.xp6(2),u.Q6J("ngForOf",n.customFields)}}function he(e,t){1&e&&(u.TgZ(0,"a",3),u._UZ(1,"clr-icon",4),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,ee)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"settings.create-new-channel")," "))}var Ze=function(){return["SuperAdmin","DeleteChannel"]};function ye(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td",5),u._UZ(1,"vdr-channel-badge",6),u._uU(2),u.ALo(3,"translate"),u.ALo(4,"channelCodeToLabel"),u.qZA(),u.TgZ(5,"td",7),u._UZ(6,"vdr-table-row-action",8),u.ALo(7,"translate"),u.qZA(),u.TgZ(8,"td",7),u.TgZ(9,"vdr-dropdown"),u.TgZ(10,"button",9),u._uU(11),u.ALo(12,"translate"),u._UZ(13,"clr-icon",10),u.qZA(),u.TgZ(14,"vdr-dropdown-menu",11),u.TgZ(15,"button",12),u.NdJ("click",function(){var e=u.CHM(n).item;return u.oxw().deleteChannel(e.id)}),u.ALo(16,"hasPermission"),u._UZ(17,"clr-icon",13),u._uU(18),u.ALo(19,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.item,i=u.oxw();u.xp6(1),u.Q6J("channelCode",r.code),u.xp6(1),u.hij(" ",u.lcZ(3,8,u.lcZ(4,10,r.code))," "),u.xp6(4),u.Q6J("label",u.lcZ(7,12,"common.edit"))("linkTo",u.VKq(20,ne,r.id)),u.xp6(4),u.Q6J("disabled",i.isDefaultChannel(r.code)),u.xp6(1),u.hij(" ",u.lcZ(12,14,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(16,16,u.DdM(22,Ze))),u.xp6(3),u.hij(" ",u.lcZ(19,18,"common.delete")," ")}}function be(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function Ae(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function xe(e,t){if(1&e&&u.YNc(0,Ae,3,4,"button",13),2&e){var n=u.oxw();u.Q6J("vdrIfPermissions",n.updatePermission)}}function Te(e,t){1&e&&(u.TgZ(0,"a",5),u._UZ(1,"clr-icon",6),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,ee)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"settings.create-new-country")," "))}var qe=function(e){return{contents:e}},Ce=function(e){return["/settings","zones",e]};function ke(e,t){if(1&e&&(u.TgZ(0,"a",16),u.TgZ(1,"vdr-chip",17),u._uU(2),u.qZA(),u.qZA()),2&e){var n=t.$implicit;u.Q6J("routerLink",u.VKq(5,Ce,u.VKq(3,qe,n.id))),u.xp6(1),u.Q6J("colorFrom",n.name),u.xp6(1),u.Oqu(n.name)}}var Le=function(){return["DeleteSettings","DeleteCountry"]};function Fe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td",7),u._uU(1),u.qZA(),u.TgZ(2,"td",7),u._uU(3),u.qZA(),u.TgZ(4,"td",7),u.YNc(5,ke,3,7,"a",8),u.qZA(),u.TgZ(6,"td",7),u._UZ(7,"clr-icon"),u.qZA(),u.TgZ(8,"td",9),u._UZ(9,"vdr-table-row-action",10),u.ALo(10,"translate"),u.qZA(),u.TgZ(11,"td",9),u.TgZ(12,"vdr-dropdown"),u.TgZ(13,"button",11),u._uU(14),u.ALo(15,"translate"),u._UZ(16,"clr-icon",12),u.qZA(),u.TgZ(17,"vdr-dropdown-menu",13),u.TgZ(18,"button",14),u.NdJ("click",function(){var e=u.CHM(n).item;return u.oxw().deleteCountry(e.id)}),u.ALo(19,"hasPermission"),u._UZ(20,"clr-icon",15),u._uU(21),u.ALo(22,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.item;u.xp6(1),u.Oqu(r.code),u.xp6(2),u.Oqu(r.name),u.xp6(2),u.Q6J("ngForOf",r.zones),u.xp6(2),u.ekj("is-success",r.enabled),u.uIk("shape",r.enabled?"check":"times"),u.xp6(2),u.Q6J("label",u.lcZ(10,11,"common.edit"))("linkTo",u.VKq(19,ne,r.id)),u.xp6(5),u.hij(" ",u.lcZ(15,13,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(19,15,u.DdM(21,Le))),u.xp6(3),u.hij(" ",u.lcZ(22,17,"common.delete")," ")}}var Je=function(){return["CreateSettings","CreateCountry"]};function _e(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){return u.CHM(n),u.oxw().save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function Ue(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"span",13),u.NdJ("click",function(){var e=u.CHM(n),t=e.item;return e.clear.call(null,t)}),u._uU(1," \xd7 "),u.qZA(),u.TgZ(2,"span",14),u._uU(3),u.ALo(4,"localeLanguageName"),u.qZA()}if(2&e){var r=t.item;u.xp6(3),u.AsE("",u.lcZ(4,2,r)," (",r,")")}}function we(e,t){if(1&e&&(u._uU(0),u.ALo(1,"localeLanguageName")),2&e){var n=t.item;u.AsE(" ",u.lcZ(1,2,n)," (",n,") ")}}function Ie(e,t){if(1&e&&u._UZ(0,"vdr-custom-field-control",18),2&e){var n=u.oxw().$implicit,r=u.oxw(2);u.Q6J("customFieldsFormGroup",r.detailForm.get("customFields"))("customField",n)}}function Se(e,t){if(1&e&&(u.ynx(0),u.YNc(1,Ie,1,2,"vdr-custom-field-control",17),u.BQk()),2&e){var n=t.$implicit,r=u.oxw(2);u.xp6(1),u.Q6J("ngIf",r.customFieldIsSet(n.name))}}function Pe(e,t){if(1&e&&(u.TgZ(0,"section",15),u.TgZ(1,"label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,Se,2,1,"ng-container",16),u.qZA()),2&e){var n=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"common.custom-fields")),u.xp6(2),u.Q6J("ngForOf",n.customFields)}}function Oe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",r.detailForm.pristine||r.detailForm.invalid),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function De(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("disabled",r.detailForm.pristine||r.detailForm.invalid||!r.selectedHandler),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function Ne(e,t){if(1&e&&u.YNc(0,De,3,4,"button",6),2&e){var n=u.oxw();u.Q6J("vdrIfPermissions",n.updatePermission)}}function Qe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"vdr-configurable-input",21),u.NdJ("remove",function(){return u.CHM(n),u.oxw(2).removeChecker()}),u.ALo(1,"hasPermission"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("operation",r.selectedChecker)("operationDefinition",r.selectedCheckerDefinition)("readonly",!u.lcZ(1,3,r.updatePermission))}}function Me(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",26),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw(3).selectChecker(e)}),u._uU(1),u.qZA()}if(2&e){var r=t.$implicit;u.xp6(1),u.hij(" ",r.description," ")}}function Ye(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"vdr-dropdown"),u.TgZ(2,"button",22),u._UZ(3,"clr-icon",23),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.TgZ(6,"vdr-dropdown-menu",24),u.YNc(7,Me,2,1,"button",25),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.oxw(2);u.xp6(4),u.hij(" ",u.lcZ(5,2,"common.select")," "),u.xp6(3),u.Q6J("ngForOf",n.checkers)}}function Re(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"vdr-configurable-input",27),u.NdJ("remove",function(){return u.CHM(n),u.oxw(2).removeHandler()}),u.ALo(1,"hasPermission"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("operation",r.selectedHandler)("operationDefinition",r.selectedHandlerDefinition)("readonly",!u.lcZ(1,3,r.updatePermission))}}function $e(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",26),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw(3).selectHandler(e)}),u._uU(1),u.qZA()}if(2&e){var r=t.$implicit;u.xp6(1),u.hij(" ",r.description," ")}}function je(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"vdr-dropdown"),u.TgZ(2,"button",22),u._UZ(3,"clr-icon",23),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.TgZ(6,"vdr-dropdown-menu",24),u.YNc(7,$e,2,1,"button",25),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.oxw(2);u.xp6(4),u.hij(" ",u.lcZ(5,2,"common.select")," "),u.xp6(3),u.Q6J("ngForOf",n.handlers)}}function ze(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"form",7),u.TgZ(1,"vdr-form-field",8),u.ALo(2,"translate"),u.TgZ(3,"input",9),u.NdJ("input",function(e){var t=u.CHM(n).ngIf;return u.oxw().updateCode(t.code,e.target.value)}),u.ALo(4,"hasPermission"),u.qZA(),u.qZA(),u.TgZ(5,"vdr-form-field",10),u.ALo(6,"translate"),u.ALo(7,"hasPermission"),u._UZ(8,"input",11),u.ALo(9,"hasPermission"),u.qZA(),u._UZ(10,"vdr-rich-text-editor",12),u.ALo(11,"hasPermission"),u.ALo(12,"translate"),u.TgZ(13,"vdr-form-field",13),u.ALo(14,"translate"),u.TgZ(15,"clr-toggle-wrapper"),u._UZ(16,"input",14),u.ALo(17,"hasPermission"),u.qZA(),u.qZA(),u.TgZ(18,"div",15),u.TgZ(19,"div",16),u.TgZ(20,"label",17),u._uU(21),u.ALo(22,"translate"),u.qZA(),u.YNc(23,Qe,2,5,"vdr-configurable-input",18),u.YNc(24,Ye,8,4,"div",19),u.qZA(),u.TgZ(25,"div",16),u.TgZ(26,"label",17),u._uU(27),u.ALo(28,"translate"),u.qZA(),u.YNc(29,Re,2,5,"vdr-configurable-input",20),u.YNc(30,je,8,4,"div",19),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("formGroup",r.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(2,16,"common.name")),u.xp6(2),u.Q6J("readonly",!u.lcZ(4,18,r.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(6,20,"common.code"))("readOnlyToggle",u.lcZ(7,22,r.updatePermission)),u.xp6(3),u.Q6J("readonly",!u.lcZ(9,24,r.updatePermission)),u.xp6(2),u.Q6J("readonly",!u.lcZ(11,26,r.updatePermission))("label",u.lcZ(12,28,"common.description")),u.xp6(3),u.Q6J("label",u.lcZ(14,30,"common.enabled")),u.xp6(3),u.Q6J("vdrDisabled",!u.lcZ(17,32,r.updatePermission)),u.xp6(5),u.Oqu(u.lcZ(22,34,"settings.payment-eligibility-checker")),u.xp6(2),u.Q6J("ngIf",r.selectedChecker&&r.selectedCheckerDefinition),u.xp6(1),u.Q6J("ngIf",!r.selectedChecker||!r.selectedCheckerDefinition),u.xp6(3),u.Oqu(u.lcZ(28,36,"settings.payment-handler")),u.xp6(2),u.Q6J("ngIf",r.selectedHandler&&r.selectedHandlerDefinition),u.xp6(1),u.Q6J("ngIf",!r.selectedHandler||!r.selectedHandlerDefinition)}}function Ee(e,t){1&e&&(u.TgZ(0,"a",3),u._UZ(1,"clr-icon",4),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,ee)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"settings.create-new-payment-method")," "))}var He=function(){return["DeleteSettings","DeletePaymentMethod"]};function Ge(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td",5),u._uU(1),u.qZA(),u.TgZ(2,"td",5),u._uU(3),u.qZA(),u.TgZ(4,"td",6),u._UZ(5,"vdr-table-row-action",7),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"td",6),u.TgZ(8,"vdr-dropdown"),u.TgZ(9,"button",8),u._uU(10),u.ALo(11,"translate"),u._UZ(12,"clr-icon",9),u.qZA(),u.TgZ(13,"vdr-dropdown-menu",10),u.TgZ(14,"button",11),u.NdJ("click",function(){var e=u.CHM(n).item;return u.oxw().deletePaymentMethod(e.id)}),u.ALo(15,"hasPermission"),u._UZ(16,"clr-icon",12),u._uU(17),u.ALo(18,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.item;u.xp6(1),u.Oqu(r.code),u.xp6(2),u.Oqu(r.enabled),u.xp6(2),u.Q6J("label",u.lcZ(6,7,"common.edit"))("linkTo",u.VKq(15,ne,r.id)),u.xp6(5),u.hij(" ",u.lcZ(11,9,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(15,11,u.DdM(17,He))),u.xp6(3),u.hij(" ",u.lcZ(18,13,"common.delete")," ")}}var Be=function(){return["CreateSettings","CreatePaymentMethod"]};function Ve(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",4),u.NdJ("click",function(){u.CHM(n);var e=u.oxw().$implicit;return u.oxw().toggleAll(e.permissions)}),u._uU(1),u.ALo(2,"translate"),u.qZA()}2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"common.toggle-all")," "))}function Ke(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td"),u.TgZ(1,"vdr-select-toggle",5),u.NdJ("selectedChange",function(e){var t=u.CHM(n).$implicit;return u.oxw(2).setPermission(t.name,e)}),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit,i=u.oxw().$implicit,o=u.oxw();u.uIk("colspan",1===i.permissions.length?4:1),u.xp6(1),u.Q6J("title",r.description)("label",r.name)("disabled",o.readonly)("selected",null==o.activePermissions?null:o.activePermissions.includes(r.name))}}function We(e,t){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"td",2),u.TgZ(2,"div"),u.TgZ(3,"strong"),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.qZA(),u.TgZ(6,"small"),u._uU(7),u.ALo(8,"translate"),u.qZA(),u._UZ(9,"br"),u.YNc(10,Ve,3,3,"button",3),u.qZA(),u.YNc(11,Ke,2,5,"td",1),u.qZA()),2&e){var n=t.$implicit,r=u.oxw();u.xp6(4),u.Oqu(u.lcZ(5,4,n.label)),u.xp6(3),u.Oqu(u.lcZ(8,6,n.description)),u.xp6(3),u.Q6J("ngIf",1<n.permissions.length&&!r.readonly),u.xp6(1),u.Q6J("ngForOf",n.permissions)}}function Xe(e,t){1&e&&(u.TgZ(0,"vdr-form-field",14),u.ALo(1,"translate"),u._UZ(2,"input",12),u.qZA()),2&e&&u.Q6J("label",u.lcZ(1,1,"settings.password"))}function et(e,t){if(1&e&&u._UZ(0,"vdr-custom-field-control",18),2&e){var n=u.oxw().$implicit,r=u.oxw(2);u.Q6J("customFieldsFormGroup",r.detailForm.get("customFields"))("customField",n)}}function tt(e,t){if(1&e&&(u.ynx(0),u.YNc(1,et,1,2,"vdr-custom-field-control",17),u.BQk()),2&e){var n=t.$implicit,r=u.oxw(2);u.xp6(1),u.Q6J("ngIf",r.customFieldIsSet(n.name))}}function nt(e,t){if(1&e&&(u.TgZ(0,"section",15),u.TgZ(1,"label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,tt,2,1,"ng-container",16),u.qZA()),2&e){var n=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"common.custom-fields")),u.xp6(2),u.Q6J("ngForOf",n.customFields)}}function rt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function it(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("disabled",r.detailForm.invalid||r.detailForm.pristine),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function ot(e,t){1&e&&u.YNc(0,it,3,4,"button",13),2&e&&u.Q6J("vdrIfPermissions","UpdateAdministrator")}function at(e,t){1&e&&(u.TgZ(0,"a",3),u._UZ(1,"clr-icon",4),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,ee)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"settings.create-new-role")," "))}function st(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){var n=u.oxw().item;u.xp6(1),u.Oqu(n.code)}}function ct(e,t){if(1&e&&(u.TgZ(0,"vdr-chip"),u._UZ(1,"vdr-channel-badge",17),u._uU(2),u.ALo(3,"translate"),u.ALo(4,"channelCodeToLabel"),u.qZA()),2&e){var n=t.$implicit;u.xp6(1),u.Q6J("channelCode",n.code),u.xp6(1),u.hij(" ",u.lcZ(3,2,u.lcZ(4,4,n.code))," ")}}function lt(e,t){if(1&e&&(u.ynx(0),u.YNc(1,ct,5,6,"vdr-chip",16),u.BQk()),2&e){var n=u.oxw().item;u.xp6(1),u.Q6J("ngForOf",n.channels)}}function ut(e,t){if(1&e&&(u.TgZ(0,"vdr-chip"),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.xp6(1),u.Oqu(n)}}function dt(e,t){if(1&e&&(u.ynx(0),u._UZ(1,"clr-icon",4),u._uU(2),u.BQk()),2&e){var n=u.oxw(3).item,r=u.oxw();u.xp6(2),u.hij(" ",n.permissions.length-r.initialLimit," ")}}function mt(e,t){1&e&&u._UZ(0,"clr-icon",21)}function pt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2).item;return u.oxw().toggleDisplayLimit(e)}),u.YNc(1,dt,3,1,"ng-container",7),u.YNc(2,mt,1,0,"ng-template",null,20,u.W1O),u.qZA()}if(2&e){var r=u.MAs(3),i=u.oxw(2).item,o=u.oxw();u.xp6(1),u.Q6J("ngIf",(o.displayLimit[i.id]||0)<i.permissions.length)("ngIfElse",r)}}function ft(e,t){if(1&e&&(u.ynx(0),u.YNc(1,ut,2,1,"vdr-chip",16),u.ALo(2,"slice"),u.YNc(3,pt,4,2,"button",18),u.BQk()),2&e){var n=u.oxw().item,r=u.oxw();u.xp6(1),u.Q6J("ngForOf",u.Dn7(2,2,n.permissions,0,r.displayLimit[n.id]||3)),u.xp6(2),u.Q6J("ngIf",n.permissions.length>r.initialLimit)}}function gt(e,t){1&e&&(u.TgZ(0,"span",22),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"settings.default-role-label")))}function vt(e,t){if(1&e&&(u._UZ(0,"vdr-table-row-action",23),u.ALo(1,"translate")),2&e){var n=u.oxw().item;u.Q6J("label",u.lcZ(1,2,"common.edit"))("linkTo",u.VKq(4,ne,n.id))}}function ht(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td",5),u._uU(1),u.qZA(),u.TgZ(2,"td",5),u.YNc(3,st,2,1,"span",6),u.qZA(),u.TgZ(4,"td",5),u.YNc(5,lt,2,1,"ng-container",6),u.qZA(),u.TgZ(6,"td",5),u.YNc(7,ft,4,6,"ng-container",7),u.YNc(8,gt,3,3,"ng-template",null,8,u.W1O),u.qZA(),u.TgZ(10,"td",9),u.YNc(11,vt,2,6,"vdr-table-row-action",10),u.qZA(),u.TgZ(12,"td",9),u.TgZ(13,"vdr-dropdown"),u.TgZ(14,"button",11),u._uU(15),u.ALo(16,"translate"),u._UZ(17,"clr-icon",12),u.qZA(),u.TgZ(18,"vdr-dropdown-menu",13),u.TgZ(19,"button",14),u.NdJ("click",function(){var e=u.CHM(n).item;return u.oxw().deleteRole(e.id)}),u.ALo(20,"hasPermission"),u._UZ(21,"clr-icon",15),u._uU(22),u.ALo(23,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.item,i=u.MAs(9),o=u.oxw();u.xp6(1),u.Oqu(r.description),u.xp6(2),u.Q6J("ngIf",!o.isDefaultRole(r)),u.xp6(2),u.Q6J("ngIf",!o.isDefaultRole(r)),u.xp6(2),u.Q6J("ngIf",!o.isDefaultRole(r))("ngIfElse",i),u.xp6(4),u.Q6J("ngIf",!o.isDefaultRole(r)),u.xp6(3),u.Q6J("disabled",o.isDefaultRole(r)),u.xp6(1),u.hij(" ",u.lcZ(16,10,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(20,12,"SuperAdmin")),u.xp6(3),u.hij(" ",u.lcZ(23,14,"common.delete")," ")}}function Zt(e,t){if(1&e&&u._UZ(0,"vdr-object-tree",11),2&e){var n=u.oxw().$implicit;u.Q6J("value",n.metadata)}}function yt(e,t){if(1&e&&(u.TgZ(0,"div",6),u.TgZ(1,"div",7),u.TgZ(2,"vdr-labeled-data",8),u.ALo(3,"translate"),u._uU(4),u.qZA(),u.TgZ(5,"div",9),u.TgZ(6,"vdr-labeled-data",8),u.ALo(7,"translate"),u._uU(8),u.ALo(9,"localeCurrency"),u.qZA(),u.TgZ(10,"vdr-labeled-data",8),u.ALo(11,"translate"),u._uU(12),u.ALo(13,"localeCurrency"),u.qZA(),u.qZA(),u.YNc(14,Zt,1,1,"vdr-object-tree",10),u.qZA(),u.qZA()),2&e){var n=t.$implicit,r=u.oxw();u.xp6(1),u.ekj("stale",r.testDataUpdated),u.xp6(1),u.Q6J("label",u.lcZ(3,9,"settings.shipping-method")),u.xp6(2),u.hij(" ",n.name," "),u.xp6(2),u.Q6J("label",u.lcZ(7,11,"common.price")),u.xp6(2),u.hij(" ",u.xi3(9,13,n.price,r.currencyCode)," "),u.xp6(2),u.Q6J("label",u.lcZ(11,16,"common.price-with-tax")),u.xp6(2),u.hij(" ",u.xi3(13,18,n.priceWithTax,r.currencyCode)," "),u.xp6(2),u.Q6J("ngIf",n.metadata)}}function bt(e,t){1&e&&(u.TgZ(0,"div",6),u._UZ(1,"clr-icon",12),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"settings.no-eligible-shipping-methods")," "))}function At(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",r.detailForm.pristine||r.detailForm.invalid||!r.selectedChecker||!r.selectedCalculator),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function xt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("disabled",r.detailForm.pristine||r.detailForm.invalid||!r.selectedChecker||!r.selectedCalculator),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function Tt(e,t){if(1&e&&u.YNc(0,xt,3,4,"button",9),2&e){var n=u.oxw();u.Q6J("vdrIfPermissions",n.updatePermission)}}function qt(e,t){if(1&e&&(u.TgZ(0,"option",26),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.code),u.xp6(1),u.AsE(" ",n.code,": ",n.description," ")}}function Ct(e,t){if(1&e&&u._UZ(0,"vdr-custom-field-control",30),2&e){var n=u.oxw().$implicit,r=u.oxw(3);u.Q6J("customFieldsFormGroup",r.detailForm.get("customFields"))("customField",n)}}function kt(e,t){if(1&e&&(u.ynx(0),u.YNc(1,Ct,1,2,"vdr-custom-field-control",29),u.BQk()),2&e){var n=t.$implicit,r=u.oxw(3);u.xp6(1),u.Q6J("ngIf",r.customFieldIsSet(n.name))}}function Lt(e,t){if(1&e&&(u.TgZ(0,"section",27),u.TgZ(1,"label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,kt,2,1,"ng-container",28),u.qZA()),2&e){var n=u.oxw(2);u.xp6(2),u.Oqu(u.lcZ(3,2,"common.custom-fields")),u.xp6(2),u.Q6J("ngForOf",n.customFields)}}function Ft(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"vdr-configurable-input",31),u.NdJ("remove",function(){return u.CHM(n),u.oxw(2).selectedChecker=null}),u.ALo(1,"hasPermission"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("operation",r.selectedChecker)("operationDefinition",r.selectedCheckerDefinition)("readonly",!u.lcZ(1,3,r.updatePermission))}}function Jt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",36),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw(3).selectChecker(e)}),u._uU(1),u.qZA()}if(2&e){var r=t.$implicit;u.xp6(1),u.hij(" ",r.description," ")}}function _t(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"vdr-dropdown"),u.TgZ(2,"button",32),u._UZ(3,"clr-icon",33),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.TgZ(6,"vdr-dropdown-menu",34),u.YNc(7,Jt,2,1,"button",35),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.oxw(2);u.xp6(4),u.hij(" ",u.lcZ(5,2,"common.select")," "),u.xp6(3),u.Q6J("ngForOf",n.checkers)}}function Ut(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"vdr-configurable-input",37),u.NdJ("remove",function(){return u.CHM(n),u.oxw(2).selectedCalculator=null}),u.ALo(1,"hasPermission"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("operation",r.selectedCalculator)("operationDefinition",r.selectedCalculatorDefinition)("readonly",!u.lcZ(1,3,r.updatePermission))}}function wt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",36),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw(3).selectCalculator(e)}),u._uU(1),u.qZA()}if(2&e){var r=t.$implicit;u.xp6(1),u.hij(" ",r.description," ")}}function It(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"vdr-dropdown"),u.TgZ(2,"button",32),u._UZ(3,"clr-icon",33),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.TgZ(6,"vdr-dropdown-menu",34),u.YNc(7,wt,2,1,"button",35),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.oxw(2);u.xp6(4),u.hij(" ",u.lcZ(5,2,"common.select")," "),u.xp6(3),u.Q6J("ngForOf",n.calculators)}}function St(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"form",10),u.TgZ(1,"vdr-form-field",11),u.ALo(2,"translate"),u.TgZ(3,"input",12),u.NdJ("input",function(e){var t=u.CHM(n).ngIf;return u.oxw().updateCode(t.code,e.target.value)}),u.ALo(4,"hasPermission"),u.qZA(),u.qZA(),u.TgZ(5,"vdr-form-field",13),u.ALo(6,"translate"),u.ALo(7,"hasPermission"),u._UZ(8,"input",14),u.ALo(9,"hasPermission"),u.qZA(),u._UZ(10,"vdr-rich-text-editor",15),u.ALo(11,"hasPermission"),u.ALo(12,"translate"),u.TgZ(13,"vdr-form-field",16),u.ALo(14,"translate"),u.TgZ(15,"select",17),u.ALo(16,"hasPermission"),u.YNc(17,qt,2,3,"option",18),u.qZA(),u.qZA(),u.YNc(18,Lt,5,4,"section",19),u.TgZ(19,"div",20),u.TgZ(20,"div",21),u.TgZ(21,"label",22),u._uU(22),u.ALo(23,"translate"),u.qZA(),u.YNc(24,Ft,2,5,"vdr-configurable-input",23),u.YNc(25,_t,8,4,"div",24),u.qZA(),u.TgZ(26,"div",21),u.TgZ(27,"label",22),u._uU(28),u.ALo(29,"translate"),u.qZA(),u.YNc(30,Ut,2,5,"vdr-configurable-input",25),u.YNc(31,It,8,4,"div",24),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("formGroup",r.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(2,18,"common.name")),u.xp6(2),u.Q6J("readonly",!u.lcZ(4,20,r.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(6,22,"common.code"))("readOnlyToggle",u.lcZ(7,24,r.updatePermission)),u.xp6(3),u.Q6J("readonly",!u.lcZ(9,26,r.updatePermission)),u.xp6(2),u.Q6J("readonly",!u.lcZ(11,28,r.updatePermission))("label",u.lcZ(12,30,"common.description")),u.xp6(3),u.Q6J("label",u.lcZ(14,32,"settings.fulfillment-handler")),u.xp6(2),u.Q6J("vdrDisabled",!u.lcZ(16,34,r.updatePermission)),u.xp6(2),u.Q6J("ngForOf",r.fulfillmentHandlers),u.xp6(1),u.Q6J("ngIf",r.customFields.length),u.xp6(4),u.Oqu(u.lcZ(23,36,"settings.shipping-eligibility-checker")),u.xp6(2),u.Q6J("ngIf",r.selectedChecker&&r.selectedCheckerDefinition),u.xp6(1),u.Q6J("ngIf",!r.selectedChecker||!r.selectedCheckerDefinition),u.xp6(3),u.Oqu(u.lcZ(29,38,"settings.shipping-calculator")),u.xp6(2),u.Q6J("ngIf",r.selectedCalculator&&r.selectedCalculatorDefinition),u.xp6(1),u.Q6J("ngIf",!r.selectedCalculator||!r.selectedCalculatorDefinition)}}function Pt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"clr-accordion-content"),u.TgZ(1,"div",38),u.TgZ(2,"div",21),u.TgZ(3,"vdr-test-order-builder",39),u.NdJ("orderLinesChange",function(e){return u.CHM(n),u.oxw().setTestOrderLines(e)}),u.qZA(),u.qZA(),u.TgZ(4,"div",21),u.TgZ(5,"vdr-test-address-form",40),u.NdJ("addressChange",function(e){return u.CHM(n),u.oxw().setTestAddress(e)}),u.qZA(),u.TgZ(6,"vdr-shipping-method-test-result",41),u.NdJ("runTest",function(){return u.CHM(n),u.oxw().runTest()}),u.ALo(7,"async"),u.ALo(8,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r,i=u.oxw();u.xp6(6),u.Q6J("currencyCode",null==(r=u.lcZ(7,4,i.activeChannel$))?null:r.currencyCode)("okToRun",i.allTestDataPresent()&&i.testDataUpdated&&i.detailForm.valid)("testDataUpdated",i.testDataUpdated)("testResult",u.lcZ(8,6,i.testResult$))}}function Ot(e,t){1&e&&(u.TgZ(0,"a",6),u._UZ(1,"clr-icon",7),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,ee)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"settings.create-new-shipping-method")," "))}var Dt=function(){return["DeleteSettings","DeleteShippingMethod"]};function Nt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td",8),u._uU(1),u.qZA(),u.TgZ(2,"td",8),u._uU(3),u.qZA(),u.TgZ(4,"td",9),u._UZ(5,"vdr-table-row-action",10),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"td",9),u.TgZ(8,"vdr-dropdown"),u.TgZ(9,"button",11),u._uU(10),u.ALo(11,"translate"),u._UZ(12,"clr-icon",12),u.qZA(),u.TgZ(13,"vdr-dropdown-menu",13),u.TgZ(14,"button",14),u.NdJ("click",function(){var e=u.CHM(n).item;return u.oxw().deleteShippingMethod(e.id)}),u.ALo(15,"hasPermission"),u._UZ(16,"clr-icon",15),u._uU(17),u.ALo(18,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.item;u.xp6(1),u.Oqu(r.code),u.xp6(2),u.Oqu(r.name),u.xp6(2),u.Q6J("label",u.lcZ(6,7,"common.edit"))("linkTo",u.VKq(15,ne,r.id)),u.xp6(5),u.hij(" ",u.lcZ(11,9,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(15,11,u.DdM(17,Dt))),u.xp6(3),u.hij(" ",u.lcZ(18,13,"common.delete")," ")}}function Qt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"clr-accordion-content"),u.TgZ(1,"div",16),u.TgZ(2,"div",17),u.TgZ(3,"vdr-test-order-builder",18),u.NdJ("orderLinesChange",function(e){return u.CHM(n),u.oxw().setTestOrderLines(e)}),u.qZA(),u.qZA(),u.TgZ(4,"div",17),u.TgZ(5,"vdr-test-address-form",19),u.NdJ("addressChange",function(e){return u.CHM(n),u.oxw().setTestAddress(e)}),u.qZA(),u.TgZ(6,"vdr-shipping-eligibility-test-result",20),u.NdJ("runTest",function(){return u.CHM(n),u.oxw().runTest()}),u.ALo(7,"async"),u.ALo(8,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r,i=u.oxw();u.xp6(6),u.Q6J("currencyCode",null==(r=u.lcZ(7,4,i.activeChannel$))?null:r.currencyCode)("okToRun",i.allTestDataPresent())("testDataUpdated",i.testDataUpdated)("testResult",u.lcZ(8,6,i.testResult$))}}var Mt=function(){return["CreateSettings","CreateShippingMethod"]};function Yt(e,t){1&e&&u._UZ(0,"clr-icon",14)}function Rt(e,t){1&e&&u._UZ(0,"clr-icon",15)}function $t(e,t){1&e&&u._UZ(0,"clr-icon",16)}function jt(e,t){if(1&e&&(u.TgZ(0,"vdr-labeled-data",4),u.ALo(1,"translate"),u._uU(2),u.ALo(3,"localeCurrency"),u.qZA()),2&e){var n=u.oxw();u.Q6J("label",u.lcZ(1,2,"common.price")),u.xp6(2),u.hij(" ",u.xi3(3,4,null==n.testResult.quote?null:n.testResult.quote.price,n.currencyCode)," ")}}function zt(e,t){if(1&e&&(u.TgZ(0,"vdr-labeled-data",4),u.ALo(1,"translate"),u._uU(2),u.ALo(3,"localeCurrency"),u.qZA()),2&e){var n=u.oxw();u.Q6J("label",u.lcZ(1,2,"common.price-with-tax")),u.xp6(2),u.hij(" ",u.xi3(3,4,null==n.testResult.quote?null:n.testResult.quote.priceWithTax,n.currencyCode)," ")}}function Et(e,t){if(1&e&&u._UZ(0,"vdr-object-tree",17),2&e){var n=u.oxw();u.Q6J("value",null==n.testResult||null==n.testResult.quote?null:n.testResult.quote.metadata)}}var Ht=function(e,t,n){return{success:e,error:t,unknown:n}};function Gt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",9),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",!r.saveButtonEnabled()),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function Bt(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",9),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("disabled",!r.saveButtonEnabled()),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function Vt(e,t){if(1&e&&u.YNc(0,Bt,3,4,"button",10),2&e){var n=u.oxw();u.Q6J("vdrIfPermissions",n.updatePermission)}}function Kt(e,t){1&e&&(u.TgZ(0,"a",3),u._UZ(1,"clr-icon",4),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,ee)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"settings.create-new-tax-category")," "))}function Wt(e,t){1&e&&(u.TgZ(0,"vdr-chip"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"common.default-tax-category")))}var Xt=function(){return["DeleteSettings","DeleteTaxCategory"]};function en(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td",5),u._uU(1),u.qZA(),u.TgZ(2,"td",5),u.YNc(3,Wt,3,3,"vdr-chip",6),u.qZA(),u.TgZ(4,"td",7),u._UZ(5,"vdr-table-row-action",8),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"td",7),u.TgZ(8,"vdr-dropdown"),u.TgZ(9,"button",9),u._uU(10),u.ALo(11,"translate"),u._UZ(12,"clr-icon",10),u.qZA(),u.TgZ(13,"vdr-dropdown-menu",11),u.TgZ(14,"button",12),u.NdJ("click",function(){var e=u.CHM(n).item;return u.oxw().deleteTaxCategory(e)}),u.ALo(15,"hasPermission"),u._UZ(16,"clr-icon",13),u._uU(17),u.ALo(18,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.item;u.xp6(1),u.Oqu(r.name),u.xp6(2),u.Q6J("ngIf",r.isDefault),u.xp6(2),u.Q6J("label",u.lcZ(6,7,"common.edit"))("linkTo",u.VKq(15,ne,r.id)),u.xp6(5),u.hij(" ",u.lcZ(11,9,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(15,11,u.DdM(17,Xt))),u.xp6(3),u.hij(" ",u.lcZ(18,13,"common.delete")," ")}}var tn=function(){return["CreateSettings","CreateTaxCategory"]};function nn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw();u.Q6J("disabled",!r.saveButtonEnabled()),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function rn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var r=u.oxw(2);u.Q6J("disabled",!r.saveButtonEnabled()),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function on(e,t){if(1&e&&u.YNc(0,rn,3,4,"button",18),2&e){var n=u.oxw();u.Q6J("vdrIfPermissions",n.updatePermission)}}function an(e,t){if(1&e&&(u.TgZ(0,"option",19),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.id),u.xp6(1),u.hij(" ",n.name," ")}}function sn(e,t){if(1&e&&(u.TgZ(0,"option",19),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.id),u.xp6(1),u.Oqu(n.name)}}function cn(e,t){1&e&&(u.TgZ(0,"a",3),u._UZ(1,"clr-icon",4),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,ee)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"settings.create-new-tax-rate")," "))}var ln=function(){return["DeleteSettings","DeleteTaxRate"]};function un(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"td",5),u._uU(1),u.qZA(),u.TgZ(2,"td",5),u._uU(3),u.qZA(),u.TgZ(4,"td",5),u._uU(5),u.qZA(),u.TgZ(6,"td",5),u._uU(7),u.qZA(),u.TgZ(8,"td",6),u._UZ(9,"vdr-table-row-action",7),u.ALo(10,"translate"),u.qZA(),u.TgZ(11,"td",6),u.TgZ(12,"vdr-dropdown"),u.TgZ(13,"button",8),u._uU(14),u.ALo(15,"translate"),u._UZ(16,"clr-icon",9),u.qZA(),u.TgZ(17,"vdr-dropdown-menu",10),u.TgZ(18,"button",11),u.NdJ("click",function(){var e=u.CHM(n).item;return u.oxw().deleteTaxRate(e)}),u.ALo(19,"hasPermission"),u._UZ(20,"clr-icon",12),u._uU(21),u.ALo(22,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.item;u.xp6(1),u.Oqu(r.name),u.xp6(2),u.Oqu(r.category.name),u.xp6(2),u.Oqu(r.zone.name),u.xp6(2),u.hij("",r.value,"%"),u.xp6(2),u.Q6J("label",u.lcZ(10,9,"common.edit"))("linkTo",u.VKq(17,ne,r.id)),u.xp6(5),u.hij(" ",u.lcZ(15,11,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(19,13,u.DdM(19,ln))),u.xp6(3),u.hij(" ",u.lcZ(22,15,"common.delete")," ")}}var dn=function(){return["CreateSettings","CreateTaxRate"]};function mn(e,t){if(1&e&&(u.TgZ(0,"option",9),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.code),u.xp6(1),u.hij(" ",n.name," ")}}function pn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr",10),u.TgZ(1,"td",11),u._UZ(2,"img",12),u.qZA(),u.TgZ(3,"td",13),u._uU(4),u.qZA(),u.TgZ(5,"td",14),u._uU(6),u.qZA(),u.TgZ(7,"td",15),u._uU(8),u.ALo(9,"localeCurrency"),u.qZA(),u.TgZ(10,"td",16),u.TgZ(11,"input",17),u.NdJ("ngModelChange",function(e){return u.CHM(n).$implicit.quantity=e})("change",function(){return u.CHM(n),u.oxw(2).updateQuantity()}),u.qZA(),u.TgZ(12,"button",18),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw(2).removeLine(e)}),u._UZ(13,"clr-icon",19),u.qZA(),u.qZA(),u.TgZ(14,"td",20),u._uU(15),u.ALo(16,"localeCurrency"),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit,i=u.oxw(2);u.xp6(2),u.Q6J("src",r.preview+"?preset=tiny",u.LSH),u.xp6(2),u.Oqu(r.name),u.xp6(2),u.Oqu(r.sku),u.xp6(2),u.hij(" ",u.xi3(9,6,r.unitPriceWithTax,i.currencyCode)," "),u.xp6(3),u.Q6J("ngModel",r.quantity),u.xp6(4),u.hij(" ",u.xi3(16,9,r.unitPriceWithTax*r.quantity,i.currencyCode)," ")}}function fn(e,t){if(1&e&&(u.TgZ(0,"table",6),u.TgZ(1,"thead"),u.TgZ(2,"tr"),u._UZ(3,"th"),u.TgZ(4,"th"),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"th"),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.TgZ(10,"th"),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.TgZ(13,"th"),u._uU(14),u.ALo(15,"translate"),u.qZA(),u.TgZ(16,"th"),u._uU(17),u.ALo(18,"translate"),u.qZA(),u.qZA(),u.qZA(),u.YNc(19,pn,17,12,"tr",7),u.TgZ(20,"tr",8),u.TgZ(21,"td",9),u._uU(22),u.ALo(23,"translate"),u.qZA(),u._UZ(24,"td"),u._UZ(25,"td"),u._UZ(26,"td"),u._UZ(27,"td"),u.TgZ(28,"td"),u._uU(29),u.ALo(30,"localeCurrency"),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.oxw();u.xp6(5),u.Oqu(u.lcZ(6,8,"order.product-name")),u.xp6(3),u.Oqu(u.lcZ(9,10,"order.product-sku")),u.xp6(3),u.Oqu(u.lcZ(12,12,"order.unit-price")),u.xp6(3),u.Oqu(u.lcZ(15,14,"order.quantity")),u.xp6(3),u.Oqu(u.lcZ(18,16,"order.total")),u.xp6(2),u.Q6J("ngForOf",n.lines),u.xp6(3),u.Oqu(u.lcZ(23,18,"order.sub-total")),u.xp6(7),u.Oqu(u.xi3(30,20,n.subTotal,n.currencyCode))}}function gn(e,t){1&e&&(u.TgZ(0,"div",21),u.TgZ(1,"div",22),u._uU(2),u.ALo(3,"translate"),u.qZA(),u._UZ(4,"clr-icon",23),u.qZA()),2&e&&(u.xp6(2),u.Oqu(u.lcZ(3,1,"settings.add-products-to-test-order")))}function vn(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"settings.update-zone")))}function hn(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"settings.create-zone")))}function Zn(e,t){if(1&e&&(u.YNc(0,vn,3,3,"span",4),u.YNc(1,hn,3,3,"span",4)),2&e){var n=u.oxw();u.Q6J("ngIf",n.zone.id),u.xp6(1),u.Q6J("ngIf",!n.zone.id)}}function yn(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"settings.update-zone")))}function bn(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"settings.create-zone")))}function An(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){return u.CHM(n),u.oxw().cancel()}),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"button",6),u.NdJ("click",function(){return u.CHM(n),u.oxw().save()}),u.YNc(4,yn,3,3,"span",4),u.YNc(5,bn,3,3,"span",4),u.qZA()}if(2&e){var r=u.oxw();u.xp6(1),u.Oqu(u.lcZ(2,4,"common.cancel")),u.xp6(2),u.Q6J("disabled",!r.zone.name),u.xp6(1),u.Q6J("ngIf",r.zone.id),u.xp6(1),u.Q6J("ngIf",!r.zone.id)}}var xn=function(){return["UpdateSettings","UpdateZone"]};function Tn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",7),u.NdJ("click",function(){return u.CHM(n),u.oxw().create()}),u._UZ(1,"clr-icon",8),u._uU(2),u.ALo(3,"translate"),u.qZA()}2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"settings.create-new-zone")," "))}var qn=function(){return["DeleteSettings","DeleteZone"]};function Cn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr"),u.ALo(1,"async"),u.TgZ(2,"td",9),u._UZ(3,"vdr-entity-info",10),u.qZA(),u.TgZ(4,"td",9),u.TgZ(5,"vdr-chip",11),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"td",12),u.TgZ(8,"a",13),u._UZ(9,"clr-icon",14),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.qZA(),u.TgZ(12,"td",15),u.TgZ(13,"button",16),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().update(e)}),u._UZ(14,"clr-icon",17),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.qZA(),u.TgZ(17,"td",15),u.TgZ(18,"vdr-dropdown"),u.TgZ(19,"button",18),u._uU(20),u.ALo(21,"translate"),u._UZ(22,"clr-icon",19),u.qZA(),u.TgZ(23,"vdr-dropdown-menu",20),u.TgZ(24,"button",21),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().delete(e.id)}),u.ALo(25,"hasPermission"),u._UZ(26,"clr-icon",22),u._uU(27),u.ALo(28,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r,i=t.$implicit,o=u.oxw();u.ekj("active",i.id===(null==(r=u.lcZ(1,11,o.activeZone$))?null:r.id)),u.xp6(3),u.Q6J("entity",i),u.xp6(2),u.Q6J("colorFrom",i.name),u.xp6(1),u.Oqu(i.name),u.xp6(2),u.Q6J("routerLink",u.VKq(25,ne,u.VKq(23,qe,i.id))),u.xp6(2),u.hij(" ",u.lcZ(11,13,"settings.view-zone-members")," "),u.xp6(5),u.hij(" ",u.lcZ(16,15,"common.edit")," "),u.xp6(5),u.hij(" ",u.lcZ(21,17,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(25,19,u.DdM(27,qn))),u.xp6(3),u.hij(" ",u.lcZ(28,21,"common.delete")," ")}}function kn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",26),u.TgZ(2,"div",27),u._uU(3),u.qZA(),u._UZ(4,"div",28),u.TgZ(5,"button",29),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).closeMembers()}),u._UZ(6,"clr-icon",30),u.qZA(),u.qZA(),u.TgZ(7,"div",31),u.TgZ(8,"vdr-dropdown"),u.TgZ(9,"button",32),u._uU(10),u.ALo(11,"translate"),u._UZ(12,"clr-icon",19),u.qZA(),u.TgZ(13,"vdr-dropdown-menu",20),u.TgZ(14,"button",33),u.NdJ("click",function(){u.CHM(n);var e=u.oxw().ngIf,t=u.oxw();return t.removeFromZone(e,t.selectedMemberIds)}),u.ALo(15,"hasPermission"),u._UZ(16,"clr-icon",22),u._uU(17),u.ALo(18,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(19,"button",34),u.NdJ("click",function(){u.CHM(n);var e=u.oxw().ngIf;return u.oxw().addToZone(e)}),u._uU(20),u.ALo(21,"translate"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=u.oxw().ngIf,i=u.oxw();u.xp6(3),u.AsE(" ",r.name," (",r.members.length,") "),u.xp6(6),u.Q6J("disabled",0===i.selectedMemberIds.length),u.xp6(1),u.hij(" ",u.lcZ(11,7,"common.with-selected")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(15,9,u.DdM(16,xn))),u.xp6(3),u.hij(" ",u.lcZ(18,11,"settings.remove-from-zone")," "),u.xp6(3),u.hij(" ",u.xi3(21,13,"settings.add-countries-to-zone",u.VKq(17,R,r.name))," ")}}var Ln=function(e){return["/settings","countries",e]};function Fn(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"vdr-dropdown"),u.TgZ(2,"button",18),u._uU(3),u.ALo(4,"translate"),u._UZ(5,"clr-icon",19),u.qZA(),u.TgZ(6,"vdr-dropdown-menu",20),u.TgZ(7,"a",35),u._UZ(8,"clr-icon",17),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.TgZ(11,"button",33),u.NdJ("click",function(){var e=u.CHM(n).member,t=u.oxw().ngIf;return u.oxw().removeFromZone(t,[e.id])}),u.ALo(12,"hasPermission"),u._UZ(13,"clr-icon",22),u._uU(14),u.ALo(15,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.member;u.xp6(3),u.hij(" ",u.lcZ(4,5,"common.actions")," "),u.xp6(4),u.Q6J("routerLink",u.VKq(13,Ln,r.id)),u.xp6(2),u.hij(" ",u.lcZ(10,7,"common.edit")," "),u.xp6(2),u.Q6J("disabled",!u.lcZ(12,9,u.DdM(15,xn))),u.xp6(3),u.hij(" ",u.lcZ(15,11,"settings.remove-from-zone")," ")}}function Jn(e,t){if(1&e){var n=u.EpF();u.ynx(0),u.TgZ(1,"vdr-zone-member-list",23),u.NdJ("selectionChange",function(e){return u.CHM(n),u.oxw().selectedMemberIds=e}),u.YNc(2,kn,22,19,"div",24),u.YNc(3,Fn,16,16,"div",25),u.qZA(),u.BQk()}if(2&e){var r=t.ngIf,i=u.oxw();u.xp6(1),u.Q6J("members",r.members)("selectedMemberIds",i.selectedMemberIds)}}var _n=function(){return["CreateSettings","CreateZone"]};function Un(e,t){1&e&&u.GkF(0)}function wn(e,t){if(1&e&&(u.ynx(0),u.YNc(1,Un,1,0,"ng-container",4),u.BQk()),2&e){var n=u.oxw();u.xp6(1),u.Q6J("ngTemplateOutlet",n.headerTemplate.templateRef)}}function In(e,t){1&e&&u.GkF(0)}var Sn=function(e){return{member:e}};function Pn(e,t){if(1&e&&(u.ynx(0),u.YNc(1,In,1,0,"ng-container",7),u.BQk()),2&e){var n=u.oxw().item,r=u.oxw();u.xp6(1),u.Q6J("ngTemplateOutlet",r.controlsTemplate.templateRef)("ngTemplateOutletContext",u.VKq(2,Sn,n))}}function On(e,t){if(1&e&&(u.TgZ(0,"td",5),u._uU(1),u.qZA(),u.TgZ(2,"td",5),u._uU(3),u.qZA(),u.TgZ(4,"td",5),u._UZ(5,"clr-icon"),u.qZA(),u.TgZ(6,"td",6),u.YNc(7,Pn,2,4,"ng-container",1),u.qZA()),2&e){var n=t.item,r=u.oxw();u.xp6(1),u.Oqu(n.code),u.xp6(2),u.Oqu(n.name),u.xp6(2),u.ekj("is-success",n.enabled),u.uIk("shape",n.enabled?"check":"times"),u.xp6(2),u.Q6J("ngIf",r.controlsTemplate)}}var Dn=function(){function e(t){p(this,e),this.dataService=t,this.currentMembers=[],this.selectedMemberIds=[]}return g(e,[{key:"ngOnInit",value:function(){var e=this.currentMembers.map(function(e){return e.id});this.availableCountries$=this.dataService.settings.getCountries(999).mapStream(function(e){return e.countries.items}).pipe((0,v.U)(function(t){return t.filter(function(t){return!e.includes(t.id)})}))}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedMemberIds)}}]),e}();Dn.\u0275fac=function(e){return new(e||Dn)(u.Y36(f.DoR))},Dn.\u0275cmp=u.Xpm({type:Dn,selectors:[["vdr-add-country-to-zone-dialog"]],decls:4,vars:4,consts:[["vdrDialogTitle",""],[3,"members","selectedMemberIds","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(u.YNc(0,$,2,6,"ng-template",0),u.TgZ(1,"vdr-zone-member-list",1),u.NdJ("selectionChange",function(e){return t.selectedMemberIds=e}),u.ALo(2,"async"),u.qZA(),u.YNc(3,j,6,10,"ng-template",2)),2&e&&(u.xp6(1),u.Q6J("members",u.lcZ(2,2,t.availableCountries$))("selectedMemberIds",t.selectedMemberIds))},directives:function(){return[f.q6K,dr,f.nPI]},pipes:function(){return[D.Ov,N.X$]},styles:[""],changeDetection:0}),Dn.ctorParameters=function(){return[{type:f.DoR}]};var Nn=function(e){s(i,e);var t=l(i);function i(e,n,r,o,s,c,l){var u;return p(this,i),(u=t.call(this,n,e,r,s)).changeDetector=o,u.dataService=s,u.formBuilder=c,u.notificationService=l,u.selectedRoles=[],u.selectedRolePermissions={},u.selectedChannelId=null,u.customFields=u.getCustomFieldConfig("Administrator"),u.detailForm=u.formBuilder.group({emailAddress:["",k.kI.required],firstName:["",k.kI.required],lastName:["",k.kI.required],password:[""],roles:[[]],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),a({},t.name,""))},{}))}),u}return g(i,[{key:"getAvailableChannels",value:function(){return Object.values(this.selectedRolePermissions)}},{key:"ngOnInit",value:function(){var e=this;this.init(),this.administrator$=this.entity$,this.allRoles$=this.dataService.administrator.getRoles(999).mapStream(function(e){return e.roles.items.filter(function(e){return e.code!==J.RO})}),this.dataService.client.userStatus().single$.subscribe(function(t){if(!t.userStatus.permissions.includes(f.y3$.UpdateAdministrator)){var n=e.detailForm.get("roles");n&&n.disable()}}),this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"rolesChanged",value:function(e){this.buildPermissionsMap()}},{key:"getPermissionsForSelectedChannel",value:function(){function e(e){return Object.entries(e).filter(function(e){var t=r(e,2);t[0];return t[1]}).map(function(e){var t=r(e,2),n=t[0];t[1];return n})}if(this.selectedChannelId&&this.selectedRolePermissions[this.selectedChannelId])return e(this.selectedRolePermissions[this.selectedChannelId].permissions);var t=Object.values(this.selectedRolePermissions);return 0<t.length?(this.selectedChannelId=t[0].channelId,e(t[0].permissions)):[]}},{key:"create",value:function(){var e=this,t=this.detailForm.value,n={emailAddress:t.emailAddress,firstName:t.firstName,lastName:t.lastName,password:t.password,customFields:t.customFields,roleIds:t.roles.map(function(e){return e.id})};this.dataService.administrator.createAdministrator(n).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createAdministrator.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,F.J)("common.notify-create-error"),{entity:"Administrator"})})}},{key:"save",value:function(){var e=this;this.administrator$.pipe((0,h.q)(1),(0,Z.zg)(function(t){var n=t.id,r=e.detailForm.value,i={id:n,emailAddress:r.emailAddress,firstName:r.firstName,lastName:r.lastName,password:r.password,customFields:r.customFields,roleIds:r.roles.map(function(e){return e.id})};return e.dataService.administrator.updateAdministrator(i)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"Administrator"})})}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName,roles:e.user.roles}),this.customFields.length){var r,i=this.detailForm.get("customFields"),o=n(this.customFields);try{for(o.s();!(r=o.n()).done;){var a=r.value.name,s=e.customFields[a],c=i.get(a);c&&c.patchValue(s)}}catch(u){o.e(u)}finally{o.f()}}var l=this.detailForm.get("password");l&&(e.id?l.setValidators([]):l.setValidators([k.kI.required])),this.buildPermissionsMap()}},{key:"buildPermissionsMap",value:function(){var e=this.detailForm.get("roles");if(e){var t,r=e.value,i=new Map,o=new Map,a=n(r);try{for(a.s();!(t=a.n()).done;){var s,c=t.value,l=n(c.channels);try{var u=function(){var e=s.value,t=i.get(e.id)||new Set;c.permissions.forEach(function(e){return t.add(e)}),i.set(e.id,t),o.set(e.id,e.code)};for(l.s();!(s=l.n()).done;)u()}catch(y){l.e(y)}finally{l.f()}}}catch(y){a.e(y)}finally{a.f()}this.selectedRolePermissions={};for(var d=0,m=Array.from(i.keys());d<m.length;d++){var p,f=m[d],g=i.get(f),v={},h=n(this.serverConfigService.getPermissionDefinitions());try{for(h.s();!(p=h.n()).done;){var Z=p.value;v[Z.name]=g.has(Z.name)}}catch(y){h.e(y)}finally{h.f()}this.selectedRolePermissions[f]={channelId:f,channelCode:o.get(f),permissions:v}}}}}]),i}(f.UT_);Nn.\u0275fac=function(e){return new(e||Nn)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},Nn.\u0275cmp=u.Xpm({type:Nn,selectors:[["vdr-admin-detail"]],features:[u.qOj],decls:37,vars:47,consts:[[3,"entity"],["locationId","administrator-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress",3,"readonly"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName",3,"readonly"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName",3,"readonly"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],[1,"clr-control-label"],["formControlName","roles","bindLabel","description",3,"items","multiple","hideSelected","change"],["role","tablist",1,"nav"],["role","presentation","class","nav-item",4,"ngFor","ngForOf"],[3,"activePermissions","permissionDefinitions","readonly"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["for","password",3,"label","readOnlyToggle"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Administrator",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","Administrator",3,"customFieldsFormGroup","customField"],["role","presentation",1,"nav-item"],["type","button",1,"btn","btn-link","nav-link",3,"id","click"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,z,3,4,"button",2),u.ALo(7,"async"),u.YNc(8,H,1,1,"ng-template",null,3,u.W1O),u.qZA(),u.qZA(),u.TgZ(10,"form",4),u.TgZ(11,"vdr-form-field",5),u.ALo(12,"translate"),u._UZ(13,"input",6),u.ALo(14,"hasPermission"),u.qZA(),u.TgZ(15,"vdr-form-field",7),u.ALo(16,"translate"),u._UZ(17,"input",8),u.ALo(18,"hasPermission"),u.qZA(),u.TgZ(19,"vdr-form-field",9),u.ALo(20,"translate"),u._UZ(21,"input",10),u.ALo(22,"hasPermission"),u.qZA(),u.YNc(23,G,3,3,"vdr-form-field",11),u.ALo(24,"async"),u.YNc(25,B,3,4,"vdr-form-field",12),u.ALo(26,"async"),u.ALo(27,"hasPermission"),u.YNc(28,W,5,4,"section",13),u.TgZ(29,"label",14),u._uU(30),u.ALo(31,"translate"),u.qZA(),u.TgZ(32,"ng-select",15),u.NdJ("change",function(e){return t.rolesChanged(e)}),u.ALo(33,"async"),u.qZA(),u.TgZ(34,"ul",16),u.YNc(35,X,5,9,"li",17),u.qZA(),u._UZ(36,"vdr-permission-grid",18),u.qZA()),2&e){var n=u.MAs(9);u.xp6(2),u.Q6J("entity",u.lcZ(3,21,t.entity$)),u.xp6(4),u.Q6J("ngIf",u.lcZ(7,23,t.isNew$))("ngIfElse",n),u.xp6(4),u.Q6J("formGroup",t.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(12,25,"settings.email-address")),u.xp6(2),u.Q6J("readonly",!u.lcZ(14,27,"UpdateAdministrator")),u.xp6(2),u.Q6J("label",u.lcZ(16,29,"settings.first-name")),u.xp6(2),u.Q6J("readonly",!u.lcZ(18,31,"UpdateAdministrator")),u.xp6(2),u.Q6J("label",u.lcZ(20,33,"settings.last-name")),u.xp6(2),u.Q6J("readonly",!u.lcZ(22,35,"UpdateAdministrator")),u.xp6(2),u.Q6J("ngIf",u.lcZ(24,37,t.isNew$)),u.xp6(2),u.Q6J("ngIf",!u.lcZ(26,39,t.isNew$)&&u.lcZ(27,41,"UpdateAdministrator")),u.xp6(3),u.Q6J("ngIf",t.customFields.length),u.xp6(2),u.Oqu(u.lcZ(31,43,"settings.roles")),u.xp6(2),u.Q6J("items",u.lcZ(33,45,t.allRoles$))("multiple",!0)("hideSelected",!0),u.xp6(3),u.Q6J("ngForOf",t.getAvailableChannels()),u.xp6(1),u.Q6J("activePermissions",t.getPermissionsForSelectedChannel())("permissionDefinitions",t.permissionDefinitions)("readonly",!0)}},directives:function(){return[f.KkL,f.BND,f.Vqt,f.mz,f.WWO,D.O5,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,Q.MgK,M.w9,D.sg,Hn,f.HAh,k.x0,f.M1s]},pipes:function(){return[D.Ov,N.X$,f.j$k,f.E6B]},styles:[""],changeDetection:0}),Nn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var Qn=function(e){s(r,e);var n=l(r);function r(e,i,o,a,s){var c,l;return p(this,r),(l=n.call(this,i,o)).dataService=e,l.modalService=a,l.notificationService=s,t((c=d(l),m(r.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=l.dataService.administrator).getAdministrators.apply(e,arguments)},function(e){return e.administrators}),l}return g(r,[{key:"deleteAdministrator",value:function(e){var t=this;return this.modalService.dialog({title:(0,F.J)("catalog.confirm-delete-administrator"),body:"".concat(e.firstName," ").concat(e.lastName),buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.administrator.deleteAdministrator(e.id):_.E})).subscribe(function(){t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"Administrator"}),t.refresh()},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"Administrator"})})}}]),r}(f.t7C);Qn.\u0275fac=function(e){return new(e||Qn)(u.Y36(f.DoR),u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.Z7U),u.Y36(f.gqp))},Qn.\u0275cmp=u.Xpm({type:Qn,selectors:[["vdr-administrator-list"]],features:[u.qOj],decls:21,vars:22,consts:[["locationId","administrator-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-right"),u._UZ(2,"vdr-action-bar-items",0),u.YNc(3,te,4,5,"a",1),u.qZA(),u.qZA(),u.TgZ(4,"vdr-data-table",2),u.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),u.ALo(5,"async"),u.ALo(6,"async"),u.ALo(7,"async"),u.ALo(8,"async"),u.TgZ(9,"vdr-dt-column"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"vdr-dt-column"),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"vdr-dt-column"),u._uU(16),u.ALo(17,"translate"),u.qZA(),u._UZ(18,"vdr-dt-column"),u._UZ(19,"vdr-dt-column"),u.YNc(20,re,21,18,"ng-template"),u.qZA()),2&e&&(u.xp6(3),u.Q6J("vdrIfPermissions","CreateAdministrator"),u.xp6(1),u.Q6J("items",u.lcZ(5,8,t.items$))("itemsPerPage",u.lcZ(6,10,t.itemsPerPage$))("totalItems",u.lcZ(7,12,t.totalItems$))("currentPage",u.lcZ(8,14,t.currentPage$)),u.xp6(6),u.Oqu(u.lcZ(11,16,"settings.first-name")),u.xp6(3),u.Oqu(u.lcZ(14,18,"settings.last-name")),u.xp6(3),u.Oqu(u.lcZ(17,20,"settings.email-address")))},directives:[f.KkL,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,L.yS,Q.qvL,f.v_8,f.JOL,f.UaT,f.N9E,f.HH4],pipes:[D.Ov,N.X$,f.j$k],styles:[""]}),Qn.ctorParameters=function(){return[{type:f.DoR},{type:L.F0},{type:L.gz},{type:f.Z7U},{type:f.gqp}]};var Mn=function(e){s(r,e);var t=l(r);function r(e,n,i,o,s,c,l){var u;return p(this,r),(u=t.call(this,n,e,i,s)).serverConfigService=i,u.changeDetector=o,u.dataService=s,u.formBuilder=c,u.notificationService=l,u.currencyCodes=Object.values(f.NEm),u.updatePermission=[f.y3$.SuperAdmin,f.y3$.UpdateChannel,f.y3$.CreateChannel],u.customFields=u.getCustomFieldConfig("Channel"),u.detailForm=u.formBuilder.group({code:["",k.kI.required],token:["",k.kI.required],pricesIncludeTax:[!1],currencyCode:[""],defaultShippingZoneId:["",k.kI.required],defaultLanguageCode:[],defaultTaxZoneId:["",k.kI.required],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),a({},t.name,""))},{}))}),u}return g(r,[{key:"ngOnInit",value:function(){this.init(),this.zones$=this.dataService.settings.getZones().mapSingle(function(e){return e.zones}),this.availableLanguageCodes$=this.serverConfigService.getAvailableLanguages()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,n={code:t.code,token:t.token,defaultLanguageCode:t.defaultLanguageCode,pricesIncludeTax:t.pricesIncludeTax,currencyCode:t.currencyCode,defaultShippingZoneId:t.defaultShippingZoneId,defaultTaxZoneId:t.defaultTaxZoneId,customFields:t.customFields};this.dataService.settings.createChannel(n).pipe((0,Z.zg)(function(t){var n=t.createChannel;return e.dataService.auth.currentUser().single$.pipe((0,v.U)(function(e){return{me:e.me,createChannel:n}}))}),(0,Z.zg)(function(t){var n=t.me,r=t.createChannel;return e.dataService.client.updateUserChannels(n.channels).pipe((0,v.U)(function(){return r}))})).subscribe(function(t){switch(t.__typename){case"Channel":e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"Channel"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.id],{relativeTo:e.route});break;case"LanguageNotAvailableError":e.notificationService.error(t.message)}})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(n){var r={id:n.id,code:t.code,token:t.token,pricesIncludeTax:t.pricesIncludeTax,currencyCode:t.currencyCode,defaultShippingZoneId:t.defaultShippingZoneId,defaultLanguageCode:t.defaultLanguageCode,defaultTaxZoneId:t.defaultTaxZoneId,customFields:t.customFields};return e.dataService.settings.updateChannel(r)})).subscribe(function(t){var n=t.updateChannel;switch(n.__typename){case"Channel":e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"Channel"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck();break;case"LanguageNotAvailableError":e.notificationService.error(n.message)}})}}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({code:e.code,token:e.token||this.generateToken(),pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZone?e.defaultShippingZone.id:"",defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZone?e.defaultTaxZone.id:""}),this.customFields.length){var r,i=this.detailForm.get("customFields"),o=n(this.customFields);try{for(o.s();!(r=o.n()).done;){var a=r.value.name,s=e.customFields[a],c=i.get(a);c&&c.patchValue(s)}}catch(u){o.e(u)}finally{o.f()}}if(e.code===J.z$){var l=this.detailForm.get("code");l&&l.disable()}}},{key:"generateToken",value:function(){var e=function(){return Math.random().toString(36).substr(3,10)};return"".concat(e()).concat(e())}}]),r}(f.UT_);Mn.\u0275fac=function(e){return new(e||Mn)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},Mn.\u0275cmp=u.Xpm({type:Mn,selectors:[["vdr-channel-detail"]],features:[u.qOj],decls:52,vars:63,consts:[[3,"entity"],["locationId","channel-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","token",3,"label"],["id","token","type","text","formControlName","token",3,"readonly"],["for","defaultTaxZoneId",3,"label"],["clrSelect","","name","currencyCode","formControlName","currencyCode",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","defaultLanguage",3,"label"],["clrSelect","","name","defaultLanguageCode","formControlName","defaultLanguageCode",3,"vdrDisabled"],["for","pricesIncludeTax",3,"label"],["type","checkbox","clrToggle","","id","pricesIncludeTax","formControlName","pricesIncludeTax",3,"vdrDisabled"],["clrSelect","","name","defaultTaxZoneId","formControlName","defaultTaxZoneId",3,"vdrDisabled"],["selected","","value","",2,"display","none"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","defaultShippingZoneId",3,"label"],["clrSelect","","name","defaultShippingZoneId","formControlName","defaultShippingZoneId",3,"vdrDisabled"],["clrAlertType","warning",3,"clrAlertClosable",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["clrAlertType","warning",3,"clrAlertClosable"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Channel",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","Channel",3,"customFieldsFormGroup","customField"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,ie,3,4,"button",2),u.ALo(7,"async"),u.YNc(8,se,1,2,"ng-template",null,3,u.W1O),u.qZA(),u.qZA(),u.TgZ(10,"form",4),u.TgZ(11,"vdr-form-field",5),u.ALo(12,"translate"),u._UZ(13,"input",6),u.ALo(14,"hasPermission"),u.qZA(),u.TgZ(15,"vdr-form-field",7),u.ALo(16,"translate"),u._UZ(17,"input",8),u.ALo(18,"hasPermission"),u.qZA(),u.TgZ(19,"vdr-form-field",9),u.ALo(20,"translate"),u.TgZ(21,"select",10),u.ALo(22,"hasPermission"),u.YNc(23,ce,3,4,"option",11),u.qZA(),u.qZA(),u.TgZ(24,"vdr-form-field",12),u.ALo(25,"translate"),u.TgZ(26,"select",13),u.ALo(27,"hasPermission"),u.YNc(28,le,4,7,"option",11),u.ALo(29,"async"),u.qZA(),u.qZA(),u.TgZ(30,"vdr-form-field",14),u.ALo(31,"translate"),u.TgZ(32,"clr-toggle-wrapper"),u._UZ(33,"input",15),u.ALo(34,"hasPermission"),u.qZA(),u.qZA(),u.TgZ(35,"vdr-form-field",9),u.ALo(36,"translate"),u.TgZ(37,"select",16),u.ALo(38,"hasPermission"),u._UZ(39,"option",17),u.YNc(40,ue,2,2,"option",11),u.ALo(41,"async"),u.qZA(),u.qZA(),u.YNc(42,de,5,4,"clr-alert",18),u.TgZ(43,"vdr-form-field",19),u.ALo(44,"translate"),u.TgZ(45,"select",20),u.ALo(46,"hasPermission"),u._UZ(47,"option",17),u.YNc(48,me,2,2,"option",11),u.ALo(49,"async"),u.qZA(),u.qZA(),u.YNc(50,pe,5,4,"clr-alert",21),u.YNc(51,ve,5,4,"section",22),u.qZA()),2&e){var n=u.MAs(9);u.xp6(2),u.Q6J("entity",u.lcZ(3,25,t.entity$)),u.xp6(4),u.Q6J("ngIf",u.lcZ(7,27,t.isNew$))("ngIfElse",n),u.xp6(4),u.Q6J("formGroup",t.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(12,29,"common.code")),u.xp6(2),u.Q6J("readonly",!u.lcZ(14,31,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(16,33,"settings.channel-token")),u.xp6(2),u.Q6J("readonly",!u.lcZ(18,35,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(20,37,"settings.currency")),u.xp6(2),u.Q6J("vdrDisabled",!u.lcZ(22,39,t.updatePermission)),u.xp6(2),u.Q6J("ngForOf",t.currencyCodes),u.xp6(1),u.Q6J("label",u.lcZ(25,41,"common.default-language")),u.xp6(2),u.Q6J("vdrDisabled",!u.lcZ(27,43,t.updatePermission)),u.xp6(2),u.Q6J("ngForOf",u.lcZ(29,45,t.availableLanguageCodes$)),u.xp6(2),u.Q6J("label",u.lcZ(31,47,"settings.prices-include-tax")),u.xp6(3),u.Q6J("vdrDisabled",!u.lcZ(34,49,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(36,51,"settings.default-tax-zone")),u.xp6(2),u.Q6J("vdrDisabled",!u.lcZ(38,53,t.updatePermission)),u.xp6(3),u.Q6J("ngForOf",u.lcZ(41,55,t.zones$)),u.xp6(2),u.Q6J("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultTaxZoneId),u.xp6(1),u.Q6J("label",u.lcZ(44,57,"settings.default-shipping-zone")),u.xp6(2),u.Q6J("vdrDisabled",!u.lcZ(46,59,t.updatePermission)),u.xp6(3),u.Q6J("ngForOf",u.lcZ(49,61,t.zones$)),u.xp6(2),u.Q6J("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultShippingZoneId),u.xp6(1),u.Q6J("ngIf",t.customFields.length)}},directives:[f.KkL,f.BND,f.Vqt,f.mz,f.WWO,D.O5,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,k.EJ,Q.otW,f.x3T,D.sg,Q.PEh,k.Wl,Q.KKC,k.YN,k.Kr,f.HAh,Q.TIm,Q.CyW,Q.I9z,k.x0,Q.MgK,f.M1s],pipes:[D.Ov,N.X$,f.j$k,f.uDH,f.Bm,D.gd],styles:["clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}"],changeDetection:0}),Mn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var Yn=function(){function e(t,n,r){var i=this;p(this,e),this.dataService=t,this.modalService=n,this.notificationService=r,this.refresh$=new U.xQ,this.channels$=this.refresh$.pipe((0,b.O)(1),(0,y.w)(function(){return i.dataService.settings.getChannels().mapStream(function(e){return e.channels})}))}return g(e,[{key:"isDefaultChannel",value:function(e){return e===J.z$}},{key:"deleteChannel",value:function(e){var t=this;this.modalService.dialog({title:(0,F.J)("catalog.confirm-delete-channel"),buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteChannel(e):_.E}),(0,Z.zg)(function(){return t.dataService.auth.currentUser().single$}),(0,Z.zg)(function(e){return t.dataService.client.updateUserChannels(e.me.channels)})).subscribe(function(){t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"Channel"}),t.refresh$.next(1)},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"Channel"})})}}]),e}();Yn.\u0275fac=function(e){return new(e||Yn)(u.Y36(f.DoR),u.Y36(f.Z7U),u.Y36(f.gqp))},Yn.\u0275cmp=u.Xpm({type:Yn,selectors:[["vdr-channel-list"]],decls:12,vars:7,consts:[["locationId","channel-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"channelCode"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-right"),u._UZ(2,"vdr-action-bar-items",0),u.YNc(3,he,4,5,"a",1),u.qZA(),u.qZA(),u.TgZ(4,"vdr-data-table",2),u.ALo(5,"async"),u.TgZ(6,"vdr-dt-column"),u._uU(7),u.ALo(8,"translate"),u.qZA(),u._UZ(9,"vdr-dt-column"),u._UZ(10,"vdr-dt-column"),u.YNc(11,ye,20,23,"ng-template"),u.qZA()),2&e&&(u.xp6(3),u.Q6J("vdrIfPermissions","SuperAdmin"),u.xp6(1),u.Q6J("items",u.lcZ(5,3,t.channels$)),u.xp6(3),u.Oqu(u.lcZ(8,5,"common.code")))},directives:[f.KkL,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,L.yS,Q.qvL,f.nIZ,f.v_8,f.JOL,f.UaT,f.N9E,f.HH4],pipes:[D.Ov,N.X$,f.E6B,f.j$k],styles:[""],changeDetection:0}),Yn.ctorParameters=function(){return[{type:f.DoR},{type:f.Z7U},{type:f.gqp}]};var Rn=function(e){s(n,e);var t=l(n);function n(e,r,i,o,a,s,c){var l;return p(this,n),(l=t.call(this,r,e,i,a)).changeDetector=o,l.dataService=a,l.formBuilder=s,l.notificationService=c,l.updatePermission=[f.y3$.UpdateSettings,f.y3$.UpdateCountry],l.detailForm=l.formBuilder.group({code:["",k.kI.required],name:["",k.kI.required],enabled:[!0]}),l}return g(n,[{key:"ngOnInit",value:function(){this.init(),this.country$=this.entity$}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"create",value:function(){var e=this;!this.detailForm.dirty||(0,w.aj)(this.country$,this.languageCode$).pipe((0,h.q)(1),(0,Z.zg)(function(t){var n=r(t,2),i=n[0],o=n[1],a=e.detailForm.value,s=(0,f.iSy)({translatable:i,updatedFields:a,languageCode:o,defaultTranslation:{name:a.name,languageCode:o}});return e.dataService.settings.createCountry(s)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"Country"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createCountry.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,F.J)("common.notify-create-error"),{entity:"Country"})})}},{key:"save",value:function(){var e=this;(0,w.aj)(this.country$,this.languageCode$).pipe((0,h.q)(1),(0,Z.zg)(function(t){var n=r(t,2),i=n[0],o=n[1],a=e.detailForm.value,s=(0,f.iSy)({translatable:i,updatedFields:a,languageCode:o,defaultTranslation:{name:a.name,languageCode:o}});return e.dataService.settings.updateCountry(s)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"Country"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"Country"})})}},{key:"setFormValues",value:function(e,t){var n=(0,f.ZIM)(e,t);this.detailForm.patchValue({code:e.code,name:n?n.name:"",enabled:e.enabled})}}]),n}(f.UT_);Rn.\u0275fac=function(e){return new(e||Rn)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},Rn.\u0275cmp=u.Xpm({type:Rn,selectors:[["vdr-country-detail"]],features:[u.qOj],decls:28,vars:35,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","country-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.TgZ(4,"vdr-language-selector",1),u.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),u.ALo(5,"async"),u.ALo(6,"async"),u.ALo(7,"async"),u.qZA(),u.qZA(),u.TgZ(8,"vdr-ab-right"),u._UZ(9,"vdr-action-bar-items",2),u.YNc(10,be,3,4,"button",3),u.ALo(11,"async"),u.YNc(12,xe,1,1,"ng-template",null,4,u.W1O),u.qZA(),u.qZA(),u.TgZ(14,"form",5),u.TgZ(15,"vdr-form-field",6),u.ALo(16,"translate"),u._UZ(17,"input",7),u.ALo(18,"hasPermission"),u.qZA(),u.TgZ(19,"vdr-form-field",8),u.ALo(20,"translate"),u._UZ(21,"input",9),u.ALo(22,"hasPermission"),u.qZA(),u.TgZ(23,"vdr-form-field",10),u.ALo(24,"translate"),u.TgZ(25,"clr-toggle-wrapper"),u._UZ(26,"input",11),u.ALo(27,"hasPermission"),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.MAs(13);u.xp6(2),u.Q6J("entity",u.lcZ(3,13,t.entity$)),u.xp6(2),u.Q6J("disabled",u.lcZ(5,15,t.isNew$))("availableLanguageCodes",u.lcZ(6,17,t.availableLanguages$))("currentLanguageCode",u.lcZ(7,19,t.languageCode$)),u.xp6(6),u.Q6J("ngIf",u.lcZ(11,21,t.isNew$))("ngIfElse",n),u.xp6(4),u.Q6J("formGroup",t.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(16,23,"common.code")),u.xp6(2),u.Q6J("readonly",!u.lcZ(18,25,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(20,27,"common.name")),u.xp6(2),u.Q6J("readonly",!u.lcZ(22,29,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(24,31,"common.enabled")),u.xp6(3),u.Q6J("vdrDisabled",!u.lcZ(27,33,t.updatePermission))}},directives:[f.KkL,f.BND,f.Vqt,f.SdP,f.mz,f.WWO,D.O5,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,Q.PEh,k.Wl,Q.KKC,f.x3T,f.HAh],pipes:[D.Ov,N.X$,f.j$k],styles:[""]}),Rn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var $n=function(){function e(t,n,r){p(this,e),this.dataService=t,this.notificationService=n,this.modalService=r,this.searchTerm=new k.NI(""),this.countries=[],this.destroy$=new U.xQ}return g(e,[{key:"ngOnInit",value:function(){var e=this,t=this.searchTerm.valueChanges.pipe((0,b.O)(null),(0,y.w)(function(t){return e.dataService.settings.getCountries(999,0,t).stream$}),(0,A.b)(function(t){return e.countries=t.countries.items}),(0,v.U)(function(e){return e.countries.items}));this.zones$=this.dataService.settings.getZones().mapStream(function(e){return e.zones}),this.countriesWithZones$=(0,w.aj)(t,this.zones$).pipe((0,v.U)(function(e){var t=r(e,2),n=t[0],i=t[1];return n.map(function(e){return Object.assign(Object.assign({},e),{zones:i.filter(function(t){return!!t.members.find(function(t){return t.id===e.id})})})})}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"deleteCountry",value:function(e){var t=this;this.modalService.dialog({title:(0,F.J)("catalog.confirm-delete-country"),buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteCountry(e):_.E})).subscribe(function(e){e.deleteCountry.result===f.PcR.DELETED?(t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"Country"}),t.dataService.settings.getCountries(999,0).single$.subscribe()):t.notificationService.error(e.deleteCountry.message||"")},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"Country"})})}},{key:"isZone",value:function(e){return e.hasOwnProperty("id")}}]),e}();$n.\u0275fac=function(e){return new(e||$n)(u.Y36(f.DoR),u.Y36(f.gqp),u.Y36(f.Z7U))},$n.\u0275cmp=u.Xpm({type:$n,selectors:[["vdr-country-list"]],decls:24,vars:22,consts:[["type","text","name","searchTerm",1,"search-input",3,"formControl","placeholder"],["locationId","country-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"routerLink"],[3,"colorFrom"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"input",0),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,Te,4,5,"a",2),u.qZA(),u.qZA(),u.TgZ(7,"vdr-data-table",3),u.ALo(8,"async"),u.TgZ(9,"vdr-dt-column"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"vdr-dt-column",4),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"vdr-dt-column"),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.TgZ(18,"vdr-dt-column"),u._uU(19),u.ALo(20,"translate"),u.qZA(),u._UZ(21,"vdr-dt-column"),u._UZ(22,"vdr-dt-column"),u.YNc(23,Fe,23,22,"ng-template"),u.qZA()),2&e&&(u.xp6(2),u.Q6J("formControl",t.searchTerm)("placeholder",u.lcZ(3,9,"settings.search-country-by-name")),u.xp6(4),u.Q6J("vdrIfPermissions",u.DdM(21,Je)),u.xp6(1),u.Q6J("items",u.lcZ(8,11,t.countriesWithZones$)),u.xp6(3),u.Oqu(u.lcZ(11,13,"common.code")),u.xp6(2),u.Q6J("expand",!0),u.xp6(1),u.Oqu(u.lcZ(14,15,"common.name")),u.xp6(3),u.Oqu(u.lcZ(17,17,"settings.zone")),u.xp6(3),u.Oqu(u.lcZ(20,19,"common.enabled")))},directives:[f.KkL,f.BND,f.y_K,k.Fj,k.JJ,k.oH,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,L.yS,Q.qvL,D.sg,f.v_8,f.JOL,f.UaT,f.N9E,f.HH4,f.Ywx],pipes:[N.X$,D.Ov,f.j$k],styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"],changeDetection:0}),$n.ctorParameters=function(){return[{type:f.DoR},{type:f.gqp},{type:f.Z7U}]};var jn=function(e){s(i,e);var t=l(i);function i(e,n,r,o,s,c,l){var u;return p(this,i),(u=t.call(this,n,e,r,s)).changeDetector=o,u.dataService=s,u.formBuilder=c,u.notificationService=l,u.languageCodes=Object.values(f.spR),u.updatePermission=[f.y3$.UpdateSettings,f.y3$.UpdateGlobalSettings],u.customFields=u.getCustomFieldConfig("GlobalSettings"),u.detailForm=u.formBuilder.group({availableLanguages:[""],trackInventory:!1,outOfStockThreshold:[0,k.kI.required],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),a({},t.name,""))},{}))}),u}return g(i,[{key:"ngOnInit",value:function(){var e=this;this.init(),this.dataService.client.userStatus().single$.subscribe(function(t){if(!t.userStatus.permissions.includes(f.y3$.UpdateSettings)){var n=e.detailForm.get("availableLanguages");n&&n.disable()}})}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"save",value:function(){var e=this;!this.detailForm.dirty||this.dataService.settings.updateGlobalSettings(this.detailForm.value).pipe((0,A.b)(function(t){var n=t.updateGlobalSettings;switch(n.__typename){case"GlobalSettings":e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"Settings"});break;case"ChannelDefaultLanguageError":e.notificationService.error(n.message)}}),(0,y.w)(function(){return e.serverConfigService.refreshGlobalSettings()}),(0,x.M)(this.dataService.client.uiState().single$)).subscribe(function(t){var n=r(t,2),i=n[0].globalSettings,o=n[1].uiState,a=i.availableLanguages;a.length&&!a.includes(o.contentLanguage)&&e.dataService.client.setContentLanguage(a[0]).subscribe()})}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({availableLanguages:e.availableLanguages,trackInventory:e.trackInventory,outOfStockThreshold:e.outOfStockThreshold}),this.customFields.length){var r,i=this.detailForm.get("customFields"),o=n(this.customFields);try{for(o.s();!(r=o.n()).done;){var a=r.value.name,s=e.customFields[a],c=i.get(a);c&&c.patchValue(s)}}catch(l){o.e(l)}finally{o.f()}}}}]),i}(f.UT_);jn.\u0275fac=function(e){return new(e||jn)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},jn.\u0275cmp=u.Xpm({type:jn,selectors:[["vdr-global-settings"]],features:[u.qOj],decls:22,vars:27,consts:[["locationId","global-settings-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","availableLanguages",3,"label"],["multiple","true","appendTo","body","formControlName","availableLanguages",3,"items","addTag","hideSelected"],["ng-label-tmp",""],["ng-option-tmp",""],["for","outOfStockThreshold",3,"label","tooltip"],["id","outOfStockThreshold","type","number","formControlName","outOfStockThreshold",3,"readonly"],["for","enabled",3,"label","tooltip"],["type","checkbox","clrToggle","","name","enabled","formControlName","trackInventory",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","GlobalSettings",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","GlobalSettings",3,"customFieldsFormGroup","customField"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-right"),u._UZ(2,"vdr-action-bar-items",0),u.YNc(3,_e,3,4,"button",1),u.qZA(),u.qZA(),u.TgZ(4,"form",2),u.TgZ(5,"vdr-form-field",3),u.ALo(6,"translate"),u.TgZ(7,"ng-select",4),u.YNc(8,Ue,5,4,"ng-template",5),u.YNc(9,we,2,4,"ng-template",6),u.qZA(),u.qZA(),u.TgZ(10,"vdr-form-field",7),u.ALo(11,"translate"),u.ALo(12,"translate"),u._UZ(13,"input",8),u.ALo(14,"hasPermission"),u.qZA(),u.TgZ(15,"vdr-form-field",9),u.ALo(16,"translate"),u.ALo(17,"translate"),u.TgZ(18,"clr-toggle-wrapper"),u._UZ(19,"input",10),u.ALo(20,"hasPermission"),u.qZA(),u.qZA(),u.YNc(21,Pe,5,4,"section",11),u.qZA()),2&e&&(u.xp6(3),u.Q6J("vdrIfPermissions",t.updatePermission),u.xp6(1),u.Q6J("formGroup",t.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(6,13,"common.available-languages")),u.xp6(2),u.Q6J("items",t.languageCodes)("addTag",!1)("hideSelected",!0),u.xp6(3),u.Q6J("label",u.lcZ(11,15,"settings.global-out-of-stock-threshold"))("tooltip",u.lcZ(12,17,"settings.global-out-of-stock-threshold-tooltip")),u.xp6(3),u.Q6J("readonly",!u.lcZ(14,19,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(16,21,"settings.track-inventory-default"))("tooltip",u.lcZ(17,23,"catalog.track-inventory-tooltip")),u.xp6(4),u.Q6J("vdrDisabled",!u.lcZ(20,25,t.updatePermission)),u.xp6(2),u.Q6J("ngIf",t.customFields.length))},directives:[f.KkL,f.mz,f.WWO,f.HAh,k._Y,k.JL,k.sg,f.hgI,M.w9,k.JJ,k.u,M.bb,M.Z2,f.y_K,k.wV,k.Fj,Q.PEh,k.Wl,Q.KKC,f.x3T,D.O5,k.x0,Q.MgK,D.sg,f.M1s],pipes:[N.X$,f.j$k,f.Bm],styles:["ng-select .ng-value>span{margin:0!important}  ng-select .ng-arrow-wrapper .ng-arrow{margin:0!important}  ng-select .ng-select-container>span{margin:0!important}"],changeDetection:0}),jn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var zn=function(e){s(n,e);var t=l(n);function n(e,r,i,o,a,s,c){var l;return p(this,n),(l=t.call(this,r,e,i,a)).changeDetector=o,l.dataService=a,l.formBuilder=s,l.notificationService=c,l.checkers=[],l.handlers=[],l.updatePermission=[f.y3$.UpdateSettings,f.y3$.UpdatePaymentMethod],l.detailForm=l.formBuilder.group({code:["",k.kI.required],name:["",k.kI.required],description:"",enabled:[!0,k.kI.required],checker:{},handler:{}}),l}return g(n,[{key:"ngOnInit",value:function(){var e=this;this.init(),(0,w.aj)([this.dataService.settings.getPaymentMethodOperations().single$,this.entity$.pipe((0,h.q)(1))]).subscribe(function(t){var n=r(t,2),i=n[0],o=n[1];e.checkers=i.paymentMethodEligibilityCheckers,e.handlers=i.paymentMethodHandlers,e.changeDetector.markForCheck(),e.selectedCheckerDefinition=i.paymentMethodEligibilityCheckers.find(function(e){return e.code===(o.checker&&o.checker.code)}),e.selectedHandlerDefinition=i.paymentMethodHandlers.find(function(e){return e.code===(o.handler&&o.handler.code)})})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"updateCode",value:function(e,t){if(!e){var n=this.detailForm.get(["code"]);n&&n.pristine&&n.setValue((0,P.U)(t,"-"))}}},{key:"configArgsIsPopulated",value:function(){var e=this.detailForm.get("configArgs");return!!e&&0<Object.keys(e.controls).length}},{key:"selectChecker",value:function(e){this.selectedCheckerDefinition=e,this.selectedChecker=(0,f.miO)(e);var t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}},{key:"selectHandler",value:function(e){this.selectedHandlerDefinition=e,this.selectedHandler=(0,f.miO)(e);var t=this.detailForm.get("handler");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedHandler)),this.detailForm.markAsDirty()}},{key:"removeChecker",value:function(){this.selectedChecker=null,this.detailForm.markAsDirty()}},{key:"removeHandler",value:function(){this.selectedHandler=null,this.detailForm.markAsDirty()}},{key:"create",value:function(){var e=this,t=this.selectedChecker,n=this.selectedHandler;!n||this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(r){r.id;var i=e.detailForm.value,o={name:i.name,code:i.code,description:i.description,enabled:i.enabled,checker:t?(0,f.RnJ)(t,i.checker):null,handler:(0,f.RnJ)(n,i.handler)};return e.dataService.settings.createPaymentMethod(o)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"PaymentMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createPaymentMethod.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,F.J)("common.notify-create-error"),{entity:"PaymentMethod"})})}},{key:"save",value:function(){var e=this,t=this.selectedChecker,n=this.selectedHandler;!n||this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(r){var i=r.id,o=e.detailForm.value,a={id:i,name:o.name,code:o.code,description:o.description,enabled:o.enabled,checker:t?(0,f.RnJ)(t,o.checker):null,handler:(0,f.RnJ)(n,o.handler)};return e.dataService.settings.updatePaymentMethod(a)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"PaymentMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"PaymentMethod"})})}},{key:"setFormValues",value:function(e){this.detailForm.patchValue({name:e.name,code:e.code,description:e.description,enabled:e.enabled,checker:e.checker||{},handler:e.handler||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(function(e){return Object.assign(Object.assign({},e),{value:(0,f.sux)(e.value)})})}),this.selectedHandler||(this.selectedHandler=e.handler&&{code:e.handler.code,args:e.handler.args.map(function(e){return Object.assign(Object.assign({},e),{value:(0,f.sux)(e.value)})})})}}]),n}(f.UT_);zn.\u0275fac=function(e){return new(e||zn)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},zn.\u0275cmp=u.Xpm({type:zn,selectors:[["vdr-payment-method-detail"]],features:[u.qOj],decls:12,vars:10,consts:[[3,"entity"],["locationId","payment-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",3,"readonly","label"],["for","description",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[1,"clr-row","mt4"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[4,"ngIf"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,Oe,3,4,"button",2),u.ALo(7,"async"),u.YNc(8,Ne,1,1,"ng-template",null,3,u.W1O),u.qZA(),u.qZA(),u.YNc(10,ze,31,38,"form",4),u.ALo(11,"async")),2&e){var n=u.MAs(9);u.xp6(2),u.Q6J("entity",u.lcZ(3,4,t.entity$)),u.xp6(4),u.Q6J("ngIf",u.lcZ(7,6,t.isNew$))("ngIfElse",n),u.xp6(4),u.Q6J("ngIf",u.lcZ(11,8,t.entity$))}},directives:[f.KkL,f.BND,f.Vqt,f.mz,f.WWO,D.O5,f.HAh,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,f.YI,Q.PEh,k.Wl,Q.KKC,f.x3T,Q.MgK,f.qq8,f.JOL,f.UaT,Q.qvL,f.N9E,D.sg,f.HH4],pipes:[D.Ov,N.X$,f.j$k],styles:[""],changeDetection:0}),zn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var En=function(e){s(r,e);var n=l(r);function r(e,i,o,a,s){var c,l;return p(this,r),(l=n.call(this,i,o)).dataService=e,l.modalService=a,l.notificationService=s,t((c=d(l),m(r.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=l.dataService.settings).getPaymentMethods.apply(e,arguments).refetchOnChannelChange()},function(e){return e.paymentMethods}),l}return g(r,[{key:"deletePaymentMethod",value:function(e){var t=this;this.showModalAndDelete(e).pipe((0,y.w)(function(n){return n.result===f.PcR.DELETED?[!0]:t.showModalAndDelete(e,n.message||"").pipe((0,v.U)(function(e){return e.result===f.PcR.DELETED}))}),(0,y.w)(function(){return t.dataService.settings.getPaymentMethods(100).single$})).subscribe(function(){t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"PaymentMethod"}),t.refresh()},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"PaymentMethod"})})}},{key:"showModalAndDelete",value:function(e,t){var n=this;return this.modalService.dialog({title:(0,F.J)("settings.confirm-delete-payment-method"),body:t,buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(r){return r?n.dataService.settings.deletePaymentMethod(e,!!t):_.E}),(0,v.U)(function(e){return e.deletePaymentMethod}))}}]),r}(f.t7C);En.\u0275fac=function(e){return new(e||En)(u.Y36(f.DoR),u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.Z7U),u.Y36(f.gqp))},En.\u0275cmp=u.Xpm({type:En,selectors:[["vdr-payment-method-list"]],features:[u.qOj],decls:18,vars:20,consts:[["locationId","payment-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-right"),u._UZ(2,"vdr-action-bar-items",0),u.YNc(3,Ee,4,5,"a",1),u.qZA(),u.qZA(),u.TgZ(4,"vdr-data-table",2),u.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),u.ALo(5,"async"),u.ALo(6,"async"),u.ALo(7,"async"),u.ALo(8,"async"),u.TgZ(9,"vdr-dt-column"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"vdr-dt-column"),u._uU(13),u.ALo(14,"translate"),u.qZA(),u._UZ(15,"vdr-dt-column"),u._UZ(16,"vdr-dt-column"),u.YNc(17,Ge,19,18,"ng-template"),u.qZA()),2&e&&(u.xp6(3),u.Q6J("vdrIfPermissions",u.DdM(19,Be)),u.xp6(1),u.Q6J("items",u.lcZ(5,7,t.items$))("itemsPerPage",u.lcZ(6,9,t.itemsPerPage$))("totalItems",u.lcZ(7,11,t.totalItems$))("currentPage",u.lcZ(8,13,t.currentPage$)),u.xp6(6),u.Oqu(u.lcZ(11,15,"common.code")),u.xp6(3),u.Oqu(u.lcZ(14,17,"common.enabled")))},directives:[f.KkL,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,L.yS,Q.qvL,f.v_8,f.JOL,f.UaT,f.N9E,f.HH4],pipes:[D.Ov,N.X$,f.j$k],styles:[""],changeDetection:0}),En.ctorParameters=function(){return[{type:f.DoR},{type:L.F0},{type:L.gz},{type:f.Z7U},{type:f.gqp}]};var Hn=function(){function t(){p(this,t),this.readonly=!1,this.permissionChange=new u.vpe}return g(t,[{key:"ngOnInit",value:function(){this.buildGrid()}},{key:"setPermission",value:function(e,t){this.readonly||this.permissionChange.emit({permission:e,value:t})}},{key:"toggleAll",value:function(e){var t,r=this,i=e.some(function(e){return!r.activePermissions.includes(e.name)}),o=n(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;this.permissionChange.emit({permission:a.name,value:i})}}catch(s){o.e(s)}finally{o.f()}}},{key:"buildGrid",value:function(){var t,i,o=this,a=new Map,s=[],c=/^(Create|Read|Update|Delete)([a-zA-Z]+)$/,l=n(this.permissionDefinitions);try{for(l.s();!(i=l.n()).done;){var u=i.value;if(c.test(u.name)){var d=null===(t=u.name.match(c))||void 0===t?void 0:t[2];if(d){var m=a.get(d);m?m.push(u):a.set(d,[u])}}else u.assignable&&s.push(u)}}catch(p){l.e(p)}finally{l.f()}this.gridData=[].concat(e(s.map(function(e){return{label:e.name,description:e.description,permissions:[e]}})),e(Array.from(a.entries()).map(function(e){var t=r(e,2),n=t[0],i=t[1];return{label:n,description:o.extractCrudDescription(i[0]),permissions:i}})))}},{key:"extractCrudDescription",value:function(e){return e.description.replace(/Grants permission to [\w]+/,"Grants permissions on")}}]),t}();Hn.\u0275fac=function(e){return new(e||Hn)},Hn.\u0275cmp=u.Xpm({type:Hn,selectors:[["vdr-permission-grid"]],inputs:{readonly:"readonly",permissionDefinitions:"permissionDefinitions",activePermissions:"activePermissions"},outputs:{permissionChange:"permissionChange"},decls:3,vars:1,consts:[[1,"table"],[4,"ngFor","ngForOf"],[1,"permission-group","left"],["class","btn btn-sm btn-link",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-link",3,"click"],["size","small",3,"title","label","disabled","selected","selectedChange"]],template:function(e,t){1&e&&(u.TgZ(0,"table",0),u.TgZ(1,"tbody"),u.YNc(2,We,12,8,"tr",1),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("ngForOf",t.gridData))},directives:[D.sg,D.O5,f.aPl],pipes:[N.X$],styles:["td.permission-group[_ngcontent-%COMP%]{max-width:300px;background-color:var(--color-component-bg-200)}"],changeDetection:0}),Hn.propDecorators={permissionDefinitions:[{type:u.IIB}],activePermissions:[{type:u.IIB}],readonly:[{type:u.IIB}],permissionChange:[{type:u.r_U}]};var Gn=function(e){s(r,e);var t=l(r);function r(e,n,i,o,s,c,l){var u;return p(this,r),(u=t.call(this,n,e,i,s)).changeDetector=o,u.dataService=s,u.formBuilder=c,u.notificationService=l,u.customFields=u.getCustomFieldConfig("Administrator"),u.detailForm=u.formBuilder.group({emailAddress:["",k.kI.required],firstName:["",k.kI.required],lastName:["",k.kI.required],password:[""],customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),a({},t.name,""))},{}))}),u}return g(r,[{key:"ngOnInit",value:function(){this.init()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"save",value:function(){var e=this;this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(t){t.id;var n=e.detailForm.value,r={emailAddress:n.emailAddress,firstName:n.firstName,lastName:n.lastName,password:n.password,customFields:n.customFields};return e.dataService.administrator.updateActiveAdministrator(r)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"Administrator"})})}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName}),this.customFields.length){var r,i=this.detailForm.get("customFields"),o=n(this.customFields);try{for(o.s();!(r=o.n()).done;){var a=r.value.name,s=e.customFields[a],c=i.get(a);c&&c.patchValue(s)}}catch(l){o.e(l)}finally{o.f()}}}}]),r}(f.UT_);Gn.\u0275fac=function(e){return new(e||Gn)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},Gn.\u0275cmp=u.Xpm({type:Gn,selectors:[["vdr-profile"]],features:[u.qOj],decls:25,vars:25,consts:[[3,"entity"],["locationId","administrator-detail"],[1,"btn","btn-primary",3,"disabled","click"],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle"],["id","password","type","password","formControlName","password"],["formGroupName","customFields",4,"ngIf"],["for","password",3,"label"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Administrator",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","Administrator",3,"customFieldsFormGroup","customField"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.TgZ(6,"button",2),u.NdJ("click",function(){return t.save()}),u._uU(7),u.ALo(8,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"form",3),u.TgZ(10,"vdr-form-field",4),u.ALo(11,"translate"),u._UZ(12,"input",5),u.qZA(),u.TgZ(13,"vdr-form-field",6),u.ALo(14,"translate"),u._UZ(15,"input",7),u.qZA(),u.TgZ(16,"vdr-form-field",8),u.ALo(17,"translate"),u._UZ(18,"input",9),u.qZA(),u.YNc(19,Xe,3,3,"vdr-form-field",10),u.ALo(20,"async"),u.TgZ(21,"vdr-form-field",11),u.ALo(22,"translate"),u._UZ(23,"input",12),u.qZA(),u.YNc(24,nt,5,4,"section",13),u.qZA()),2&e&&(u.xp6(2),u.Q6J("entity",u.lcZ(3,11,t.entity$)),u.xp6(4),u.Q6J("disabled",t.detailForm.invalid||t.detailForm.pristine),u.xp6(1),u.hij(" ",u.lcZ(8,13,"common.update")," "),u.xp6(2),u.Q6J("formGroup",t.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(11,15,"settings.email-address")),u.xp6(3),u.Q6J("label",u.lcZ(14,17,"settings.first-name")),u.xp6(3),u.Q6J("label",u.lcZ(17,19,"settings.last-name")),u.xp6(3),u.Q6J("ngIf",u.lcZ(20,21,t.isNew$)),u.xp6(2),u.Q6J("label",u.lcZ(22,23,"settings.password"))("readOnlyToggle",!0),u.xp6(3),u.Q6J("ngIf",t.customFields.length))},directives:[f.KkL,f.BND,f.Vqt,f.mz,f.WWO,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,D.O5,k.x0,Q.MgK,D.sg,f.M1s],pipes:[D.Ov,N.X$],styles:[""],changeDetection:0}),Gn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var Bn=function(t){s(r,t);var n=l(r);function r(e,t,i,o,a,s,c){var l;return p(this,r),(l=n.call(this,t,e,i,a)).changeDetector=o,l.dataService=a,l.formBuilder=s,l.notificationService=c,l.detailForm=l.formBuilder.group({code:["",k.kI.required],description:["",k.kI.required],channelIds:[],permissions:[]}),l}return g(r,[{key:"ngOnInit",value:function(){this.init(),this.role$=this.entity$,this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"updateCode",value:function(e){var t=this.detailForm.get(["code"]);t&&t.pristine&&t.setValue((0,P.U)(e,"-"))}},{key:"setPermission",value:function(t){var n=this.detailForm.get("permissions");if(n){var r=n.value,i=!0===t.value?(0,O.T)([].concat(e(r),[t.permission])):r.filter(function(e){return e!==t.permission});n.setValue(i),n.markAsDirty()}}},{key:"create",value:function(){var e=this,t=this.detailForm.value;this.dataService.administrator.createRole(t).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"Role"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createRole.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,F.J)("common.notify-create-error"),{entity:"Role"})})}},{key:"save",value:function(){var e=this;this.role$.pipe((0,h.q)(1),(0,Z.zg)(function(t){var n=t.id,r=e.detailForm.value,i=Object.assign({id:n},r);return e.dataService.administrator.updateRole(i)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"Role"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"Role"})})}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({description:e.description,code:e.code,channelIds:e.channels.map(function(e){return e.id}),permissions:e.permissions}),this.changeDetector.detectChanges()}}]),r}(f.UT_);Bn.\u0275fac=function(e){return new(e||Bn)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},Bn.\u0275cmp=u.Xpm({type:Bn,selectors:[["vdr-role-detail"]],features:[u.qOj],decls:29,vars:37,consts:[[3,"entity"],["locationId","role-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","description",3,"label"],["id","description","type","text","formControlName","description",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],[3,"label"],["formControlName","channelIds",3,"vdrDisabled"],[3,"permissionDefinitions","activePermissions","readonly","permissionChange"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,rt,3,4,"button",2),u.ALo(7,"async"),u.YNc(8,ot,1,1,"ng-template",null,3,u.W1O),u.qZA(),u.qZA(),u.TgZ(10,"form",4),u.TgZ(11,"vdr-form-field",5),u.ALo(12,"translate"),u.TgZ(13,"input",6),u.NdJ("input",function(e){return t.updateCode(e.target.value)}),u.ALo(14,"hasPermission"),u.qZA(),u.qZA(),u.TgZ(15,"vdr-form-field",7),u.ALo(16,"translate"),u.ALo(17,"hasPermission"),u._UZ(18,"input",8),u.ALo(19,"hasPermission"),u.qZA(),u.TgZ(20,"vdr-form-field",9),u.ALo(21,"translate"),u._UZ(22,"vdr-channel-assignment-control",10),u.ALo(23,"hasPermission"),u.qZA(),u.TgZ(24,"label"),u._uU(25),u.ALo(26,"translate"),u.qZA(),u.TgZ(27,"vdr-permission-grid",11),u.NdJ("permissionChange",function(e){return t.setPermission(e)}),u.ALo(28,"hasPermission"),u.qZA(),u.qZA()),2&e){var n,r=u.MAs(9);u.xp6(2),u.Q6J("entity",u.lcZ(3,15,t.entity$)),u.xp6(4),u.Q6J("ngIf",u.lcZ(7,17,t.isNew$))("ngIfElse",r),u.xp6(4),u.Q6J("formGroup",t.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(12,19,"common.description")),u.xp6(2),u.Q6J("readonly",!u.lcZ(14,21,"UpdateAdministrator")),u.xp6(2),u.Q6J("label",u.lcZ(16,23,"common.code"))("readOnlyToggle",u.lcZ(17,25,"UpdateAdministrator")),u.xp6(3),u.Q6J("readonly",!u.lcZ(19,27,"UpdateAdministrator")),u.xp6(2),u.Q6J("label",u.lcZ(21,29,"settings.channel")),u.xp6(2),u.Q6J("vdrDisabled",!u.lcZ(23,31,"UpdateAdministrator")),u.xp6(3),u.Oqu(u.lcZ(26,33,"settings.permissions")),u.xp6(2),u.Q6J("permissionDefinitions",t.permissionDefinitions)("activePermissions",null==(n=t.detailForm.get("permissions"))?null:n.value)("readonly",!u.lcZ(28,35,"UpdateAdministrator"))}},directives:[f.KkL,f.BND,f.Vqt,f.mz,f.WWO,D.O5,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,f.SGu,f.x3T,Q.MgK,Hn,f.HAh],pipes:[D.Ov,N.X$,f.j$k],styles:[""],changeDetection:0}),Bn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var Vn=function(e){s(r,e);var n=l(r);function r(e,i,o,a,s){var c,l;return p(this,r),(l=n.call(this,a,s)).modalService=e,l.notificationService=i,l.dataService=o,l.initialLimit=3,l.displayLimit={},t((c=d(l),m(r.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=l.dataService.administrator).getRoles.apply(e,arguments)},function(e){return e.roles}),l}return g(r,[{key:"ngOnInit",value:function(){t(m(r.prototype),"ngOnInit",this).call(this),this.visibleRoles$=this.items$.pipe((0,v.U)(function(e){return e.filter(function(e){return e.code!==J.RO})}))}},{key:"toggleDisplayLimit",value:function(e){this.displayLimit[e.id]===e.permissions.length?this.displayLimit[e.id]=this.initialLimit:this.displayLimit[e.id]=e.permissions.length}},{key:"isDefaultRole",value:function(e){return e.code===J.Wi||e.code===J.RO}},{key:"deleteRole",value:function(e){var t=this;this.modalService.dialog({title:(0,F.J)("settings.confirm-delete-role"),buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.administrator.deleteRole(e):_.E})).subscribe(function(){t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"Role"}),t.refresh()},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"Role"})})}}]),r}(f.t7C);Vn.\u0275fac=function(e){return new(e||Vn)(u.Y36(f.Z7U),u.Y36(f.gqp),u.Y36(f.DoR),u.Y36(L.F0),u.Y36(L.gz))},Vn.\u0275cmp=u.Xpm({type:Vn,selectors:[["vdr-role-list"]],features:[u.qOj],decls:24,vars:25,consts:[["locationId","role-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultRole",""],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo",4,"ngIf"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[4,"ngFor","ngForOf"],[3,"channelCode"],["class","btn btn-sm btn-secondary btn-icon",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary","btn-icon",3,"click"],["collapse",""],["shape","minus"],[1,"default-role-label"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-right"),u._UZ(2,"vdr-action-bar-items",0),u.YNc(3,at,4,5,"a",1),u.qZA(),u.qZA(),u.TgZ(4,"vdr-data-table",2),u.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),u.ALo(5,"async"),u.ALo(6,"async"),u.ALo(7,"async"),u.ALo(8,"async"),u.TgZ(9,"vdr-dt-column"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"vdr-dt-column"),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"vdr-dt-column"),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.TgZ(18,"vdr-dt-column"),u._uU(19),u.ALo(20,"translate"),u.qZA(),u._UZ(21,"vdr-dt-column"),u._UZ(22,"vdr-dt-column"),u.YNc(23,ht,24,16,"ng-template"),u.qZA()),2&e&&(u.xp6(3),u.Q6J("vdrIfPermissions","CreateAdministrator"),u.xp6(1),u.Q6J("items",u.lcZ(5,9,t.visibleRoles$))("itemsPerPage",u.lcZ(6,11,t.itemsPerPage$))("totalItems",u.lcZ(7,13,t.totalItems$))("currentPage",u.lcZ(8,15,t.currentPage$)),u.xp6(6),u.Oqu(u.lcZ(11,17,"common.description")),u.xp6(3),u.Oqu(u.lcZ(14,19,"common.code")),u.xp6(3),u.Oqu(u.lcZ(17,21,"settings.channel")),u.xp6(3),u.Oqu(u.lcZ(20,23,"settings.permissions")))},directives:[f.KkL,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,L.yS,Q.qvL,D.O5,f.JOL,f.UaT,f.N9E,f.HH4,D.sg,f.Ywx,f.nIZ,f.v_8],pipes:[D.Ov,N.X$,f.j$k,f.E6B,D.OU],styles:[".default-role-label[_ngcontent-%COMP%]{color:var(--color-grey-400)}"],changeDetection:0}),Vn.ctorParameters=function(){return[{type:f.Z7U},{type:f.gqp},{type:f.DoR},{type:L.F0},{type:L.gz}]};var Kn=function e(){p(this,e),this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new u.vpe};Kn.\u0275fac=function(e){return new(e||Kn)},Kn.\u0275cmp=u.Xpm({type:Kn,selectors:[["vdr-shipping-eligibility-test-result"]],inputs:{okToRun:"okToRun",testDataUpdated:"testDataUpdated",testResult:"testResult",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:10,vars:9,consts:[[1,"test-result","card"],[1,"card-header"],["class","card-block",4,"ngFor","ngForOf"],["class","card-block",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"price-row"],[3,"value",4,"ngIf"],[3,"value"],["shape","ban",1,"is-solid","error"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,yt,15,21,"div",2),u.YNc(5,bt,4,3,"div",3),u.TgZ(6,"div",4),u.TgZ(7,"button",5),u.NdJ("click",function(){return t.runTest.emit()}),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,5,"settings.test-result")," "),u.xp6(2),u.Q6J("ngForOf",t.testResult),u.xp6(1),u.Q6J("ngIf",0===(null==t.testResult?null:t.testResult.length)),u.xp6(2),u.Q6J("disabled",!t.okToRun),u.xp6(1),u.hij(" ",u.lcZ(9,7,"settings.test-shipping-methods")," "))},directives:[D.sg,D.O5,f.WGc,f._8q,Q.qvL],pipes:[N.X$,f.kgx],styles:[".result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-left:24px}clr-icon.error[_ngcontent-%COMP%]{color:var(--color-error-500)}"],changeDetection:0}),Kn.propDecorators={testResult:[{type:u.IIB}],okToRun:[{type:u.IIB}],testDataUpdated:[{type:u.IIB}],currencyCode:[{type:u.IIB}],runTest:[{type:u.r_U}]};var Wn=function(e){s(i,e);var t=l(i);function i(e,n,r,o,s,c,l){var u;return p(this,i),(u=t.call(this,n,e,r,s)).changeDetector=o,u.dataService=s,u.formBuilder=c,u.notificationService=l,u.checkers=[],u.calculators=[],u.fulfillmentHandlers=[],u.testDataUpdated=!1,u.updatePermission=[f.y3$.UpdateSettings,f.y3$.UpdateShippingMethod],u.fetchTestResult$=new U.xQ,u.customFields=u.getCustomFieldConfig("ShippingMethod"),u.detailForm=u.formBuilder.group({code:["",k.kI.required],name:["",k.kI.required],description:"",fulfillmentHandler:["",k.kI.required],checker:{},calculator:{},customFields:u.formBuilder.group(u.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),a({},t.name,""))},{}))}),u}return g(i,[{key:"ngOnInit",value:function(){var e=this;this.init(),(0,w.aj)([this.dataService.shippingMethod.getShippingMethodOperations().single$,this.entity$.pipe((0,h.q)(1))]).subscribe(function(t){var n=r(t,2),i=n[0],o=n[1];e.checkers=i.shippingEligibilityCheckers,e.calculators=i.shippingCalculators,e.fulfillmentHandlers=i.fulfillmentHandlers,e.changeDetector.markForCheck(),e.selectedCheckerDefinition=i.shippingEligibilityCheckers.find(function(e){return e.code===(o.checker&&o.checker.code)}),e.selectedCalculatorDefinition=i.shippingCalculators.find(function(e){return e.code===(o.calculator&&o.calculator.code)})}),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(function(e){return e.activeChannel}),this.testResult$=this.fetchTestResult$.pipe((0,y.w)(function(t){var n=r(t,2),i=n[0],o=n[1];if(!e.selectedChecker||!e.selectedCalculator)return(0,I.of)(void 0);var a=e.detailForm.value,s={shippingAddress:Object.assign(Object.assign({},i),{streetLine1:"test"}),lines:o.map(function(e){return{productVariantId:e.id,quantity:e.quantity}}),checker:(0,f.RnJ)(e.selectedChecker,a.checker),calculator:(0,f.RnJ)(e.selectedCalculator,a.calculator)};return e.dataService.shippingMethod.testShippingMethod(s).mapSingle(function(e){return e.testShippingMethod})})),(0,S.T)(this.detailForm.get(["checker"]).valueChanges,this.detailForm.get(["calculator"]).valueChanges).pipe((0,T.R)(this.destroy$)).subscribe(function(){return e.testDataUpdated=!0})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"updateCode",value:function(e,t){if(!e){var n=this.detailForm.get(["code"]);n&&n.pristine&&n.setValue((0,P.U)(t,"-"))}}},{key:"selectChecker",value:function(e){this.selectedCheckerDefinition=e,this.selectedChecker=(0,f.miO)(e);var t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}},{key:"selectCalculator",value:function(e){this.selectedCalculatorDefinition=e,this.selectedCalculator=(0,f.miO)(e);var t=this.detailForm.get("calculator");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedCalculator)),this.detailForm.markAsDirty()}},{key:"create",value:function(){var e=this,t=this.selectedChecker,n=this.selectedCalculator;!t||!n||(0,w.aj)([this.entity$,this.languageCode$]).pipe((0,h.q)(1),(0,Z.zg)(function(i){var o=r(i,2),a=o[0],s=o[1],c=e.detailForm.value,l=Object.assign(Object.assign({},e.getUpdatedShippingMethod(a,e.detailForm,s)),{checker:(0,f.RnJ)(t,c.checker),calculator:(0,f.RnJ)(n,c.calculator)});return e.dataService.shippingMethod.createShippingMethod(l)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"ShippingMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createShippingMethod.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,F.J)("common.notify-create-error"),{entity:"ShippingMethod"})})}},{key:"save",value:function(){var e=this,t=this.selectedChecker,n=this.selectedCalculator;!t||!n||(0,w.aj)([this.entity$,this.languageCode$]).pipe((0,h.q)(1),(0,Z.zg)(function(i){var o=r(i,2),a=o[0],s=o[1],c=e.detailForm.value,l=Object.assign(Object.assign({},e.getUpdatedShippingMethod(a,e.detailForm,s)),{checker:(0,f.RnJ)(t,c.checker),calculator:(0,f.RnJ)(n,c.calculator)});return e.dataService.shippingMethod.updateShippingMethod(l)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"ShippingMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"ShippingMethod"})})}},{key:"setTestOrderLines",value:function(e){this.testOrderLines=e,this.testDataUpdated=!0}},{key:"setTestAddress",value:function(e){this.testAddress=e,this.testDataUpdated=!0}},{key:"allTestDataPresent",value:function(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length&&this.selectedChecker&&this.selectedCalculator)}},{key:"runTest",value:function(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}},{key:"getUpdatedShippingMethod",value:function(e,t,n){var r=t.value,i=(0,f.iSy)({translatable:e,updatedFields:r,customFieldConfig:this.customFields,languageCode:n,defaultTranslation:{languageCode:n,name:e.name||"",description:e.description||""}});return Object.assign(Object.assign({},i),{fulfillmentHandler:r.fulfillmentHandler})}},{key:"setFormValues",value:function(e,t){var r,i,o,a,s=(0,f.ZIM)(e,t);if(this.detailForm.patchValue({name:null!==(r=null==s?void 0:s.name)&&void 0!==r?r:"",description:null!==(i=null==s?void 0:s.description)&&void 0!==i?i:"",code:e.code,fulfillmentHandler:e.fulfillmentHandlerCode,checker:e.checker||{},calculator:e.calculator||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(function(e){return Object.assign(Object.assign({},e),{value:(0,f.sux)(e.value)})})}),this.selectedCalculator||(this.selectedCalculator=e.calculator&&{code:null===(o=e.calculator)||void 0===o?void 0:o.code,args:null===(a=e.calculator)||void 0===a?void 0:a.args.map(function(e){return Object.assign(Object.assign({},e),{value:(0,f.sux)(e.value)})})}),this.customFields.length){var c,l=this.detailForm.get("customFields"),u=n(this.customFields);try{for(u.s();!(c=u.n()).done;){var d=c.value,m=d.name,p="localeString"===d.type?s.customFields[m]:e.customFields[m],g=l.get(m);g&&g.patchValue(p)}}catch(v){u.e(v)}finally{u.f()}}}}]),i}(f.UT_);Wn.\u0275fac=function(e){return new(e||Wn)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},Wn.\u0275cmp=u.Xpm({type:Wn,selectors:[["vdr-shipping-method-detail"]],features:[u.qOj],decls:23,vars:22,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","shipping-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",3,"readonly","label"],["for","fulfillmentHandler",1,"mb2",3,"label"],["name","fulfillmentHandler","formControlName","fulfillmentHandler",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","customFields",4,"ngIf"],[1,"clr-row","mt4"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[4,"ngIf"],["formControlName","calculator",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[3,"value"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","ShippingMethod",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","ShippingMethod",3,"customFieldsFormGroup","customField"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","calculator",3,"operation","operationDefinition","readonly","remove"],[1,"clr-row"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.TgZ(4,"vdr-language-selector",1),u.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),u.ALo(5,"async"),u.ALo(6,"async"),u.ALo(7,"async"),u.qZA(),u.qZA(),u.TgZ(8,"vdr-ab-right"),u._UZ(9,"vdr-action-bar-items",2),u.YNc(10,At,3,4,"button",3),u.ALo(11,"async"),u.YNc(12,Tt,1,1,"ng-template",null,4,u.W1O),u.qZA(),u.qZA(),u.YNc(14,St,32,40,"form",5),u.ALo(15,"async"),u.TgZ(16,"div",6),u.TgZ(17,"clr-accordion"),u.TgZ(18,"clr-accordion-panel"),u.TgZ(19,"clr-accordion-title"),u._uU(20),u.ALo(21,"translate"),u.qZA(),u.YNc(22,Pt,9,8,"clr-accordion-content",7),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.MAs(13);u.xp6(2),u.Q6J("entity",u.lcZ(3,8,t.entity$)),u.xp6(2),u.Q6J("disabled",u.lcZ(5,10,t.isNew$))("availableLanguageCodes",u.lcZ(6,12,t.availableLanguages$))("currentLanguageCode",u.lcZ(7,14,t.languageCode$)),u.xp6(6),u.Q6J("ngIf",u.lcZ(11,16,t.isNew$))("ngIfElse",n),u.xp6(4),u.Q6J("ngIf",u.lcZ(15,18,t.entity$)),u.xp6(6),u.Oqu(u.lcZ(21,20,"settings.test-shipping-method"))}},directives:function(){return[f.KkL,f.BND,f.Vqt,f.SdP,f.mz,f.WWO,D.O5,Q.bZL,Q.twP,Q.GmI,Q.dxz,Q.UJ5,Q.Nz$,Q.DbV,f.HAh,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,f.YI,k.EJ,f.x3T,D.sg,Q.MgK,k.YN,k.Kr,k.x0,f.M1s,f.qq8,f.JOL,f.UaT,Q.qvL,f.N9E,f.HH4,Q.r6y,ar,or,er]},pipes:function(){return[D.Ov,N.X$,f.j$k]},styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px;margin-bottom:128px}.testing-tool[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),Wn.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var Xn=function(e){s(i,e);var n=l(i);function i(e,r,o,a,s,c){var l,u;return p(this,i),(u=n.call(this,s,c)).modalService=e,u.notificationService=r,u.dataService=o,u.serverConfigService=a,u.testDataUpdated=!1,u.fetchTestResult$=new U.xQ,t((l=d(u),m(i.prototype)),"setQueryFn",l).call(l,function(){var e;return(e=u.dataService.shippingMethod).getShippingMethods.apply(e,arguments).refetchOnChannelChange()},function(e){return e.shippingMethods}),u}return g(i,[{key:"ngOnInit",value:function(){var e=this;t(m(i.prototype),"ngOnInit",this).call(this),this.testResult$=this.fetchTestResult$.pipe((0,y.w)(function(t){var n=r(t,2),i=n[0],o=n[1],a={shippingAddress:Object.assign(Object.assign({},i),{streetLine1:"test"}),lines:o.map(function(e){return{productVariantId:e.id,quantity:e.quantity}})};return e.dataService.shippingMethod.testEligibleShippingMethods(a).mapSingle(function(e){return e.testEligibleShippingMethods})})),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(function(e){return e.activeChannel}),this.availableLanguages$=this.serverConfigService.getAvailableLanguages(),this.contentLanguage$=this.dataService.client.uiState().mapStream(function(e){return e.uiState.contentLanguage}).pipe((0,A.b)(function(){return e.refresh()}))}},{key:"deleteShippingMethod",value:function(e){var t=this;this.modalService.dialog({title:(0,F.J)("catalog.confirm-delete-shipping-method"),buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.shippingMethod.deleteShippingMethod(e):_.E})).subscribe(function(){t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"ShippingMethod"}),t.refresh()},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"ShippingMethod"})})}},{key:"setTestOrderLines",value:function(e){this.testOrderLines=e,this.testDataUpdated=!0}},{key:"setTestAddress",value:function(e){this.testAddress=e,this.testDataUpdated=!0}},{key:"allTestDataPresent",value:function(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length)}},{key:"runTest",value:function(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}},{key:"setLanguage",value:function(e){this.dataService.client.setContentLanguage(e).subscribe()}}]),i}(f.t7C);Xn.\u0275fac=function(e){return new(e||Xn)(u.Y36(f.Z7U),u.Y36(f.gqp),u.Y36(f.DoR),u.Y36(f.iHG),u.Y36(L.F0),u.Y36(L.gz))},Xn.\u0275cmp=u.Xpm({type:Xn,selectors:[["vdr-shipping-method-list"]],features:[u.qOj],decls:29,vars:29,consts:[[3,"availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","shipping-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"clr-row"],[1,"clr-col"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u.TgZ(2,"vdr-language-selector",0),u.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),u.ALo(3,"async"),u.ALo(4,"async"),u.qZA(),u.qZA(),u.TgZ(5,"vdr-ab-right"),u._UZ(6,"vdr-action-bar-items",1),u.YNc(7,Ot,4,5,"a",2),u.qZA(),u.qZA(),u.TgZ(8,"vdr-data-table",3),u.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),u.ALo(9,"async"),u.ALo(10,"async"),u.ALo(11,"async"),u.ALo(12,"async"),u.TgZ(13,"vdr-dt-column"),u._uU(14),u.ALo(15,"translate"),u.qZA(),u.TgZ(16,"vdr-dt-column"),u._uU(17),u.ALo(18,"translate"),u.qZA(),u._UZ(19,"vdr-dt-column"),u._UZ(20,"vdr-dt-column"),u.YNc(21,Nt,19,18,"ng-template"),u.qZA(),u.TgZ(22,"div",4),u.TgZ(23,"clr-accordion"),u.TgZ(24,"clr-accordion-panel"),u.TgZ(25,"clr-accordion-title"),u._uU(26),u.ALo(27,"translate"),u.qZA(),u.YNc(28,Qt,9,8,"clr-accordion-content",5),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("availableLanguageCodes",u.lcZ(3,10,t.availableLanguages$))("currentLanguageCode",u.lcZ(4,12,t.contentLanguage$)),u.xp6(5),u.Q6J("vdrIfPermissions",u.DdM(28,Mt)),u.xp6(1),u.Q6J("items",u.lcZ(9,14,t.items$))("itemsPerPage",u.lcZ(10,16,t.itemsPerPage$))("totalItems",u.lcZ(11,18,t.totalItems$))("currentPage",u.lcZ(12,20,t.currentPage$)),u.xp6(6),u.Oqu(u.lcZ(15,22,"common.code")),u.xp6(3),u.Oqu(u.lcZ(18,24,"common.name")),u.xp6(9),u.Oqu(u.lcZ(27,26,"settings.test-shipping-methods")))},directives:function(){return[f.KkL,f.BND,f.SdP,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,Q.bZL,Q.twP,Q.GmI,Q.dxz,Q.UJ5,Q.Nz$,Q.DbV,L.yS,Q.qvL,f.v_8,f.JOL,f.UaT,f.N9E,f.HH4,Q.r6y,ar,or,Kn]},pipes:function(){return[D.Ov,N.X$,f.j$k]},styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px}"],changeDetection:0}),Xn.ctorParameters=function(){return[{type:f.Z7U},{type:f.gqp},{type:f.DoR},{type:f.iHG},{type:L.F0},{type:L.gz}]};var er=function e(){p(this,e),this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new u.vpe};er.\u0275fac=function(e){return new(e||er)},er.\u0275cmp=u.Xpm({type:er,selectors:[["vdr-shipping-method-test-result"]],inputs:{okToRun:"okToRun",testDataUpdated:"testDataUpdated",testResult:"testResult",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:21,vars:24,consts:[[1,"test-result","card",3,"ngClass"],[1,"card-header"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"eligible-icon"],["shape","success-standard","class","is-solid success",4,"ngIf"],["shape","ban","class","is-solid error",4,"ngIf"],["shape","unknown-status",4,"ngIf"],[1,"price-row"],[3,"label",4,"ngIf"],[3,"value",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],["shape","success-standard",1,"is-solid","success"],["shape","ban",1,"is-solid","error"],["shape","unknown-status"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"div",2),u.TgZ(5,"div",3),u.TgZ(6,"vdr-labeled-data",4),u.ALo(7,"translate"),u.TgZ(8,"div",5),u.YNc(9,Yt,1,0,"clr-icon",6),u.YNc(10,Rt,1,0,"clr-icon",7),u.YNc(11,$t,1,0,"clr-icon",8),u.qZA(),u._uU(12),u.qZA(),u.TgZ(13,"div",9),u.YNc(14,jt,4,7,"vdr-labeled-data",10),u.YNc(15,zt,4,7,"vdr-labeled-data",10),u.qZA(),u.YNc(16,Et,1,1,"vdr-object-tree",11),u.qZA(),u.qZA(),u.TgZ(17,"div",12),u.TgZ(18,"button",13),u.NdJ("click",function(){return t.runTest.emit()}),u._uU(19),u.ALo(20,"translate"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.Q6J("ngClass",u.kEZ(20,Ht,!0===(null==t.testResult?null:t.testResult.eligible),!1===(null==t.testResult?null:t.testResult.eligible),!t.testResult)),u.xp6(2),u.hij(" ",u.lcZ(3,14,"settings.test-result")," "),u.xp6(3),u.ekj("stale",t.testDataUpdated),u.xp6(1),u.Q6J("label",u.lcZ(7,16,"settings.eligible")),u.xp6(3),u.Q6J("ngIf",null==t.testResult?null:t.testResult.eligible),u.xp6(1),u.Q6J("ngIf",!1===(null==t.testResult?null:t.testResult.eligible)),u.xp6(1),u.Q6J("ngIf",!t.testResult),u.xp6(1),u.hij(" ",null==t.testResult?null:t.testResult.eligible," "),u.xp6(2),u.Q6J("ngIf",null!=(null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.price)),u.xp6(1),u.Q6J("ngIf",null!=(null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.priceWithTax)),u.xp6(1),u.Q6J("ngIf",null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.metadata),u.xp6(2),u.Q6J("disabled",!t.okToRun),u.xp6(1),u.hij(" ",u.lcZ(20,18,"settings.test-shipping-method")," "))},directives:[D.mk,f.WGc,D.O5,Q.qvL,f._8q],pipes:[N.X$,f.kgx],styles:[".test-result.success[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-success-100)}.test-result.error[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-error-100)}.test-result.unknown[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.eligible-icon[_ngcontent-%COMP%]{display:inline-block}.eligible-icon[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:var(--color-success-500)}.eligible-icon[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--color-error-500)}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-left:24px}"],changeDetection:0}),er.propDecorators={testResult:[{type:u.IIB}],okToRun:[{type:u.IIB}],testDataUpdated:[{type:u.IIB}],currencyCode:[{type:u.IIB}],runTest:[{type:u.r_U}]};var tr=function(e){s(n,e);var t=l(n);function n(e,r,i,o,a,s,c){var l;return p(this,n),(l=t.call(this,r,e,i,a)).changeDetector=o,l.dataService=a,l.formBuilder=s,l.notificationService=c,l.updatePermission=[f.y3$.UpdateSettings,f.y3$.UpdateTaxCategory],l.detailForm=l.formBuilder.group({name:["",k.kI.required],isDefault:!1}),l}return g(n,[{key:"ngOnInit",value:function(){this.init(),this.taxCategory$=this.entity$}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,n={name:t.name,isDefault:t.isDefault};this.dataService.settings.createTaxCategory(n).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"TaxCategory"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createTaxCategory.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,F.J)("common.notify-create-error"),{entity:"TaxCategory"})})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.taxCategory$.pipe((0,h.q)(1),(0,Z.zg)(function(n){var r={id:n.id,name:t.name,isDefault:t.isDefault};return e.dataService.settings.updateTaxCategory(r)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"TaxCategory"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"TaxCategory"})})}}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({name:e.name,isDefault:e.isDefault})}}]),n}(f.UT_);tr.\u0275fac=function(e){return new(e||tr)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},tr.\u0275cmp=u.Xpm({type:tr,selectors:[["vdr-tax-detail"]],features:[u.qOj],decls:20,vars:20,consts:[[3,"entity"],["locationId","tax-category-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","isDefault",3,"label"],["type","checkbox","clrToggle","","id","isDefault","formControlName","isDefault",3,"vdrDisabled"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,Gt,3,4,"button",2),u.ALo(7,"async"),u.YNc(8,Vt,1,1,"ng-template",null,3,u.W1O),u.qZA(),u.qZA(),u.TgZ(10,"form",4),u.TgZ(11,"vdr-form-field",5),u.ALo(12,"translate"),u._UZ(13,"input",6),u.ALo(14,"hasPermission"),u.qZA(),u.TgZ(15,"vdr-form-field",7),u.ALo(16,"translate"),u.TgZ(17,"clr-toggle-wrapper"),u._UZ(18,"input",8),u.ALo(19,"hasPermission"),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.MAs(9);u.xp6(2),u.Q6J("entity",u.lcZ(3,8,t.entity$)),u.xp6(4),u.Q6J("ngIf",u.lcZ(7,10,t.isNew$))("ngIfElse",n),u.xp6(4),u.Q6J("formGroup",t.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(12,12,"common.name")),u.xp6(2),u.Q6J("readonly",!u.lcZ(14,14,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(16,16,"common.default-tax-category")),u.xp6(3),u.Q6J("vdrDisabled",!u.lcZ(19,18,t.updatePermission))}},directives:[f.KkL,f.BND,f.Vqt,f.mz,f.WWO,D.O5,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,Q.PEh,k.Wl,Q.KKC,f.x3T,f.HAh],pipes:[D.Ov,N.X$,f.j$k],styles:[""],changeDetection:0}),tr.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var nr=function(){function e(t,n,r){p(this,e),this.dataService=t,this.notificationService=n,this.modalService=r,this.queryResult=this.dataService.settings.getTaxCategories(),this.taxCategories$=this.queryResult.mapStream(function(e){return e.taxCategories})}return g(e,[{key:"deleteTaxCategory",value:function(e){var t=this;return this.modalService.dialog({title:(0,F.J)("settings.confirm-delete-tax-category"),body:e.name,buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteTaxCategory(e.id):_.E}),(0,v.U)(function(e){return e.deleteTaxCategory})).subscribe(function(e){e.result===f.PcR.DELETED?(t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"TaxRate"}),t.queryResult.ref.refetch()):t.notificationService.error(e.message||(0,F.J)("common.notify-delete-error"),{entity:"TaxRate"})},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"TaxRate"})})}}]),e}();nr.\u0275fac=function(e){return new(e||nr)(u.Y36(f.DoR),u.Y36(f.gqp),u.Y36(f.Z7U))},nr.\u0275cmp=u.Xpm({type:nr,selectors:[["vdr-tax-list"]],decls:13,vars:8,consts:[["locationId","tax-category-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-right"),u._UZ(2,"vdr-action-bar-items",0),u.YNc(3,Kt,4,5,"a",1),u.qZA(),u.qZA(),u.TgZ(4,"vdr-data-table",2),u.ALo(5,"async"),u.TgZ(6,"vdr-dt-column"),u._uU(7),u.ALo(8,"translate"),u.qZA(),u._UZ(9,"vdr-dt-column"),u._UZ(10,"vdr-dt-column"),u._UZ(11,"vdr-dt-column"),u.YNc(12,en,19,18,"ng-template"),u.qZA()),2&e&&(u.xp6(3),u.Q6J("vdrIfPermissions",u.DdM(7,tn)),u.xp6(1),u.Q6J("items",u.lcZ(5,3,t.taxCategories$)),u.xp6(3),u.Oqu(u.lcZ(8,5,"common.name")))},directives:[f.KkL,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,L.yS,Q.qvL,D.O5,f.v_8,f.JOL,f.UaT,f.N9E,f.HH4,f.Ywx],pipes:[D.Ov,N.X$,f.j$k],styles:[""],changeDetection:0}),nr.ctorParameters=function(){return[{type:f.DoR},{type:f.gqp},{type:f.Z7U}]};var rr=function(e){s(n,e);var t=l(n);function n(e,r,i,o,a,s,c){var l;return p(this,n),(l=t.call(this,r,e,i,a)).changeDetector=o,l.dataService=a,l.formBuilder=s,l.notificationService=c,l.updatePermission=[f.y3$.UpdateSettings,f.y3$.UpdateTaxRate],l.detailForm=l.formBuilder.group({name:["",k.kI.required],enabled:[!0],value:[0,k.kI.required],taxCategoryId:[""],zoneId:[""],customerGroupId:[""]}),l}return g(n,[{key:"ngOnInit",value:function(){this.init(),this.taxCategories$=this.dataService.settings.getTaxCategories().mapSingle(function(e){return e.taxCategories}),this.zones$=this.dataService.settings.getZones().mapSingle(function(e){return e.zones})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,n={name:t.name,enabled:t.enabled,value:t.value,categoryId:t.taxCategoryId,zoneId:t.zoneId,customerGroupId:t.customerGroupId};this.dataService.settings.createTaxRate(n).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"TaxRate"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createTaxRate.id],{relativeTo:e.route})},function(t){e.notificationService.error((0,F.J)("common.notify-create-error"),{entity:"TaxRate"})})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.entity$.pipe((0,h.q)(1),(0,Z.zg)(function(n){var r={id:n.id,name:t.name,enabled:t.enabled,value:t.value,categoryId:t.taxCategoryId,zoneId:t.zoneId,customerGroupId:t.customerGroupId};return e.dataService.settings.updateTaxRate(r)})).subscribe(function(t){e.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"TaxRate"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"TaxRate"})})}}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({name:e.name,enabled:e.enabled,value:e.value,taxCategoryId:e.category?e.category.id:"",zoneId:e.zone?e.zone.id:"",customerGroupId:e.customerGroup?e.customerGroup.id:""})}}]),n}(f.UT_);rr.\u0275fac=function(e){return new(e||rr)(u.Y36(L.F0),u.Y36(L.gz),u.Y36(f.iHG),u.Y36(u.sBO),u.Y36(f.DoR),u.Y36(k.qu),u.Y36(f.gqp))},rr.\u0275cmp=u.Xpm({type:rr,selectors:[["vdr-tax-rate-detail"]],features:[u.qOj],decls:37,vars:44,consts:[[3,"entity"],["locationId","tax-rate-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["for","value",3,"label"],["suffix","%"],["id","value","type","number","step","0.1","formControlName","value",3,"readonly"],["for","taxCategoryId",3,"label"],["clrSelect","","name","taxCategoryId","formControlName","taxCategoryId",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","zoneId",3,"label"],["clrSelect","","name","zoneId","formControlName","zoneId",3,"vdrDisabled"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"vdr-entity-info",0),u.ALo(3,"async"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,nn,3,4,"button",2),u.ALo(7,"async"),u.YNc(8,on,1,1,"ng-template",null,3,u.W1O),u.qZA(),u.qZA(),u.TgZ(10,"form",4),u.TgZ(11,"vdr-form-field",5),u.ALo(12,"translate"),u._UZ(13,"input",6),u.ALo(14,"hasPermission"),u.qZA(),u.TgZ(15,"vdr-form-field",7),u.ALo(16,"translate"),u.TgZ(17,"clr-toggle-wrapper"),u._UZ(18,"input",8),u.ALo(19,"hasPermission"),u.qZA(),u.qZA(),u.TgZ(20,"vdr-form-field",9),u.ALo(21,"translate"),u.TgZ(22,"vdr-affixed-input",10),u._UZ(23,"input",11),u.ALo(24,"hasPermission"),u.qZA(),u.qZA(),u.TgZ(25,"vdr-form-field",12),u.ALo(26,"translate"),u.TgZ(27,"select",13),u.ALo(28,"hasPermission"),u.YNc(29,an,2,2,"option",14),u.ALo(30,"async"),u.qZA(),u.qZA(),u.TgZ(31,"vdr-form-field",15),u.ALo(32,"translate"),u.TgZ(33,"select",16),u.ALo(34,"hasPermission"),u.YNc(35,sn,2,2,"option",14),u.ALo(36,"async"),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.MAs(9);u.xp6(2),u.Q6J("entity",u.lcZ(3,16,t.entity$)),u.xp6(4),u.Q6J("ngIf",u.lcZ(7,18,t.isNew$))("ngIfElse",n),u.xp6(4),u.Q6J("formGroup",t.detailForm),u.xp6(1),u.Q6J("label",u.lcZ(12,20,"common.name")),u.xp6(2),u.Q6J("readonly",!u.lcZ(14,22,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(16,24,"common.enabled")),u.xp6(3),u.Q6J("vdrDisabled",!u.lcZ(19,26,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(21,28,"settings.rate")),u.xp6(3),u.Q6J("readonly",!u.lcZ(24,30,t.updatePermission)),u.xp6(2),u.Q6J("label",u.lcZ(26,32,"settings.tax-category")),u.xp6(2),u.Q6J("vdrDisabled",!u.lcZ(28,34,t.updatePermission)),u.xp6(2),u.Q6J("ngForOf",u.lcZ(30,36,t.taxCategories$)),u.xp6(2),u.Q6J("label",u.lcZ(32,38,"settings.zone")),u.xp6(2),u.Q6J("vdrDisabled",!u.lcZ(34,40,t.updatePermission)),u.xp6(2),u.Q6J("ngForOf",u.lcZ(36,42,t.zones$))}},directives:[f.KkL,f.BND,f.Vqt,f.mz,f.WWO,D.O5,k._Y,k.JL,k.sg,f.hgI,f.y_K,k.Fj,k.JJ,k.u,Q.PEh,k.Wl,Q.KKC,f.x3T,f.KH1,k.wV,k.EJ,Q.otW,D.sg,f.HAh,k.YN,k.Kr],pipes:[D.Ov,N.X$,f.j$k],styles:[""],changeDetection:0}),rr.ctorParameters=function(){return[{type:L.F0},{type:L.gz},{type:f.iHG},{type:u.sBO},{type:f.DoR},{type:k.qu},{type:f.gqp}]};var ir=function(e){s(r,e);var n=l(r);function r(e,i,o,a,s){var c,l;return p(this,r),(l=n.call(this,a,s)).modalService=e,l.notificationService=i,l.dataService=o,t((c=d(l),m(r.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=l.dataService.settings).getTaxRates.apply(e,arguments)},function(e){return e.taxRates}),l}return g(r,[{key:"deleteTaxRate",value:function(e){var t=this;return this.modalService.dialog({title:(0,F.J)("settings.confirm-delete-tax-rate"),body:e.name,buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteTaxRate(e.id):_.E}),(0,v.U)(function(e){return e.deleteTaxRate})).subscribe(function(e){e.result===f.PcR.DELETED?(t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"TaxRate"}),t.refresh()):t.notificationService.error(e.message||(0,F.J)("common.notify-delete-error"),{entity:"TaxRate"})},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"TaxRate"})})}}]),r}(f.t7C);ir.\u0275fac=function(e){return new(e||ir)(u.Y36(f.Z7U),u.Y36(f.gqp),u.Y36(f.DoR),u.Y36(L.F0),u.Y36(L.gz))},ir.\u0275cmp=u.Xpm({type:ir,selectors:[["vdr-tax-rate-list"]],features:[u.qOj],decls:24,vars:26,consts:[["locationId","tax-rate-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-right"),u._UZ(2,"vdr-action-bar-items",0),u.YNc(3,cn,4,5,"a",1),u.qZA(),u.qZA(),u.TgZ(4,"vdr-data-table",2),u.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),u.ALo(5,"async"),u.ALo(6,"async"),u.ALo(7,"async"),u.ALo(8,"async"),u.TgZ(9,"vdr-dt-column"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"vdr-dt-column"),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"vdr-dt-column"),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.TgZ(18,"vdr-dt-column"),u._uU(19),u.ALo(20,"translate"),u.qZA(),u._UZ(21,"vdr-dt-column"),u._UZ(22,"vdr-dt-column"),u.YNc(23,un,23,20,"ng-template"),u.qZA()),2&e&&(u.xp6(3),u.Q6J("vdrIfPermissions",u.DdM(25,dn)),u.xp6(1),u.Q6J("items",u.lcZ(5,9,t.items$))("itemsPerPage",u.lcZ(6,11,t.itemsPerPage$))("totalItems",u.lcZ(7,13,t.totalItems$))("currentPage",u.lcZ(8,15,t.currentPage$)),u.xp6(6),u.Oqu(u.lcZ(11,17,"common.name")),u.xp6(3),u.Oqu(u.lcZ(14,19,"settings.tax-category")),u.xp6(3),u.Oqu(u.lcZ(17,21,"settings.zone")),u.xp6(3),u.Oqu(u.lcZ(20,23,"settings.tax-rate")))},directives:[f.KkL,f.mz,f.WWO,f.HAh,f.Qj_,f.Egy,L.yS,Q.qvL,f.v_8,f.JOL,f.UaT,f.N9E,f.HH4],pipes:[D.Ov,N.X$,f.j$k],styles:[""],changeDetection:0}),ir.ctorParameters=function(){return[{type:f.Z7U},{type:f.gqp},{type:f.DoR},{type:L.F0},{type:L.gz}]};var or=function(){function e(t,n,r){p(this,e),this.formBuilder=t,this.dataService=n,this.localStorageService=r,this.addressChange=new u.vpe}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(function(e){return e.countries.items});var t=this.localStorageService.getForCurrentLocation("shippingTestAddress")||{city:"",countryCode:"",postalCode:"",province:""};this.addressChange.emit(t),this.form=this.formBuilder.group(t),this.subscription=this.form.valueChanges.subscribe(function(t){e.localStorageService.setForCurrentLocation("shippingTestAddress",t),e.addressChange.emit(t)})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();or.\u0275fac=function(e){return new(e||or)(u.Y36(k.qu),u.Y36(f.DoR),u.Y36(f.n2A))},or.\u0275cmp=u.Xpm({type:or,selectors:[["vdr-test-address-form"]],outputs:{addressChange:"addressChange"},decls:28,vars:19,consts:[[1,"card"],[1,"card-header"],[1,"card-block"],[3,"formGroup"],["formControlName","city","type","text","clrInput",""],["formControlName","province","type","text","clrInput",""],["formControlName","postalCode","type","text","clrInput",""],["name","countryCode","formControlName","countryCode","clrInput","","clrSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"div",2),u.TgZ(5,"form",3),u.TgZ(6,"clr-input-container"),u.TgZ(7,"label"),u._uU(8),u.ALo(9,"translate"),u.qZA(),u._UZ(10,"input",4),u.qZA(),u.TgZ(11,"clr-input-container"),u.TgZ(12,"label"),u._uU(13),u.ALo(14,"translate"),u.qZA(),u._UZ(15,"input",5),u.qZA(),u.TgZ(16,"clr-input-container"),u.TgZ(17,"label"),u._uU(18),u.ALo(19,"translate"),u.qZA(),u._UZ(20,"input",6),u.qZA(),u.TgZ(21,"clr-input-container"),u.TgZ(22,"label"),u._uU(23),u.ALo(24,"translate"),u.qZA(),u.TgZ(25,"select",7),u.YNc(26,mn,2,2,"option",8),u.ALo(27,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,7,"settings.test-address")," "),u.xp6(3),u.Q6J("formGroup",t.form),u.xp6(3),u.Oqu(u.lcZ(9,9,"customer.city")),u.xp6(5),u.Oqu(u.lcZ(14,11,"customer.province")),u.xp6(5),u.Oqu(u.lcZ(19,13,"customer.postal-code")),u.xp6(5),u.Oqu(u.lcZ(24,15,"customer.country")),u.xp6(3),u.Q6J("ngForOf",u.lcZ(27,17,t.availableCountries$)))},directives:[k._Y,k.JL,k.sg,Q.G55,Q.MgK,f.y_K,k.Fj,k.JJ,k.u,Q.xRP,k.EJ,Q.otW,D.sg,k.YN,k.Kr],pipes:[N.X$,D.Ov],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),or.ctorParameters=function(){return[{type:k.qu},{type:f.DoR},{type:f.n2A}]},or.propDecorators={addressChange:[{type:u.r_U}]};var ar=function(){function e(t,n){p(this,e),this.dataService=t,this.localStorageService=n,this.orderLinesChange=new u.vpe,this.lines=[]}return g(e,[{key:"subTotal",get:function(){return this.lines.reduce(function(e,t){return e+t.unitPriceWithTax*t.quantity},0)}},{key:"ngOnInit",value:function(){var e=this;this.lines=this.loadFromLocalStorage(),this.lines&&this.orderLinesChange.emit(this.lines),this.dataService.settings.getActiveChannel("cache-first").single$.subscribe(function(t){e.currencyCode=t.activeChannel.currencyCode})}},{key:"selectResult",value:function(e){e&&this.addToLines(e)}},{key:"addToLines",value:function(e){var t,n;this.lines.find(function(t){return t.id===e.productVariantId})||(this.lines.push({id:e.productVariantId,name:e.productVariantName,preview:null!==(n=null===(t=e.productAsset)||void 0===t?void 0:t.preview)&&void 0!==n?n:"",quantity:1,sku:e.sku,unitPriceWithTax:"SinglePrice"===e.priceWithTax.__typename&&e.priceWithTax.value||0}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines))}},{key:"updateQuantity",value:function(){this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}},{key:"removeLine",value:function(e){this.lines=this.lines.filter(function(t){return t.id!==e.id}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}},{key:"persistToLocalStorage",value:function(){this.localStorageService.setForCurrentLocation("shippingTestOrder",this.lines)}},{key:"loadFromLocalStorage",value:function(){return this.localStorageService.getForCurrentLocation("shippingTestOrder")||[]}}]),e}();ar.\u0275fac=function(e){return new(e||ar)(u.Y36(f.DoR),u.Y36(f.n2A))},ar.\u0275cmp=u.Xpm({type:ar,selectors:[["vdr-test-order-builder"]],outputs:{orderLinesChange:"orderLinesChange"},decls:9,vars:5,consts:[[1,"card"],[1,"card-header"],["class","order-table table",4,"ngIf","ngIfElse"],["emptyPlaceholder",""],[1,"card-block"],[3,"productSelected"],[1,"order-table","table"],["class","order-line",4,"ngFor","ngForOf"],[1,"sub-total"],[1,"left"],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","unit-price"],[1,"align-middle","quantity"],["type","number","max","9999","min","1",3,"ngModel","ngModelChange","change"],[1,"icon-button",3,"click"],["shape","trash"],[1,"align-middle","total"],[1,"card-block","empty-placeholder"],[1,"empty-text"],["shape","arrow","dir","down","size","96"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,fn,31,23,"table",2),u.YNc(5,gn,5,3,"ng-template",null,3,u.W1O),u.TgZ(7,"div",4),u.TgZ(8,"vdr-product-selector",5),u.NdJ("productSelected",function(e){return t.selectResult(e)}),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.MAs(6);u.xp6(2),u.hij(" ",u.lcZ(3,3,"settings.test-order")," "),u.xp6(2),u.Q6J("ngIf",t.lines.length)("ngIfElse",n)}},directives:[D.O5,f.cyK,D.sg,f.y_K,k.Fd,k.qQ,k.wV,k.Fj,k.JJ,k.On,Q.qvL,Y.Lv],pipes:[N.X$,f.kgx],styles:[".empty-placeholder[_ngcontent-%COMP%]{color:var(--color-grey-400);text-align:center}.empty-text[_ngcontent-%COMP%]{font-size:22px}"],changeDetection:0}),ar.ctorParameters=function(){return[{type:f.DoR},{type:f.n2A}]},ar.propDecorators={orderLinesChange:[{type:u.r_U}]};var sr=function(){function e(){p(this,e)}return g(e,[{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.zone.name)}}]),e}();sr.\u0275fac=function(e){return new(e||sr)},sr.\u0275cmp=u.Xpm({type:sr,selectors:[["vdr-zone-detail-dialog"]],decls:6,vars:8,consts:[["vdrDialogTitle",""],["for","name",3,"label"],["id","name","type","text",3,"ngModel","readonly","ngModelChange"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(u.YNc(0,Zn,2,2,"ng-template",0),u.TgZ(1,"vdr-form-field",1),u.ALo(2,"translate"),u.TgZ(3,"input",2),u.NdJ("ngModelChange",function(e){return t.zone.name=e}),u.ALo(4,"hasPermission"),u.qZA(),u.qZA(),u.YNc(5,An,6,6,"ng-template",3)),2&e&&(u.xp6(1),u.Q6J("label",u.lcZ(2,3,"common.name")),u.xp6(2),u.Q6J("ngModel",t.zone.name)("readonly",!u.lcZ(4,5,u.DdM(7,xn))))},directives:[f.q6K,f.hgI,f.y_K,k.Fj,k.JJ,k.On,f.nPI,D.O5],pipes:[N.X$,f.j$k],styles:[""],changeDetection:0});var cr=function(){function e(t,n,r,i,o){p(this,e),this.dataService=t,this.notificationService=n,this.modalService=r,this.route=i,this.router=o,this.selectedMemberIds=[]}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.zones$=this.dataService.settings.getZones().mapStream(function(e){return e.zones});var t=this.route.paramMap.pipe((0,v.U)(function(e){return e.get("contents")}),(0,q.x)(),(0,A.b)(function(){return e.selectedMemberIds=[]}));this.activeZone$=(0,w.aj)(this.zones$,t).pipe((0,v.U)(function(e){var t=r(e,2),n=t[0],i=t[1];if(i)return n.find(function(e){return e.id===i})}))}},{key:"create",value:function(){var e=this;this.modalService.fromComponent(sr,{locals:{zone:{name:""}}}).pipe((0,y.w)(function(t){return t?e.dataService.settings.createZone({name:t,memberIds:[]}):_.E}),(0,y.w)(function(){return e.dataService.settings.getZones().single$})).subscribe(function(){e.notificationService.success((0,F.J)("common.notify-create-success"),{entity:"Zone"})},function(t){e.notificationService.error((0,F.J)("common.notify-create-error"),{entity:"Zone"})})}},{key:"delete",value:function(e){var t=this;this.modalService.dialog({title:(0,F.J)("catalog.confirm-delete-zone"),buttons:[{type:"secondary",label:(0,F.J)("common.cancel")},{type:"danger",label:(0,F.J)("common.delete"),returnValue:!0}]}).pipe((0,y.w)(function(n){return n?t.dataService.settings.deleteZone(e):_.E}),(0,y.w)(function(e){return e.deleteZone.result===f.PcR.DELETED?t.dataService.settings.getZones().mapSingle(function(){return{errorMessage:!1}}):(0,I.of)({errorMessage:e.deleteZone.message})})).subscribe(function(e){"string"==typeof e.errorMessage?t.notificationService.error(e.errorMessage):t.notificationService.success((0,F.J)("common.notify-delete-success"),{entity:"Zone"})},function(e){t.notificationService.error((0,F.J)("common.notify-delete-error"),{entity:"Zone"})})}},{key:"update",value:function(e){var t=this;this.modalService.fromComponent(sr,{locals:{zone:e}}).pipe((0,y.w)(function(n){return n?t.dataService.settings.updateZone({id:e.id,name:n}):_.E})).subscribe(function(){t.notificationService.success((0,F.J)("common.notify-update-success"),{entity:"Zone"})},function(e){t.notificationService.error((0,F.J)("common.notify-update-error"),{entity:"Zone"})})}},{key:"closeMembers",value:function(){var e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}},{key:"addToZone",value:function(e){var t=this;this.modalService.fromComponent(Dn,{locals:{zoneName:e.name,currentMembers:e.members},size:"md"}).pipe((0,y.w)(function(n){return n?t.dataService.settings.addMembersToZone(e.id,n).pipe((0,C.h)(n)):_.E})).subscribe({next:function(n){t.notificationService.success((0,F.J)("settings.add-countries-to-zone-success"),{countryCount:n.length,zoneName:e.name})},error:function(e){t.notificationService.error(e)}})}},{key:"removeFromZone",value:function(e,t){var n=this;this.dataService.settings.removeMembersFromZone(e.id,t).subscribe({complete:function(){n.notificationService.success((0,F.J)("settings.remove-countries-from-zone-success"),{countryCount:t.length,zoneName:e.name})}})}}]),e}();cr.\u0275fac=function(e){return new(e||cr)(u.Y36(f.DoR),u.Y36(f.gqp),u.Y36(f.Z7U),u.Y36(L.gz),u.Y36(L.F0))},cr.\u0275cmp=u.Xpm({type:cr,selectors:[["vdr-zone-list"]],decls:14,vars:12,consts:[["locationId","zone-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"zone-wrapper"],[1,"table","zone-list"],[3,"active",4,"ngFor","ngForOf"],[1,"zone-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],[1,"text-right","align-middle"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"members","selectedMemberIds","selectionChange"],[4,"vdrZoneMemberListHeader"],[4,"vdrZoneMemberControls"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],["type","button","vdrDropdownItem","",3,"routerLink"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u._UZ(1,"vdr-ab-left"),u.TgZ(2,"vdr-ab-right"),u._UZ(3,"vdr-action-bar-items",0),u.YNc(4,Tn,4,3,"button",1),u.qZA(),u.qZA(),u.TgZ(5,"div",2),u.TgZ(6,"table",3),u.TgZ(7,"tbody"),u.YNc(8,Cn,29,28,"tr",4),u.ALo(9,"async"),u.qZA(),u.qZA(),u.TgZ(10,"div",5),u.ALo(11,"async"),u.YNc(12,Jn,4,2,"ng-container",6),u.ALo(13,"async"),u.qZA(),u.qZA()),2&e&&(u.xp6(4),u.Q6J("vdrIfPermissions",u.DdM(11,_n)),u.xp6(4),u.Q6J("ngForOf",u.lcZ(9,5,t.zones$)),u.xp6(2),u.ekj("expanded",u.lcZ(11,7,t.activeZone$)),u.xp6(2),u.Q6J("ngIf",u.lcZ(13,9,t.activeZone$)))},directives:function(){return[f.KkL,f.BND,f.mz,f.WWO,f.HAh,D.sg,D.O5,Q.qvL,f.Vqt,f.Ywx,L.yS,f.JOL,f.UaT,f.N9E,f.HH4,dr,ur,lr]},pipes:function(){return[D.Ov,N.X$,f.j$k]},styles:[".zone-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.zone-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.zone-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-left:12px}.zone-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.zone-members[_ngcontent-%COMP%]     table.table{margin-top:0}.zone-members[_ngcontent-%COMP%]     table.table th{top:0}.zone-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),cr.ctorParameters=function(){return[{type:f.DoR},{type:f.gqp},{type:f.Z7U},{type:L.gz},{type:L.F0}]};var lr=function e(t){p(this,e),this.templateRef=t};lr.\u0275fac=function(e){return new(e||lr)(u.Y36(u.Rgc))},lr.\u0275dir=u.lG2({type:lr,selectors:[["","vdrZoneMemberControls",""]]}),lr.ctorParameters=function(){return[{type:u.Rgc}]};var ur=function e(t){p(this,e),this.templateRef=t};ur.\u0275fac=function(e){return new(e||ur)(u.Y36(u.Rgc))},ur.\u0275dir=u.lG2({type:ur,selectors:[["","vdrZoneMemberListHeader",""]]}),ur.ctorParameters=function(){return[{type:u.Rgc}]};var dr=function(){function t(){var e=this;p(this,t),this.members=[],this.selectedMemberIds=[],this.selectionChange=new u.vpe,this.filterTerm="",this.isMemberSelected=function(t){return-1<e.selectedMemberIds.indexOf(t.id)}}return g(t,[{key:"filteredMembers",value:function(){if(""!==this.filterTerm){var e=this.filterTerm.toLocaleLowerCase();return this.members.filter(function(t){return t.name.toLocaleLowerCase().includes(e)||t.code.toLocaleLowerCase().includes(e)})}return this.members}},{key:"areAllSelected",value:function(){return!!this.members&&this.selectedMemberIds.length===this.members.length}},{key:"toggleSelectAll",value:function(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map(function(e){return e.id}))}},{key:"toggleSelectMember",value:function(t){this.selectedMemberIds.includes(t.id)?this.selectionChange.emit(this.selectedMemberIds.filter(function(e){return e!==t.id})):this.selectionChange.emit([].concat(e(this.selectedMemberIds),[t.id]))}}]),t}();dr.\u0275fac=function(e){return new(e||dr)},dr.\u0275cmp=u.Xpm({type:dr,selectors:[["vdr-zone-member-list"]],contentQueries:function(e,t,n){var r;(1&e&&(u.Suo(n,ur,5),u.Suo(n,lr,5)),2&e)&&(u.iGM(r=u.CRH())&&(t.headerTemplate=r.first),u.iGM(r=u.CRH())&&(t.controlsTemplate=r.first))},inputs:{members:"members",selectedMemberIds:"selectedMemberIds"},outputs:{selectionChange:"selectionChange"},decls:17,vars:20,consts:[[1,"members-header"],[4,"ngIf"],["type","text",3,"placeholder","ngModel","ngModelChange"],[3,"items","allSelected","isRowSelectedFn","rowSelectChange","allSelectChange"],[4,"ngTemplateOutlet"],[1,"left","align-middle"],[1,"right","align-middle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.YNc(1,wn,2,1,"ng-container",1),u.TgZ(2,"input",2),u.NdJ("ngModelChange",function(e){return t.filterTerm=e}),u.ALo(3,"translate"),u.qZA(),u.qZA(),u.TgZ(4,"vdr-data-table",3),u.NdJ("rowSelectChange",function(e){return t.toggleSelectMember(e)})("allSelectChange",function(){return t.toggleSelectAll()}),u.ALo(5,"hasPermission"),u.TgZ(6,"vdr-dt-column"),u._uU(7),u.ALo(8,"translate"),u.qZA(),u.TgZ(9,"vdr-dt-column"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"vdr-dt-column"),u._uU(13),u.ALo(14,"translate"),u.qZA(),u._UZ(15,"vdr-dt-column"),u.YNc(16,On,8,6,"ng-template"),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",t.headerTemplate),u.xp6(1),u.Q6J("placeholder",u.lcZ(3,9,"settings.filter-by-member-name"))("ngModel",t.filterTerm),u.xp6(2),u.Q6J("items",t.filteredMembers())("allSelected",t.areAllSelected())("isRowSelectedFn",u.lcZ(5,11,u.DdM(19,xn))&&t.isMemberSelected),u.xp6(3),u.Oqu(u.lcZ(8,13,"common.code")),u.xp6(3),u.Oqu(u.lcZ(11,15,"common.name")),u.xp6(3),u.Oqu(u.lcZ(14,17,"common.enabled")))},directives:[D.O5,f.y_K,k.Fj,k.JJ,k.On,f.Qj_,f.Egy,D.tP,Q.qvL],pipes:[N.X$,f.j$k],styles:[".members-header[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:5;border-bottom:1px solid var(--color-component-border-200)}.members-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.members-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),dr.propDecorators={members:[{type:u.IIB}],selectedMemberIds:[{type:u.IIB}],selectionChange:[{type:u.r_U}],headerTemplate:[{type:u.aQ5,args:[ur]}],controlsTemplate:[{type:u.aQ5,args:[lr]}]};var mr=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},function(e){return r.administrator.getAdministrator(e).mapStream(function(e){return e.administrator})})}return n}(f.p_9);mr.\u0275fac=function(e){return new(e||mr)(u.LFG(L.F0),u.LFG(f.DoR))},mr.\u0275prov=u.Yz7({factory:function(){return new mr(u.LFG(L.F0),u.LFG(f.DoR))},token:mr,providedIn:"root"}),mr.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var pr=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"Channel",id:"",createdAt:"",updatedAt:"",code:"",token:"",pricesIncludeTax:!1,currencyCode:f.NEm.USD,defaultLanguageCode:(0,f.kAh)(),defaultShippingZone:{},defaultTaxZone:{}},function(e){return r.settings.getChannel(e).mapStream(function(e){return e.channel})})}return n}(f.p_9);pr.\u0275fac=function(e){return new(e||pr)(u.LFG(L.F0),u.LFG(f.DoR))},pr.\u0275prov=u.Yz7({factory:function(){return new pr(u.LFG(L.F0),u.LFG(f.DoR))},token:pr,providedIn:"root"}),pr.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var fr=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"Country",id:"",createdAt:"",updatedAt:"",code:"",name:"",enabled:!1,translations:[]},function(e){return r.settings.getCountry(e).mapStream(function(e){return e.country})})}return n}(f.p_9);fr.\u0275fac=function(e){return new(e||fr)(u.LFG(L.F0),u.LFG(f.DoR))},fr.\u0275prov=u.Yz7({factory:function(){return new fr(u.LFG(L.F0),u.LFG(f.DoR))},token:fr,providedIn:"root"}),fr.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var gr=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{},function(){return r.settings.getGlobalSettings().mapStream(function(e){return e.globalSettings})})}return n}(f.p_9);gr.\u0275fac=function(e){return new(e||gr)(u.LFG(L.F0),u.LFG(f.DoR))},gr.\u0275prov=u.Yz7({factory:function(){return new gr(u.LFG(L.F0),u.LFG(f.DoR))},token:gr,providedIn:"root"}),gr.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var vr=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"PaymentMethod",id:"",createdAt:"",updatedAt:"",name:"",code:"",description:"",enabled:!0,checker:void 0,handler:void 0},function(e){return r.settings.getPaymentMethod(e).mapStream(function(e){return e.paymentMethod})})}return n}(f.p_9);vr.\u0275fac=function(e){return new(e||vr)(u.LFG(L.F0),u.LFG(f.DoR))},vr.\u0275prov=u.Yz7({factory:function(){return new vr(u.LFG(L.F0),u.LFG(f.DoR))},token:vr,providedIn:"root"}),vr.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var hr=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},function(e){return r.administrator.getActiveAdministrator().mapStream(function(e){return e.activeAdministrator})})}return n}(f.p_9);hr.\u0275fac=function(e){return new(e||hr)(u.LFG(L.F0),u.LFG(f.DoR))},hr.\u0275prov=u.Yz7({factory:function(){return new hr(u.LFG(L.F0),u.LFG(f.DoR))},token:hr,providedIn:"root"}),hr.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var Zr=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"Role",id:"",createdAt:"",updatedAt:"",code:"",description:"",permissions:[],channels:[]},function(e){return r.administrator.getRole(e).mapStream(function(e){return e.role})})}return n}(f.p_9);Zr.\u0275fac=function(e){return new(e||Zr)(u.LFG(L.F0),u.LFG(f.DoR))},Zr.\u0275prov=u.Yz7({factory:function(){return new Zr(u.LFG(L.F0),u.LFG(f.DoR))},token:Zr,providedIn:"root"}),Zr.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var yr=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"ShippingMethod",createdAt:"",updatedAt:"",id:"",code:"",name:"",description:"",fulfillmentHandlerCode:void 0,checker:void 0,calculator:void 0,translations:[]},function(e){return r.shippingMethod.getShippingMethod(e).mapStream(function(e){return e.shippingMethod})})}return n}(f.p_9);yr.\u0275fac=function(e){return new(e||yr)(u.LFG(L.F0),u.LFG(f.DoR))},yr.\u0275prov=u.Yz7({factory:function(){return new yr(u.LFG(L.F0),u.LFG(f.DoR))},token:yr,providedIn:"root"}),yr.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var br=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"TaxCategory",id:"",createdAt:"",updatedAt:"",name:"",isDefault:!1},function(e){return r.settings.getTaxCategory(e).mapStream(function(e){return e.taxCategory})})}return n}(f.p_9);br.\u0275fac=function(e){return new(e||br)(u.LFG(L.F0),u.LFG(f.DoR))},br.\u0275prov=u.Yz7({factory:function(){return new br(u.LFG(L.F0),u.LFG(f.DoR))},token:br,providedIn:"root"}),br.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var Ar=function(e){s(n,e);var t=l(n);function n(e,r){return p(this,n),t.call(this,e,{__typename:"TaxRate",id:"",createdAt:"",updatedAt:"",name:"",value:0,enabled:!0,category:{},zone:{},customerGroup:null},function(e){return r.settings.getTaxRate(e).mapStream(function(e){return e.taxRate})})}return n}(f.p_9);Ar.\u0275fac=function(e){return new(e||Ar)(u.LFG(L.F0),u.LFG(f.DoR))},Ar.\u0275prov=u.Yz7({factory:function(){return new Ar(u.LFG(L.F0),u.LFG(f.DoR))},token:Ar,providedIn:"root"}),Ar.ctorParameters=function(){return[{type:L.F0},{type:f.DoR}]};var xr={breadcrumb:(0,F.J)("breadcrumb.profile")},Tr={breadcrumb:(0,F.J)("breadcrumb.administrators")},qr={breadcrumb:Rr},Cr={breadcrumb:(0,F.J)("breadcrumb.channels")},kr={breadcrumb:$r},Lr={breadcrumb:(0,F.J)("breadcrumb.roles")},Fr={breadcrumb:jr},Jr={breadcrumb:(0,F.J)("breadcrumb.tax-categories")},_r={breadcrumb:zr},Ur={breadcrumb:(0,F.J)("breadcrumb.tax-rates")},wr={breadcrumb:Er},Ir={breadcrumb:(0,F.J)("breadcrumb.countries")},Sr={breadcrumb:Hr},Pr={breadcrumb:(0,F.J)("breadcrumb.zones")},Or={breadcrumb:(0,F.J)("breadcrumb.shipping-methods")},Dr={breadcrumb:Gr},Nr={breadcrumb:(0,F.J)("breadcrumb.payment-methods")},Qr={breadcrumb:Br},Mr={breadcrumb:(0,F.J)("breadcrumb.global-settings")},Yr=[{path:"profile",component:Gn,resolve:(0,f.Po4)(hr),canDeactivate:[f.TSp],data:xr},{path:"administrators",component:Qn,data:Tr},{path:"administrators/:id",component:Nn,resolve:(0,f.Po4)(mr),canDeactivate:[f.TSp],data:qr},{path:"channels",component:Yn,data:Cr},{path:"channels/:id",component:Mn,resolve:(0,f.Po4)(pr),canDeactivate:[f.TSp],data:kr},{path:"roles",component:Vn,data:Lr},{path:"roles/:id",component:Bn,resolve:(0,f.Po4)(Zr),canDeactivate:[f.TSp],data:Fr},{path:"tax-categories",component:nr,data:Jr},{path:"tax-categories/:id",component:tr,resolve:(0,f.Po4)(br),canDeactivate:[f.TSp],data:_r},{path:"tax-rates",component:ir,data:Ur},{path:"tax-rates/:id",component:rr,resolve:(0,f.Po4)(Ar),canDeactivate:[f.TSp],data:wr},{path:"countries",component:$n,data:Ir},{path:"countries/:id",component:Rn,resolve:(0,f.Po4)(fr),canDeactivate:[f.TSp],data:Sr},{path:"zones",component:cr,data:Pr},{path:"shipping-methods",component:Xn,data:Or},{path:"shipping-methods/:id",component:Wn,resolve:(0,f.Po4)(yr),canDeactivate:[f.TSp],data:Dr},{path:"payment-methods",component:En,data:Nr},{path:"payment-methods/:id",component:zn,resolve:(0,f.Po4)(vr),canDeactivate:[f.TSp],data:Qr},{path:"global-settings",component:jn,resolve:(0,f.Po4)(gr),canDeactivate:[f.TSp],data:Mr}];function Rr(e,t){return(0,f.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.administrators",getName:function(e){return"".concat(e.firstName," ").concat(e.lastName)},route:"administrators"})}function $r(e,t){return(0,f.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.channels",getName:function(e){return e.code},route:"channels"})}function jr(e,t){return(0,f.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.roles",getName:function(e){return e.description},route:"roles"})}function zr(e,t){return(0,f.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-categories",getName:function(e){return e.name},route:"tax-categories"})}function Er(e,t){return(0,f.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-rates",getName:function(e){return e.name},route:"tax-rates"})}function Hr(e,t){return(0,f.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.countries",getName:function(e){return e.name},route:"countries"})}function Gr(e,t){return(0,f.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.shipping-methods",getName:function(e){return e.name},route:"shipping-methods"})}function Br(e,t){return(0,f.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.payment-methods",getName:function(e){return e.code},route:"payment-methods"})}var Vr=function e(){p(this,e)};Vr.\u0275fac=function(e){return new(e||Vr)},Vr.\u0275mod=u.oAB({type:Vr}),Vr.\u0275inj=u.cJS({imports:[[f.m81,L.Bz.forChild(Yr)]]})}}])}();
//# sourceMappingURL=871-es5.ae338aba1e68b6774bf0.js.map