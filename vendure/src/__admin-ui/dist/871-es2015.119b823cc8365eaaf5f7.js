"use strict";(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[871],{74871:function(e,t,n){n.r(t),n.d(t,{AddCountryToZoneDialogComponent:function(){return Cn},AdminDetailComponent:function(){return Fn},AdministratorListComponent:function(){return Ln},AdministratorResolver:function(){return ei},ChannelDetailComponent:function(){return Jn},ChannelListComponent:function(){return _n},ChannelResolver:function(){return ti},CountryDetailComponent:function(){return kn},CountryListComponent:function(){return Un},CountryResolver:function(){return ni},GlobalSettingsComponent:function(){return In},GlobalSettingsResolver:function(){return ii},PaymentMethodDetailComponent:function(){return Pn},PaymentMethodListComponent:function(){return Sn},PaymentMethodResolver:function(){return oi},PermissionGridComponent:function(){return On},ProfileComponent:function(){return wn},ProfileResolver:function(){return ri},RoleDetailComponent:function(){return Dn},RoleListComponent:function(){return Nn},RoleResolver:function(){return si},SettingsModule:function(){return Ni},ShippingEligibilityTestResultComponent:function(){return Qn},ShippingMethodDetailComponent:function(){return Mn},ShippingMethodListComponent:function(){return $n},ShippingMethodResolver:function(){return ai},ShippingMethodTestResultComponent:function(){return Yn},TaxCategoryDetailComponent:function(){return Rn},TaxCategoryListComponent:function(){return jn},TaxCategoryResolver:function(){return ci},TaxRateDetailComponent:function(){return zn},TaxRateListComponent:function(){return Hn},TaxRateResolver:function(){return li},TestAddressFormComponent:function(){return Gn},TestOrderBuilderComponent:function(){return En},ZoneDetailDialogComponent:function(){return Bn},ZoneListComponent:function(){return Vn},ZoneMemberControlsDirective:function(){return Wn},ZoneMemberListComponent:function(){return Xn},ZoneMemberListHeaderDirective:function(){return Kn},administratorBreadcrumb:function(){return ki},channelBreadcrumb:function(){return Ui},countryBreadcrumb:function(){return Oi},paymentMethodBreadcrumb:function(){return Di},roleBreadcrumb:function(){return Ii},settingsRoutes:function(){return _i},shippingMethodBreadcrumb:function(){return wi},taxCategoryBreadcrumb:function(){return Pi},taxRateBreadcrumb:function(){return Si},"\u02750":function(){return di},"\u02751":function(){return ui},"\u027510":function(){return yi},"\u027511":function(){return Ai},"\u027512":function(){return xi},"\u027513":function(){return Ti},"\u027514":function(){return qi},"\u027515":function(){return Ci},"\u027516":function(){return Fi},"\u027517":function(){return Li},"\u027518":function(){return Ji},"\u02752":function(){return mi},"\u02753":function(){return pi},"\u02754":function(){return gi},"\u02755":function(){return hi},"\u02756":function(){return fi},"\u02757":function(){return Zi},"\u02758":function(){return bi},"\u02759":function(){return vi}});var i=n(51694),o=n(329),r=n(37097),s=n(94769),a=n(15405),c=n(90026),l=n(72041),d=n(8603),u=n(86184),m=n(69874),p=n(9219),g=n(73341),h=n(90380),f=n(1956),Z=n(21067),b=n(41460),v=n(24791),y=n(61607),A=n(82957),x=n(65519),T=n(22277),q=n(75250),C=n(80188),F=n(98059),L=n(84435),J=n(70942),_=n(53198),k=n(56258),U=n(38564),I=n(34131);const P=function(e){return{zoneName:e}};function S(e,t){if(1&e&&(i._uU(0),i.ALo(1,"translate")),2&e){const e=i.oxw();i.Oqu(i.xi3(1,1,"settings.add-countries-to-zone",i.VKq(4,P,e.zoneName)))}}function O(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",3),i.NdJ("click",function(){return i.CHM(e),i.oxw().cancel()}),i._uU(1),i.ALo(2,"translate"),i.qZA(),i.TgZ(3,"button",4),i.NdJ("click",function(){return i.CHM(e),i.oxw().add()}),i._uU(4),i.ALo(5,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.xp6(1),i.Oqu(i.lcZ(2,3,"common.cancel")),i.xp6(2),i.Q6J("disabled",!e.selectedMemberIds.length),i.xp6(1),i.hij(" ",i.xi3(5,5,"settings.add-countries-to-zone",i.VKq(8,P,e.zoneName))," ")}}function w(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",20),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.detailForm.invalid||e.detailForm.pristine),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.create")," ")}}function D(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",20),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",e.detailForm.invalid||e.detailForm.pristine),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}function N(e,t){1&e&&i.YNc(0,D,3,4,"button",21),2&e&&i.Q6J("vdrIfPermissions","UpdateAdministrator")}function Q(e,t){1&e&&(i.TgZ(0,"vdr-form-field",22),i.ALo(1,"translate"),i._UZ(2,"input",23),i.qZA()),2&e&&i.Q6J("label",i.lcZ(1,1,"settings.password"))}function M(e,t){1&e&&(i.TgZ(0,"vdr-form-field",24),i.ALo(1,"translate"),i._UZ(2,"input",23),i.qZA()),2&e&&i.Q6J("label",i.lcZ(1,2,"settings.password"))("readOnlyToggle",!0)}const $=function(){return["CreateAdministrator","UpdateAdministrator"]};function Y(e,t){if(1&e&&(i.TgZ(0,"section",25),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",26),i.ALo(5,"hasPermission"),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,4,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!i.lcZ(5,6,i.DdM(8,$)))}}function R(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"li",27),i.TgZ(1,"button",28),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().selectedChannelId=t.channelId}),i._uU(2),i.ALo(3,"translate"),i.ALo(4,"channelCodeToLabel"),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit,n=i.oxw();i.xp6(1),i.ekj("active",n.selectedChannelId===e.channelId),i.Q6J("id",e.channelId),i.uIk("aria-selected",n.selectedChannelId===e.channelId),i.xp6(1),i.hij(" ",i.lcZ(3,5,i.lcZ(4,7,e.channelCode))," ")}}const j=function(){return["./create"]};function z(e,t){1&e&&(i.TgZ(0,"a",4),i._UZ(1,"clr-icon",5),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.Q6J("routerLink",i.DdM(4,j)),i.xp6(2),i.hij(" ",i.lcZ(3,2,"admin.create-new-administrator")," "))}const H=function(e){return["./",e]};function G(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",6),i._uU(1),i.qZA(),i.TgZ(2,"td",6),i._uU(3),i.qZA(),i.TgZ(4,"td",6),i._uU(5),i.qZA(),i.TgZ(6,"td",7),i._UZ(7,"vdr-table-row-action",8),i.ALo(8,"translate"),i.qZA(),i.TgZ(9,"td"),i.TgZ(10,"vdr-dropdown"),i.TgZ(11,"button",9),i._uU(12),i.ALo(13,"translate"),i._UZ(14,"clr-icon",10),i.qZA(),i.TgZ(15,"vdr-dropdown-menu",11),i.TgZ(16,"button",12),i.NdJ("click",function(){const t=i.CHM(e).item;return i.oxw().deleteAdministrator(t)}),i.ALo(17,"hasPermission"),i._UZ(18,"clr-icon",13),i._uU(19),i.ALo(20,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.item;i.xp6(1),i.Oqu(e.firstName),i.xp6(2),i.Oqu(e.lastName),i.xp6(2),i.Oqu(e.emailAddress),i.xp6(2),i.Q6J("label",i.lcZ(8,8,"common.edit"))("linkTo",i.VKq(16,H,e.id)),i.xp6(5),i.hij(" ",i.lcZ(13,10,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(17,12,"DeleteAdministrator")),i.xp6(3),i.hij(" ",i.lcZ(20,14,"common.delete")," ")}}function E(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",24),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",!e.saveButtonEnabled()),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.create")," ")}}function B(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",24),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",!e.saveButtonEnabled()),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}const V=function(){return["SuperAdmin","UpdateChannel"]};function W(e,t){1&e&&i.YNc(0,B,3,4,"button",25),2&e&&i.Q6J("vdrIfPermissions",i.DdM(1,V))}function K(e,t){if(1&e&&(i.TgZ(0,"option",26),i._uU(1),i.ALo(2,"localeCurrencyName"),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(i.lcZ(2,2,e))}}function X(e,t){if(1&e&&(i.TgZ(0,"option",26),i._uU(1),i.ALo(2,"localeLanguageName"),i.ALo(3,"uppercase"),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e),i.xp6(1),i.AsE(" ",i.lcZ(2,3,e)," (",i.lcZ(3,5,e),") ")}}function ee(e,t){if(1&e&&(i.TgZ(0,"option",26),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function te(e,t){1&e&&(i.TgZ(0,"clr-alert",27),i.TgZ(1,"clr-alert-item"),i.TgZ(2,"span",28),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.Q6J("clrAlertClosable",!1),i.xp6(3),i.hij(" ",i.lcZ(4,2,"error.no-default-tax-zone-set")," "))}function ne(e,t){if(1&e&&(i.TgZ(0,"option",26),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function ie(e,t){1&e&&(i.TgZ(0,"clr-alert",29),i.TgZ(1,"clr-alert-item"),i.TgZ(2,"span",28),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.Q6J("clrAlertClosable",!1),i.xp6(3),i.hij(" ",i.lcZ(4,2,"error.no-default-shipping-zone-set")," "))}function oe(e,t){if(1&e&&(i.TgZ(0,"section",30),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",31),i.ALo(5,"hasPermission"),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,4,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!i.lcZ(5,6,e.updatePermission))}}function re(e,t){1&e&&(i.TgZ(0,"a",3),i._UZ(1,"clr-icon",4),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.Q6J("routerLink",i.DdM(4,j)),i.xp6(2),i.hij(" ",i.lcZ(3,2,"settings.create-new-channel")," "))}const se=function(){return["SuperAdmin","DeleteChannel"]};function ae(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",5),i._UZ(1,"vdr-channel-badge",6),i._uU(2),i.ALo(3,"translate"),i.ALo(4,"channelCodeToLabel"),i.qZA(),i.TgZ(5,"td",7),i._UZ(6,"vdr-table-row-action",8),i.ALo(7,"translate"),i.qZA(),i.TgZ(8,"td",7),i.TgZ(9,"vdr-dropdown"),i.TgZ(10,"button",9),i._uU(11),i.ALo(12,"translate"),i._UZ(13,"clr-icon",10),i.qZA(),i.TgZ(14,"vdr-dropdown-menu",11),i.TgZ(15,"button",12),i.NdJ("click",function(){const t=i.CHM(e).item;return i.oxw().deleteChannel(t.id)}),i.ALo(16,"hasPermission"),i._UZ(17,"clr-icon",13),i._uU(18),i.ALo(19,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.item,n=i.oxw();i.xp6(1),i.Q6J("channelCode",e.code),i.xp6(1),i.hij(" ",i.lcZ(3,8,i.lcZ(4,10,e.code))," "),i.xp6(4),i.Q6J("label",i.lcZ(7,12,"common.edit"))("linkTo",i.VKq(20,H,e.id)),i.xp6(4),i.Q6J("disabled",n.isDefaultChannel(e.code)),i.xp6(1),i.hij(" ",i.lcZ(12,14,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(16,16,i.DdM(22,se))),i.xp6(3),i.hij(" ",i.lcZ(19,18,"common.delete")," ")}}const ce=function(){return["SuperAdmin","CreateChannel"]};function le(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.detailForm.invalid||e.detailForm.pristine),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.create")," ")}}function de(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",14),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",e.detailForm.invalid||e.detailForm.pristine),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}function ue(e,t){if(1&e&&i.YNc(0,de,3,4,"button",15),2&e){const e=i.oxw();i.Q6J("vdrIfPermissions",e.updatePermission)}}function me(e,t){if(1&e&&(i.TgZ(0,"section",16),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",17),i.ALo(5,"hasPermission"),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,4,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!i.lcZ(5,6,e.updatePermission))}}function pe(e,t){1&e&&(i.TgZ(0,"a",6),i._UZ(1,"clr-icon",7),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.Q6J("routerLink",i.DdM(4,j)),i.xp6(2),i.hij(" ",i.lcZ(3,2,"settings.create-new-country")," "))}const ge=function(e){return{contents:e}},he=function(e){return["/settings","zones",e]};function fe(e,t){if(1&e&&(i.TgZ(0,"a",17),i.TgZ(1,"vdr-chip",18),i._uU(2),i.qZA(),i.qZA()),2&e){const e=t.$implicit;i.Q6J("routerLink",i.VKq(5,he,i.VKq(3,ge,e.id))),i.xp6(1),i.Q6J("colorFrom",e.name),i.xp6(1),i.Oqu(e.name)}}const Ze=function(){return["DeleteSettings","DeleteCountry"]};function be(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",8),i._uU(1),i.qZA(),i.TgZ(2,"td",8),i._uU(3),i.qZA(),i.TgZ(4,"td",8),i.YNc(5,fe,3,7,"a",9),i.qZA(),i.TgZ(6,"td",8),i._UZ(7,"clr-icon"),i.qZA(),i.TgZ(8,"td",10),i._UZ(9,"vdr-table-row-action",11),i.ALo(10,"translate"),i.qZA(),i.TgZ(11,"td",10),i.TgZ(12,"vdr-dropdown"),i.TgZ(13,"button",12),i._uU(14),i.ALo(15,"translate"),i._UZ(16,"clr-icon",13),i.qZA(),i.TgZ(17,"vdr-dropdown-menu",14),i.TgZ(18,"button",15),i.NdJ("click",function(){const t=i.CHM(e).item;return i.oxw().deleteCountry(t.id)}),i.ALo(19,"hasPermission"),i._UZ(20,"clr-icon",16),i._uU(21),i.ALo(22,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.item;i.xp6(1),i.Oqu(e.code),i.xp6(2),i.Oqu(e.name),i.xp6(2),i.Q6J("ngForOf",e.zones),i.xp6(2),i.ekj("is-success",e.enabled),i.uIk("shape",e.enabled?"check":"times"),i.xp6(2),i.Q6J("label",i.lcZ(10,11,"common.edit"))("linkTo",i.VKq(19,H,e.id)),i.xp6(5),i.hij(" ",i.lcZ(15,13,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(19,15,i.DdM(21,Ze))),i.xp6(3),i.hij(" ",i.lcZ(22,17,"common.delete")," ")}}const ve=function(){return["CreateSettings","CreateCountry"]};function ye(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",13),i.NdJ("click",function(){return i.CHM(e),i.oxw().save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.detailForm.invalid||e.detailForm.pristine),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}function Ae(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"span",14),i.NdJ("click",function(){const t=i.CHM(e),n=t.item;return t.clear.call(null,n)}),i._uU(1," \xd7 "),i.qZA(),i.TgZ(2,"span",15),i._uU(3),i.ALo(4,"localeLanguageName"),i.qZA()}if(2&e){const e=t.item;i.xp6(3),i.AsE("",i.lcZ(4,2,e)," (",e,")")}}function xe(e,t){if(1&e&&(i._uU(0),i.ALo(1,"localeLanguageName")),2&e){const e=t.item;i.AsE(" ",i.lcZ(1,2,e)," (",e,") ")}}function Te(e,t){if(1&e&&(i.TgZ(0,"section",16),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",17),i.ALo(5,"hasPermission"),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,4,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!i.lcZ(5,6,e.updatePermission))}}function qe(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",5),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.detailForm.pristine||e.detailForm.invalid),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.create")," ")}}function Ce(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",5),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedHandler),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}function Fe(e,t){if(1&e&&i.YNc(0,Ce,3,4,"button",6),2&e){const e=i.oxw();i.Q6J("vdrIfPermissions",e.updatePermission)}}function Le(e,t){if(1&e&&(i.TgZ(0,"section",23),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",24),i.ALo(5,"hasPermission"),i.qZA()),2&e){const e=i.oxw(2);i.xp6(2),i.Oqu(i.lcZ(3,4,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!i.lcZ(5,6,e.updatePermission))}}function Je(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"vdr-configurable-input",25),i.NdJ("remove",function(){return i.CHM(e),i.oxw(2).removeChecker()}),i.ALo(1,"hasPermission"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("operation",e.selectedChecker)("operationDefinition",e.selectedCheckerDefinition)("readonly",!i.lcZ(1,3,e.updatePermission))}}function _e(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",30),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw(3).selectChecker(t)}),i._uU(1),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.description," ")}}function ke(e,t){if(1&e&&(i.TgZ(0,"div"),i.TgZ(1,"vdr-dropdown"),i.TgZ(2,"button",26),i._UZ(3,"clr-icon",27),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.TgZ(6,"vdr-dropdown-menu",28),i.YNc(7,_e,2,1,"button",29),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(4),i.hij(" ",i.lcZ(5,2,"common.select")," "),i.xp6(3),i.Q6J("ngForOf",e.checkers)}}function Ue(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"vdr-configurable-input",31),i.NdJ("remove",function(){return i.CHM(e),i.oxw(2).removeHandler()}),i.ALo(1,"hasPermission"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("operation",e.selectedHandler)("operationDefinition",e.selectedHandlerDefinition)("readonly",!i.lcZ(1,3,e.updatePermission))}}function Ie(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",30),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw(3).selectHandler(t)}),i._uU(1),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.description," ")}}function Pe(e,t){if(1&e&&(i.TgZ(0,"div"),i.TgZ(1,"vdr-dropdown"),i.TgZ(2,"button",26),i._UZ(3,"clr-icon",27),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.TgZ(6,"vdr-dropdown-menu",28),i.YNc(7,Ie,2,1,"button",29),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(4),i.hij(" ",i.lcZ(5,2,"common.select")," "),i.xp6(3),i.Q6J("ngForOf",e.handlers)}}function Se(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"form",7),i.TgZ(1,"vdr-form-field",8),i.ALo(2,"translate"),i.TgZ(3,"input",9),i.NdJ("input",function(t){const n=i.CHM(e).ngIf;return i.oxw().updateCode(n.code,t.target.value)}),i.ALo(4,"hasPermission"),i.qZA(),i.qZA(),i.TgZ(5,"vdr-form-field",10),i.ALo(6,"translate"),i.ALo(7,"hasPermission"),i._UZ(8,"input",11),i.ALo(9,"hasPermission"),i.qZA(),i._UZ(10,"vdr-rich-text-editor",12),i.ALo(11,"hasPermission"),i.ALo(12,"translate"),i.TgZ(13,"vdr-form-field",13),i.ALo(14,"translate"),i.TgZ(15,"clr-toggle-wrapper"),i._UZ(16,"input",14),i.ALo(17,"hasPermission"),i.qZA(),i.qZA(),i.YNc(18,Le,6,8,"section",15),i._UZ(19,"vdr-custom-detail-component-host",16),i.TgZ(20,"div",17),i.TgZ(21,"div",18),i.TgZ(22,"label",19),i._uU(23),i.ALo(24,"translate"),i.qZA(),i.YNc(25,Je,2,5,"vdr-configurable-input",20),i.YNc(26,ke,8,4,"div",21),i.qZA(),i.TgZ(27,"div",18),i.TgZ(28,"label",19),i._uU(29),i.ALo(30,"translate"),i.qZA(),i.YNc(31,Ue,2,5,"vdr-configurable-input",22),i.YNc(32,Pe,8,4,"div",21),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("formGroup",e.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(2,19,"common.name")),i.xp6(2),i.Q6J("readonly",!i.lcZ(4,21,e.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(6,23,"common.code"))("readOnlyToggle",i.lcZ(7,25,e.updatePermission)),i.xp6(3),i.Q6J("readonly",!i.lcZ(9,27,e.updatePermission)),i.xp6(2),i.Q6J("readonly",!i.lcZ(11,29,e.updatePermission))("label",i.lcZ(12,31,"common.description")),i.xp6(3),i.Q6J("label",i.lcZ(14,33,"common.enabled")),i.xp6(3),i.Q6J("vdrDisabled",!i.lcZ(17,35,e.updatePermission)),i.xp6(2),i.Q6J("ngIf",e.customFields.length),i.xp6(1),i.Q6J("entity$",e.entity$)("detailForm",e.detailForm),i.xp6(4),i.Oqu(i.lcZ(24,37,"settings.payment-eligibility-checker")),i.xp6(2),i.Q6J("ngIf",e.selectedChecker&&e.selectedCheckerDefinition),i.xp6(1),i.Q6J("ngIf",!e.selectedChecker||!e.selectedCheckerDefinition),i.xp6(3),i.Oqu(i.lcZ(30,39,"settings.payment-handler")),i.xp6(2),i.Q6J("ngIf",e.selectedHandler&&e.selectedHandlerDefinition),i.xp6(1),i.Q6J("ngIf",!e.selectedHandler||!e.selectedHandlerDefinition)}}function Oe(e,t){1&e&&(i.TgZ(0,"a",3),i._UZ(1,"clr-icon",4),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.Q6J("routerLink",i.DdM(4,j)),i.xp6(2),i.hij(" ",i.lcZ(3,2,"settings.create-new-payment-method")," "))}const we=function(){return["DeleteSettings","DeletePaymentMethod"]};function De(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",5),i._uU(1),i.qZA(),i.TgZ(2,"td",5),i._uU(3),i.qZA(),i.TgZ(4,"td",6),i._UZ(5,"vdr-table-row-action",7),i.ALo(6,"translate"),i.qZA(),i.TgZ(7,"td",6),i.TgZ(8,"vdr-dropdown"),i.TgZ(9,"button",8),i._uU(10),i.ALo(11,"translate"),i._UZ(12,"clr-icon",9),i.qZA(),i.TgZ(13,"vdr-dropdown-menu",10),i.TgZ(14,"button",11),i.NdJ("click",function(){const t=i.CHM(e).item;return i.oxw().deletePaymentMethod(t.id)}),i.ALo(15,"hasPermission"),i._UZ(16,"clr-icon",12),i._uU(17),i.ALo(18,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.item;i.xp6(1),i.Oqu(e.code),i.xp6(2),i.Oqu(e.enabled),i.xp6(2),i.Q6J("label",i.lcZ(6,7,"common.edit"))("linkTo",i.VKq(15,H,e.id)),i.xp6(5),i.hij(" ",i.lcZ(11,9,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(15,11,i.DdM(17,we))),i.xp6(3),i.hij(" ",i.lcZ(18,13,"common.delete")," ")}}const Ne=function(){return["CreateSettings","CreatePaymentMethod"]};function Qe(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",4),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw().toggleAll(t.permissions)}),i._uU(1),i.ALo(2,"translate"),i.qZA()}2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"common.toggle-all")," "))}function Me(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td"),i.TgZ(1,"vdr-select-toggle",5),i.NdJ("selectedChange",function(t){const n=i.CHM(e).$implicit;return i.oxw(2).setPermission(n.name,t)}),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit,n=i.oxw().$implicit,o=i.oxw();i.uIk("colspan",1===n.permissions.length?4:1),i.xp6(1),i.Q6J("title",e.description)("label",e.name)("disabled",o.readonly)("selected",null==o.activePermissions?null:o.activePermissions.includes(e.name))}}function $e(e,t){if(1&e&&(i.TgZ(0,"tr"),i.TgZ(1,"td",2),i.TgZ(2,"div"),i.TgZ(3,"strong"),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.qZA(),i.TgZ(6,"small"),i._uU(7),i.ALo(8,"translate"),i.qZA(),i._UZ(9,"br"),i.YNc(10,Qe,3,3,"button",3),i.qZA(),i.YNc(11,Me,2,5,"td",1),i.qZA()),2&e){const e=t.$implicit,n=i.oxw();i.xp6(4),i.Oqu(i.lcZ(5,4,e.label)),i.xp6(3),i.Oqu(i.lcZ(8,6,e.description)),i.xp6(3),i.Q6J("ngIf",1<e.permissions.length&&!n.readonly),i.xp6(1),i.Q6J("ngForOf",e.permissions)}}function Ye(e,t){1&e&&(i.TgZ(0,"vdr-form-field",15),i.ALo(1,"translate"),i._UZ(2,"input",12),i.qZA()),2&e&&i.Q6J("label",i.lcZ(1,1,"settings.password"))}function Re(e,t){if(1&e&&(i.TgZ(0,"section",16),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",17),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,3,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}function je(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.detailForm.invalid||e.detailForm.pristine),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.create")," ")}}function ze(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",12),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",e.detailForm.invalid||e.detailForm.pristine),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}function He(e,t){1&e&&i.YNc(0,ze,3,4,"button",13),2&e&&i.Q6J("vdrIfPermissions","UpdateAdministrator")}function Ge(e,t){1&e&&(i.TgZ(0,"a",3),i._UZ(1,"clr-icon",4),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.Q6J("routerLink",i.DdM(4,j)),i.xp6(2),i.hij(" ",i.lcZ(3,2,"settings.create-new-role")," "))}function Ee(e,t){if(1&e&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&e){const e=i.oxw().item;i.xp6(1),i.Oqu(e.code)}}function Be(e,t){if(1&e&&(i.TgZ(0,"vdr-chip"),i._UZ(1,"vdr-channel-badge",17),i._uU(2),i.ALo(3,"translate"),i.ALo(4,"channelCodeToLabel"),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("channelCode",e.code),i.xp6(1),i.hij(" ",i.lcZ(3,2,i.lcZ(4,4,e.code))," ")}}function Ve(e,t){if(1&e&&(i.ynx(0),i.YNc(1,Be,5,6,"vdr-chip",16),i.BQk()),2&e){const e=i.oxw().item;i.xp6(1),i.Q6J("ngForOf",e.channels)}}function We(e,t){if(1&e&&(i.TgZ(0,"vdr-chip"),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Oqu(e)}}function Ke(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"clr-icon",4),i._uU(2),i.BQk()),2&e){const e=i.oxw(3).item,t=i.oxw();i.xp6(2),i.hij(" ",e.permissions.length-t.initialLimit," ")}}function Xe(e,t){1&e&&i._UZ(0,"clr-icon",21)}function et(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",19),i.NdJ("click",function(){i.CHM(e);const t=i.oxw(2).item;return i.oxw().toggleDisplayLimit(t)}),i.YNc(1,Ke,3,1,"ng-container",7),i.YNc(2,Xe,1,0,"ng-template",null,20,i.W1O),i.qZA()}if(2&e){const e=i.MAs(3),t=i.oxw(2).item,n=i.oxw();i.xp6(1),i.Q6J("ngIf",(n.displayLimit[t.id]||0)<t.permissions.length)("ngIfElse",e)}}function tt(e,t){if(1&e&&(i.ynx(0),i.YNc(1,We,2,1,"vdr-chip",16),i.ALo(2,"slice"),i.YNc(3,et,4,2,"button",18),i.BQk()),2&e){const e=i.oxw().item,t=i.oxw();i.xp6(1),i.Q6J("ngForOf",i.Dn7(2,2,e.permissions,0,t.displayLimit[e.id]||3)),i.xp6(2),i.Q6J("ngIf",e.permissions.length>t.initialLimit)}}function nt(e,t){1&e&&(i.TgZ(0,"span",22),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"settings.default-role-label")))}function it(e,t){if(1&e&&(i._UZ(0,"vdr-table-row-action",23),i.ALo(1,"translate")),2&e){const e=i.oxw().item;i.Q6J("label",i.lcZ(1,2,"common.edit"))("linkTo",i.VKq(4,H,e.id))}}function ot(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",5),i._uU(1),i.qZA(),i.TgZ(2,"td",5),i.YNc(3,Ee,2,1,"span",6),i.qZA(),i.TgZ(4,"td",5),i.YNc(5,Ve,2,1,"ng-container",6),i.qZA(),i.TgZ(6,"td",5),i.YNc(7,tt,4,6,"ng-container",7),i.YNc(8,nt,3,3,"ng-template",null,8,i.W1O),i.qZA(),i.TgZ(10,"td",9),i.YNc(11,it,2,6,"vdr-table-row-action",10),i.qZA(),i.TgZ(12,"td",9),i.TgZ(13,"vdr-dropdown"),i.TgZ(14,"button",11),i._uU(15),i.ALo(16,"translate"),i._UZ(17,"clr-icon",12),i.qZA(),i.TgZ(18,"vdr-dropdown-menu",13),i.TgZ(19,"button",14),i.NdJ("click",function(){const t=i.CHM(e).item;return i.oxw().deleteRole(t.id)}),i.ALo(20,"hasPermission"),i._UZ(21,"clr-icon",15),i._uU(22),i.ALo(23,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.item,n=i.MAs(9),o=i.oxw();i.xp6(1),i.Oqu(e.description),i.xp6(2),i.Q6J("ngIf",!o.isDefaultRole(e)),i.xp6(2),i.Q6J("ngIf",!o.isDefaultRole(e)),i.xp6(2),i.Q6J("ngIf",!o.isDefaultRole(e))("ngIfElse",n),i.xp6(4),i.Q6J("ngIf",!o.isDefaultRole(e)),i.xp6(3),i.Q6J("disabled",o.isDefaultRole(e)),i.xp6(1),i.hij(" ",i.lcZ(16,10,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(20,12,"SuperAdmin")),i.xp6(3),i.hij(" ",i.lcZ(23,14,"common.delete")," ")}}function rt(e,t){if(1&e&&i._UZ(0,"vdr-object-tree",11),2&e){const e=i.oxw().$implicit;i.Q6J("value",e.metadata)}}function st(e,t){if(1&e&&(i.TgZ(0,"div",6),i.TgZ(1,"div",7),i.TgZ(2,"vdr-labeled-data",8),i.ALo(3,"translate"),i._uU(4),i.qZA(),i.TgZ(5,"div",9),i.TgZ(6,"vdr-labeled-data",8),i.ALo(7,"translate"),i._uU(8),i.ALo(9,"localeCurrency"),i.qZA(),i.TgZ(10,"vdr-labeled-data",8),i.ALo(11,"translate"),i._uU(12),i.ALo(13,"localeCurrency"),i.qZA(),i.qZA(),i.YNc(14,rt,1,1,"vdr-object-tree",10),i.qZA(),i.qZA()),2&e){const e=t.$implicit,n=i.oxw();i.xp6(1),i.ekj("stale",n.testDataUpdated),i.xp6(1),i.Q6J("label",i.lcZ(3,9,"settings.shipping-method")),i.xp6(2),i.hij(" ",e.name," "),i.xp6(2),i.Q6J("label",i.lcZ(7,11,"common.price")),i.xp6(2),i.hij(" ",i.xi3(9,13,e.price,n.currencyCode)," "),i.xp6(2),i.Q6J("label",i.lcZ(11,16,"common.price-with-tax")),i.xp6(2),i.hij(" ",i.xi3(13,18,e.priceWithTax,n.currencyCode)," "),i.xp6(2),i.Q6J("ngIf",e.metadata)}}function at(e,t){1&e&&(i.TgZ(0,"div",6),i._UZ(1,"clr-icon",12),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.xp6(2),i.hij(" ",i.lcZ(3,1,"settings.no-eligible-shipping-methods")," "))}function ct(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedChecker||!e.selectedCalculator),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.create")," ")}}function lt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedChecker||!e.selectedCalculator),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}function dt(e,t){if(1&e&&i.YNc(0,lt,3,4,"button",9),2&e){const e=i.oxw();i.Q6J("vdrIfPermissions",e.updatePermission)}}function ut(e,t){if(1&e&&(i.TgZ(0,"option",27),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.code),i.xp6(1),i.AsE(" ",e.code,": ",e.description," ")}}function mt(e,t){if(1&e&&(i.TgZ(0,"section",28),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",29),i.ALo(5,"hasPermission"),i.qZA()),2&e){const e=i.oxw(2);i.xp6(2),i.Oqu(i.lcZ(3,4,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!i.lcZ(5,6,e.updatePermission))}}function pt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"vdr-configurable-input",30),i.NdJ("remove",function(){i.CHM(e);return i.oxw(2).selectedChecker=null}),i.ALo(1,"hasPermission"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("operation",e.selectedChecker)("operationDefinition",e.selectedCheckerDefinition)("readonly",!i.lcZ(1,3,e.updatePermission))}}function gt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",35),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw(3).selectChecker(t)}),i._uU(1),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.description," ")}}function ht(e,t){if(1&e&&(i.TgZ(0,"div"),i.TgZ(1,"vdr-dropdown"),i.TgZ(2,"button",31),i._UZ(3,"clr-icon",32),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.TgZ(6,"vdr-dropdown-menu",33),i.YNc(7,gt,2,1,"button",34),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(4),i.hij(" ",i.lcZ(5,2,"common.select")," "),i.xp6(3),i.Q6J("ngForOf",e.checkers)}}function ft(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"vdr-configurable-input",36),i.NdJ("remove",function(){i.CHM(e);return i.oxw(2).selectedCalculator=null}),i.ALo(1,"hasPermission"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("operation",e.selectedCalculator)("operationDefinition",e.selectedCalculatorDefinition)("readonly",!i.lcZ(1,3,e.updatePermission))}}function Zt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",35),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw(3).selectCalculator(t)}),i._uU(1),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(1),i.hij(" ",e.description," ")}}function bt(e,t){if(1&e&&(i.TgZ(0,"div"),i.TgZ(1,"vdr-dropdown"),i.TgZ(2,"button",31),i._UZ(3,"clr-icon",32),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.TgZ(6,"vdr-dropdown-menu",33),i.YNc(7,Zt,2,1,"button",34),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(4),i.hij(" ",i.lcZ(5,2,"common.select")," "),i.xp6(3),i.Q6J("ngForOf",e.calculators)}}function vt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"form",10),i.TgZ(1,"vdr-form-field",11),i.ALo(2,"translate"),i.TgZ(3,"input",12),i.NdJ("input",function(t){const n=i.CHM(e).ngIf;return i.oxw().updateCode(n.code,t.target.value)}),i.ALo(4,"hasPermission"),i.qZA(),i.qZA(),i.TgZ(5,"vdr-form-field",13),i.ALo(6,"translate"),i.ALo(7,"hasPermission"),i._UZ(8,"input",14),i.ALo(9,"hasPermission"),i.qZA(),i._UZ(10,"vdr-rich-text-editor",15),i.ALo(11,"hasPermission"),i.ALo(12,"translate"),i.TgZ(13,"vdr-form-field",16),i.ALo(14,"translate"),i.TgZ(15,"select",17),i.ALo(16,"hasPermission"),i.YNc(17,ut,2,3,"option",18),i.qZA(),i.qZA(),i.YNc(18,mt,6,8,"section",19),i._UZ(19,"vdr-custom-detail-component-host",20),i.TgZ(20,"div",21),i.TgZ(21,"div",22),i.TgZ(22,"label",23),i._uU(23),i.ALo(24,"translate"),i.qZA(),i.YNc(25,pt,2,5,"vdr-configurable-input",24),i.YNc(26,ht,8,4,"div",25),i.qZA(),i.TgZ(27,"div",22),i.TgZ(28,"label",23),i._uU(29),i.ALo(30,"translate"),i.qZA(),i.YNc(31,ft,2,5,"vdr-configurable-input",26),i.YNc(32,bt,8,4,"div",25),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("formGroup",e.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(2,20,"common.name")),i.xp6(2),i.Q6J("readonly",!i.lcZ(4,22,e.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(6,24,"common.code"))("readOnlyToggle",i.lcZ(7,26,e.updatePermission)),i.xp6(3),i.Q6J("readonly",!i.lcZ(9,28,e.updatePermission)),i.xp6(2),i.Q6J("readonly",!i.lcZ(11,30,e.updatePermission))("label",i.lcZ(12,32,"common.description")),i.xp6(3),i.Q6J("label",i.lcZ(14,34,"settings.fulfillment-handler")),i.xp6(2),i.Q6J("vdrDisabled",!i.lcZ(16,36,e.updatePermission)),i.xp6(2),i.Q6J("ngForOf",e.fulfillmentHandlers),i.xp6(1),i.Q6J("ngIf",e.customFields.length),i.xp6(1),i.Q6J("entity$",e.entity$)("detailForm",e.detailForm),i.xp6(4),i.Oqu(i.lcZ(24,38,"settings.shipping-eligibility-checker")),i.xp6(2),i.Q6J("ngIf",e.selectedChecker&&e.selectedCheckerDefinition),i.xp6(1),i.Q6J("ngIf",!e.selectedChecker||!e.selectedCheckerDefinition),i.xp6(3),i.Oqu(i.lcZ(30,40,"settings.shipping-calculator")),i.xp6(2),i.Q6J("ngIf",e.selectedCalculator&&e.selectedCalculatorDefinition),i.xp6(1),i.Q6J("ngIf",!e.selectedCalculator||!e.selectedCalculatorDefinition)}}function yt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"clr-accordion-content"),i.TgZ(1,"div",37),i.TgZ(2,"div",22),i.TgZ(3,"vdr-test-order-builder",38),i.NdJ("orderLinesChange",function(t){return i.CHM(e),i.oxw().setTestOrderLines(t)}),i.qZA(),i.qZA(),i.TgZ(4,"div",22),i.TgZ(5,"vdr-test-address-form",39),i.NdJ("addressChange",function(t){return i.CHM(e),i.oxw().setTestAddress(t)}),i.qZA(),i.TgZ(6,"vdr-shipping-method-test-result",40),i.NdJ("runTest",function(){return i.CHM(e),i.oxw().runTest()}),i.ALo(7,"async"),i.ALo(8,"async"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();let t;i.xp6(6),i.Q6J("currencyCode",null==(t=i.lcZ(7,4,e.activeChannel$))?null:t.currencyCode)("okToRun",e.allTestDataPresent()&&e.testDataUpdated&&e.detailForm.valid)("testDataUpdated",e.testDataUpdated)("testResult",i.lcZ(8,6,e.testResult$))}}function At(e,t){1&e&&(i.TgZ(0,"a",6),i._UZ(1,"clr-icon",7),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.Q6J("routerLink",i.DdM(4,j)),i.xp6(2),i.hij(" ",i.lcZ(3,2,"settings.create-new-shipping-method")," "))}const xt=function(){return["DeleteSettings","DeleteShippingMethod"]};function Tt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",8),i._uU(1),i.qZA(),i.TgZ(2,"td",8),i._uU(3),i.qZA(),i.TgZ(4,"td",9),i._UZ(5,"vdr-table-row-action",10),i.ALo(6,"translate"),i.qZA(),i.TgZ(7,"td",9),i.TgZ(8,"vdr-dropdown"),i.TgZ(9,"button",11),i._uU(10),i.ALo(11,"translate"),i._UZ(12,"clr-icon",12),i.qZA(),i.TgZ(13,"vdr-dropdown-menu",13),i.TgZ(14,"button",14),i.NdJ("click",function(){const t=i.CHM(e).item;return i.oxw().deleteShippingMethod(t.id)}),i.ALo(15,"hasPermission"),i._UZ(16,"clr-icon",15),i._uU(17),i.ALo(18,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.item;i.xp6(1),i.Oqu(e.code),i.xp6(2),i.Oqu(e.name),i.xp6(2),i.Q6J("label",i.lcZ(6,7,"common.edit"))("linkTo",i.VKq(15,H,e.id)),i.xp6(5),i.hij(" ",i.lcZ(11,9,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(15,11,i.DdM(17,xt))),i.xp6(3),i.hij(" ",i.lcZ(18,13,"common.delete")," ")}}function qt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"clr-accordion-content"),i.TgZ(1,"div",16),i.TgZ(2,"div",17),i.TgZ(3,"vdr-test-order-builder",18),i.NdJ("orderLinesChange",function(t){return i.CHM(e),i.oxw().setTestOrderLines(t)}),i.qZA(),i.qZA(),i.TgZ(4,"div",17),i.TgZ(5,"vdr-test-address-form",19),i.NdJ("addressChange",function(t){return i.CHM(e),i.oxw().setTestAddress(t)}),i.qZA(),i.TgZ(6,"vdr-shipping-eligibility-test-result",20),i.NdJ("runTest",function(){return i.CHM(e),i.oxw().runTest()}),i.ALo(7,"async"),i.ALo(8,"async"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();let t;i.xp6(6),i.Q6J("currencyCode",null==(t=i.lcZ(7,4,e.activeChannel$))?null:t.currencyCode)("okToRun",e.allTestDataPresent())("testDataUpdated",e.testDataUpdated)("testResult",i.lcZ(8,6,e.testResult$))}}const Ct=function(){return["CreateSettings","CreateShippingMethod"]};function Ft(e,t){1&e&&i._UZ(0,"clr-icon",14)}function Lt(e,t){1&e&&i._UZ(0,"clr-icon",15)}function Jt(e,t){1&e&&i._UZ(0,"clr-icon",16)}function _t(e,t){if(1&e&&(i.TgZ(0,"vdr-labeled-data",4),i.ALo(1,"translate"),i._uU(2),i.ALo(3,"localeCurrency"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label",i.lcZ(1,2,"common.price")),i.xp6(2),i.hij(" ",i.xi3(3,4,null==e.testResult.quote?null:e.testResult.quote.price,e.currencyCode)," ")}}function kt(e,t){if(1&e&&(i.TgZ(0,"vdr-labeled-data",4),i.ALo(1,"translate"),i._uU(2),i.ALo(3,"localeCurrency"),i.qZA()),2&e){const e=i.oxw();i.Q6J("label",i.lcZ(1,2,"common.price-with-tax")),i.xp6(2),i.hij(" ",i.xi3(3,4,null==e.testResult.quote?null:e.testResult.quote.priceWithTax,e.currencyCode)," ")}}function Ut(e,t){if(1&e&&i._UZ(0,"vdr-object-tree",17),2&e){const e=i.oxw();i.Q6J("value",null==e.testResult||null==e.testResult.quote?null:e.testResult.quote.metadata)}}const It=function(e,t,n){return{success:e,error:t,unknown:n}};function Pt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",!e.saveButtonEnabled()),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.create")," ")}}function St(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",!e.saveButtonEnabled()),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}function Ot(e,t){if(1&e&&i.YNc(0,St,3,4,"button",12),2&e){const e=i.oxw();i.Q6J("vdrIfPermissions",e.updatePermission)}}function wt(e,t){if(1&e&&(i.TgZ(0,"section",13),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",14),i.ALo(5,"hasPermission"),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,4,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!i.lcZ(5,6,e.updatePermission))}}function Dt(e,t){1&e&&(i.TgZ(0,"a",3),i._UZ(1,"clr-icon",4),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.Q6J("routerLink",i.DdM(4,j)),i.xp6(2),i.hij(" ",i.lcZ(3,2,"settings.create-new-tax-category")," "))}function Nt(e,t){1&e&&(i.TgZ(0,"vdr-chip"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"common.default-tax-category")))}const Qt=function(){return["DeleteSettings","DeleteTaxCategory"]};function Mt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",5),i._uU(1),i.qZA(),i.TgZ(2,"td",5),i.YNc(3,Nt,3,3,"vdr-chip",6),i.qZA(),i.TgZ(4,"td",7),i._UZ(5,"vdr-table-row-action",8),i.ALo(6,"translate"),i.qZA(),i.TgZ(7,"td",7),i.TgZ(8,"vdr-dropdown"),i.TgZ(9,"button",9),i._uU(10),i.ALo(11,"translate"),i._UZ(12,"clr-icon",10),i.qZA(),i.TgZ(13,"vdr-dropdown-menu",11),i.TgZ(14,"button",12),i.NdJ("click",function(){const t=i.CHM(e).item;return i.oxw().deleteTaxCategory(t)}),i.ALo(15,"hasPermission"),i._UZ(16,"clr-icon",13),i._uU(17),i.ALo(18,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.item;i.xp6(1),i.Oqu(e.name),i.xp6(2),i.Q6J("ngIf",e.isDefault),i.xp6(2),i.Q6J("label",i.lcZ(6,7,"common.edit"))("linkTo",i.VKq(15,H,e.id)),i.xp6(5),i.hij(" ",i.lcZ(11,9,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(15,11,i.DdM(17,Qt))),i.xp6(3),i.hij(" ",i.lcZ(18,13,"common.delete")," ")}}const $t=function(){return["CreateSettings","CreateTaxCategory"]};function Yt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",19),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",!e.saveButtonEnabled()),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.create")," ")}}function Rt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",19),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).save()}),i._uU(1),i.ALo(2,"translate"),i.qZA()}if(2&e){const e=i.oxw(2);i.Q6J("disabled",!e.saveButtonEnabled()),i.xp6(1),i.hij(" ",i.lcZ(2,2,"common.update")," ")}}function jt(e,t){if(1&e&&i.YNc(0,Rt,3,4,"button",20),2&e){const e=i.oxw();i.Q6J("vdrIfPermissions",e.updatePermission)}}function zt(e,t){if(1&e&&(i.TgZ(0,"option",21),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.name," ")}}function Ht(e,t){if(1&e&&(i.TgZ(0,"option",21),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.Oqu(e.name)}}function Gt(e,t){if(1&e&&(i.TgZ(0,"section",22),i.TgZ(1,"label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"vdr-tabbed-custom-fields",23),i.ALo(5,"hasPermission"),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,4,"common.custom-fields")),i.xp6(2),i.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!i.lcZ(5,6,e.updatePermission))}}function Et(e,t){1&e&&(i.TgZ(0,"a",3),i._UZ(1,"clr-icon",4),i._uU(2),i.ALo(3,"translate"),i.qZA()),2&e&&(i.Q6J("routerLink",i.DdM(4,j)),i.xp6(2),i.hij(" ",i.lcZ(3,2,"settings.create-new-tax-rate")," "))}const Bt=function(){return["DeleteSettings","DeleteTaxRate"]};function Vt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"td",5),i._uU(1),i.qZA(),i.TgZ(2,"td",5),i._uU(3),i.qZA(),i.TgZ(4,"td",5),i._uU(5),i.qZA(),i.TgZ(6,"td",5),i._uU(7),i.qZA(),i.TgZ(8,"td",6),i._UZ(9,"vdr-table-row-action",7),i.ALo(10,"translate"),i.qZA(),i.TgZ(11,"td",6),i.TgZ(12,"vdr-dropdown"),i.TgZ(13,"button",8),i._uU(14),i.ALo(15,"translate"),i._UZ(16,"clr-icon",9),i.qZA(),i.TgZ(17,"vdr-dropdown-menu",10),i.TgZ(18,"button",11),i.NdJ("click",function(){const t=i.CHM(e).item;return i.oxw().deleteTaxRate(t)}),i.ALo(19,"hasPermission"),i._UZ(20,"clr-icon",12),i._uU(21),i.ALo(22,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.item;i.xp6(1),i.Oqu(e.name),i.xp6(2),i.Oqu(e.category.name),i.xp6(2),i.Oqu(e.zone.name),i.xp6(2),i.hij("",e.value,"%"),i.xp6(2),i.Q6J("label",i.lcZ(10,9,"common.edit"))("linkTo",i.VKq(17,H,e.id)),i.xp6(5),i.hij(" ",i.lcZ(15,11,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(19,13,i.DdM(19,Bt))),i.xp6(3),i.hij(" ",i.lcZ(22,15,"common.delete")," ")}}const Wt=function(){return["CreateSettings","CreateTaxRate"]};function Kt(e,t){if(1&e&&(i.TgZ(0,"option",9),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.code),i.xp6(1),i.hij(" ",e.name," ")}}function Xt(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"tr",10),i.TgZ(1,"td",11),i._UZ(2,"img",12),i.qZA(),i.TgZ(3,"td",13),i._uU(4),i.qZA(),i.TgZ(5,"td",14),i._uU(6),i.qZA(),i.TgZ(7,"td",15),i._uU(8),i.ALo(9,"localeCurrency"),i.qZA(),i.TgZ(10,"td",16),i.TgZ(11,"input",17),i.NdJ("ngModelChange",function(t){return i.CHM(e).$implicit.quantity=t})("change",function(){return i.CHM(e),i.oxw(2).updateQuantity()}),i.qZA(),i.TgZ(12,"button",18),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw(2).removeLine(t)}),i._UZ(13,"clr-icon",19),i.qZA(),i.qZA(),i.TgZ(14,"td",20),i._uU(15),i.ALo(16,"localeCurrency"),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit,n=i.oxw(2);i.xp6(2),i.Q6J("src",e.preview+"?preset=tiny",i.LSH),i.xp6(2),i.Oqu(e.name),i.xp6(2),i.Oqu(e.sku),i.xp6(2),i.hij(" ",i.xi3(9,6,e.unitPriceWithTax,n.currencyCode)," "),i.xp6(3),i.Q6J("ngModel",e.quantity),i.xp6(4),i.hij(" ",i.xi3(16,9,e.unitPriceWithTax*e.quantity,n.currencyCode)," ")}}function en(e,t){if(1&e&&(i.TgZ(0,"table",6),i.TgZ(1,"thead"),i.TgZ(2,"tr"),i._UZ(3,"th"),i.TgZ(4,"th"),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.TgZ(7,"th"),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.TgZ(10,"th"),i._uU(11),i.ALo(12,"translate"),i.qZA(),i.TgZ(13,"th"),i._uU(14),i.ALo(15,"translate"),i.qZA(),i.TgZ(16,"th"),i._uU(17),i.ALo(18,"translate"),i.qZA(),i.qZA(),i.qZA(),i.YNc(19,Xt,17,12,"tr",7),i.TgZ(20,"tr",8),i.TgZ(21,"td",9),i._uU(22),i.ALo(23,"translate"),i.qZA(),i._UZ(24,"td"),i._UZ(25,"td"),i._UZ(26,"td"),i._UZ(27,"td"),i.TgZ(28,"td"),i._uU(29),i.ALo(30,"localeCurrency"),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw();i.xp6(5),i.Oqu(i.lcZ(6,8,"order.product-name")),i.xp6(3),i.Oqu(i.lcZ(9,10,"order.product-sku")),i.xp6(3),i.Oqu(i.lcZ(12,12,"order.unit-price")),i.xp6(3),i.Oqu(i.lcZ(15,14,"order.quantity")),i.xp6(3),i.Oqu(i.lcZ(18,16,"order.total")),i.xp6(2),i.Q6J("ngForOf",e.lines),i.xp6(3),i.Oqu(i.lcZ(23,18,"order.sub-total")),i.xp6(7),i.Oqu(i.xi3(30,20,e.subTotal,e.currencyCode))}}function tn(e,t){1&e&&(i.TgZ(0,"div",21),i.TgZ(1,"div",22),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"clr-icon",23),i.qZA()),2&e&&(i.xp6(2),i.Oqu(i.lcZ(3,1,"settings.add-products-to-test-order")))}function nn(e,t){1&e&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"settings.update-zone")))}function on(e,t){1&e&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"settings.create-zone")))}function rn(e,t){if(1&e&&(i.YNc(0,nn,3,3,"span",6),i.YNc(1,on,3,3,"span",6)),2&e){const e=i.oxw();i.Q6J("ngIf",e.zone.id),i.xp6(1),i.Q6J("ngIf",!e.zone.id)}}function sn(e,t){1&e&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"settings.update-zone")))}function an(e,t){1&e&&(i.TgZ(0,"span"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"settings.create-zone")))}function cn(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",function(){return i.CHM(e),i.oxw().cancel()}),i._uU(1),i.ALo(2,"translate"),i.qZA(),i.TgZ(3,"button",8),i.NdJ("click",function(){return i.CHM(e),i.oxw().save()}),i.YNc(4,sn,3,3,"span",6),i.YNc(5,an,3,3,"span",6),i.qZA()}if(2&e){const e=i.oxw();i.xp6(1),i.Oqu(i.lcZ(2,4,"common.cancel")),i.xp6(2),i.Q6J("disabled",e.form.invalid),i.xp6(1),i.Q6J("ngIf",e.zone.id),i.xp6(1),i.Q6J("ngIf",!e.zone.id)}}const ln=function(){return["UpdateSettings","UpdateZone"]};function dn(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",function(){return i.CHM(e),i.oxw().create()}),i._UZ(1,"clr-icon",10),i._uU(2),i.ALo(3,"translate"),i.qZA()}2&e&&(i.xp6(2),i.hij(" ",i.lcZ(3,1,"settings.create-new-zone")," "))}const un=function(){return["DeleteSettings","DeleteZone"]};function mn(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"tr"),i.ALo(1,"async"),i.TgZ(2,"td",11),i._UZ(3,"vdr-entity-info",12),i.qZA(),i.TgZ(4,"td",11),i.TgZ(5,"vdr-chip",13),i._uU(6),i.qZA(),i.qZA(),i.TgZ(7,"td",14),i.TgZ(8,"a",15),i._UZ(9,"clr-icon",16),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.qZA(),i.TgZ(12,"td",17),i.TgZ(13,"button",18),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().update(t)}),i._UZ(14,"clr-icon",19),i._uU(15),i.ALo(16,"translate"),i.qZA(),i.qZA(),i.TgZ(17,"td",17),i.TgZ(18,"vdr-dropdown"),i.TgZ(19,"button",20),i._uU(20),i.ALo(21,"translate"),i._UZ(22,"clr-icon",21),i.qZA(),i.TgZ(23,"vdr-dropdown-menu",22),i.TgZ(24,"button",23),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().delete(t.id)}),i.ALo(25,"hasPermission"),i._UZ(26,"clr-icon",24),i._uU(27),i.ALo(28,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit,n=i.oxw();let o;i.ekj("active",e.id===(null==(o=i.lcZ(1,11,n.activeZone$))?null:o.id)),i.xp6(3),i.Q6J("entity",e),i.xp6(2),i.Q6J("colorFrom",e.name),i.xp6(1),i.Oqu(e.name),i.xp6(2),i.Q6J("routerLink",i.VKq(25,H,i.VKq(23,ge,e.id))),i.xp6(2),i.hij(" ",i.lcZ(11,13,"settings.view-zone-members")," "),i.xp6(5),i.hij(" ",i.lcZ(16,15,"common.edit")," "),i.xp6(5),i.hij(" ",i.lcZ(21,17,"common.actions")," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(25,19,i.DdM(27,un))),i.xp6(3),i.hij(" ",i.lcZ(28,21,"common.delete")," ")}}const pn=function(e){return{count:e}};function gn(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"div",28),i.TgZ(2,"div",29),i._uU(3),i.qZA(),i._UZ(4,"div",30),i.TgZ(5,"button",31),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).closeMembers()}),i._UZ(6,"clr-icon",32),i.qZA(),i.qZA(),i.TgZ(7,"div",33),i.TgZ(8,"vdr-dropdown"),i.TgZ(9,"button",34),i._uU(10),i.ALo(11,"translate"),i._UZ(12,"clr-icon",21),i.qZA(),i.TgZ(13,"vdr-dropdown-menu",22),i.TgZ(14,"button",35),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().ngIf,n=i.oxw();return n.removeFromZone(t,n.selectedMemberIds)}),i.ALo(15,"hasPermission"),i._UZ(16,"clr-icon",24),i._uU(17),i.ALo(18,"translate"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(19,"button",36),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().ngIf;return i.oxw().addToZone(t)}),i._uU(20),i.ALo(21,"translate"),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=i.oxw().ngIf,t=i.oxw();i.xp6(3),i.AsE(" ",e.name," (",e.members.length,") "),i.xp6(6),i.Q6J("disabled",0===t.selectedMemberIds.length),i.xp6(1),i.hij(" ",i.xi3(11,7,"common.with-selected",i.VKq(17,pn,t.selectedMemberIds.length))," "),i.xp6(4),i.Q6J("disabled",!i.lcZ(15,10,i.DdM(19,ln))),i.xp6(3),i.hij(" ",i.lcZ(18,12,"settings.remove-from-zone")," "),i.xp6(3),i.hij(" ",i.xi3(21,14,"settings.add-countries-to-zone",i.VKq(20,P,e.name))," ")}}const hn=function(e){return["/settings","countries",e]};function fn(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"vdr-dropdown"),i.TgZ(2,"button",20),i._uU(3),i.ALo(4,"translate"),i._UZ(5,"clr-icon",21),i.qZA(),i.TgZ(6,"vdr-dropdown-menu",22),i.TgZ(7,"a",37),i._UZ(8,"clr-icon",19),i._uU(9),i.ALo(10,"translate"),i.qZA(),i.TgZ(11,"button",35),i.NdJ("click",function(){const t=i.CHM(e).member,n=i.oxw().ngIf;return i.oxw().removeFromZone(n,[t.id])}),i.ALo(12,"hasPermission"),i._UZ(13,"clr-icon",24),i._uU(14),i.ALo(15,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.member;i.xp6(3),i.hij(" ",i.lcZ(4,5,"common.actions")," "),i.xp6(4),i.Q6J("routerLink",i.VKq(13,hn,e.id)),i.xp6(2),i.hij(" ",i.lcZ(10,7,"common.edit")," "),i.xp6(2),i.Q6J("disabled",!i.lcZ(12,9,i.DdM(15,ln))),i.xp6(3),i.hij(" ",i.lcZ(15,11,"settings.remove-from-zone")," ")}}function Zn(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"vdr-zone-member-list",25),i.NdJ("selectionChange",function(t){i.CHM(e);return i.oxw().selectedMemberIds=t}),i.YNc(2,gn,22,22,"div",26),i.YNc(3,fn,16,16,"div",27),i.qZA(),i.BQk()}if(2&e){const e=t.ngIf,n=i.oxw();i.xp6(1),i.Q6J("members",e.members)("selectedMemberIds",n.selectedMemberIds)}}const bn=function(){return["CreateSettings","CreateZone"]};function vn(e,t){1&e&&i.GkF(0)}function yn(e,t){if(1&e&&(i.ynx(0),i.YNc(1,vn,1,0,"ng-container",4),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngTemplateOutlet",e.headerTemplate.templateRef)}}function An(e,t){1&e&&i.GkF(0)}const xn=function(e){return{member:e}};function Tn(e,t){if(1&e&&(i.ynx(0),i.YNc(1,An,1,0,"ng-container",7),i.BQk()),2&e){const e=i.oxw().item,t=i.oxw();i.xp6(1),i.Q6J("ngTemplateOutlet",t.controlsTemplate.templateRef)("ngTemplateOutletContext",i.VKq(2,xn,e))}}function qn(e,t){if(1&e&&(i.TgZ(0,"td",5),i._uU(1),i.qZA(),i.TgZ(2,"td",5),i._uU(3),i.qZA(),i.TgZ(4,"td",5),i._UZ(5,"clr-icon"),i.qZA(),i.TgZ(6,"td",6),i.YNc(7,Tn,2,4,"ng-container",1),i.qZA()),2&e){const e=t.item,n=i.oxw();i.xp6(1),i.Oqu(e.code),i.xp6(2),i.Oqu(e.name),i.xp6(2),i.ekj("is-success",e.enabled),i.uIk("shape",e.enabled?"check":"times"),i.xp6(2),i.Q6J("ngIf",n.controlsTemplate)}}class Cn{constructor(e){this.dataService=e,this.currentMembers=[],this.selectedMemberIds=[]}ngOnInit(){const e=this.currentMembers.map(e=>e.id);this.availableCountries$=this.dataService.settings.getCountries(999).mapStream(e=>e.countries.items).pipe((0,r.U)(t=>t.filter(t=>!e.includes(t.id))))}cancel(){this.resolveWith()}add(){this.resolveWith(this.selectedMemberIds)}}Cn.\u0275fac=function(e){return new(e||Cn)(i.Y36(o.DoR))},Cn.\u0275cmp=i.Xpm({type:Cn,selectors:[["vdr-add-country-to-zone-dialog"]],decls:4,vars:4,consts:[["vdrDialogTitle",""],[3,"members","selectedMemberIds","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(i.YNc(0,S,2,6,"ng-template",0),i.TgZ(1,"vdr-zone-member-list",1),i.NdJ("selectionChange",function(e){return t.selectedMemberIds=e}),i.ALo(2,"async"),i.qZA(),i.YNc(3,O,6,10,"ng-template",2)),2&e&&(i.xp6(1),i.Q6J("members",i.lcZ(2,2,t.availableCountries$))("selectedMemberIds",t.selectedMemberIds))},directives:function(){return[o.q6K,Xn,o.nPI]},pipes:function(){return[J.Ov,_.X$]},styles:[""],changeDetection:0}),Cn.ctorParameters=()=>[{type:o.DoR}];class Fn extends o.UT_{constructor(e,t,n,i,o,r,s){super(t,e,n,o),this.changeDetector=i,this.dataService=o,this.formBuilder=r,this.notificationService=s,this.selectedRoles=[],this.selectedRolePermissions={},this.selectedChannelId=null,this.customFields=this.getCustomFieldConfig("Administrator"),this.detailForm=this.formBuilder.group({emailAddress:["",Z.kI.required],firstName:["",Z.kI.required],lastName:["",Z.kI.required],password:[""],roles:[[]],customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}getAvailableChannels(){return Object.values(this.selectedRolePermissions)}ngOnInit(){this.init(),this.administrator$=this.entity$,this.allRoles$=this.dataService.administrator.getRoles(999).mapStream(e=>e.roles.items.filter(e=>e.code!==y.RO)),this.dataService.client.userStatus().single$.subscribe(({userStatus:e})=>{if(!e.permissions.includes(o.y3$.CreateAdministrator)&&!e.permissions.includes(o.y3$.UpdateAdministrator)){const e=this.detailForm.get("roles");e&&e.disable()}}),this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}ngOnDestroy(){this.destroy()}rolesChanged(e){this.buildPermissionsMap()}getPermissionsForSelectedChannel(){function e(e){return Object.entries(e).filter(([e,t])=>t).map(([e,t])=>e)}if(this.selectedChannelId&&this.selectedRolePermissions[this.selectedChannelId]){return e(this.selectedRolePermissions[this.selectedChannelId].permissions)}const t=Object.values(this.selectedRolePermissions);return 0<t.length?(this.selectedChannelId=t[0].channelId,e(t[0].permissions)):[]}create(){const e=this.detailForm.value,t={emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName,password:e.password,customFields:e.customFields,roleIds:e.roles.map(e=>e.id)};this.dataService.administrator.createAdministrator(t).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createAdministrator.id],{relativeTo:this.route})},e=>{this.notificationService.error((0,v.J)("common.notify-create-error"),{entity:"Administrator"})})}save(){this.administrator$.pipe((0,s.q)(1),(0,a.zg)(({id:e})=>{const t=this.detailForm.value,n={id:e,emailAddress:t.emailAddress,firstName:t.firstName,lastName:t.lastName,password:t.password,customFields:t.customFields,roleIds:t.roles.map(e=>e.id)};return this.dataService.administrator.updateAdministrator(n)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"Administrator"})})}setFormValues(e,t){this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName,roles:e.user.roles}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e);const n=this.detailForm.get("password");n&&(e.id?n.setValidators([]):n.setValidators([Z.kI.required])),this.buildPermissionsMap()}buildPermissionsMap(){const e=this.detailForm.get("roles");if(e){const t=e.value,n=new Map,i=new Map;for(const e of t)for(const t of e.channels){const o=n.get(t.id)||new Set;e.permissions.forEach(e=>o.add(e)),n.set(t.id,o),i.set(t.id,t.code)}this.selectedRolePermissions={};for(const e of Array.from(n.keys())){const t=n.get(e),o={};for(const e of this.serverConfigService.getPermissionDefinitions())o[e.name]=t.has(e.name);this.selectedRolePermissions[e]={channelId:e,channelCode:i.get(e),permissions:o}}}}}Fn.\u0275fac=function(e){return new(e||Fn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},Fn.\u0275cmp=i.Xpm({type:Fn,selectors:[["vdr-admin-detail"]],features:[i.qOj],decls:38,vars:53,consts:[[3,"entity"],["locationId","administrator-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress",3,"readonly"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName",3,"readonly"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName",3,"readonly"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],["locationId","administrator-detail",3,"entity$","detailForm"],[1,"clr-control-label"],["formControlName","roles","bindLabel","description",3,"items","multiple","hideSelected","change"],["role","tablist",1,"nav"],["role","presentation","class","nav-item",4,"ngFor","ngForOf"],[3,"activePermissions","permissionDefinitions","readonly"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["for","password",3,"label","readOnlyToggle"],["formGroupName","customFields"],["entityName","Administrator",3,"customFields","customFieldsFormGroup","readonly"],["role","presentation",1,"nav-item"],["type","button",1,"btn","btn-link","nav-link",3,"id","click"]],template:function(e,t){if(1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.qZA(),i.TgZ(4,"vdr-ab-right"),i._UZ(5,"vdr-action-bar-items",1),i.YNc(6,w,3,4,"button",2),i.ALo(7,"async"),i.YNc(8,N,1,1,"ng-template",null,3,i.W1O),i.qZA(),i.qZA(),i.TgZ(10,"form",4),i.TgZ(11,"vdr-form-field",5),i.ALo(12,"translate"),i._UZ(13,"input",6),i.ALo(14,"hasPermission"),i.qZA(),i.TgZ(15,"vdr-form-field",7),i.ALo(16,"translate"),i._UZ(17,"input",8),i.ALo(18,"hasPermission"),i.qZA(),i.TgZ(19,"vdr-form-field",9),i.ALo(20,"translate"),i._UZ(21,"input",10),i.ALo(22,"hasPermission"),i.qZA(),i.YNc(23,Q,3,3,"vdr-form-field",11),i.ALo(24,"async"),i.YNc(25,M,3,4,"vdr-form-field",12),i.ALo(26,"async"),i.ALo(27,"hasPermission"),i.YNc(28,Y,6,9,"section",13),i._UZ(29,"vdr-custom-detail-component-host",14),i.TgZ(30,"label",15),i._uU(31),i.ALo(32,"translate"),i.qZA(),i.TgZ(33,"ng-select",16),i.NdJ("change",function(e){return t.rolesChanged(e)}),i.ALo(34,"async"),i.qZA(),i.TgZ(35,"ul",17),i.YNc(36,R,5,9,"li",18),i.qZA(),i._UZ(37,"vdr-permission-grid",19),i.qZA()),2&e){const e=i.MAs(9);i.xp6(2),i.Q6J("entity",i.lcZ(3,23,t.entity$)),i.xp6(4),i.Q6J("ngIf",i.lcZ(7,25,t.isNew$))("ngIfElse",e),i.xp6(4),i.Q6J("formGroup",t.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(12,27,"settings.email-address")),i.xp6(2),i.Q6J("readonly",!i.lcZ(14,29,i.DdM(49,$))),i.xp6(2),i.Q6J("label",i.lcZ(16,31,"settings.first-name")),i.xp6(2),i.Q6J("readonly",!i.lcZ(18,33,i.DdM(50,$))),i.xp6(2),i.Q6J("label",i.lcZ(20,35,"settings.last-name")),i.xp6(2),i.Q6J("readonly",!i.lcZ(22,37,i.DdM(51,$))),i.xp6(2),i.Q6J("ngIf",i.lcZ(24,39,t.isNew$)),i.xp6(2),i.Q6J("ngIf",!i.lcZ(26,41,t.isNew$)&&i.lcZ(27,43,i.DdM(52,$))),i.xp6(3),i.Q6J("ngIf",t.customFields.length),i.xp6(1),i.Q6J("entity$",t.entity$)("detailForm",t.detailForm),i.xp6(2),i.Oqu(i.lcZ(32,45,"settings.roles")),i.xp6(2),i.Q6J("items",i.lcZ(34,47,t.allRoles$))("multiple",!0)("hideSelected",!0),i.xp6(3),i.Q6J("ngForOf",t.getAvailableChannels()),i.xp6(1),i.Q6J("activePermissions",t.getPermissionsForSelectedChannel())("permissionDefinitions",t.permissionDefinitions)("readonly",!0)}},directives:function(){return[o.KkL,o.BND,o.Vqt,o.mz,o.WWO,J.O5,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,o.CWh,k.MgK,U.w9,J.sg,On,o.HAh,Z.x0,o.yc0]},pipes:function(){return[J.Ov,_.X$,o.j$k,o.E6B]},styles:["ul.nav[_ngcontent-%COMP%]{overflow-x:auto}"],changeDetection:0}),Fn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class Ln extends o.t7C{constructor(e,t,n,i,o){super(t,n),this.dataService=e,this.modalService=i,this.notificationService=o,this.searchControl=new Z.NI(""),super.setQueryFn((...e)=>this.dataService.administrator.getAdministrators(...e),e=>e.administrators,(e,t)=>this.createSearchQuery(e,t,this.searchControl.value))}ngOnInit(){super.ngOnInit();const e=(0,A.T)(this.searchControl.valueChanges).pipe((0,c.h)(e=>2<e.length||0===e.length),(0,l.b)(250));(0,A.T)(e,this.route.queryParamMap).pipe((0,d.R)(this.destroy$)).subscribe(e=>{this.refresh()})}deleteAdministrator(e){return this.modalService.dialog({title:(0,v.J)("catalog.confirm-delete-administrator"),body:`${e.firstName} ${e.lastName}`,buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(t=>t?this.dataService.administrator.deleteAdministrator(e.id):x.E)).subscribe(()=>{this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"Administrator"}),this.refresh()},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"Administrator"})})}createSearchQuery(e,t,n){let i={},r=o.FnJ.AND;return n&&(i={emailAddress:{contains:n},firstName:{contains:n},lastName:{contains:n}},r=o.FnJ.OR),{options:{skip:e,take:t,filter:Object.assign({},null!=i?i:{}),sort:{updatedAt:o.Asd.DESC},filterOperator:r}}}}Ln.\u0275fac=function(e){return new(e||Ln)(i.Y36(o.DoR),i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.Z7U),i.Y36(o.gqp))},Ln.\u0275cmp=i.Xpm({type:Ln,selectors:[["vdr-administrator-list"]],features:[i.qOj],decls:24,vars:26,consts:[["type","text","name","searchTerm",1,"search-input",3,"formControl","placeholder"],["locationId","administrator-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"input",0),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"vdr-ab-right"),i._UZ(5,"vdr-action-bar-items",1),i.YNc(6,z,4,5,"a",2),i.qZA(),i.qZA(),i.TgZ(7,"vdr-data-table",3),i.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),i.ALo(8,"async"),i.ALo(9,"async"),i.ALo(10,"async"),i.ALo(11,"async"),i.TgZ(12,"vdr-dt-column"),i._uU(13),i.ALo(14,"translate"),i.qZA(),i.TgZ(15,"vdr-dt-column"),i._uU(16),i.ALo(17,"translate"),i.qZA(),i.TgZ(18,"vdr-dt-column"),i._uU(19),i.ALo(20,"translate"),i.qZA(),i._UZ(21,"vdr-dt-column"),i._UZ(22,"vdr-dt-column"),i.YNc(23,G,21,18,"ng-template"),i.qZA()),2&e&&(i.xp6(2),i.Q6J("formControl",t.searchControl)("placeholder",i.lcZ(3,10,"admin.search-administrator")),i.xp6(4),i.Q6J("vdrIfPermissions","CreateAdministrator"),i.xp6(1),i.Q6J("items",i.lcZ(8,12,t.items$))("itemsPerPage",i.lcZ(9,14,t.itemsPerPage$))("totalItems",i.lcZ(10,16,t.totalItems$))("currentPage",i.lcZ(11,18,t.currentPage$)),i.xp6(6),i.Oqu(i.lcZ(14,20,"settings.first-name")),i.xp6(3),i.Oqu(i.lcZ(17,22,"settings.last-name")),i.xp6(3),i.Oqu(i.lcZ(20,24,"settings.email-address")))},directives:[o.KkL,o.BND,o.y_K,Z.Fj,Z.JJ,Z.oH,o.mz,o.WWO,o.HAh,o.Qj_,o.Egy,b.yS,k.qvL,o.v_8,o.JOL,o.UaT,o.N9E,o.HH4],pipes:[_.X$,J.Ov,o.j$k],styles:[".search-input[_ngcontent-%COMP%]{min-width:300px}"]}),Ln.ctorParameters=()=>[{type:o.DoR},{type:b.F0},{type:b.gz},{type:o.Z7U},{type:o.gqp}];class Jn extends o.UT_{constructor(e,t,n,i,r,s,a){super(t,e,n,r),this.serverConfigService=n,this.changeDetector=i,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.currencyCodes=Object.values(o.NEm),this.updatePermission=[o.y3$.SuperAdmin,o.y3$.UpdateChannel,o.y3$.CreateChannel],this.customFields=this.getCustomFieldConfig("Channel"),this.detailForm=this.formBuilder.group({code:["",Z.kI.required],token:["",Z.kI.required],pricesIncludeTax:[!1],currencyCode:[""],defaultShippingZoneId:["",Z.kI.required],defaultLanguageCode:[],defaultTaxZoneId:["",Z.kI.required],customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init(),this.zones$=this.dataService.settings.getZones().mapSingle(e=>e.zones),this.availableLanguageCodes$=this.serverConfigService.getAvailableLanguages()}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const e=this.detailForm.value,t={code:e.code,token:e.token,defaultLanguageCode:e.defaultLanguageCode,pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZoneId,defaultTaxZoneId:e.defaultTaxZoneId,customFields:e.customFields};this.dataService.settings.createChannel(t).pipe((0,a.zg)(({createChannel:e})=>this.dataService.auth.currentUser().single$.pipe((0,r.U)(({me:t})=>({me:t,createChannel:e})))),(0,a.zg)(({me:e,createChannel:t})=>this.dataService.client.updateUserChannels(e.channels).pipe((0,r.U)(()=>t)))).subscribe(e=>{switch(e.__typename){case"Channel":this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"Channel"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.id],{relativeTo:this.route});break;case"LanguageNotAvailableError":this.notificationService.error(e.message)}})}save(){if(!this.detailForm.dirty)return;const e=this.detailForm.value;this.entity$.pipe((0,s.q)(1),(0,a.zg)(t=>{const n={id:t.id,code:e.code,token:e.token,pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZoneId,defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZoneId,customFields:e.customFields};return this.dataService.settings.updateChannel(n)})).subscribe(({updateChannel:e})=>{switch(e.__typename){case"Channel":this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"Channel"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck();break;case"LanguageNotAvailableError":this.notificationService.error(e.message)}})}setFormValues(e,t){if(this.detailForm.patchValue({code:e.code,token:e.token||this.generateToken(),pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZone?e.defaultShippingZone.id:"",defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZone?e.defaultTaxZone.id:""}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e),e.code===y.z$){const e=this.detailForm.get("code");e&&e.disable()}}generateToken(){const e=()=>Math.random().toString(36).substr(3,10);return`${e()}${e()}`}}Jn.\u0275fac=function(e){return new(e||Jn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},Jn.\u0275cmp=i.Xpm({type:Jn,selectors:[["vdr-channel-detail"]],features:[i.qOj],decls:53,vars:65,consts:[[3,"entity"],["locationId","channel-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","token",3,"label"],["id","token","type","text","formControlName","token",3,"readonly"],["for","defaultTaxZoneId",3,"label"],["clrSelect","","name","currencyCode","formControlName","currencyCode",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","defaultLanguage",3,"label"],["clrSelect","","name","defaultLanguageCode","formControlName","defaultLanguageCode",3,"vdrDisabled"],["for","pricesIncludeTax",3,"label"],["type","checkbox","clrToggle","","id","pricesIncludeTax","formControlName","pricesIncludeTax",3,"vdrDisabled"],["clrSelect","","name","defaultTaxZoneId","formControlName","defaultTaxZoneId",3,"vdrDisabled"],["selected","","value","",2,"display","none"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","defaultShippingZoneId",3,"label"],["clrSelect","","name","defaultShippingZoneId","formControlName","defaultShippingZoneId",3,"vdrDisabled"],["clrAlertType","warning",3,"clrAlertClosable",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],["locationId","channel-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["clrAlertType","warning",3,"clrAlertClosable"],["formGroupName","customFields"],["entityName","Channel",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){if(1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.qZA(),i.TgZ(4,"vdr-ab-right"),i._UZ(5,"vdr-action-bar-items",1),i.YNc(6,E,3,4,"button",2),i.ALo(7,"async"),i.YNc(8,W,1,2,"ng-template",null,3,i.W1O),i.qZA(),i.qZA(),i.TgZ(10,"form",4),i.TgZ(11,"vdr-form-field",5),i.ALo(12,"translate"),i._UZ(13,"input",6),i.ALo(14,"hasPermission"),i.qZA(),i.TgZ(15,"vdr-form-field",7),i.ALo(16,"translate"),i._UZ(17,"input",8),i.ALo(18,"hasPermission"),i.qZA(),i.TgZ(19,"vdr-form-field",9),i.ALo(20,"translate"),i.TgZ(21,"select",10),i.ALo(22,"hasPermission"),i.YNc(23,K,3,4,"option",11),i.qZA(),i.qZA(),i.TgZ(24,"vdr-form-field",12),i.ALo(25,"translate"),i.TgZ(26,"select",13),i.ALo(27,"hasPermission"),i.YNc(28,X,4,7,"option",11),i.ALo(29,"async"),i.qZA(),i.qZA(),i.TgZ(30,"vdr-form-field",14),i.ALo(31,"translate"),i.TgZ(32,"clr-toggle-wrapper"),i._UZ(33,"input",15),i.ALo(34,"hasPermission"),i.qZA(),i.qZA(),i.TgZ(35,"vdr-form-field",9),i.ALo(36,"translate"),i.TgZ(37,"select",16),i.ALo(38,"hasPermission"),i._UZ(39,"option",17),i.YNc(40,ee,2,2,"option",11),i.ALo(41,"async"),i.qZA(),i.qZA(),i.YNc(42,te,5,4,"clr-alert",18),i.TgZ(43,"vdr-form-field",19),i.ALo(44,"translate"),i.TgZ(45,"select",20),i.ALo(46,"hasPermission"),i._UZ(47,"option",17),i.YNc(48,ne,2,2,"option",11),i.ALo(49,"async"),i.qZA(),i.qZA(),i.YNc(50,ie,5,4,"clr-alert",21),i.YNc(51,oe,6,8,"section",22),i._UZ(52,"vdr-custom-detail-component-host",23),i.qZA()),2&e){const e=i.MAs(9);i.xp6(2),i.Q6J("entity",i.lcZ(3,27,t.entity$)),i.xp6(4),i.Q6J("ngIf",i.lcZ(7,29,t.isNew$))("ngIfElse",e),i.xp6(4),i.Q6J("formGroup",t.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(12,31,"common.code")),i.xp6(2),i.Q6J("readonly",!i.lcZ(14,33,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(16,35,"settings.channel-token")),i.xp6(2),i.Q6J("readonly",!i.lcZ(18,37,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(20,39,"settings.currency")),i.xp6(2),i.Q6J("vdrDisabled",!i.lcZ(22,41,t.updatePermission)),i.xp6(2),i.Q6J("ngForOf",t.currencyCodes),i.xp6(1),i.Q6J("label",i.lcZ(25,43,"common.default-language")),i.xp6(2),i.Q6J("vdrDisabled",!i.lcZ(27,45,t.updatePermission)),i.xp6(2),i.Q6J("ngForOf",i.lcZ(29,47,t.availableLanguageCodes$)),i.xp6(2),i.Q6J("label",i.lcZ(31,49,"settings.prices-include-tax")),i.xp6(3),i.Q6J("vdrDisabled",!i.lcZ(34,51,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(36,53,"settings.default-tax-zone")),i.xp6(2),i.Q6J("vdrDisabled",!i.lcZ(38,55,t.updatePermission)),i.xp6(3),i.Q6J("ngForOf",i.lcZ(41,57,t.zones$)),i.xp6(2),i.Q6J("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultTaxZoneId),i.xp6(1),i.Q6J("label",i.lcZ(44,59,"settings.default-shipping-zone")),i.xp6(2),i.Q6J("vdrDisabled",!i.lcZ(46,61,t.updatePermission)),i.xp6(3),i.Q6J("ngForOf",i.lcZ(49,63,t.zones$)),i.xp6(2),i.Q6J("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultShippingZoneId),i.xp6(1),i.Q6J("ngIf",t.customFields.length),i.xp6(1),i.Q6J("entity$",t.entity$)("detailForm",t.detailForm)}},directives:[o.KkL,o.BND,o.Vqt,o.mz,o.WWO,J.O5,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,Z.EJ,k.otW,o.x3T,J.sg,k.PEh,Z.Wl,k.KKC,Z.YN,Z.Kr,o.CWh,o.HAh,k.TIm,k.CyW,k.I9z,Z.x0,k.MgK,o.yc0],pipes:[J.Ov,_.X$,o.j$k,o.uDH,o.Bm,J.gd],styles:["clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}"],changeDetection:0}),Jn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class _n{constructor(e,t,n){this.dataService=e,this.modalService=t,this.notificationService=n,this.refresh$=new T.xQ,this.channels$=this.refresh$.pipe((0,m.O)(1),(0,u.w)(()=>this.dataService.settings.getChannels().mapStream(e=>e.channels)))}isDefaultChannel(e){return e===y.z$}deleteChannel(e){this.modalService.dialog({title:(0,v.J)("catalog.confirm-delete-channel"),buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(t=>t?this.dataService.settings.deleteChannel(e):x.E),(0,a.zg)(()=>this.dataService.auth.currentUser().single$),(0,a.zg)(e=>this.dataService.client.updateUserChannels(e.me.channels))).subscribe(()=>{this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"Channel"}),this.refresh$.next(1)},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"Channel"})})}}_n.\u0275fac=function(e){return new(e||_n)(i.Y36(o.DoR),i.Y36(o.Z7U),i.Y36(o.gqp))},_n.\u0275cmp=i.Xpm({type:_n,selectors:[["vdr-channel-list"]],decls:12,vars:8,consts:[["locationId","channel-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"channelCode"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-right"),i._UZ(2,"vdr-action-bar-items",0),i.YNc(3,re,4,5,"a",1),i.qZA(),i.qZA(),i.TgZ(4,"vdr-data-table",2),i.ALo(5,"async"),i.TgZ(6,"vdr-dt-column"),i._uU(7),i.ALo(8,"translate"),i.qZA(),i._UZ(9,"vdr-dt-column"),i._UZ(10,"vdr-dt-column"),i.YNc(11,ae,20,23,"ng-template"),i.qZA()),2&e&&(i.xp6(3),i.Q6J("vdrIfPermissions",i.DdM(7,ce)),i.xp6(1),i.Q6J("items",i.lcZ(5,3,t.channels$)),i.xp6(3),i.Oqu(i.lcZ(8,5,"common.code")))},directives:[o.KkL,o.mz,o.WWO,o.HAh,o.Qj_,o.Egy,b.yS,k.qvL,o.nIZ,o.v_8,o.JOL,o.UaT,o.N9E,o.HH4],pipes:[J.Ov,_.X$,o.E6B,o.j$k],styles:[""],changeDetection:0}),_n.ctorParameters=()=>[{type:o.DoR},{type:o.Z7U},{type:o.gqp}];class kn extends o.UT_{constructor(e,t,n,i,r,s,a){super(t,e,n,r),this.changeDetector=i,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.updatePermission=[o.y3$.UpdateSettings,o.y3$.UpdateCountry],this.customFields=this.getCustomFieldConfig("Country"),this.detailForm=this.formBuilder.group({code:["",Z.kI.required],name:["",Z.kI.required],enabled:[!0],customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init(),this.country$=this.entity$}ngOnDestroy(){this.destroy()}create(){!this.detailForm.dirty||(0,q.aj)(this.country$,this.languageCode$).pipe((0,s.q)(1),(0,a.zg)(([e,t])=>{const n=this.detailForm.value,i=(0,o.iSy)({translatable:e,updatedFields:n,customFieldConfig:this.customFields,languageCode:t,defaultTranslation:{name:n.name,languageCode:t}});return this.dataService.settings.createCountry(i)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"Country"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createCountry.id],{relativeTo:this.route})},e=>{this.notificationService.error((0,v.J)("common.notify-create-error"),{entity:"Country"})})}save(){(0,q.aj)(this.country$,this.languageCode$).pipe((0,s.q)(1),(0,a.zg)(([e,t])=>{const n=this.detailForm.value,i=(0,o.iSy)({translatable:e,updatedFields:n,customFieldConfig:this.customFields,languageCode:t,defaultTranslation:{name:n.name,languageCode:t}});return this.dataService.settings.updateCountry(i)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"Country"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"Country"})})}setFormValues(e,t){const n=(0,o.ZIM)(e,t);this.detailForm.patchValue({code:e.code,name:n?n.name:"",enabled:e.enabled}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e,n)}}kn.\u0275fac=function(e){return new(e||kn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},kn.\u0275cmp=i.Xpm({type:kn,selectors:[["vdr-country-detail"]],features:[i.qOj],decls:30,vars:38,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","country-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","country-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["formGroupName","customFields"],["entityName","Country",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){if(1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.TgZ(4,"vdr-language-selector",1),i.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),i.ALo(5,"async"),i.ALo(6,"async"),i.ALo(7,"async"),i.qZA(),i.qZA(),i.TgZ(8,"vdr-ab-right"),i._UZ(9,"vdr-action-bar-items",2),i.YNc(10,le,3,4,"button",3),i.ALo(11,"async"),i.YNc(12,ue,1,1,"ng-template",null,4,i.W1O),i.qZA(),i.qZA(),i.TgZ(14,"form",5),i.TgZ(15,"vdr-form-field",6),i.ALo(16,"translate"),i._UZ(17,"input",7),i.ALo(18,"hasPermission"),i.qZA(),i.TgZ(19,"vdr-form-field",8),i.ALo(20,"translate"),i._UZ(21,"input",9),i.ALo(22,"hasPermission"),i.qZA(),i.TgZ(23,"vdr-form-field",10),i.ALo(24,"translate"),i.TgZ(25,"clr-toggle-wrapper"),i._UZ(26,"input",11),i.ALo(27,"hasPermission"),i.qZA(),i.qZA(),i.YNc(28,me,6,8,"section",12),i._UZ(29,"vdr-custom-detail-component-host",13),i.qZA()),2&e){const e=i.MAs(13);i.xp6(2),i.Q6J("entity",i.lcZ(3,16,t.entity$)),i.xp6(2),i.Q6J("disabled",i.lcZ(5,18,t.isNew$))("availableLanguageCodes",i.lcZ(6,20,t.availableLanguages$))("currentLanguageCode",i.lcZ(7,22,t.languageCode$)),i.xp6(6),i.Q6J("ngIf",i.lcZ(11,24,t.isNew$))("ngIfElse",e),i.xp6(4),i.Q6J("formGroup",t.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(16,26,"common.code")),i.xp6(2),i.Q6J("readonly",!i.lcZ(18,28,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(20,30,"common.name")),i.xp6(2),i.Q6J("readonly",!i.lcZ(22,32,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(24,34,"common.enabled")),i.xp6(3),i.Q6J("vdrDisabled",!i.lcZ(27,36,t.updatePermission)),i.xp6(2),i.Q6J("ngIf",t.customFields.length),i.xp6(1),i.Q6J("entity$",t.entity$)("detailForm",t.detailForm)}},directives:[o.KkL,o.BND,o.Vqt,o.SdP,o.mz,o.WWO,J.O5,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,k.PEh,Z.Wl,k.KKC,o.x3T,o.CWh,o.HAh,Z.x0,k.MgK,o.yc0],pipes:[J.Ov,_.X$,o.j$k],styles:[""],changeDetection:0}),kn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class Un{constructor(e,t,n,i){this.dataService=e,this.notificationService=t,this.modalService=n,this.serverConfigService=i,this.searchTerm=new Z.NI(""),this.countries=[],this.destroy$=new T.xQ,this.refresh$=new T.xQ}ngOnInit(){this.contentLanguage$=this.dataService.client.uiState().mapStream(({uiState:e})=>e.contentLanguage);const e=(0,q.aj)(this.contentLanguage$,this.searchTerm.valueChanges.pipe((0,m.O)(null))).pipe((0,r.U)(([e,t])=>t),(0,u.w)(e=>this.dataService.settings.getCountries(999,0,e).single$),(0,p.b)(e=>{this.countries=e.countries.items}),(0,r.U)(e=>e.countries.items));this.zones$=this.dataService.settings.getZones().mapStream(e=>e.zones),this.countriesWithZones$=(0,q.aj)(e,this.zones$).pipe((0,r.U)(([e,t])=>e.map(e=>Object.assign(Object.assign({},e),{zones:t.filter(t=>!!t.members.find(t=>t.id===e.id))})))),this.availableLanguages$=this.serverConfigService.getAvailableLanguages()}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}setLanguage(e){this.dataService.client.setContentLanguage(e).subscribe()}deleteCountry(e){this.modalService.dialog({title:(0,v.J)("catalog.confirm-delete-country"),buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(t=>t?this.dataService.settings.deleteCountry(e):x.E)).subscribe(e=>{e.deleteCountry.result===o.PcR.DELETED?(this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"Country"}),this.dataService.settings.getCountries(999,0).single$.subscribe()):this.notificationService.error(e.deleteCountry.message||"")},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"Country"})})}isZone(e){return e.hasOwnProperty("id")}}Un.\u0275fac=function(e){return new(e||Un)(i.Y36(o.DoR),i.Y36(o.gqp),i.Y36(o.Z7U),i.Y36(o.iHG))},Un.\u0275cmp=i.Xpm({type:Un,selectors:[["vdr-country-list"]],decls:28,vars:28,consts:[["type","text","name","searchTerm",1,"search-input",3,"formControl","placeholder"],[3,"availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","country-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"routerLink"],[3,"colorFrom"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"input",0),i.ALo(3,"translate"),i.TgZ(4,"div"),i.TgZ(5,"vdr-language-selector",1),i.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),i.ALo(6,"async"),i.ALo(7,"async"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(8,"vdr-ab-right"),i._UZ(9,"vdr-action-bar-items",2),i.YNc(10,pe,4,5,"a",3),i.qZA(),i.qZA(),i.TgZ(11,"vdr-data-table",4),i.ALo(12,"async"),i.TgZ(13,"vdr-dt-column"),i._uU(14),i.ALo(15,"translate"),i.qZA(),i.TgZ(16,"vdr-dt-column",5),i._uU(17),i.ALo(18,"translate"),i.qZA(),i.TgZ(19,"vdr-dt-column"),i._uU(20),i.ALo(21,"translate"),i.qZA(),i.TgZ(22,"vdr-dt-column"),i._uU(23),i.ALo(24,"translate"),i.qZA(),i._UZ(25,"vdr-dt-column"),i._UZ(26,"vdr-dt-column"),i.YNc(27,be,23,22,"ng-template"),i.qZA()),2&e&&(i.xp6(2),i.Q6J("formControl",t.searchTerm)("placeholder",i.lcZ(3,11,"settings.search-country-by-name")),i.xp6(3),i.Q6J("availableLanguageCodes",i.lcZ(6,13,t.availableLanguages$))("currentLanguageCode",i.lcZ(7,15,t.contentLanguage$)),i.xp6(5),i.Q6J("vdrIfPermissions",i.DdM(27,ve)),i.xp6(1),i.Q6J("items",i.lcZ(12,17,t.countriesWithZones$)),i.xp6(3),i.Oqu(i.lcZ(15,19,"common.code")),i.xp6(2),i.Q6J("expand",!0),i.xp6(1),i.Oqu(i.lcZ(18,21,"common.name")),i.xp6(3),i.Oqu(i.lcZ(21,23,"settings.zone")),i.xp6(3),i.Oqu(i.lcZ(24,25,"common.enabled")))},directives:[o.KkL,o.BND,o.y_K,Z.Fj,Z.JJ,Z.oH,o.SdP,o.mz,o.WWO,o.HAh,o.Qj_,o.Egy,b.yS,k.qvL,J.sg,o.v_8,o.JOL,o.UaT,o.N9E,o.HH4,o.Ywx],pipes:[_.X$,J.Ov,o.j$k],styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"],changeDetection:0}),Un.ctorParameters=()=>[{type:o.DoR},{type:o.gqp},{type:o.Z7U},{type:o.iHG}];class In extends o.UT_{constructor(e,t,n,i,r,s,a){super(t,e,n,r),this.changeDetector=i,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.languageCodes=Object.values(o.spR),this.updatePermission=[o.y3$.UpdateSettings,o.y3$.UpdateGlobalSettings],this.customFields=this.getCustomFieldConfig("GlobalSettings"),this.detailForm=this.formBuilder.group({availableLanguages:[""],trackInventory:!1,outOfStockThreshold:[0,Z.kI.required],customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init(),this.dataService.client.userStatus().single$.subscribe(({userStatus:e})=>{if(!e.permissions.includes(o.y3$.UpdateSettings)){const e=this.detailForm.get("availableLanguages");e&&e.disable()}})}save(){!this.detailForm.dirty||this.dataService.settings.updateGlobalSettings(this.detailForm.value).pipe((0,p.b)(({updateGlobalSettings:e})=>{switch(e.__typename){case"GlobalSettings":this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"Settings"});break;case"ChannelDefaultLanguageError":this.notificationService.error(e.message)}}),(0,u.w)(()=>this.serverConfigService.refreshGlobalSettings()),(0,g.M)(this.dataService.client.uiState().single$)).subscribe(([{globalSettings:e},{uiState:t}])=>{const n=e.availableLanguages;n.length&&!n.includes(t.contentLanguage)&&this.dataService.client.setContentLanguage(n[0]).subscribe()})}setFormValues(e,t){this.detailForm.patchValue({availableLanguages:e.availableLanguages,trackInventory:e.trackInventory,outOfStockThreshold:e.outOfStockThreshold}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}In.\u0275fac=function(e){return new(e||In)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},In.\u0275cmp=i.Xpm({type:In,selectors:[["vdr-global-settings"]],features:[i.qOj],decls:23,vars:29,consts:[["locationId","global-settings-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","availableLanguages",3,"label"],["multiple","true","appendTo","body","formControlName","availableLanguages",3,"items","addTag","hideSelected"],["ng-label-tmp",""],["ng-option-tmp",""],["for","outOfStockThreshold",3,"label","tooltip"],["id","outOfStockThreshold","type","number","formControlName","outOfStockThreshold",3,"readonly"],["for","enabled",3,"label","tooltip"],["type","checkbox","clrToggle","","name","enabled","formControlName","trackInventory",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","global-settings-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label"],["formGroupName","customFields"],["entityName","GlobalSettings",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-right"),i._UZ(2,"vdr-action-bar-items",0),i.YNc(3,ye,3,4,"button",1),i.qZA(),i.qZA(),i.TgZ(4,"form",2),i.TgZ(5,"vdr-form-field",3),i.ALo(6,"translate"),i.TgZ(7,"ng-select",4),i.YNc(8,Ae,5,4,"ng-template",5),i.YNc(9,xe,2,4,"ng-template",6),i.qZA(),i.qZA(),i.TgZ(10,"vdr-form-field",7),i.ALo(11,"translate"),i.ALo(12,"translate"),i._UZ(13,"input",8),i.ALo(14,"hasPermission"),i.qZA(),i.TgZ(15,"vdr-form-field",9),i.ALo(16,"translate"),i.ALo(17,"translate"),i.TgZ(18,"clr-toggle-wrapper"),i._UZ(19,"input",10),i.ALo(20,"hasPermission"),i.qZA(),i.qZA(),i.YNc(21,Te,6,8,"section",11),i._UZ(22,"vdr-custom-detail-component-host",12),i.qZA()),2&e&&(i.xp6(3),i.Q6J("vdrIfPermissions",t.updatePermission),i.xp6(1),i.Q6J("formGroup",t.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(6,15,"common.available-languages")),i.xp6(2),i.Q6J("items",t.languageCodes)("addTag",!1)("hideSelected",!0),i.xp6(3),i.Q6J("label",i.lcZ(11,17,"settings.global-out-of-stock-threshold"))("tooltip",i.lcZ(12,19,"settings.global-out-of-stock-threshold-tooltip")),i.xp6(3),i.Q6J("readonly",!i.lcZ(14,21,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(16,23,"settings.track-inventory-default"))("tooltip",i.lcZ(17,25,"catalog.track-inventory-tooltip")),i.xp6(4),i.Q6J("vdrDisabled",!i.lcZ(20,27,t.updatePermission)),i.xp6(2),i.Q6J("ngIf",t.customFields.length),i.xp6(1),i.Q6J("entity$",t.entity$)("detailForm",t.detailForm))},directives:[o.KkL,o.mz,o.WWO,o.HAh,Z._Y,Z.JL,Z.sg,o.hgI,U.w9,Z.JJ,Z.u,U.bb,U.Z2,o.y_K,Z.wV,Z.Fj,k.PEh,Z.Wl,k.KKC,o.x3T,J.O5,o.CWh,Z.x0,k.MgK,o.yc0],pipes:[_.X$,o.j$k,o.Bm],styles:["ng-select .ng-value>span{margin:0!important}  ng-select .ng-arrow-wrapper .ng-arrow{margin:0!important}  ng-select .ng-select-container>span{margin:0!important}"],changeDetection:0}),In.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class Pn extends o.UT_{constructor(e,t,n,i,r,s,a){super(t,e,n,r),this.changeDetector=i,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.checkers=[],this.handlers=[],this.updatePermission=[o.y3$.UpdateSettings,o.y3$.UpdatePaymentMethod],this.customFields=this.getCustomFieldConfig("PaymentMethod"),this.detailForm=this.formBuilder.group({code:["",Z.kI.required],name:["",Z.kI.required],description:"",enabled:[!0,Z.kI.required],checker:{},handler:{},customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init(),(0,q.aj)([this.dataService.settings.getPaymentMethodOperations().single$,this.entity$.pipe((0,s.q)(1))]).subscribe(([e,t])=>{this.checkers=e.paymentMethodEligibilityCheckers,this.handlers=e.paymentMethodHandlers,this.changeDetector.markForCheck(),this.selectedCheckerDefinition=e.paymentMethodEligibilityCheckers.find(e=>e.code===(t.checker&&t.checker.code)),this.selectedHandlerDefinition=e.paymentMethodHandlers.find(e=>e.code===(t.handler&&t.handler.code))})}ngOnDestroy(){this.destroy()}updateCode(e,t){if(!e){const e=this.detailForm.get(["code"]);e&&e.pristine&&e.setValue((0,F.U)(t,"-"))}}configArgsIsPopulated(){const e=this.detailForm.get("configArgs");return!!e&&0<Object.keys(e.controls).length}selectChecker(e){this.selectedCheckerDefinition=e,this.selectedChecker=(0,o.miO)(e);const t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}selectHandler(e){this.selectedHandlerDefinition=e,this.selectedHandler=(0,o.miO)(e);const t=this.detailForm.get("handler");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedHandler)),this.detailForm.markAsDirty()}removeChecker(){this.selectedChecker=null,this.detailForm.markAsDirty()}removeHandler(){this.selectedHandler=null,this.detailForm.markAsDirty()}create(){const e=this.selectedChecker,t=this.selectedHandler;!t||this.entity$.pipe((0,s.q)(1),(0,a.zg)(({id:n})=>{const i=this.detailForm.value,r={name:i.name,code:i.code,description:i.description,enabled:i.enabled,checker:e?(0,o.RnJ)(e,i.checker):null,handler:(0,o.RnJ)(t,i.handler),customFields:i.customFields};return this.dataService.settings.createPaymentMethod(r)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"PaymentMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createPaymentMethod.id],{relativeTo:this.route})},e=>{this.notificationService.error((0,v.J)("common.notify-create-error"),{entity:"PaymentMethod"})})}save(){const e=this.selectedChecker,t=this.selectedHandler;!t||this.entity$.pipe((0,s.q)(1),(0,a.zg)(({id:n})=>{const i=this.detailForm.value,r={id:n,name:i.name,code:i.code,description:i.description,enabled:i.enabled,checker:e?(0,o.RnJ)(e,i.checker):null,handler:(0,o.RnJ)(t,i.handler),customFields:i.customFields};return this.dataService.settings.updatePaymentMethod(r)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"PaymentMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"PaymentMethod"})})}setFormValues(e){this.detailForm.patchValue({name:e.name,code:e.code,description:e.description,enabled:e.enabled,checker:e.checker||{},handler:e.handler||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(e=>Object.assign(Object.assign({},e),{value:(0,o.sux)(e.value)}))}),this.selectedHandler||(this.selectedHandler=e.handler&&{code:e.handler.code,args:e.handler.args.map(e=>Object.assign(Object.assign({},e),{value:(0,o.sux)(e.value)}))}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}Pn.\u0275fac=function(e){return new(e||Pn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},Pn.\u0275cmp=i.Xpm({type:Pn,selectors:[["vdr-payment-method-detail"]],features:[i.qOj],decls:12,vars:10,consts:[[3,"entity"],["locationId","payment-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",3,"readonly","label"],["for","description",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","payment-method-detail",3,"entity$","detailForm"],[1,"clr-row","mt4"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[4,"ngIf"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],["formGroupName","customFields"],["entityName","PaymentMethod",3,"customFields","customFieldsFormGroup","readonly"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove"]],template:function(e,t){if(1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.qZA(),i.TgZ(4,"vdr-ab-right"),i._UZ(5,"vdr-action-bar-items",1),i.YNc(6,qe,3,4,"button",2),i.ALo(7,"async"),i.YNc(8,Fe,1,1,"ng-template",null,3,i.W1O),i.qZA(),i.qZA(),i.YNc(10,Se,33,41,"form",4),i.ALo(11,"async")),2&e){const e=i.MAs(9);i.xp6(2),i.Q6J("entity",i.lcZ(3,4,t.entity$)),i.xp6(4),i.Q6J("ngIf",i.lcZ(7,6,t.isNew$))("ngIfElse",e),i.xp6(4),i.Q6J("ngIf",i.lcZ(11,8,t.entity$))}},directives:[o.KkL,o.BND,o.Vqt,o.mz,o.WWO,J.O5,o.HAh,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,o.YI,k.PEh,Z.Wl,k.KKC,o.x3T,o.CWh,k.MgK,Z.x0,o.yc0,o.qq8,o.JOL,o.UaT,k.qvL,o.N9E,J.sg,o.HH4],pipes:[J.Ov,_.X$,o.j$k],styles:[""],changeDetection:0}),Pn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class Sn extends o.t7C{constructor(e,t,n,i,o){super(t,n),this.dataService=e,this.modalService=i,this.notificationService=o,super.setQueryFn((...e)=>this.dataService.settings.getPaymentMethods(...e).refetchOnChannelChange(),e=>e.paymentMethods)}deletePaymentMethod(e){this.showModalAndDelete(e).pipe((0,u.w)(t=>t.result===o.PcR.DELETED?[!0]:this.showModalAndDelete(e,t.message||"").pipe((0,r.U)(e=>e.result===o.PcR.DELETED))),(0,u.w)(()=>this.dataService.settings.getPaymentMethods(100).single$)).subscribe(()=>{this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"PaymentMethod"}),this.refresh()},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"PaymentMethod"})})}showModalAndDelete(e,t){return this.modalService.dialog({title:(0,v.J)("settings.confirm-delete-payment-method"),body:t,buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(n=>n?this.dataService.settings.deletePaymentMethod(e,!!t):x.E),(0,r.U)(e=>e.deletePaymentMethod))}}Sn.\u0275fac=function(e){return new(e||Sn)(i.Y36(o.DoR),i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.Z7U),i.Y36(o.gqp))},Sn.\u0275cmp=i.Xpm({type:Sn,selectors:[["vdr-payment-method-list"]],features:[i.qOj],decls:18,vars:20,consts:[["locationId","payment-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-right"),i._UZ(2,"vdr-action-bar-items",0),i.YNc(3,Oe,4,5,"a",1),i.qZA(),i.qZA(),i.TgZ(4,"vdr-data-table",2),i.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),i.ALo(5,"async"),i.ALo(6,"async"),i.ALo(7,"async"),i.ALo(8,"async"),i.TgZ(9,"vdr-dt-column"),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.TgZ(12,"vdr-dt-column"),i._uU(13),i.ALo(14,"translate"),i.qZA(),i._UZ(15,"vdr-dt-column"),i._UZ(16,"vdr-dt-column"),i.YNc(17,De,19,18,"ng-template"),i.qZA()),2&e&&(i.xp6(3),i.Q6J("vdrIfPermissions",i.DdM(19,Ne)),i.xp6(1),i.Q6J("items",i.lcZ(5,7,t.items$))("itemsPerPage",i.lcZ(6,9,t.itemsPerPage$))("totalItems",i.lcZ(7,11,t.totalItems$))("currentPage",i.lcZ(8,13,t.currentPage$)),i.xp6(6),i.Oqu(i.lcZ(11,15,"common.code")),i.xp6(3),i.Oqu(i.lcZ(14,17,"common.enabled")))},directives:[o.KkL,o.mz,o.WWO,o.HAh,o.Qj_,o.Egy,b.yS,k.qvL,o.v_8,o.JOL,o.UaT,o.N9E,o.HH4],pipes:[J.Ov,_.X$,o.j$k],styles:[""],changeDetection:0}),Sn.ctorParameters=()=>[{type:o.DoR},{type:b.F0},{type:b.gz},{type:o.Z7U},{type:o.gqp}];class On{constructor(){this.readonly=!1,this.permissionChange=new i.vpe}ngOnInit(){this.buildGrid()}setPermission(e,t){this.readonly||this.permissionChange.emit({permission:e,value:t})}toggleAll(e){const t=e.some(e=>!this.activePermissions.includes(e.name));for(const n of e)this.permissionChange.emit({permission:n.name,value:t})}buildGrid(){var e;const t=new Map,n=[],i=/^(Create|Read|Update|Delete)([a-zA-Z]+)$/;for(const o of this.permissionDefinitions)if(i.test(o.name)){const n=null===(e=o.name.match(i))||void 0===e?void 0:e[2];if(n){const e=t.get(n);e?e.push(o):t.set(n,[o])}}else o.assignable&&n.push(o);this.gridData=[...n.map(e=>({label:e.name,description:e.description,permissions:[e]})),...Array.from(t.entries()).map(([e,t])=>({label:e,description:this.extractCrudDescription(t[0]),permissions:t}))]}extractCrudDescription(e){return e.description.replace(/Grants permission to [\w]+/,"Grants permissions on")}}On.\u0275fac=function(e){return new(e||On)},On.\u0275cmp=i.Xpm({type:On,selectors:[["vdr-permission-grid"]],inputs:{readonly:"readonly",permissionDefinitions:"permissionDefinitions",activePermissions:"activePermissions"},outputs:{permissionChange:"permissionChange"},decls:3,vars:1,consts:[[1,"table"],[4,"ngFor","ngForOf"],[1,"permission-group","left"],["class","btn btn-sm btn-link",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-link",3,"click"],["size","small",3,"title","label","disabled","selected","selectedChange"]],template:function(e,t){1&e&&(i.TgZ(0,"table",0),i.TgZ(1,"tbody"),i.YNc(2,$e,12,8,"tr",1),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.Q6J("ngForOf",t.gridData))},directives:[J.sg,J.O5,o.aPl],pipes:[_.X$],styles:["td.permission-group[_ngcontent-%COMP%]{max-width:300px;background-color:var(--color-component-bg-200)}"],changeDetection:0}),On.propDecorators={permissionDefinitions:[{type:i.IIB}],activePermissions:[{type:i.IIB}],readonly:[{type:i.IIB}],permissionChange:[{type:i.r_U}]};class wn extends o.UT_{constructor(e,t,n,i,o,r,s){super(t,e,n,o),this.changeDetector=i,this.dataService=o,this.formBuilder=r,this.notificationService=s,this.customFields=this.getCustomFieldConfig("Administrator"),this.detailForm=this.formBuilder.group({emailAddress:["",Z.kI.required],firstName:["",Z.kI.required],lastName:["",Z.kI.required],password:[""],customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}save(){this.entity$.pipe((0,s.q)(1),(0,a.zg)(({id:e})=>{const t=this.detailForm.value,n={emailAddress:t.emailAddress,firstName:t.firstName,lastName:t.lastName,password:t.password,customFields:t.customFields};return this.dataService.administrator.updateActiveAdministrator(n)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"Administrator"})})}setFormValues(e,t){this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}wn.\u0275fac=function(e){return new(e||wn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},wn.\u0275cmp=i.Xpm({type:wn,selectors:[["vdr-profile"]],features:[i.qOj],decls:26,vars:27,consts:[[3,"entity"],["locationId","administrator-detail"],[1,"btn","btn-primary",3,"disabled","click"],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle"],["id","password","type","password","formControlName","password"],["formGroupName","customFields",4,"ngIf"],["locationId","administrator-profile",3,"entity$","detailForm"],["for","password",3,"label"],["formGroupName","customFields"],["entityName","Administrator",3,"customFields","customFieldsFormGroup"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.qZA(),i.TgZ(4,"vdr-ab-right"),i._UZ(5,"vdr-action-bar-items",1),i.TgZ(6,"button",2),i.NdJ("click",function(){return t.save()}),i._uU(7),i.ALo(8,"translate"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(9,"form",3),i.TgZ(10,"vdr-form-field",4),i.ALo(11,"translate"),i._UZ(12,"input",5),i.qZA(),i.TgZ(13,"vdr-form-field",6),i.ALo(14,"translate"),i._UZ(15,"input",7),i.qZA(),i.TgZ(16,"vdr-form-field",8),i.ALo(17,"translate"),i._UZ(18,"input",9),i.qZA(),i.YNc(19,Ye,3,3,"vdr-form-field",10),i.ALo(20,"async"),i.TgZ(21,"vdr-form-field",11),i.ALo(22,"translate"),i._UZ(23,"input",12),i.qZA(),i.YNc(24,Re,5,5,"section",13),i._UZ(25,"vdr-custom-detail-component-host",14),i.qZA()),2&e&&(i.xp6(2),i.Q6J("entity",i.lcZ(3,13,t.entity$)),i.xp6(4),i.Q6J("disabled",t.detailForm.invalid||t.detailForm.pristine),i.xp6(1),i.hij(" ",i.lcZ(8,15,"common.update")," "),i.xp6(2),i.Q6J("formGroup",t.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(11,17,"settings.email-address")),i.xp6(3),i.Q6J("label",i.lcZ(14,19,"settings.first-name")),i.xp6(3),i.Q6J("label",i.lcZ(17,21,"settings.last-name")),i.xp6(3),i.Q6J("ngIf",i.lcZ(20,23,t.isNew$)),i.xp6(2),i.Q6J("label",i.lcZ(22,25,"settings.password"))("readOnlyToggle",!0),i.xp6(3),i.Q6J("ngIf",t.customFields.length),i.xp6(1),i.Q6J("entity$",t.entity$)("detailForm",t.detailForm))},directives:[o.KkL,o.BND,o.Vqt,o.mz,o.WWO,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,J.O5,o.CWh,Z.x0,k.MgK,o.yc0],pipes:[J.Ov,_.X$],styles:[""],changeDetection:0}),wn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class Dn extends o.UT_{constructor(e,t,n,i,o,r,s){super(t,e,n,o),this.changeDetector=i,this.dataService=o,this.formBuilder=r,this.notificationService=s,this.detailForm=this.formBuilder.group({code:["",Z.kI.required],description:["",Z.kI.required],channelIds:[],permissions:[]})}ngOnInit(){this.init(),this.role$=this.entity$,this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}ngOnDestroy(){this.destroy()}updateCode(e){const t=this.detailForm.get(["code"]);t&&t.pristine&&t.setValue((0,F.U)(e,"-"))}setPermission(e){const t=this.detailForm.get("permissions");if(t){const n=t.value,i=!0===e.value?(0,L.T)([...n,e.permission]):n.filter(t=>t!==e.permission);t.setValue(i),t.markAsDirty()}}create(){const e=this.detailForm.value;this.dataService.administrator.createRole(e).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"Role"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createRole.id],{relativeTo:this.route})},e=>{this.notificationService.error((0,v.J)("common.notify-create-error"),{entity:"Role"})})}save(){this.role$.pipe((0,s.q)(1),(0,a.zg)(({id:e})=>{const t=this.detailForm.value,n=Object.assign({id:e},t);return this.dataService.administrator.updateRole(n)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"Role"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"Role"})})}setFormValues(e,t){this.detailForm.patchValue({description:e.description,code:e.code,channelIds:e.channels.map(e=>e.id),permissions:e.permissions}),this.changeDetector.detectChanges()}}Dn.\u0275fac=function(e){return new(e||Dn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},Dn.\u0275cmp=i.Xpm({type:Dn,selectors:[["vdr-role-detail"]],features:[i.qOj],decls:29,vars:37,consts:[[3,"entity"],["locationId","role-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","description",3,"label"],["id","description","type","text","formControlName","description",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],[3,"label"],["formControlName","channelIds",3,"vdrDisabled"],[3,"permissionDefinitions","activePermissions","readonly","permissionChange"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.qZA(),i.TgZ(4,"vdr-ab-right"),i._UZ(5,"vdr-action-bar-items",1),i.YNc(6,je,3,4,"button",2),i.ALo(7,"async"),i.YNc(8,He,1,1,"ng-template",null,3,i.W1O),i.qZA(),i.qZA(),i.TgZ(10,"form",4),i.TgZ(11,"vdr-form-field",5),i.ALo(12,"translate"),i.TgZ(13,"input",6),i.NdJ("input",function(e){return t.updateCode(e.target.value)}),i.ALo(14,"hasPermission"),i.qZA(),i.qZA(),i.TgZ(15,"vdr-form-field",7),i.ALo(16,"translate"),i.ALo(17,"hasPermission"),i._UZ(18,"input",8),i.ALo(19,"hasPermission"),i.qZA(),i.TgZ(20,"vdr-form-field",9),i.ALo(21,"translate"),i._UZ(22,"vdr-channel-assignment-control",10),i.ALo(23,"hasPermission"),i.qZA(),i.TgZ(24,"label"),i._uU(25),i.ALo(26,"translate"),i.qZA(),i.TgZ(27,"vdr-permission-grid",11),i.NdJ("permissionChange",function(e){return t.setPermission(e)}),i.ALo(28,"hasPermission"),i.qZA(),i.qZA()),2&e){const e=i.MAs(9);let n;i.xp6(2),i.Q6J("entity",i.lcZ(3,15,t.entity$)),i.xp6(4),i.Q6J("ngIf",i.lcZ(7,17,t.isNew$))("ngIfElse",e),i.xp6(4),i.Q6J("formGroup",t.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(12,19,"common.description")),i.xp6(2),i.Q6J("readonly",!i.lcZ(14,21,"UpdateAdministrator")),i.xp6(2),i.Q6J("label",i.lcZ(16,23,"common.code"))("readOnlyToggle",i.lcZ(17,25,"UpdateAdministrator")),i.xp6(3),i.Q6J("readonly",!i.lcZ(19,27,"UpdateAdministrator")),i.xp6(2),i.Q6J("label",i.lcZ(21,29,"settings.channel")),i.xp6(2),i.Q6J("vdrDisabled",!i.lcZ(23,31,"UpdateAdministrator")),i.xp6(3),i.Oqu(i.lcZ(26,33,"settings.permissions")),i.xp6(2),i.Q6J("permissionDefinitions",t.permissionDefinitions)("activePermissions",null==(n=t.detailForm.get("permissions"))?null:n.value)("readonly",!i.lcZ(28,35,"UpdateAdministrator"))}},directives:[o.KkL,o.BND,o.Vqt,o.mz,o.WWO,J.O5,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,o.SGu,o.x3T,k.MgK,On,o.HAh],pipes:[J.Ov,_.X$,o.j$k],styles:[""],changeDetection:0}),Dn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class Nn extends o.t7C{constructor(e,t,n,i,o){super(i,o),this.modalService=e,this.notificationService=t,this.dataService=n,this.initialLimit=3,this.displayLimit={},super.setQueryFn((...e)=>this.dataService.administrator.getRoles(...e),e=>e.roles)}ngOnInit(){super.ngOnInit(),this.visibleRoles$=this.items$.pipe((0,r.U)(e=>e.filter(e=>e.code!==y.RO)))}toggleDisplayLimit(e){this.displayLimit[e.id]===e.permissions.length?this.displayLimit[e.id]=this.initialLimit:this.displayLimit[e.id]=e.permissions.length}isDefaultRole(e){return e.code===y.Wi||e.code===y.RO}deleteRole(e){this.modalService.dialog({title:(0,v.J)("settings.confirm-delete-role"),buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(t=>t?this.dataService.administrator.deleteRole(e):x.E)).subscribe(()=>{this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"Role"}),this.refresh()},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"Role"})})}}Nn.\u0275fac=function(e){return new(e||Nn)(i.Y36(o.Z7U),i.Y36(o.gqp),i.Y36(o.DoR),i.Y36(b.F0),i.Y36(b.gz))},Nn.\u0275cmp=i.Xpm({type:Nn,selectors:[["vdr-role-list"]],features:[i.qOj],decls:24,vars:25,consts:[["locationId","role-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultRole",""],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo",4,"ngIf"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[4,"ngFor","ngForOf"],[3,"channelCode"],["class","btn btn-sm btn-secondary btn-icon",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary","btn-icon",3,"click"],["collapse",""],["shape","minus"],[1,"default-role-label"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-right"),i._UZ(2,"vdr-action-bar-items",0),i.YNc(3,Ge,4,5,"a",1),i.qZA(),i.qZA(),i.TgZ(4,"vdr-data-table",2),i.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),i.ALo(5,"async"),i.ALo(6,"async"),i.ALo(7,"async"),i.ALo(8,"async"),i.TgZ(9,"vdr-dt-column"),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.TgZ(12,"vdr-dt-column"),i._uU(13),i.ALo(14,"translate"),i.qZA(),i.TgZ(15,"vdr-dt-column"),i._uU(16),i.ALo(17,"translate"),i.qZA(),i.TgZ(18,"vdr-dt-column"),i._uU(19),i.ALo(20,"translate"),i.qZA(),i._UZ(21,"vdr-dt-column"),i._UZ(22,"vdr-dt-column"),i.YNc(23,ot,24,16,"ng-template"),i.qZA()),2&e&&(i.xp6(3),i.Q6J("vdrIfPermissions","CreateAdministrator"),i.xp6(1),i.Q6J("items",i.lcZ(5,9,t.visibleRoles$))("itemsPerPage",i.lcZ(6,11,t.itemsPerPage$))("totalItems",i.lcZ(7,13,t.totalItems$))("currentPage",i.lcZ(8,15,t.currentPage$)),i.xp6(6),i.Oqu(i.lcZ(11,17,"common.description")),i.xp6(3),i.Oqu(i.lcZ(14,19,"common.code")),i.xp6(3),i.Oqu(i.lcZ(17,21,"settings.channel")),i.xp6(3),i.Oqu(i.lcZ(20,23,"settings.permissions")))},directives:[o.KkL,o.mz,o.WWO,o.HAh,o.Qj_,o.Egy,b.yS,k.qvL,J.O5,o.JOL,o.UaT,o.N9E,o.HH4,J.sg,o.Ywx,o.nIZ,o.v_8],pipes:[J.Ov,_.X$,o.j$k,o.E6B,J.OU],styles:[".default-role-label[_ngcontent-%COMP%]{color:var(--color-grey-400)}"],changeDetection:0}),Nn.ctorParameters=()=>[{type:o.Z7U},{type:o.gqp},{type:o.DoR},{type:b.F0},{type:b.gz}];class Qn{constructor(){this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new i.vpe}}Qn.\u0275fac=function(e){return new(e||Qn)},Qn.\u0275cmp=i.Xpm({type:Qn,selectors:[["vdr-shipping-eligibility-test-result"]],inputs:{okToRun:"okToRun",testDataUpdated:"testDataUpdated",testResult:"testResult",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:10,vars:9,consts:[[1,"test-result","card"],[1,"card-header"],["class","card-block",4,"ngFor","ngForOf"],["class","card-block",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"price-row"],[3,"value",4,"ngIf"],[3,"value"],["shape","ban",1,"is-solid","error"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.YNc(4,st,15,21,"div",2),i.YNc(5,at,4,3,"div",3),i.TgZ(6,"div",4),i.TgZ(7,"button",5),i.NdJ("click",function(){return t.runTest.emit()}),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.hij(" ",i.lcZ(3,5,"settings.test-result")," "),i.xp6(2),i.Q6J("ngForOf",t.testResult),i.xp6(1),i.Q6J("ngIf",0===(null==t.testResult?null:t.testResult.length)),i.xp6(2),i.Q6J("disabled",!t.okToRun),i.xp6(1),i.hij(" ",i.lcZ(9,7,"settings.test-shipping-methods")," "))},directives:[J.sg,J.O5,o.WGc,o._8q,k.qvL],pipes:[_.X$,o.kgx],styles:[".result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-left:24px}clr-icon.error[_ngcontent-%COMP%]{color:var(--color-error-500)}"],changeDetection:0}),Qn.propDecorators={testResult:[{type:i.IIB}],okToRun:[{type:i.IIB}],testDataUpdated:[{type:i.IIB}],currencyCode:[{type:i.IIB}],runTest:[{type:i.r_U}]};class Mn extends o.UT_{constructor(e,t,n,i,r,s,a){super(t,e,n,r),this.changeDetector=i,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.checkers=[],this.calculators=[],this.fulfillmentHandlers=[],this.testDataUpdated=!1,this.updatePermission=[o.y3$.UpdateSettings,o.y3$.UpdateShippingMethod],this.fetchTestResult$=new T.xQ,this.customFields=this.getCustomFieldConfig("ShippingMethod"),this.detailForm=this.formBuilder.group({code:["",Z.kI.required],name:["",Z.kI.required],description:"",fulfillmentHandler:["",Z.kI.required],checker:{},calculator:{},customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init(),(0,q.aj)([this.dataService.shippingMethod.getShippingMethodOperations().single$,this.entity$.pipe((0,s.q)(1))]).subscribe(([e,t])=>{this.checkers=e.shippingEligibilityCheckers,this.calculators=e.shippingCalculators,this.fulfillmentHandlers=e.fulfillmentHandlers,this.changeDetector.markForCheck(),this.selectedCheckerDefinition=e.shippingEligibilityCheckers.find(e=>e.code===(t.checker&&t.checker.code)),this.selectedCalculatorDefinition=e.shippingCalculators.find(e=>e.code===(t.calculator&&t.calculator.code))}),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(e=>e.activeChannel),this.testResult$=this.fetchTestResult$.pipe((0,u.w)(([e,t])=>{if(!this.selectedChecker||!this.selectedCalculator)return(0,C.of)(void 0);const n=this.detailForm.value,i={shippingAddress:Object.assign(Object.assign({},e),{streetLine1:"test"}),lines:t.map(e=>({productVariantId:e.id,quantity:e.quantity})),checker:(0,o.RnJ)(this.selectedChecker,n.checker),calculator:(0,o.RnJ)(this.selectedCalculator,n.calculator)};return this.dataService.shippingMethod.testShippingMethod(i).mapSingle(e=>e.testShippingMethod)})),(0,A.T)(this.detailForm.get(["checker"]).valueChanges,this.detailForm.get(["calculator"]).valueChanges).pipe((0,d.R)(this.destroy$)).subscribe(()=>this.testDataUpdated=!0)}ngOnDestroy(){this.destroy()}updateCode(e,t){if(!e){const e=this.detailForm.get(["code"]);e&&e.pristine&&e.setValue((0,F.U)(t,"-"))}}selectChecker(e){this.selectedCheckerDefinition=e,this.selectedChecker=(0,o.miO)(e);const t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}selectCalculator(e){this.selectedCalculatorDefinition=e,this.selectedCalculator=(0,o.miO)(e);const t=this.detailForm.get("calculator");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedCalculator)),this.detailForm.markAsDirty()}create(){const e=this.selectedChecker,t=this.selectedCalculator;!e||!t||(0,q.aj)([this.entity$,this.languageCode$]).pipe((0,s.q)(1),(0,a.zg)(([n,i])=>{const r=this.detailForm.value,s=Object.assign(Object.assign({},this.getUpdatedShippingMethod(n,this.detailForm,i)),{checker:(0,o.RnJ)(e,r.checker),calculator:(0,o.RnJ)(t,r.calculator)});return this.dataService.shippingMethod.createShippingMethod(s)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"ShippingMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createShippingMethod.id],{relativeTo:this.route})},e=>{this.notificationService.error((0,v.J)("common.notify-create-error"),{entity:"ShippingMethod"})})}save(){const e=this.selectedChecker,t=this.selectedCalculator;!e||!t||(0,q.aj)([this.entity$,this.languageCode$]).pipe((0,s.q)(1),(0,a.zg)(([n,i])=>{const r=this.detailForm.value,s=Object.assign(Object.assign({},this.getUpdatedShippingMethod(n,this.detailForm,i)),{checker:(0,o.RnJ)(e,r.checker),calculator:(0,o.RnJ)(t,r.calculator)});return this.dataService.shippingMethod.updateShippingMethod(s)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"ShippingMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{console.error(e),this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"ShippingMethod"})})}setTestOrderLines(e){this.testOrderLines=e,this.testDataUpdated=!0}setTestAddress(e){this.testAddress=e,this.testDataUpdated=!0}allTestDataPresent(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length&&this.selectedChecker&&this.selectedCalculator)}runTest(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}getUpdatedShippingMethod(e,t,n){const i=t.value,r=(0,o.iSy)({translatable:e,updatedFields:i,customFieldConfig:this.customFields,languageCode:n,defaultTranslation:{languageCode:n,name:e.name||"",description:e.description||""}});return Object.assign(Object.assign({},r),{fulfillmentHandler:i.fulfillmentHandler})}setFormValues(e,t){var n,i,r,s;const a=(0,o.ZIM)(e,t);this.detailForm.patchValue({name:null!==(n=null==a?void 0:a.name)&&void 0!==n?n:"",description:null!==(i=null==a?void 0:a.description)&&void 0!==i?i:"",code:e.code,fulfillmentHandler:e.fulfillmentHandlerCode,checker:e.checker||{},calculator:e.calculator||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(e=>Object.assign(Object.assign({},e),{value:(0,o.sux)(e.value)}))}),this.selectedCalculator||(this.selectedCalculator=e.calculator&&{code:null===(r=e.calculator)||void 0===r?void 0:r.code,args:null===(s=e.calculator)||void 0===s?void 0:s.args.map(e=>Object.assign(Object.assign({},e),{value:(0,o.sux)(e.value)}))}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e,a)}}Mn.\u0275fac=function(e){return new(e||Mn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},Mn.\u0275cmp=i.Xpm({type:Mn,selectors:[["vdr-shipping-method-detail"]],features:[i.qOj],decls:23,vars:22,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","shipping-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",3,"readonly","label"],["for","fulfillmentHandler",1,"mb2",3,"label"],["name","fulfillmentHandler","formControlName","fulfillmentHandler",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","customFields",4,"ngIf"],["locationId","shipping-method-detail",3,"entity$","detailForm"],[1,"clr-row","mt4"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[4,"ngIf"],["formControlName","calculator",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[3,"value"],["formGroupName","customFields"],["entityName","ShippingMethod",3,"customFields","customFieldsFormGroup","readonly"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","calculator",3,"operation","operationDefinition","readonly","remove"],[1,"clr-row"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){if(1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.TgZ(4,"vdr-language-selector",1),i.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),i.ALo(5,"async"),i.ALo(6,"async"),i.ALo(7,"async"),i.qZA(),i.qZA(),i.TgZ(8,"vdr-ab-right"),i._UZ(9,"vdr-action-bar-items",2),i.YNc(10,ct,3,4,"button",3),i.ALo(11,"async"),i.YNc(12,dt,1,1,"ng-template",null,4,i.W1O),i.qZA(),i.qZA(),i.YNc(14,vt,33,42,"form",5),i.ALo(15,"async"),i.TgZ(16,"div",6),i.TgZ(17,"clr-accordion"),i.TgZ(18,"clr-accordion-panel"),i.TgZ(19,"clr-accordion-title"),i._uU(20),i.ALo(21,"translate"),i.qZA(),i.YNc(22,yt,9,8,"clr-accordion-content",7),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.MAs(13);i.xp6(2),i.Q6J("entity",i.lcZ(3,8,t.entity$)),i.xp6(2),i.Q6J("disabled",i.lcZ(5,10,t.isNew$))("availableLanguageCodes",i.lcZ(6,12,t.availableLanguages$))("currentLanguageCode",i.lcZ(7,14,t.languageCode$)),i.xp6(6),i.Q6J("ngIf",i.lcZ(11,16,t.isNew$))("ngIfElse",e),i.xp6(4),i.Q6J("ngIf",i.lcZ(15,18,t.entity$)),i.xp6(6),i.Oqu(i.lcZ(21,20,"settings.test-shipping-method"))}},directives:function(){return[o.KkL,o.BND,o.Vqt,o.SdP,o.mz,o.WWO,J.O5,k.bZL,k.twP,k.GmI,k.dxz,k.UJ5,k.Nz$,k.DbV,o.HAh,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,o.YI,Z.EJ,o.x3T,J.sg,o.CWh,k.MgK,Z.YN,Z.Kr,Z.x0,o.yc0,o.qq8,o.JOL,o.UaT,k.qvL,o.N9E,o.HH4,k.r6y,En,Gn,Yn]},pipes:function(){return[J.Ov,_.X$,o.j$k]},styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px;margin-bottom:128px}.testing-tool[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),Mn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class $n extends o.t7C{constructor(e,t,n,i,o,r){super(o,r),this.modalService=e,this.notificationService=t,this.dataService=n,this.serverConfigService=i,this.testDataUpdated=!1,this.fetchTestResult$=new T.xQ,super.setQueryFn((...e)=>this.dataService.shippingMethod.getShippingMethods(...e).refetchOnChannelChange(),e=>e.shippingMethods)}ngOnInit(){super.ngOnInit(),this.testResult$=this.fetchTestResult$.pipe((0,u.w)(([e,t])=>{const n={shippingAddress:Object.assign(Object.assign({},e),{streetLine1:"test"}),lines:t.map(e=>({productVariantId:e.id,quantity:e.quantity}))};return this.dataService.shippingMethod.testEligibleShippingMethods(n).mapSingle(e=>e.testEligibleShippingMethods)})),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(e=>e.activeChannel),this.availableLanguages$=this.serverConfigService.getAvailableLanguages(),this.contentLanguage$=this.dataService.client.uiState().mapStream(({uiState:e})=>e.contentLanguage).pipe((0,p.b)(()=>this.refresh()))}deleteShippingMethod(e){this.modalService.dialog({title:(0,v.J)("catalog.confirm-delete-shipping-method"),buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(t=>t?this.dataService.shippingMethod.deleteShippingMethod(e):x.E)).subscribe(()=>{this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"ShippingMethod"}),this.refresh()},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"ShippingMethod"})})}setTestOrderLines(e){this.testOrderLines=e,this.testDataUpdated=!0}setTestAddress(e){this.testAddress=e,this.testDataUpdated=!0}allTestDataPresent(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length)}runTest(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}setLanguage(e){this.dataService.client.setContentLanguage(e).subscribe()}}$n.\u0275fac=function(e){return new(e||$n)(i.Y36(o.Z7U),i.Y36(o.gqp),i.Y36(o.DoR),i.Y36(o.iHG),i.Y36(b.F0),i.Y36(b.gz))},$n.\u0275cmp=i.Xpm({type:$n,selectors:[["vdr-shipping-method-list"]],features:[i.qOj],decls:29,vars:29,consts:[[3,"availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","shipping-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"clr-row"],[1,"clr-col"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i.TgZ(2,"vdr-language-selector",0),i.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),i.ALo(3,"async"),i.ALo(4,"async"),i.qZA(),i.qZA(),i.TgZ(5,"vdr-ab-right"),i._UZ(6,"vdr-action-bar-items",1),i.YNc(7,At,4,5,"a",2),i.qZA(),i.qZA(),i.TgZ(8,"vdr-data-table",3),i.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),i.ALo(9,"async"),i.ALo(10,"async"),i.ALo(11,"async"),i.ALo(12,"async"),i.TgZ(13,"vdr-dt-column"),i._uU(14),i.ALo(15,"translate"),i.qZA(),i.TgZ(16,"vdr-dt-column"),i._uU(17),i.ALo(18,"translate"),i.qZA(),i._UZ(19,"vdr-dt-column"),i._UZ(20,"vdr-dt-column"),i.YNc(21,Tt,19,18,"ng-template"),i.qZA(),i.TgZ(22,"div",4),i.TgZ(23,"clr-accordion"),i.TgZ(24,"clr-accordion-panel"),i.TgZ(25,"clr-accordion-title"),i._uU(26),i.ALo(27,"translate"),i.qZA(),i.YNc(28,qt,9,8,"clr-accordion-content",5),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.Q6J("availableLanguageCodes",i.lcZ(3,10,t.availableLanguages$))("currentLanguageCode",i.lcZ(4,12,t.contentLanguage$)),i.xp6(5),i.Q6J("vdrIfPermissions",i.DdM(28,Ct)),i.xp6(1),i.Q6J("items",i.lcZ(9,14,t.items$))("itemsPerPage",i.lcZ(10,16,t.itemsPerPage$))("totalItems",i.lcZ(11,18,t.totalItems$))("currentPage",i.lcZ(12,20,t.currentPage$)),i.xp6(6),i.Oqu(i.lcZ(15,22,"common.code")),i.xp6(3),i.Oqu(i.lcZ(18,24,"common.name")),i.xp6(9),i.Oqu(i.lcZ(27,26,"settings.test-shipping-methods")))},directives:function(){return[o.KkL,o.BND,o.SdP,o.mz,o.WWO,o.HAh,o.Qj_,o.Egy,k.bZL,k.twP,k.GmI,k.dxz,k.UJ5,k.Nz$,k.DbV,b.yS,k.qvL,o.v_8,o.JOL,o.UaT,o.N9E,o.HH4,k.r6y,En,Gn,Qn]},pipes:function(){return[J.Ov,_.X$,o.j$k]},styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px}"],changeDetection:0}),$n.ctorParameters=()=>[{type:o.Z7U},{type:o.gqp},{type:o.DoR},{type:o.iHG},{type:b.F0},{type:b.gz}];class Yn{constructor(){this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new i.vpe}}Yn.\u0275fac=function(e){return new(e||Yn)},Yn.\u0275cmp=i.Xpm({type:Yn,selectors:[["vdr-shipping-method-test-result"]],inputs:{okToRun:"okToRun",testDataUpdated:"testDataUpdated",testResult:"testResult",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:21,vars:24,consts:[[1,"test-result","card",3,"ngClass"],[1,"card-header"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"eligible-icon"],["shape","success-standard","class","is-solid success",4,"ngIf"],["shape","ban","class","is-solid error",4,"ngIf"],["shape","unknown-status",4,"ngIf"],[1,"price-row"],[3,"label",4,"ngIf"],[3,"value",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],["shape","success-standard",1,"is-solid","success"],["shape","ban",1,"is-solid","error"],["shape","unknown-status"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",2),i.TgZ(5,"div",3),i.TgZ(6,"vdr-labeled-data",4),i.ALo(7,"translate"),i.TgZ(8,"div",5),i.YNc(9,Ft,1,0,"clr-icon",6),i.YNc(10,Lt,1,0,"clr-icon",7),i.YNc(11,Jt,1,0,"clr-icon",8),i.qZA(),i._uU(12),i.qZA(),i.TgZ(13,"div",9),i.YNc(14,_t,4,7,"vdr-labeled-data",10),i.YNc(15,kt,4,7,"vdr-labeled-data",10),i.qZA(),i.YNc(16,Ut,1,1,"vdr-object-tree",11),i.qZA(),i.qZA(),i.TgZ(17,"div",12),i.TgZ(18,"button",13),i.NdJ("click",function(){return t.runTest.emit()}),i._uU(19),i.ALo(20,"translate"),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.Q6J("ngClass",i.kEZ(20,It,!0===(null==t.testResult?null:t.testResult.eligible),!1===(null==t.testResult?null:t.testResult.eligible),!t.testResult)),i.xp6(2),i.hij(" ",i.lcZ(3,14,"settings.test-result")," "),i.xp6(3),i.ekj("stale",t.testDataUpdated),i.xp6(1),i.Q6J("label",i.lcZ(7,16,"settings.eligible")),i.xp6(3),i.Q6J("ngIf",null==t.testResult?null:t.testResult.eligible),i.xp6(1),i.Q6J("ngIf",!1===(null==t.testResult?null:t.testResult.eligible)),i.xp6(1),i.Q6J("ngIf",!t.testResult),i.xp6(1),i.hij(" ",null==t.testResult?null:t.testResult.eligible," "),i.xp6(2),i.Q6J("ngIf",null!=(null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.price)),i.xp6(1),i.Q6J("ngIf",null!=(null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.priceWithTax)),i.xp6(1),i.Q6J("ngIf",null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.metadata),i.xp6(2),i.Q6J("disabled",!t.okToRun),i.xp6(1),i.hij(" ",i.lcZ(20,18,"settings.test-shipping-method")," "))},directives:[J.mk,o.WGc,J.O5,k.qvL,o._8q],pipes:[_.X$,o.kgx],styles:[".test-result.success[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-success-100)}.test-result.error[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-error-100)}.test-result.unknown[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.eligible-icon[_ngcontent-%COMP%]{display:inline-block}.eligible-icon[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:var(--color-success-500)}.eligible-icon[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--color-error-500)}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-left:24px}"],changeDetection:0}),Yn.propDecorators={testResult:[{type:i.IIB}],okToRun:[{type:i.IIB}],testDataUpdated:[{type:i.IIB}],currencyCode:[{type:i.IIB}],runTest:[{type:i.r_U}]};class Rn extends o.UT_{constructor(e,t,n,i,r,s,a){super(t,e,n,r),this.changeDetector=i,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.updatePermission=[o.y3$.UpdateSettings,o.y3$.UpdateTaxCategory],this.customFields=this.getCustomFieldConfig("TaxCategory"),this.detailForm=this.formBuilder.group({name:["",Z.kI.required],isDefault:!1,customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init(),this.taxCategory$=this.entity$}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const e=this.detailForm.value,t={name:e.name,isDefault:e.isDefault,customFields:e.customFields};this.dataService.settings.createTaxCategory(t).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"TaxCategory"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createTaxCategory.id],{relativeTo:this.route})},e=>{this.notificationService.error((0,v.J)("common.notify-create-error"),{entity:"TaxCategory"})})}save(){if(!this.detailForm.dirty)return;const e=this.detailForm.value;this.taxCategory$.pipe((0,s.q)(1),(0,a.zg)(t=>{const n={id:t.id,name:e.name,isDefault:e.isDefault,customFields:e.customFields};return this.dataService.settings.updateTaxCategory(n)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"TaxCategory"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"TaxCategory"})})}setFormValues(e,t){this.detailForm.patchValue({name:e.name,isDefault:e.isDefault}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}Rn.\u0275fac=function(e){return new(e||Rn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},Rn.\u0275cmp=i.Xpm({type:Rn,selectors:[["vdr-tax-detail"]],features:[i.qOj],decls:22,vars:23,consts:[[3,"entity"],["locationId","tax-category-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","isDefault",3,"label"],["type","checkbox","clrToggle","","id","isDefault","formControlName","isDefault",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","tax-category-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["formGroupName","customFields"],["entityName","TaxCategory",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){if(1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.qZA(),i.TgZ(4,"vdr-ab-right"),i._UZ(5,"vdr-action-bar-items",1),i.YNc(6,Pt,3,4,"button",2),i.ALo(7,"async"),i.YNc(8,Ot,1,1,"ng-template",null,3,i.W1O),i.qZA(),i.qZA(),i.TgZ(10,"form",4),i.TgZ(11,"vdr-form-field",5),i.ALo(12,"translate"),i._UZ(13,"input",6),i.ALo(14,"hasPermission"),i.qZA(),i.TgZ(15,"vdr-form-field",7),i.ALo(16,"translate"),i.TgZ(17,"clr-toggle-wrapper"),i._UZ(18,"input",8),i.ALo(19,"hasPermission"),i.qZA(),i.qZA(),i.YNc(20,wt,6,8,"section",9),i._UZ(21,"vdr-custom-detail-component-host",10),i.qZA()),2&e){const e=i.MAs(9);i.xp6(2),i.Q6J("entity",i.lcZ(3,11,t.entity$)),i.xp6(4),i.Q6J("ngIf",i.lcZ(7,13,t.isNew$))("ngIfElse",e),i.xp6(4),i.Q6J("formGroup",t.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(12,15,"common.name")),i.xp6(2),i.Q6J("readonly",!i.lcZ(14,17,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(16,19,"common.default-tax-category")),i.xp6(3),i.Q6J("vdrDisabled",!i.lcZ(19,21,t.updatePermission)),i.xp6(2),i.Q6J("ngIf",t.customFields.length),i.xp6(1),i.Q6J("entity$",t.entity$)("detailForm",t.detailForm)}},directives:[o.KkL,o.BND,o.Vqt,o.mz,o.WWO,J.O5,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,k.PEh,Z.Wl,k.KKC,o.x3T,o.CWh,o.HAh,Z.x0,k.MgK,o.yc0],pipes:[J.Ov,_.X$,o.j$k],styles:[""],changeDetection:0}),Rn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class jn{constructor(e,t,n){this.dataService=e,this.notificationService=t,this.modalService=n,this.queryResult=this.dataService.settings.getTaxCategories(),this.taxCategories$=this.queryResult.mapStream(e=>e.taxCategories)}deleteTaxCategory(e){return this.modalService.dialog({title:(0,v.J)("settings.confirm-delete-tax-category"),body:e.name,buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(t=>t?this.dataService.settings.deleteTaxCategory(e.id):x.E),(0,r.U)(e=>e.deleteTaxCategory)).subscribe(e=>{e.result===o.PcR.DELETED?(this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"TaxRate"}),this.queryResult.ref.refetch()):this.notificationService.error(e.message||(0,v.J)("common.notify-delete-error"),{entity:"TaxRate"})},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"TaxRate"})})}}jn.\u0275fac=function(e){return new(e||jn)(i.Y36(o.DoR),i.Y36(o.gqp),i.Y36(o.Z7U))},jn.\u0275cmp=i.Xpm({type:jn,selectors:[["vdr-tax-list"]],decls:13,vars:8,consts:[["locationId","tax-category-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-right"),i._UZ(2,"vdr-action-bar-items",0),i.YNc(3,Dt,4,5,"a",1),i.qZA(),i.qZA(),i.TgZ(4,"vdr-data-table",2),i.ALo(5,"async"),i.TgZ(6,"vdr-dt-column"),i._uU(7),i.ALo(8,"translate"),i.qZA(),i._UZ(9,"vdr-dt-column"),i._UZ(10,"vdr-dt-column"),i._UZ(11,"vdr-dt-column"),i.YNc(12,Mt,19,18,"ng-template"),i.qZA()),2&e&&(i.xp6(3),i.Q6J("vdrIfPermissions",i.DdM(7,$t)),i.xp6(1),i.Q6J("items",i.lcZ(5,3,t.taxCategories$)),i.xp6(3),i.Oqu(i.lcZ(8,5,"common.name")))},directives:[o.KkL,o.mz,o.WWO,o.HAh,o.Qj_,o.Egy,b.yS,k.qvL,J.O5,o.v_8,o.JOL,o.UaT,o.N9E,o.HH4,o.Ywx],pipes:[J.Ov,_.X$,o.j$k],styles:[""],changeDetection:0}),jn.ctorParameters=()=>[{type:o.DoR},{type:o.gqp},{type:o.Z7U}];class zn extends o.UT_{constructor(e,t,n,i,r,s,a){super(t,e,n,r),this.changeDetector=i,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.updatePermission=[o.y3$.UpdateSettings,o.y3$.UpdateTaxRate],this.customFields=this.getCustomFieldConfig("TaxRate"),this.detailForm=this.formBuilder.group({name:["",Z.kI.required],enabled:[!0],value:[0,Z.kI.required],taxCategoryId:[""],zoneId:[""],customerGroupId:[""],customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))})}ngOnInit(){this.init(),this.taxCategories$=this.dataService.settings.getTaxCategories().mapSingle(e=>e.taxCategories),this.zones$=this.dataService.settings.getZones().mapSingle(e=>e.zones)}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const e=this.detailForm.value,t={name:e.name,enabled:e.enabled,value:e.value,categoryId:e.taxCategoryId,zoneId:e.zoneId,customerGroupId:e.customerGroupId,customFields:e.customFields};this.dataService.settings.createTaxRate(t).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"TaxRate"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",e.createTaxRate.id],{relativeTo:this.route})},e=>{this.notificationService.error((0,v.J)("common.notify-create-error"),{entity:"TaxRate"})})}save(){if(!this.detailForm.dirty)return;const e=this.detailForm.value;this.entity$.pipe((0,s.q)(1),(0,a.zg)(t=>{const n={id:t.id,name:e.name,enabled:e.enabled,value:e.value,categoryId:e.taxCategoryId,zoneId:e.zoneId,customerGroupId:e.customerGroupId,customFields:e.customFields};return this.dataService.settings.updateTaxRate(n)})).subscribe(e=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"TaxRate"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"TaxRate"})})}setFormValues(e,t){this.detailForm.patchValue({name:e.name,enabled:e.enabled,value:e.value,taxCategoryId:e.category?e.category.id:"",zoneId:e.zone?e.zone.id:"",customerGroupId:e.customerGroup?e.customerGroup.id:""}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}}zn.\u0275fac=function(e){return new(e||zn)(i.Y36(b.F0),i.Y36(b.gz),i.Y36(o.iHG),i.Y36(i.sBO),i.Y36(o.DoR),i.Y36(Z.qu),i.Y36(o.gqp))},zn.\u0275cmp=i.Xpm({type:zn,selectors:[["vdr-tax-rate-detail"]],features:[i.qOj],decls:39,vars:47,consts:[[3,"entity"],["locationId","tax-rate-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["for","value",3,"label"],["suffix","%"],["id","value","type","number","step","0.1","formControlName","value",3,"readonly"],["for","taxCategoryId",3,"label"],["clrSelect","","name","taxCategoryId","formControlName","taxCategoryId",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","zoneId",3,"label"],["clrSelect","","name","zoneId","formControlName","zoneId",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],["locationId","tax-rate-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"],["formGroupName","customFields"],["entityName","TaxRate",3,"customFields","customFieldsFormGroup","readonly"]],template:function(e,t){if(1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i._UZ(2,"vdr-entity-info",0),i.ALo(3,"async"),i.qZA(),i.TgZ(4,"vdr-ab-right"),i._UZ(5,"vdr-action-bar-items",1),i.YNc(6,Yt,3,4,"button",2),i.ALo(7,"async"),i.YNc(8,jt,1,1,"ng-template",null,3,i.W1O),i.qZA(),i.qZA(),i.TgZ(10,"form",4),i.TgZ(11,"vdr-form-field",5),i.ALo(12,"translate"),i._UZ(13,"input",6),i.ALo(14,"hasPermission"),i.qZA(),i.TgZ(15,"vdr-form-field",7),i.ALo(16,"translate"),i.TgZ(17,"clr-toggle-wrapper"),i._UZ(18,"input",8),i.ALo(19,"hasPermission"),i.qZA(),i.qZA(),i.TgZ(20,"vdr-form-field",9),i.ALo(21,"translate"),i.TgZ(22,"vdr-affixed-input",10),i._UZ(23,"input",11),i.ALo(24,"hasPermission"),i.qZA(),i.qZA(),i.TgZ(25,"vdr-form-field",12),i.ALo(26,"translate"),i.TgZ(27,"select",13),i.ALo(28,"hasPermission"),i.YNc(29,zt,2,2,"option",14),i.ALo(30,"async"),i.qZA(),i.qZA(),i.TgZ(31,"vdr-form-field",15),i.ALo(32,"translate"),i.TgZ(33,"select",16),i.ALo(34,"hasPermission"),i.YNc(35,Ht,2,2,"option",14),i.ALo(36,"async"),i.qZA(),i.qZA(),i.YNc(37,Gt,6,8,"section",17),i._UZ(38,"vdr-custom-detail-component-host",18),i.qZA()),2&e){const e=i.MAs(9);i.xp6(2),i.Q6J("entity",i.lcZ(3,19,t.entity$)),i.xp6(4),i.Q6J("ngIf",i.lcZ(7,21,t.isNew$))("ngIfElse",e),i.xp6(4),i.Q6J("formGroup",t.detailForm),i.xp6(1),i.Q6J("label",i.lcZ(12,23,"common.name")),i.xp6(2),i.Q6J("readonly",!i.lcZ(14,25,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(16,27,"common.enabled")),i.xp6(3),i.Q6J("vdrDisabled",!i.lcZ(19,29,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(21,31,"settings.rate")),i.xp6(3),i.Q6J("readonly",!i.lcZ(24,33,t.updatePermission)),i.xp6(2),i.Q6J("label",i.lcZ(26,35,"settings.tax-category")),i.xp6(2),i.Q6J("vdrDisabled",!i.lcZ(28,37,t.updatePermission)),i.xp6(2),i.Q6J("ngForOf",i.lcZ(30,39,t.taxCategories$)),i.xp6(2),i.Q6J("label",i.lcZ(32,41,"settings.zone")),i.xp6(2),i.Q6J("vdrDisabled",!i.lcZ(34,43,t.updatePermission)),i.xp6(2),i.Q6J("ngForOf",i.lcZ(36,45,t.zones$)),i.xp6(2),i.Q6J("ngIf",t.customFields.length),i.xp6(1),i.Q6J("entity$",t.entity$)("detailForm",t.detailForm)}},directives:[o.KkL,o.BND,o.Vqt,o.mz,o.WWO,J.O5,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,k.PEh,Z.Wl,k.KKC,o.x3T,o.KH1,Z.wV,Z.EJ,k.otW,J.sg,o.CWh,o.HAh,Z.YN,Z.Kr,Z.x0,k.MgK,o.yc0],pipes:[J.Ov,_.X$,o.j$k],styles:[""],changeDetection:0}),zn.ctorParameters=()=>[{type:b.F0},{type:b.gz},{type:o.iHG},{type:i.sBO},{type:o.DoR},{type:Z.qu},{type:o.gqp}];class Hn extends o.t7C{constructor(e,t,n,i,o){super(i,o),this.modalService=e,this.notificationService=t,this.dataService=n,super.setQueryFn((...e)=>this.dataService.settings.getTaxRates(...e),e=>e.taxRates)}deleteTaxRate(e){return this.modalService.dialog({title:(0,v.J)("settings.confirm-delete-tax-rate"),body:e.name,buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(t=>t?this.dataService.settings.deleteTaxRate(e.id):x.E),(0,r.U)(e=>e.deleteTaxRate)).subscribe(e=>{e.result===o.PcR.DELETED?(this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"TaxRate"}),this.refresh()):this.notificationService.error(e.message||(0,v.J)("common.notify-delete-error"),{entity:"TaxRate"})},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"TaxRate"})})}}Hn.\u0275fac=function(e){return new(e||Hn)(i.Y36(o.Z7U),i.Y36(o.gqp),i.Y36(o.DoR),i.Y36(b.F0),i.Y36(b.gz))},Hn.\u0275cmp=i.Xpm({type:Hn,selectors:[["vdr-tax-rate-list"]],features:[i.qOj],decls:24,vars:26,consts:[["locationId","tax-rate-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-right"),i._UZ(2,"vdr-action-bar-items",0),i.YNc(3,Et,4,5,"a",1),i.qZA(),i.qZA(),i.TgZ(4,"vdr-data-table",2),i.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),i.ALo(5,"async"),i.ALo(6,"async"),i.ALo(7,"async"),i.ALo(8,"async"),i.TgZ(9,"vdr-dt-column"),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.TgZ(12,"vdr-dt-column"),i._uU(13),i.ALo(14,"translate"),i.qZA(),i.TgZ(15,"vdr-dt-column"),i._uU(16),i.ALo(17,"translate"),i.qZA(),i.TgZ(18,"vdr-dt-column"),i._uU(19),i.ALo(20,"translate"),i.qZA(),i._UZ(21,"vdr-dt-column"),i._UZ(22,"vdr-dt-column"),i.YNc(23,Vt,23,20,"ng-template"),i.qZA()),2&e&&(i.xp6(3),i.Q6J("vdrIfPermissions",i.DdM(25,Wt)),i.xp6(1),i.Q6J("items",i.lcZ(5,9,t.items$))("itemsPerPage",i.lcZ(6,11,t.itemsPerPage$))("totalItems",i.lcZ(7,13,t.totalItems$))("currentPage",i.lcZ(8,15,t.currentPage$)),i.xp6(6),i.Oqu(i.lcZ(11,17,"common.name")),i.xp6(3),i.Oqu(i.lcZ(14,19,"settings.tax-category")),i.xp6(3),i.Oqu(i.lcZ(17,21,"settings.zone")),i.xp6(3),i.Oqu(i.lcZ(20,23,"settings.tax-rate")))},directives:[o.KkL,o.mz,o.WWO,o.HAh,o.Qj_,o.Egy,b.yS,k.qvL,o.v_8,o.JOL,o.UaT,o.N9E,o.HH4],pipes:[J.Ov,_.X$,o.j$k],styles:[""],changeDetection:0}),Hn.ctorParameters=()=>[{type:o.Z7U},{type:o.gqp},{type:o.DoR},{type:b.F0},{type:b.gz}];class Gn{constructor(e,t,n){this.formBuilder=e,this.dataService=t,this.localStorageService=n,this.addressChange=new i.vpe}ngOnInit(){this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(e=>e.countries.items);const e=this.localStorageService.getForCurrentLocation("shippingTestAddress")||{city:"",countryCode:"",postalCode:"",province:""};this.addressChange.emit(e),this.form=this.formBuilder.group(e),this.subscription=this.form.valueChanges.subscribe(e=>{this.localStorageService.setForCurrentLocation("shippingTestAddress",e),this.addressChange.emit(e)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}Gn.\u0275fac=function(e){return new(e||Gn)(i.Y36(Z.qu),i.Y36(o.DoR),i.Y36(o.n2A))},Gn.\u0275cmp=i.Xpm({type:Gn,selectors:[["vdr-test-address-form"]],outputs:{addressChange:"addressChange"},decls:28,vars:19,consts:[[1,"card"],[1,"card-header"],[1,"card-block"],[3,"formGroup"],["formControlName","city","type","text","clrInput",""],["formControlName","province","type","text","clrInput",""],["formControlName","postalCode","type","text","clrInput",""],["name","countryCode","formControlName","countryCode","clrInput","","clrSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",2),i.TgZ(5,"form",3),i.TgZ(6,"clr-input-container"),i.TgZ(7,"label"),i._uU(8),i.ALo(9,"translate"),i.qZA(),i._UZ(10,"input",4),i.qZA(),i.TgZ(11,"clr-input-container"),i.TgZ(12,"label"),i._uU(13),i.ALo(14,"translate"),i.qZA(),i._UZ(15,"input",5),i.qZA(),i.TgZ(16,"clr-input-container"),i.TgZ(17,"label"),i._uU(18),i.ALo(19,"translate"),i.qZA(),i._UZ(20,"input",6),i.qZA(),i.TgZ(21,"clr-input-container"),i.TgZ(22,"label"),i._uU(23),i.ALo(24,"translate"),i.qZA(),i.TgZ(25,"select",7),i.YNc(26,Kt,2,2,"option",8),i.ALo(27,"async"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.hij(" ",i.lcZ(3,7,"settings.test-address")," "),i.xp6(3),i.Q6J("formGroup",t.form),i.xp6(3),i.Oqu(i.lcZ(9,9,"customer.city")),i.xp6(5),i.Oqu(i.lcZ(14,11,"customer.province")),i.xp6(5),i.Oqu(i.lcZ(19,13,"customer.postal-code")),i.xp6(5),i.Oqu(i.lcZ(24,15,"customer.country")),i.xp6(3),i.Q6J("ngForOf",i.lcZ(27,17,t.availableCountries$)))},directives:[Z._Y,Z.JL,Z.sg,k.G55,k.MgK,o.y_K,Z.Fj,Z.JJ,Z.u,k.xRP,Z.EJ,k.otW,J.sg,Z.YN,Z.Kr],pipes:[_.X$,J.Ov],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),Gn.ctorParameters=()=>[{type:Z.qu},{type:o.DoR},{type:o.n2A}],Gn.propDecorators={addressChange:[{type:i.r_U}]};class En{constructor(e,t){this.dataService=e,this.localStorageService=t,this.orderLinesChange=new i.vpe,this.lines=[]}get subTotal(){return this.lines.reduce((e,t)=>e+t.unitPriceWithTax*t.quantity,0)}ngOnInit(){this.lines=this.loadFromLocalStorage(),this.lines&&this.orderLinesChange.emit(this.lines),this.dataService.settings.getActiveChannel("cache-first").single$.subscribe(e=>{this.currencyCode=e.activeChannel.currencyCode})}selectResult(e){e&&this.addToLines(e)}addToLines(e){var t,n;this.lines.find(t=>t.id===e.productVariantId)||(this.lines.push({id:e.productVariantId,name:e.productVariantName,preview:null!==(n=null===(t=e.productAsset)||void 0===t?void 0:t.preview)&&void 0!==n?n:"",quantity:1,sku:e.sku,unitPriceWithTax:"SinglePrice"===e.priceWithTax.__typename&&e.priceWithTax.value||0}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines))}updateQuantity(){this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}removeLine(e){this.lines=this.lines.filter(t=>t.id!==e.id),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}persistToLocalStorage(){this.localStorageService.setForCurrentLocation("shippingTestOrder",this.lines)}loadFromLocalStorage(){return this.localStorageService.getForCurrentLocation("shippingTestOrder")||[]}}En.\u0275fac=function(e){return new(e||En)(i.Y36(o.DoR),i.Y36(o.n2A))},En.\u0275cmp=i.Xpm({type:En,selectors:[["vdr-test-order-builder"]],outputs:{orderLinesChange:"orderLinesChange"},decls:9,vars:5,consts:[[1,"card"],[1,"card-header"],["class","order-table table",4,"ngIf","ngIfElse"],["emptyPlaceholder",""],[1,"card-block"],[3,"productSelected"],[1,"order-table","table"],["class","order-line",4,"ngFor","ngForOf"],[1,"sub-total"],[1,"left"],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","unit-price"],[1,"align-middle","quantity"],["type","number","max","9999","min","1",3,"ngModel","ngModelChange","change"],[1,"icon-button",3,"click"],["shape","trash"],[1,"align-middle","total"],[1,"card-block","empty-placeholder"],[1,"empty-text"],["shape","arrow","dir","down","size","96"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.YNc(4,en,31,23,"table",2),i.YNc(5,tn,5,3,"ng-template",null,3,i.W1O),i.TgZ(7,"div",4),i.TgZ(8,"vdr-product-selector",5),i.NdJ("productSelected",function(e){return t.selectResult(e)}),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.MAs(6);i.xp6(2),i.hij(" ",i.lcZ(3,3,"settings.test-order")," "),i.xp6(2),i.Q6J("ngIf",t.lines.length)("ngIfElse",e)}},directives:[J.O5,o.cyK,J.sg,o.y_K,Z.Fd,Z.qQ,Z.wV,Z.Fj,Z.JJ,Z.On,k.qvL,I.Lv],pipes:[_.X$,o.kgx],styles:[".empty-placeholder[_ngcontent-%COMP%]{color:var(--color-grey-400);text-align:center}.empty-text[_ngcontent-%COMP%]{font-size:22px}"],changeDetection:0}),En.ctorParameters=()=>[{type:o.DoR},{type:o.n2A}],En.propDecorators={orderLinesChange:[{type:i.r_U}]};class Bn{constructor(e,t){this.serverConfigService=e,this.formBuilder=t,this.customFields=this.serverConfigService.getCustomFieldsFor("Zone")}ngOnInit(){var e;if(this.form=this.formBuilder.group({name:[this.zone.name,Z.kI.required],customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))}),this.customFields.length){const t=this.form.get("customFields");for(const n of this.customFields){const i=n.name,o=null===(e=this.zone.customFields)||void 0===e?void 0:e[i],r=t.get(i);r&&r.patchValue(o)}}}cancel(){this.resolveWith()}save(){this.resolveWith(this.form.value)}}Bn.\u0275fac=function(e){return new(e||Bn)(i.Y36(o.iHG),i.Y36(Z.qu))},Bn.\u0275cmp=i.Xpm({type:Bn,selectors:[["vdr-zone-detail-dialog"]],decls:9,vars:14,consts:[["vdrDialogTitle",""],[3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["entityName","Zone",3,"customFields","customFieldsFormGroup","readonly"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(i.YNc(0,rn,2,2,"ng-template",0),i.TgZ(1,"form",1),i.TgZ(2,"vdr-form-field",2),i.ALo(3,"translate"),i._UZ(4,"input",3),i.ALo(5,"hasPermission"),i.qZA(),i._UZ(6,"vdr-tabbed-custom-fields",4),i.ALo(7,"hasPermission"),i.qZA(),i.YNc(8,cn,6,6,"ng-template",5)),2&e&&(i.xp6(1),i.Q6J("formGroup",t.form),i.xp6(1),i.Q6J("label",i.lcZ(3,6,"common.name")),i.xp6(2),i.Q6J("readonly",!i.lcZ(5,8,i.DdM(12,ln))),i.xp6(2),i.Q6J("customFields",t.customFields)("customFieldsFormGroup",t.form.get("customFields"))("readonly",!i.lcZ(7,10,i.DdM(13,ln))))},directives:[o.q6K,Z._Y,Z.JL,Z.sg,o.hgI,o.y_K,Z.Fj,Z.JJ,Z.u,o.yc0,o.nPI,J.O5],pipes:[_.X$,o.j$k],styles:[""],changeDetection:0}),Bn.ctorParameters=()=>[{type:o.iHG},{type:Z.qu}];class Vn{constructor(e,t,n,i,o,r){this.dataService=e,this.notificationService=t,this.modalService=n,this.route=i,this.router=o,this.serverConfigService=r,this.selectedMemberIds=[]}ngOnInit(){const e=this.dataService.settings.getZones().ref;this.zones$=e.valueChanges.pipe((0,r.U)(e=>e.data.zones));const t=this.route.paramMap.pipe((0,r.U)(e=>e.get("contents")),(0,h.x)(),(0,p.b)(()=>this.selectedMemberIds=[]));this.activeZone$=(0,q.aj)(this.zones$,t).pipe((0,r.U)(([e,t])=>{if(t)return e.find(e=>e.id===t)})),this.availableLanguages$=this.serverConfigService.getAvailableLanguages(),this.contentLanguage$=this.dataService.client.uiState().mapStream(({uiState:e})=>e.contentLanguage).pipe((0,p.b)(()=>e.refetch()))}setLanguage(e){this.dataService.client.setContentLanguage(e).subscribe()}create(){this.modalService.fromComponent(Bn,{locals:{zone:{name:""}}}).pipe((0,u.w)(e=>e?this.dataService.settings.createZone(Object.assign(Object.assign({},e),{memberIds:[]})):x.E),(0,u.w)(()=>this.dataService.settings.getZones().single$)).subscribe(()=>{this.notificationService.success((0,v.J)("common.notify-create-success"),{entity:"Zone"})},e=>{this.notificationService.error((0,v.J)("common.notify-create-error"),{entity:"Zone"})})}delete(e){this.modalService.dialog({title:(0,v.J)("catalog.confirm-delete-zone"),buttons:[{type:"secondary",label:(0,v.J)("common.cancel")},{type:"danger",label:(0,v.J)("common.delete"),returnValue:!0}]}).pipe((0,u.w)(t=>t?this.dataService.settings.deleteZone(e):x.E),(0,u.w)(e=>e.deleteZone.result===o.PcR.DELETED?this.dataService.settings.getZones().mapSingle(()=>({errorMessage:!1})):(0,C.of)({errorMessage:e.deleteZone.message}))).subscribe(e=>{"string"==typeof e.errorMessage?this.notificationService.error(e.errorMessage):this.notificationService.success((0,v.J)("common.notify-delete-success"),{entity:"Zone"})},e=>{this.notificationService.error((0,v.J)("common.notify-delete-error"),{entity:"Zone"})})}update(e){this.modalService.fromComponent(Bn,{locals:{zone:e}}).pipe((0,u.w)(t=>t?this.dataService.settings.updateZone(Object.assign({id:e.id},t)):x.E)).subscribe(()=>{this.notificationService.success((0,v.J)("common.notify-update-success"),{entity:"Zone"})},e=>{this.notificationService.error((0,v.J)("common.notify-update-error"),{entity:"Zone"})})}closeMembers(){const e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}addToZone(e){this.modalService.fromComponent(Cn,{locals:{zoneName:e.name,currentMembers:e.members},size:"md"}).pipe((0,u.w)(t=>t?this.dataService.settings.addMembersToZone(e.id,t).pipe((0,f.h)(t)):x.E)).subscribe({next:t=>{this.notificationService.success((0,v.J)("settings.add-countries-to-zone-success"),{countryCount:t.length,zoneName:e.name})},error:e=>{this.notificationService.error(e)}})}removeFromZone(e,t){this.dataService.settings.removeMembersFromZone(e.id,t).subscribe({complete:()=>{this.notificationService.success((0,v.J)("settings.remove-countries-from-zone-success"),{countryCount:t.length,zoneName:e.name})}})}}Vn.\u0275fac=function(e){return new(e||Vn)(i.Y36(o.DoR),i.Y36(o.gqp),i.Y36(o.Z7U),i.Y36(b.gz),i.Y36(b.F0),i.Y36(o.iHG))},Vn.\u0275cmp=i.Xpm({type:Vn,selectors:[["vdr-zone-list"]],decls:18,vars:18,consts:[[3,"availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","zone-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"zone-wrapper"],[1,"zone-list"],[1,"table","mt0"],[3,"active",4,"ngFor","ngForOf"],[1,"zone-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],[1,"text-right","align-middle"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"members","selectedMemberIds","selectionChange"],[4,"vdrZoneMemberListHeader"],[4,"vdrZoneMemberControls"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],["type","button","vdrDropdownItem","",3,"routerLink"]],template:function(e,t){1&e&&(i.TgZ(0,"vdr-action-bar"),i.TgZ(1,"vdr-ab-left"),i.TgZ(2,"vdr-language-selector",0),i.NdJ("languageCodeChange",function(e){return t.setLanguage(e)}),i.ALo(3,"async"),i.ALo(4,"async"),i.qZA(),i.qZA(),i.TgZ(5,"vdr-ab-right"),i._UZ(6,"vdr-action-bar-items",1),i.YNc(7,dn,4,3,"button",2),i.qZA(),i.qZA(),i.TgZ(8,"div",3),i.TgZ(9,"div",4),i.TgZ(10,"table",5),i.TgZ(11,"tbody"),i.YNc(12,mn,29,28,"tr",6),i.ALo(13,"async"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(14,"div",7),i.ALo(15,"async"),i.YNc(16,Zn,4,2,"ng-container",8),i.ALo(17,"async"),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.Q6J("availableLanguageCodes",i.lcZ(3,7,t.availableLanguages$))("currentLanguageCode",i.lcZ(4,9,t.contentLanguage$)),i.xp6(5),i.Q6J("vdrIfPermissions",i.DdM(17,bn)),i.xp6(5),i.Q6J("ngForOf",i.lcZ(13,11,t.zones$)),i.xp6(2),i.ekj("expanded",i.lcZ(15,13,t.activeZone$)),i.xp6(2),i.Q6J("ngIf",i.lcZ(17,15,t.activeZone$)))},directives:function(){return[o.KkL,o.BND,o.SdP,o.mz,o.WWO,o.HAh,J.sg,J.O5,k.qvL,o.Vqt,o.Ywx,b.yS,o.JOL,o.UaT,o.N9E,o.HH4,Xn,Kn,Wn]},pipes:function(){return[J.Ov,_.X$,o.j$k]},styles:[".zone-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.zone-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.zone-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-left:12px}.zone-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.zone-members[_ngcontent-%COMP%]     table.table{margin-top:0}.zone-members[_ngcontent-%COMP%]     table.table th{top:0}.zone-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),Vn.ctorParameters=()=>[{type:o.DoR},{type:o.gqp},{type:o.Z7U},{type:b.gz},{type:b.F0},{type:o.iHG}];class Wn{constructor(e){this.templateRef=e}}Wn.\u0275fac=function(e){return new(e||Wn)(i.Y36(i.Rgc))},Wn.\u0275dir=i.lG2({type:Wn,selectors:[["","vdrZoneMemberControls",""]]}),Wn.ctorParameters=()=>[{type:i.Rgc}];class Kn{constructor(e){this.templateRef=e}}Kn.\u0275fac=function(e){return new(e||Kn)(i.Y36(i.Rgc))},Kn.\u0275dir=i.lG2({type:Kn,selectors:[["","vdrZoneMemberListHeader",""]]}),Kn.ctorParameters=()=>[{type:i.Rgc}];class Xn{constructor(){this.members=[],this.selectedMemberIds=[],this.selectionChange=new i.vpe,this.filterTerm="",this.isMemberSelected=e=>-1<this.selectedMemberIds.indexOf(e.id)}filteredMembers(){if(""!==this.filterTerm){const e=this.filterTerm.toLocaleLowerCase();return this.members.filter(t=>t.name.toLocaleLowerCase().includes(e)||t.code.toLocaleLowerCase().includes(e))}return this.members}areAllSelected(){return!!this.members&&this.selectedMemberIds.length===this.members.length}toggleSelectAll(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map(e=>e.id))}toggleSelectMember({item:e}){this.selectedMemberIds.includes(e.id)?this.selectionChange.emit(this.selectedMemberIds.filter(t=>t!==e.id)):this.selectionChange.emit([...this.selectedMemberIds,e.id])}}Xn.\u0275fac=function(e){return new(e||Xn)},Xn.\u0275cmp=i.Xpm({type:Xn,selectors:[["vdr-zone-member-list"]],contentQueries:function(e,t,n){if(1&e&&(i.Suo(n,Kn,5),i.Suo(n,Wn,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.headerTemplate=e.first),i.iGM(e=i.CRH())&&(t.controlsTemplate=e.first)}},inputs:{members:"members",selectedMemberIds:"selectedMemberIds"},outputs:{selectionChange:"selectionChange"},decls:17,vars:20,consts:[[1,"members-header"],[4,"ngIf"],["type","text",3,"placeholder","ngModel","ngModelChange"],[3,"items","allSelected","isRowSelectedFn","rowSelectChange","allSelectChange"],[4,"ngTemplateOutlet"],[1,"left","align-middle"],[1,"right","align-middle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,yn,2,1,"ng-container",1),i.TgZ(2,"input",2),i.NdJ("ngModelChange",function(e){return t.filterTerm=e}),i.ALo(3,"translate"),i.qZA(),i.qZA(),i.TgZ(4,"vdr-data-table",3),i.NdJ("rowSelectChange",function(e){return t.toggleSelectMember(e)})("allSelectChange",function(){return t.toggleSelectAll()}),i.ALo(5,"hasPermission"),i.TgZ(6,"vdr-dt-column"),i._uU(7),i.ALo(8,"translate"),i.qZA(),i.TgZ(9,"vdr-dt-column"),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.TgZ(12,"vdr-dt-column"),i._uU(13),i.ALo(14,"translate"),i.qZA(),i._UZ(15,"vdr-dt-column"),i.YNc(16,qn,8,6,"ng-template"),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngIf",t.headerTemplate),i.xp6(1),i.Q6J("placeholder",i.lcZ(3,9,"settings.filter-by-member-name"))("ngModel",t.filterTerm),i.xp6(2),i.Q6J("items",t.filteredMembers())("allSelected",t.areAllSelected())("isRowSelectedFn",i.lcZ(5,11,i.DdM(19,ln))&&t.isMemberSelected),i.xp6(3),i.Oqu(i.lcZ(8,13,"common.code")),i.xp6(3),i.Oqu(i.lcZ(11,15,"common.name")),i.xp6(3),i.Oqu(i.lcZ(14,17,"common.enabled")))},directives:[J.O5,o.y_K,Z.Fj,Z.JJ,Z.On,o.Qj_,o.Egy,J.tP,k.qvL],pipes:[_.X$,o.j$k],styles:[".members-header[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:5;border-bottom:1px solid var(--color-component-border-200)}.members-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.members-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),Xn.propDecorators={members:[{type:i.IIB}],selectedMemberIds:[{type:i.IIB}],selectionChange:[{type:i.r_U}],headerTemplate:[{type:i.aQ5,args:[Kn]}],controlsTemplate:[{type:i.aQ5,args:[Wn]}]};class ei extends o.p_9{constructor(e,t){super(e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},e=>t.administrator.getAdministrator(e).mapStream(e=>e.administrator))}}ei.\u0275fac=function(e){return new(e||ei)(i.LFG(b.F0),i.LFG(o.DoR))},ei.\u0275prov=i.Yz7({factory:function(){return new ei(i.LFG(b.F0),i.LFG(o.DoR))},token:ei,providedIn:"root"}),ei.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class ti extends o.p_9{constructor(e,t){super(e,{__typename:"Channel",id:"",createdAt:"",updatedAt:"",code:"",token:"",pricesIncludeTax:!1,currencyCode:o.NEm.USD,defaultLanguageCode:(0,o.kAh)(),defaultShippingZone:{},defaultTaxZone:{}},e=>t.settings.getChannel(e).mapStream(e=>e.channel))}}ti.\u0275fac=function(e){return new(e||ti)(i.LFG(b.F0),i.LFG(o.DoR))},ti.\u0275prov=i.Yz7({factory:function(){return new ti(i.LFG(b.F0),i.LFG(o.DoR))},token:ti,providedIn:"root"}),ti.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class ni extends o.p_9{constructor(e,t){super(e,{__typename:"Country",id:"",createdAt:"",updatedAt:"",code:"",name:"",enabled:!1,translations:[]},e=>t.settings.getCountry(e).mapStream(e=>e.country))}}ni.\u0275fac=function(e){return new(e||ni)(i.LFG(b.F0),i.LFG(o.DoR))},ni.\u0275prov=i.Yz7({factory:function(){return new ni(i.LFG(b.F0),i.LFG(o.DoR))},token:ni,providedIn:"root"}),ni.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class ii extends o.p_9{constructor(e,t){super(e,{},()=>t.settings.getGlobalSettings().mapStream(e=>e.globalSettings))}}ii.\u0275fac=function(e){return new(e||ii)(i.LFG(b.F0),i.LFG(o.DoR))},ii.\u0275prov=i.Yz7({factory:function(){return new ii(i.LFG(b.F0),i.LFG(o.DoR))},token:ii,providedIn:"root"}),ii.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class oi extends o.p_9{constructor(e,t){super(e,{__typename:"PaymentMethod",id:"",createdAt:"",updatedAt:"",name:"",code:"",description:"",enabled:!0,checker:void 0,handler:void 0},e=>t.settings.getPaymentMethod(e).mapStream(e=>e.paymentMethod))}}oi.\u0275fac=function(e){return new(e||oi)(i.LFG(b.F0),i.LFG(o.DoR))},oi.\u0275prov=i.Yz7({factory:function(){return new oi(i.LFG(b.F0),i.LFG(o.DoR))},token:oi,providedIn:"root"}),oi.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class ri extends o.p_9{constructor(e,t){super(e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},e=>t.administrator.getActiveAdministrator().mapStream(e=>e.activeAdministrator))}}ri.\u0275fac=function(e){return new(e||ri)(i.LFG(b.F0),i.LFG(o.DoR))},ri.\u0275prov=i.Yz7({factory:function(){return new ri(i.LFG(b.F0),i.LFG(o.DoR))},token:ri,providedIn:"root"}),ri.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class si extends o.p_9{constructor(e,t){super(e,{__typename:"Role",id:"",createdAt:"",updatedAt:"",code:"",description:"",permissions:[],channels:[]},e=>t.administrator.getRole(e).mapStream(e=>e.role))}}si.\u0275fac=function(e){return new(e||si)(i.LFG(b.F0),i.LFG(o.DoR))},si.\u0275prov=i.Yz7({factory:function(){return new si(i.LFG(b.F0),i.LFG(o.DoR))},token:si,providedIn:"root"}),si.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class ai extends o.p_9{constructor(e,t){super(e,{__typename:"ShippingMethod",createdAt:"",updatedAt:"",id:"",code:"",name:"",description:"",fulfillmentHandlerCode:void 0,checker:void 0,calculator:void 0,translations:[]},e=>t.shippingMethod.getShippingMethod(e).mapStream(e=>e.shippingMethod))}}ai.\u0275fac=function(e){return new(e||ai)(i.LFG(b.F0),i.LFG(o.DoR))},ai.\u0275prov=i.Yz7({factory:function(){return new ai(i.LFG(b.F0),i.LFG(o.DoR))},token:ai,providedIn:"root"}),ai.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class ci extends o.p_9{constructor(e,t){super(e,{__typename:"TaxCategory",id:"",createdAt:"",updatedAt:"",name:"",isDefault:!1},e=>t.settings.getTaxCategory(e).mapStream(e=>e.taxCategory))}}ci.\u0275fac=function(e){return new(e||ci)(i.LFG(b.F0),i.LFG(o.DoR))},ci.\u0275prov=i.Yz7({factory:function(){return new ci(i.LFG(b.F0),i.LFG(o.DoR))},token:ci,providedIn:"root"}),ci.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];class li extends o.p_9{constructor(e,t){super(e,{__typename:"TaxRate",id:"",createdAt:"",updatedAt:"",name:"",value:0,enabled:!0,category:{},zone:{},customerGroup:null},e=>t.settings.getTaxRate(e).mapStream(e=>e.taxRate))}}li.\u0275fac=function(e){return new(e||li)(i.LFG(b.F0),i.LFG(o.DoR))},li.\u0275prov=i.Yz7({factory:function(){return new li(i.LFG(b.F0),i.LFG(o.DoR))},token:li,providedIn:"root"}),li.ctorParameters=()=>[{type:b.F0},{type:o.DoR}];const di={breadcrumb:(0,v.J)("breadcrumb.profile")},ui={breadcrumb:(0,v.J)("breadcrumb.administrators")},mi={breadcrumb:ki},pi={breadcrumb:(0,v.J)("breadcrumb.channels")},gi={breadcrumb:Ui},hi={breadcrumb:(0,v.J)("breadcrumb.roles")},fi={breadcrumb:Ii},Zi={breadcrumb:(0,v.J)("breadcrumb.tax-categories")},bi={breadcrumb:Pi},vi={breadcrumb:(0,v.J)("breadcrumb.tax-rates")},yi={breadcrumb:Si},Ai={breadcrumb:(0,v.J)("breadcrumb.countries")},xi={breadcrumb:Oi},Ti={breadcrumb:(0,v.J)("breadcrumb.zones")},qi={breadcrumb:(0,v.J)("breadcrumb.shipping-methods")},Ci={breadcrumb:wi},Fi={breadcrumb:(0,v.J)("breadcrumb.payment-methods")},Li={breadcrumb:Di},Ji={breadcrumb:(0,v.J)("breadcrumb.global-settings")},_i=[{path:"profile",component:wn,resolve:(0,o.Po4)(ri),canDeactivate:[o.TSp],data:di},{path:"administrators",component:Ln,data:ui},{path:"administrators/:id",component:Fn,resolve:(0,o.Po4)(ei),canDeactivate:[o.TSp],data:mi},{path:"channels",component:_n,data:pi},{path:"channels/:id",component:Jn,resolve:(0,o.Po4)(ti),canDeactivate:[o.TSp],data:gi},{path:"roles",component:Nn,data:hi},{path:"roles/:id",component:Dn,resolve:(0,o.Po4)(si),canDeactivate:[o.TSp],data:fi},{path:"tax-categories",component:jn,data:Zi},{path:"tax-categories/:id",component:Rn,resolve:(0,o.Po4)(ci),canDeactivate:[o.TSp],data:bi},{path:"tax-rates",component:Hn,data:vi},{path:"tax-rates/:id",component:zn,resolve:(0,o.Po4)(li),canDeactivate:[o.TSp],data:yi},{path:"countries",component:Un,data:Ai},{path:"countries/:id",component:kn,resolve:(0,o.Po4)(ni),canDeactivate:[o.TSp],data:xi},{path:"zones",component:Vn,data:Ti},{path:"shipping-methods",component:$n,data:qi},{path:"shipping-methods/:id",component:Mn,resolve:(0,o.Po4)(ai),canDeactivate:[o.TSp],data:Ci},{path:"payment-methods",component:Sn,data:Fi},{path:"payment-methods/:id",component:Pn,resolve:(0,o.Po4)(oi),canDeactivate:[o.TSp],data:Li},{path:"global-settings",component:In,resolve:(0,o.Po4)(ii),canDeactivate:[o.TSp],data:Ji}];function ki(e,t){return(0,o.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.administrators",getName:e=>`${e.firstName} ${e.lastName}`,route:"administrators"})}function Ui(e,t){return(0,o.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.channels",getName:e=>e.code,route:"channels"})}function Ii(e,t){return(0,o.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.roles",getName:e=>e.description,route:"roles"})}function Pi(e,t){return(0,o.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-categories",getName:e=>e.name,route:"tax-categories"})}function Si(e,t){return(0,o.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-rates",getName:e=>e.name,route:"tax-rates"})}function Oi(e,t){return(0,o.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.countries",getName:e=>e.name,route:"countries"})}function wi(e,t){return(0,o.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.shipping-methods",getName:e=>e.name,route:"shipping-methods"})}function Di(e,t){return(0,o.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.payment-methods",getName:e=>e.code,route:"payment-methods"})}class Ni{}Ni.\u0275fac=function(e){return new(e||Ni)},Ni.\u0275mod=i.oAB({type:Ni}),Ni.\u0275inj=i.cJS({imports:[[o.m81,b.Bz.forChild(_i)]]})}}]);
//# sourceMappingURL=871-es2015.119b823cc8365eaaf5f7.js.map