!function(){"use strict";var e,r;function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[246],{43246:function(o,u,a){a.r(u),a.d(u,{WebhookModule:function(){return k}});var c=a(41460),s=a(39155),h=a(3189),f=a(21067),l=a(83974),m=l.ZP(e||(e=i(["\n  mutation updateWebhook($url: String!) {\n    updateWebhook(url: $url)\n  }\n"]))),p=l.ZP(r||(r=i(["\n  query webhook {\n    webhook\n  }\n"]))),b=a(51694),d=function(){function e(r,o,n,i,u,a,c){t(this,e),this.formBuilder=i,this.dataService=u,this.changeDetector=a,this.notificationService=c,this.webhookForm=this.formBuilder.group({url:["https://example.com",f.kI.required]})}return n(e,[{key:"ngOnInit",value:function(){return(0,h.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataService.query(p).mapStream(function(e){return e.webhook}).subscribe(function(e){return r.webhookForm.controls.url.setValue(e)});case 2:case"end":return e.stop()}},e,this)}))}},{key:"save",value:function(){return(0,h.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.webhookForm.dirty){e.next=5;break}return r=this.webhookForm.value,e.next=5,this.dataService.mutate(m,{url:r.url}).toPromise();case 5:this.webhookForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success("common.notify-update-success",{entity:"Webhook"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.notificationService.error("common.notify-update-error",{entity:"Webhook"});case 11:case"end":return e.stop()}},e,this,[[0,8]])}))}}]),e}();d.\u0275fac=function(e){return new(e||d)(b.Y36(c.gz),b.Y36(c.F0),b.Y36(s.iHG),b.Y36(f.qu),b.Y36(s.DoR),b.Y36(b.sBO),b.Y36(s.gqp))},d.\u0275cmp=b.Xpm({type:d,selectors:[["greeter"]],decls:8,vars:2,consts:[[1,"clr-row"],[1,"clr-col"],[1,"form",3,"formGroup"],[1,"form-block"],["label","Webhook url","for","url"],["id","url","type","text","formControlName","url"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,r){1&e&&(b.TgZ(0,"div",0),b.TgZ(1,"div",1),b.TgZ(2,"form",2),b.TgZ(3,"section",3),b.TgZ(4,"vdr-form-field",4),b._UZ(5,"input",5),b.qZA(),b.TgZ(6,"button",6),b.NdJ("click",function(){return r.save()}),b._uU(7," Save "),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(2),b.Q6J("formGroup",r.webhookForm),b.xp6(4),b.Q6J("disabled",r.webhookForm.invalid||r.webhookForm.pristine))},directives:[f._Y,f.JL,f.sg,s.hgI,s.y_K,f.Fj,f.JJ,f.u],encapsulation:2});var k=n(function e(){t(this,e)});k.\u0275fac=function(e){return new(e||k)},k.\u0275mod=b.oAB({type:k}),k.\u0275inj=b.cJS({providers:[(0,s.e$Y)({id:"webhook",label:"Webhook",routerLink:["/extensions/webhook"],icon:"cursor-hand-open"},"settings")],imports:[[s.m81,c.Bz.forChild([{path:"",pathMatch:"full",component:d,data:{breadcrumb:"Webhook"}}])]]})}}])}();
//# sourceMappingURL=246-es5.53a7eab3aa5e4196344a.js.map