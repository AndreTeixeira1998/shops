var b=Object.defineProperty;var m=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var w=(u,e,t)=>e in u?b(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t,n=(u,e)=>{for(var t in e||(e={}))C.call(e,t)&&w(u,t,e[t]);if(m)for(var t of m(e))k.call(e,t)&&w(u,t,e[t]);return u};import{d as N,t as $,c as O,e as _,a as A,h as Q,q}from"./entry-9ee8f5dc.mjs";import{u as j}from"./asyncData-b3fc68c6.mjs";var J=N({props:{path:{type:String,required:!1,default:void 0},only:{type:Array,required:!1,default:void 0},without:{type:Array,required:!1,default:void 0},where:{type:Object,required:!1,default:void 0},sort:{type:Object,required:!1,default:void 0},limit:{type:Number,required:!1,default:void 0},skip:{type:Number,required:!1,default:void 0},locale:{type:String,required:!1,default:void 0},find:{type:String,required:!1,default:void 0}},async setup(u){const{path:e,only:t,without:l,where:a,sort:o,limit:s,skip:d,locale:f,find:p}=$(u),v=O(()=>e.value.includes("/_")),{data:y,refresh:h}=await j(`content-query-${_(u)}`,()=>{let r;return e.value?r=q(e.value):r=q(),t.value&&(r=r.only(t.value)),l.value&&(r=r.without(l.value)),a.value&&(r=r.where(a.value)),o.value&&(r=r.sort(o.value)),s.value&&(r=r.limit(s.value)),d.value&&(r=r.skip(d.value)),f.value&&(r=r.where({_locale:f.value})),p.value==="one"?r.findOne():p.value==="surround"?e.value?r.findSurround(e):(console.warn("[Content] Surround queries requires `path` prop to be set."),console.warn("[Content] Query without `path` will return regular `find()` results."),r.find()):r.find()});return{isPartial:v,data:y,refresh:h}},render(u){var c;const e=A(),{data:t,refresh:l,isPartial:a,path:o,only:s,without:d,where:f,sort:p,limit:v,skip:y,locale:h,find:r}=u,i={path:o,only:s,without:d,where:f,sort:p,limit:v,skip:y,locale:h,find:r};if(i.find==="one"){if(!t&&(e==null?void 0:e["not-found"]))return e["not-found"](n({props:i},this.$attrs));if(t._type&&t._type==="markdown"&&!((c=t==null?void 0:t.body)!=null&&c.children.length))return e.empty(n({props:i},this.$attrs))}else if((!t||!t.length)&&e!=null&&e["not-found"])return e["not-found"](n({props:i},this.$attrs));return e!=null&&e.default?e.default(n({data:t,refresh:l,isPartial:a,props:i},this.$attrs)):((g,S)=>Q("pre",null,JSON.stringify({message:"You should use slots with <ContentQuery>!",slot:g,data:S},null,2)))("default",{data:t,props:i,isPartial:a})}});export{J as default};
